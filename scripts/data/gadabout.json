[{"creator": "tobibeer", "fields": {"_hash": "1df61e92a28ee44fb0fbceecc37fd0cfa17f98d0"}, "created": "20130905171306", "recipe": "gadabout_private", "modified": "20130905171306", "uri": "http://yoursearchplugin.tiddlyspace.com/bags/yoursearchplugin_public/tiddlers/DefaultTiddlers", "bag": "yoursearchplugin_public", "text": "SiteInfo", "title": "DefaultTiddlers", "permissions": ["read", "write", "create", "delete"], "modifier": "tobibeer", "type": null, "tags": [], "revision": 1387566}, {"creator": "jon", "fields": {"_hash": "f6a5b86e51f2f7000c05154dbc867ca836503ede"}, "created": "20110106133257", "recipe": "gadabout_private", "modified": "20120704162932", "uri": "http://historyplugin.tiddlyspace.com/bags/historyplugin_public/tiddlers/HistoryPlugin", "bag": "historyplugin_public", "text": "/***\n|''Name''|HistoryPlugin|\n|''Version''|0.3.5|\n|''Author''|Jon Robson|\n|''Description''|Auto generates permaviews as you open and close tiddlers. Back button allows you to flick back to previous stories on modern browsers.|\n***/\n//{{{\n(function($) {\nvar lastPermaviewTimeout;\nfunction makePermaview() {\n\tif(lastPermaviewTimeout) {\n\t\twindow.clearTimeout(lastPermaviewTimeout);\n\t}\n\tlastPermaviewTimeout = window.setTimeout(function() {\n\t\tstory.permaView();\n\t}, 200);\n}\nvar runParamifier = false;\nvar _invokeParamifier = invokeParamifier;\ninvokeParamifier = function() {\n\trunParamifier = true;\n\tvar res = _invokeParamifier.apply(this, arguments);\n\trunParamifier = false;\n\treturn res;\n}\nvar runPermaview;\nvar _permaview = Story.prototype.permaView;\nStory.prototype.permaView = function() {\n\trunPermaview = true;\n\tvar res = _permaview.apply(this, arguments);\n\treturn res;\n}\nvar _closeAll = Story.prototype.closeAllTiddlers;\nvar closeAll;\nStory.prototype.closeAllTiddlers = function() {\n\tcloseAll = true;\n  var res = _closeAll.apply(this, arguments);\n  makePermaview();;\n\treturn res;\n};\n\nvar _close = Story.prototype.closeTiddler;\nStory.prototype.closeTiddler = function(title,animate,unused) {\n\tvar tidEl = story.getTiddler(title);\n\tif(tidEl) {\n\t\ttidEl.setAttribute(\"tiddler\", \"\");\n\t}\n\tvar res = _close.apply(this, arguments);\n\tif(!closeAll) {\n\t\tmakePermaview();;\n\t}\n\treturn res;\n};\n\nvar runDisplayTiddlers;\nvar _displayTiddlers = Story.prototype.displayTiddlers;\nStory.prototype.displayTiddlers = function() {\n\trunDisplayTiddlers = true;\n\tvar el = _displayTiddlers.apply(this, arguments);\n\trunDisplayTiddlers = false;\n\tmakePermaview();;\n\treturn el;\n};\n\nvar _display = Story.prototype.displayTiddler;\nStory.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)\n{\n\tvar el = _display.apply(this, arguments);\n\tif(!runDisplayTiddlers) {\n\t\tmakePermaview();; // to do: dont create permaview for sucked in tiddlers ?\n\t}\n\treturn el;\n};\n\nvar timeout;\nvar hashchange = function(ev) {\n\tif(!runPermaview && !runParamifier) {\n\t\tcloseAll = true;\n\t\tvar p = getParameters();\n\t\tstory.closeAllTiddlers(); // TODO: don't close 'sucked in tiddlers'\n\t\tif(p) {\n\t\t\tinvokeParamifier(p.parseParams(\"open\",null,false), \"onstart\");\n\t\t}\n\t}\n\tif(timeout) {\n\t\twindow.clearTimeout(timeout);\n\t}\n\tif(runPermaview || runParamifier || closeAll) {\n\t\ttimeout = window.setTimeout(function() {\n\t\t\trunPermaview = false;\n\t\t\trunParamifier = false;\n\t\t\tcloseAll = false;\n\t\t}, 300);\n\t}\n};\n\nwindow.onhashchange = hashchange;\n\n})(jQuery);\n//}}}\n", "title": "HistoryPlugin", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch", "systemConfig"], "revision": 773200}, {"creator": "jon", "fields": {"_hash": "80d867e5ea4b9f800b69cac10bf9d8a70255e550"}, "created": "20111028142059", "recipe": "gadabout_private", "modified": "20120320121718", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_tiddlywiki-app.js", "bag": "apps_public", "text": "\n//\n// Please note:\n//\n// * This code is designed to be readable but for compactness it only includes brief comments. You can see fuller comments\n//   in the project repository at https://github.com/TiddlyWiki/tiddlywiki\n//\n// * You should never need to modify this source code directly. TiddlyWiki is carefully designed to allow deep customisation\n//   without changing the core code. Please consult the development group at http://groups.google.com/group/TiddlyWikiDev\n//\n// JSLint directives\n/*global jQuery:false, version:false */\n/*jslint bitwise:true, browser:true, confusion:true, eqeq:true, evil:true, forin:true, maxerr:100, plusplus:true, regexp:true, sloppy:true, sub:true, undef:true, unparam:true, vars:true, white:true */\n//--\n//-- Configuration repository\n//--\n\n// Miscellaneous options\nvar config = {\n\tnumRssItems: 20, // Number of items in the RSS feed\n\tanimDuration: 400, // Duration of UI animations in milliseconds\n\tcascadeFast: 20, // Speed for cascade animations (higher == slower)\n\tcascadeSlow: 60, // Speed for EasterEgg cascade animations\n\tcascadeDepth: 5, // Depth of cascade animation\n\tlocale: \"en\" // W3C language tag\n};\n\n// Hashmap of alternative parsers for the wikifier\nconfig.parsers = {};\n\n// Adaptors\nconfig.adaptors = {};\nconfig.defaultAdaptor = null;\n\n// Backstage tasks\nconfig.tasks = {};\n\n// Annotations\nconfig.annotations = {};\n\n// Custom fields to be automatically added to new tiddlers\nconfig.defaultCustomFields = {};\n\n// Messages\nconfig.messages = {\n\tmessageClose: {},\n\tdates: {},\n\ttiddlerPopup: {}\n};\n\n// Options that can be set in the options panel and/or cookies\nconfig.options = {\n\tchkRegExpSearch: false,\n\tchkCaseSensitiveSearch: false,\n\tchkIncrementalSearch: true,\n\tchkAnimate: true,\n\tchkSaveBackups: true,\n\tchkAutoSave: false,\n\tchkGenerateAnRssFeed: false,\n\tchkSaveEmptyTemplate: false,\n\tchkOpenInNewWindow: true,\n\tchkToggleLinks: false,\n\tchkHttpReadOnly: false,\n\tchkForceMinorUpdate: false,\n\tchkConfirmDelete: true,\n\tchkInsertTabs: false,\n\tchkUsePreForStorage: true, // Whether to use <pre> format for storage\n\tchkDisplayInstrumentation: false,\n\ttxtBackupFolder: \"\",\n\ttxtEditorFocus: \"text\",\n\ttxtMainTab: \"tabTimeline\",\n\ttxtMoreTab: \"moreTabAll\",\n\ttxtMaxEditRows: \"30\",\n\ttxtFileSystemCharSet: \"UTF-8\",\n\ttxtTheme: \"\"\n\t};\nconfig.optionsDesc = {};\n\nconfig.optionsSource = {};\n\n// Default tiddler templates\nvar DEFAULT_VIEW_TEMPLATE = 1;\nvar DEFAULT_EDIT_TEMPLATE = 2;\nconfig.tiddlerTemplates = {\n\t1: \"ViewTemplate\",\n\t2: \"EditTemplate\"\n};\n\n// More messages (rather a legacy layout that should not really be like this)\nconfig.views = {\n\twikified: {\n\t\ttag: {}\n\t},\n\teditor: {\n\t\ttagChooser: {}\n\t}\n};\n\n// Backstage tasks\nconfig.backstageTasks = [\"save\",\"sync\",\"importTask\",\"tweak\",\"plugins\"];\n\n// Extensions\nconfig.extensions = {};\n\n// Macros; each has a 'handler' member that is inserted later\nconfig.macros = {\n\ttoday: {},\n\tversion: {},\n\tsearch: {sizeTextbox: 15},\n\ttiddler: {},\n\ttag: {},\n\ttags: {},\n\ttagging: {},\n\ttimeline: {},\n\tallTags: {},\n\tlist: {\n\t\tall: {},\n\t\tmissing: {},\n\t\torphans: {},\n\t\tshadowed: {},\n\t\ttouched: {},\n\t\tfilter: {}\n\t},\n\tcloseAll: {},\n\tpermaview: {},\n\tsaveChanges: {},\n\tslider: {},\n\toption: {},\n\toptions: {},\n\tnewTiddler: {},\n\tnewJournal: {},\n\ttabs: {},\n\tgradient: {},\n\tmessage: {},\n\tview: {defaultView: \"text\"},\n\tedit: {},\n\ttagChooser: {},\n\ttoolbar: {},\n\tplugins: {},\n\trefreshDisplay: {},\n\timportTiddlers: {},\n\tupgrade: {\n\t\tsource: \"http://tiddlywiki-releases.tiddlyspace.com/upgrade\",\n\t\tbackupExtension: \"pre.core.upgrade\"\n\t},\n\tsync: {},\n\tannotations: {}\n};\n\n// Commands supported by the toolbar macro\nconfig.commands = {\n\tcloseTiddler: {},\n\tcloseOthers: {},\n\teditTiddler: {},\n\tsaveTiddler: {hideReadOnly: true},\n\tcancelTiddler: {},\n\tdeleteTiddler: {hideReadOnly: true},\n\tpermalink: {},\n\treferences: {type: \"popup\"},\n\tjump: {type: \"popup\"},\n\tsyncing: {type: \"popup\"},\n\tfields: {type: \"popup\"}\n};\n\n// Control of macro parameter evaluation\nconfig.evaluateMacroParameters = \"all\";\n\n// Basic regular expressions\nconfig.textPrimitives = {\n\tupperLetter: \"[A-Z\\u00c0-\\u00de\\u0150\\u0170]\",\n\tlowerLetter: \"[a-z0-9_\\\\-\\u00df-\\u00ff\\u0151\\u0171]\",\n\tanyLetter:   \"[A-Za-z0-9_\\\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171]\",\n\tanyLetterStrict: \"[A-Za-z0-9\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171]\"\n};\nif(!((new RegExp(\"[\\u0150\\u0170]\",\"g\")).test(\"\\u0150\"))) {\n\tconfig.textPrimitives = {\n\t\tupperLetter: \"[A-Z\\u00c0-\\u00de]\",\n\t\tlowerLetter: \"[a-z0-9_\\\\-\\u00df-\\u00ff]\",\n\t\tanyLetter:   \"[A-Za-z0-9_\\\\-\\u00c0-\\u00de\\u00df-\\u00ff]\",\n\t\tanyLetterStrict: \"[A-Za-z0-9\\u00c0-\\u00de\\u00df-\\u00ff]\"\n\t};\n}\nconfig.textPrimitives.sliceSeparator = \"::\";\nconfig.textPrimitives.sectionSeparator = \"##\";\nconfig.textPrimitives.urlPattern = \"(?:file|http|https|mailto|ftp|irc|news|data):[^\\\\s'\\\"]+(?:/|\\\\b)\";\nconfig.textPrimitives.unWikiLink = \"~\";\nconfig.textPrimitives.wikiLink = \"(?:(?:\" + config.textPrimitives.upperLetter + \"+\" +\n\tconfig.textPrimitives.lowerLetter + \"+\" +\n\tconfig.textPrimitives.upperLetter +\n\tconfig.textPrimitives.anyLetter + \"*)|(?:\" +\n\tconfig.textPrimitives.upperLetter + \"{2,}\" +\n\tconfig.textPrimitives.lowerLetter + \"+))\";\n\nconfig.textPrimitives.cssLookahead = \"(?:(\" + config.textPrimitives.anyLetter + \"+)\\\\(([^\\\\)\\\\|\\\\n]+)(?:\\\\):))|(?:(\" + config.textPrimitives.anyLetter + \"+):([^;\\\\|\\\\n]+);)\";\nconfig.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,\"mg\");\n\nconfig.textPrimitives.brackettedLink = \"\\\\[\\\\[([^\\\\]]+)\\\\]\\\\]\";\nconfig.textPrimitives.titledBrackettedLink = \"\\\\[\\\\[([^\\\\[\\\\]\\\\|]+)\\\\|([^\\\\[\\\\]\\\\|]+)\\\\]\\\\]\";\nconfig.textPrimitives.tiddlerForcedLinkRegExp = new RegExp(\"(?:\" + config.textPrimitives.titledBrackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.brackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.urlPattern + \")\",\"mg\");\nconfig.textPrimitives.tiddlerAnyLinkRegExp = new RegExp(\"(\"+ config.textPrimitives.wikiLink + \")|(?:\" +\n\tconfig.textPrimitives.titledBrackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.brackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.urlPattern + \")\",\"mg\");\n\nconfig.glyphs = {\n\tcurrBrowser: null,\n\tbrowsers: [],\n\tcodes: {}\n};\n\n//--\n//-- Shadow tiddlers\n//--\n\nconfig.shadowTiddlers = {\n\tStyleSheet: \"\",\n\tMarkupPreHead: \"\",\n\tMarkupPostHead: \"\",\n\tMarkupPreBody: \"\",\n\tMarkupPostBody: \"\",\n\tTabTimeline: '<<timeline>>',\n\tTabAll: '<<list all>>',\n\tTabTags: '<<allTags excludeLists>>',\n\tTabMoreMissing: '<<list missing>>',\n\tTabMoreOrphans: '<<list orphans>>',\n\tTabMoreShadowed: '<<list shadowed>>',\n\tAdvancedOptions: '<<options>>',\n\tPluginManager: '<<plugins>>',\n\tSystemSettings: '',\n\tToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',\n\tWindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'\n};\n\n// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.\nconfig.userAgent = navigator.userAgent.toLowerCase();\nconfig.browser = {\n\tisIE: config.userAgent.indexOf(\"msie\") != -1 && config.userAgent.indexOf(\"opera\") == -1,\n\tisGecko: navigator.product == \"Gecko\" && config.userAgent.indexOf(\"WebKit\") == -1,\n\tieVersion: /MSIE (\\d.\\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg \"6.0\"\n\tisSafari: config.userAgent.indexOf(\"applewebkit\") != -1,\n\tisBadSafari: !((new RegExp(\"[\\u0150\\u0170]\",\"g\")).test(\"\\u0150\")),\n\tfirefoxDate: /gecko\\/(\\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as \"YYYYMMDD\"\n\tisOpera: config.userAgent.indexOf(\"opera\") != -1,\n\tisChrome: config.userAgent.indexOf('chrome') > -1,\n\tisLinux: config.userAgent.indexOf(\"linux\") != -1,\n\tisUnix: config.userAgent.indexOf(\"x11\") != -1,\n\tisMac: config.userAgent.indexOf(\"mac\") != -1,\n\tisWindows: config.userAgent.indexOf(\"win\") != -1\n};\n\nmerge(config.glyphs,{\n\tbrowsers: [\n\t\tfunction() {return config.browser.isIE;},\n\t\tfunction() {return true;}\n\t\t],\n\tcodes: {\n\t\tdownTriangle: [\"\\u25BC\",\"\\u25BE\"],\n\t\tdownArrow: [\"\\u2193\",\"\\u2193\"],\n\t\tbentArrowLeft: [\"\\u2190\",\"\\u21A9\"],\n\t\tbentArrowRight: [\"\\u2192\",\"\\u21AA\"]\n\t}\n});\n\n//--\n//-- Translateable strings\n//--\n\n// Strings in \"double quotes\" should be translated; strings in 'single quotes' should be left alone\n\nmerge(config.options,{\n\ttxtUserName: \"YourName\"});\n\nmerge(config.tasks,{\n\tsave: {text: \"save\", tooltip: \"Save your changes to this TiddlyWiki\"},\n\timportTask: {text: \"import\", tooltip: \"Import tiddlers and plugins from other TiddlyWiki files and servers\", content: '<<importTiddlers>>'},\n\ttweak: {text: \"tweak\", tooltip: \"Tweak the appearance and behaviour of TiddlyWiki\", content: '<<options>>'},\n\tupgrade: {text: \"upgrade\", tooltip: \"Upgrade TiddlyWiki core code\", content: '<<upgrade>>'},\n\tplugins: {text: \"plugins\", tooltip: \"Manage installed plugins\", content: '<<plugins>>'}\n});\n\n// Options that can be set in the options panel and/or cookies\nmerge(config.optionsDesc,{\n\ttxtUserName: \"Username for signing your edits\",\n\tchkRegExpSearch: \"Enable regular expressions for searches\",\n\tchkCaseSensitiveSearch: \"Case-sensitive searching\",\n\tchkIncrementalSearch: \"Incremental key-by-key searching\",\n\tchkAnimate: \"Enable animations\",\n\tchkSaveBackups: \"Keep backup file when saving changes\",\n\tchkAutoSave: \"Automatically save changes\",\n\tchkGenerateAnRssFeed: \"Generate an RSS feed when saving changes\",\n\tchkSaveEmptyTemplate: \"Generate an empty template when saving changes\",\n\tchkOpenInNewWindow: \"Open external links in a new window\",\n\tchkToggleLinks: \"Clicking on links to open tiddlers causes them to close\",\n\tchkHttpReadOnly: \"Hide editing features when viewed over HTTP\",\n\tchkForceMinorUpdate: \"Don't update modifier username and date when editing tiddlers\",\n\tchkConfirmDelete: \"Require confirmation before deleting tiddlers\",\n\tchkInsertTabs: \"Use the tab key to insert tab characters instead of moving between fields\",\n\ttxtBackupFolder: \"Name of folder to use for backups\",\n\ttxtMaxEditRows: \"Maximum number of rows in edit boxes\",\n\ttxtTheme: \"Name of the theme to use\",\n\ttxtFileSystemCharSet: \"Default character set for saving changes (Firefox/Mozilla only)\"});\n\nmerge(config.messages,{\n\tcustomConfigError: \"Problems were encountered loading plugins. See PluginManager for details\",\n\tpluginError: \"Error: %0\",\n\tpluginDisabled: \"Not executed because disabled via 'systemConfigDisable' tag\",\n\tpluginForced: \"Executed because forced via 'systemConfigForce' tag\",\n\tpluginVersionError: \"Not executed because this plugin needs a newer version of TiddlyWiki\",\n\tnothingSelected: \"Nothing is selected. You must select one or more items first\",\n\tsavedSnapshotError: \"It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details\",\n\tsubtitleUnknown: \"(unknown)\",\n\tundefinedTiddlerToolTip: \"The tiddler '%0' doesn't yet exist\",\n\tshadowedTiddlerToolTip: \"The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value\",\n\ttiddlerLinkTooltip: \"%0 - %1, %2\",\n\texternalLinkTooltip: \"External link to %0\",\n\tnoTags: \"There are no tagged tiddlers\",\n\tnotFileUrlError: \"You need to save this TiddlyWiki to a file before you can save changes\",\n\tcantSaveError: \"It's not possible to save changes. Possible reasons include:\\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\\n- the pathname to your TiddlyWiki file contains illegal characters\\n- the TiddlyWiki HTML file has been moved or renamed\",\n\tinvalidFileError: \"The original file '%0' does not appear to be a valid TiddlyWiki\",\n\tbackupSaved: \"Backup saved\",\n\tbackupFailed: \"Failed to save backup file\",\n\trssSaved: \"RSS feed saved\",\n\trssFailed: \"Failed to save RSS feed file\",\n\temptySaved: \"Empty template saved\",\n\temptyFailed: \"Failed to save empty template file\",\n\tmainSaved: \"Main TiddlyWiki file saved\",\n\tmainFailed: \"Failed to save main TiddlyWiki file. Your changes have not been saved\",\n\tmacroError: \"Error in macro <<%0>>\",\n\tmacroErrorDetails: \"Error while executing macro <<%0>>:\\n%1\",\n\tmissingMacro: \"No such macro\",\n\toverwriteWarning: \"A tiddler named '%0' already exists. Choose OK to overwrite it\",\n\tunsavedChangesWarning: \"WARNING! There are unsaved changes in TiddlyWiki\\n\\nChoose OK to save\\nChoose CANCEL to discard\",\n\tconfirmExit: \"--------------------------------\\n\\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\\n\\n--------------------------------\",\n\tsaveInstructions: \"SaveChanges\",\n\tunsupportedTWFormat: \"Unsupported TiddlyWiki format '%0'\",\n\ttiddlerSaveError: \"Error when saving tiddler '%0'\",\n\ttiddlerLoadError: \"Error when loading tiddler '%0'\",\n\twrongSaveFormat: \"Cannot save with storage format '%0'. Using standard format for save.\",\n\tinvalidFieldName: \"Invalid field name %0\",\n\tfieldCannotBeChanged: \"Field '%0' cannot be changed\",\n\tloadingMissingTiddler: \"Attempting to retrieve the tiddler '%0' from the '%1' server at:\\n\\n'%2' in the workspace '%3'\",\n\tupgradeDone: \"The upgrade to version %0 is now complete\\n\\nClick 'OK' to reload the newly upgraded TiddlyWiki\",\n\tinvalidCookie: \"Invalid cookie '%0'\"});\n\nmerge(config.messages.messageClose,{\n\ttext: \"close\",\n\ttooltip: \"close this message area\"});\n\nconfig.messages.backstage = {\n\topen: {text: \"backstage\", tooltip: \"Open the backstage area to perform authoring and editing tasks\"},\n\tclose: {text: \"close\", tooltip: \"Close the backstage area\"},\n\tprompt: \"backstage: \",\n\tdecal: {\n\t\tedit: {text: \"edit\", tooltip: \"Edit the tiddler '%0'\"}\n\t}\n};\n\nconfig.messages.listView = {\n\ttiddlerTooltip: \"Click for the full text of this tiddler\",\n\tpreviewUnavailable: \"(preview not available)\"\n};\n\nconfig.messages.dates.months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\nconfig.messages.dates.days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconfig.messages.dates.shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconfig.messages.dates.shortDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n// suffixes for dates, eg \"1st\",\"2nd\",\"3rd\"...\"30th\",\"31st\"\nconfig.messages.dates.daySuffixes = [\"st\",\"nd\",\"rd\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\n\t\t\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\n\t\t\"st\",\"nd\",\"rd\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\n\t\t\"st\"];\nconfig.messages.dates.am = \"am\";\nconfig.messages.dates.pm = \"pm\";\n\nmerge(config.messages.tiddlerPopup,{\n\t});\n\nmerge(config.views.wikified.tag,{\n\tlabelNoTags: \"no tags\",\n\tlabelTags: \"tags: \",\n\topenTag: \"Open tag '%0'\",\n\ttooltip: \"Show tiddlers tagged with '%0'\",\n\topenAllText: \"Open all\",\n\topenAllTooltip: \"Open all of these tiddlers\",\n\tpopupNone: \"No other tiddlers tagged with '%0'\"});\n\nmerge(config.views.wikified,{\n\tdefaultText: \"The tiddler '%0' doesn't yet exist. Double-click to create it\",\n\tdefaultModifier: \"(missing)\",\n\tshadowModifier: \"(built-in shadow tiddler)\",\n\tdateFormat: \"DD MMM YYYY\",\n\tcreatedPrompt: \"created\"});\n\nmerge(config.views.editor,{\n\ttagPrompt: \"Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing\",\n\tdefaultText: \"Type the text for '%0'\"});\n\nmerge(config.views.editor.tagChooser,{\n\ttext: \"tags\",\n\ttooltip: \"Choose existing tags to add to this tiddler\",\n\tpopupNone: \"There are no tags defined\",\n\ttagTooltip: \"Add the tag '%0'\"});\n\nmerge(config.messages,{\n\tsizeTemplates:\n\t\t[\n\t\t{unit: 1024*1024*1024, template: \"%0\\u00a0GB\"},\n\t\t{unit: 1024*1024, template: \"%0\\u00a0MB\"},\n\t\t{unit: 1024, template: \"%0\\u00a0KB\"},\n\t\t{unit: 1, template: \"%0\\u00a0B\"}\n\t\t]});\n\nmerge(config.macros.search,{\n\tlabel: \"search\",\n\tprompt: \"Search this TiddlyWiki\",\n\tplaceholder: \"\",\n\taccessKey: \"F\",\n\tsuccessMsg: \"%0 tiddlers found matching %1\",\n\tfailureMsg: \"No tiddlers found matching %0\"});\n\nmerge(config.macros.tagging,{\n\tlabel: \"tagging: \",\n\tlabelNotTag: \"not tagging\",\n\ttooltip: \"List of tiddlers tagged with '%0'\"});\n\nmerge(config.macros.timeline,{\n\tdateFormat: \"DD MMM YYYY\"});\n\nmerge(config.macros.allTags,{\n\ttooltip: \"Show tiddlers tagged with '%0'\",\n\tnoTags: \"There are no tagged tiddlers\"});\n\nconfig.macros.list.all.prompt = \"All tiddlers in alphabetical order\";\nconfig.macros.list.missing.prompt = \"Tiddlers that have links to them but are not defined\";\nconfig.macros.list.orphans.prompt = \"Tiddlers that are not linked to from any other tiddlers\";\nconfig.macros.list.shadowed.prompt = \"Tiddlers shadowed with default contents\";\nconfig.macros.list.touched.prompt = \"Tiddlers that have been modified locally\";\n\nmerge(config.macros.closeAll,{\n\tlabel: \"close all\",\n\tprompt: \"Close all displayed tiddlers (except any that are being edited)\"});\n\nmerge(config.macros.permaview,{\n\tlabel: \"permaview\",\n\tprompt: \"Link to an URL that retrieves all the currently displayed tiddlers\"});\n\nmerge(config.macros.saveChanges,{\n\tlabel: \"save changes\",\n\tprompt: \"Save all tiddlers to create a new TiddlyWiki\",\n\taccessKey: \"S\"});\n\nmerge(config.macros.newTiddler,{\n\tlabel: \"new tiddler\",\n\tprompt: \"Create a new tiddler\",\n\ttitle: \"New Tiddler\",\n\taccessKey: \"N\"});\n\nmerge(config.macros.newJournal,{\n\tlabel: \"new journal\",\n\tprompt: \"Create a new tiddler from the current date and time\",\n\taccessKey: \"J\"});\n\nmerge(config.macros.options,{\n\twizardTitle: \"Tweak advanced options\",\n\tstep1Title: \"These options are saved in cookies in your browser\",\n\tstep1Html: \"<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>\",\n\tunknownDescription: \"//(unknown)//\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Option', field: 'option', title: \"Option\", type: 'String'},\n\t\t\t{name: 'Description', field: 'description', title: \"Description\", type: 'WikiText'},\n\t\t\t{name: 'Name', field: 'name', title: \"Name\", type: 'String'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t{className: 'lowlight', field: 'lowlight'}\n\t\t\t]}\n\t});\n\nmerge(config.macros.plugins,{\n\twizardTitle: \"Manage plugins\",\n\tstep1Title: \"Currently loaded plugins\",\n\tstep1Html: \"<input type='hidden' name='markList'></input>\", // DO NOT TRANSLATE\n\tskippedText: \"(This plugin has not been executed because it was added since startup)\",\n\tnoPluginText: \"There are no plugins installed\",\n\tconfirmDeleteText: \"Are you sure you want to delete these plugins:\\n\\n%0\",\n\tremoveLabel: \"remove systemConfig tag\",\n\tremovePrompt: \"Remove systemConfig tag\",\n\tdeleteLabel: \"delete\",\n\tdeletePrompt: \"Delete these tiddlers forever\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Description', field: 'Description', title: \"Description\", type: 'String'},\n\t\t\t{name: 'Version', field: 'Version', title: \"Version\", type: 'String'},\n\t\t\t{name: 'Size', field: 'size', tiddlerLink: 'size', title: \"Size\", type: 'Size'},\n\t\t\t{name: 'Forced', field: 'forced', title: \"Forced\", tag: 'systemConfigForce', type: 'TagCheckbox'},\n\t\t\t{name: 'Disabled', field: 'disabled', title: \"Disabled\", tag: 'systemConfigDisable', type: 'TagCheckbox'},\n\t\t\t{name: 'Executed', field: 'executed', title: \"Loaded\", type: 'Boolean', trueText: \"Yes\", falseText: \"No\"},\n\t\t\t{name: 'Startup Time', field: 'startupTime', title: \"Startup Time\", type: 'String'},\n\t\t\t{name: 'Error', field: 'error', title: \"Status\", type: 'Boolean', trueText: \"Error\", falseText: \"OK\"},\n\t\t\t{name: 'Log', field: 'log', title: \"Log\", type: 'StringList'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t{className: 'error', field: 'error'},\n\t\t\t{className: 'warning', field: 'warning'}\n\t\t\t]},\n\tlistViewTemplateReadOnly: {\n\t\tcolumns: [\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Description', field: 'Description', title: \"Description\", type: 'String'},\n\t\t\t{name: 'Version', field: 'Version', title: \"Version\", type: 'String'},\n\t\t\t{name: 'Size', field: 'size', tiddlerLink: 'size', title: \"Size\", type: 'Size'},\n\t\t\t{name: 'Executed', field: 'executed', title: \"Loaded\", type: 'Boolean', trueText: \"Yes\", falseText: \"No\"},\n\t\t\t{name: 'Startup Time', field: 'startupTime', title: \"Startup Time\", type: 'String'},\n\t\t\t{name: 'Error', field: 'error', title: \"Status\", type: 'Boolean', trueText: \"Error\", falseText: \"OK\"},\n\t\t\t{name: 'Log', field: 'log', title: \"Log\", type: 'StringList'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t{className: 'error', field: 'error'},\n\t\t\t{className: 'warning', field: 'warning'}\n\t\t\t]}\n\t});\n\nmerge(config.macros.toolbar,{\n\tmoreLabel: \"more\",\n\tmorePrompt: \"Show additional commands\",\n\tlessLabel: \"less\",\n\tlessPrompt: \"Hide additional commands\",\n\tseparator: \"|\"\n\t});\n\nmerge(config.macros.refreshDisplay,{\n\tlabel: \"refresh\",\n\tprompt: \"Redraw the entire TiddlyWiki display\"\n\t});\n\nmerge(config.macros.importTiddlers,{\n\treadOnlyWarning: \"You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL\",\n\twizardTitle: \"Import tiddlers from another file or server\",\n\tstep1Title: \"Step 1: Locate the server or TiddlyWiki file\",\n\tstep1Html: \"Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>\",\n\topenLabel: \"open\",\n\topenPrompt: \"Open the connection to this file or server\",\n\tstatusOpenHost: \"Opening the host\",\n\tstatusGetWorkspaceList: \"Getting the list of available workspaces\",\n\tstep2Title: \"Step 2: Choose the workspace\",\n\tstep2Html: \"Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>\",\n\tcancelLabel: \"cancel\",\n\tcancelPrompt: \"Cancel this import\",\n\tstatusOpenWorkspace: \"Opening the workspace\",\n\tstatusGetTiddlerList: \"Getting the list of available tiddlers\",\n\terrorGettingTiddlerList: \"Error getting list of tiddlers, click Cancel to try again\",\n\terrorGettingTiddlerListHttp404: \"Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.\",\n\terrorGettingTiddlerListHttp: \"Error retrieving tiddlers from url, please ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled\",\n\terrorGettingTiddlerListFile: \"Error retrieving tiddlers from local file, please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.\",\n\tstep3Title: \"Step 3: Choose the tiddlers to import\",\n\tstep3Html: \"<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>\",\n\timportLabel: \"import\",\n\timportPrompt: \"Import these tiddlers\",\n\tconfirmOverwriteText: \"Are you sure you want to overwrite these tiddlers:\\n\\n%0\",\n\tstep4Title: \"Step 4: Importing %0 tiddler(s)\",\n\tstep4Html: \"<input type='hidden' name='markReport'></input>\", // DO NOT TRANSLATE\n\tdoneLabel: \"done\",\n\tdonePrompt: \"Close this wizard\",\n\tstatusDoingImport: \"Importing tiddlers\",\n\tstatusDoneImport: \"All tiddlers imported\",\n\tsystemServerNamePattern: \"%2 on %1\",\n\tsystemServerNamePatternNoWorkspace: \"%1\",\n\tconfirmOverwriteSaveTiddler: \"The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged\",\n\tserverSaveTemplate: \"|''Type:''|%0|\\n|''URL:''|%1|\\n|''Workspace:''|%2|\\n\\nThis tiddler was automatically created to record the details of this server\",\n\tserverSaveModifier: \"(System)\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Size', field: 'size', tiddlerLink: 'size', title: \"Size\", type: 'Size'},\n\t\t\t{name: 'Tags', field: 'tags', title: \"Tags\", type: 'Tags'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t]}\n\t});\n\nmerge(config.macros.upgrade,{\n\twizardTitle: \"Upgrade TiddlyWiki core code\",\n\tstep1Title: \"Update or repair this TiddlyWiki to the latest release\",\n\tstep1Html: \"You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>\",\n\terrorCantUpgrade: \"Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally\",\n\terrorNotSaved: \"You must save changes before you can perform an upgrade\",\n\tstep2Title: \"Confirm the upgrade details\",\n\tstep2Html_downgrade: \"You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended\",\n\tstep2Html_restore: \"This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged\",\n\tstep2Html_upgrade: \"You are about to upgrade to TiddlyWiki version %0 from %1\",\n\tupgradeLabel: \"upgrade\",\n\tupgradePrompt: \"Prepare for the upgrade process\",\n\tstatusPreparingBackup: \"Preparing backup\",\n\tstatusSavingBackup: \"Saving backup file\",\n\terrorSavingBackup: \"There was a problem saving the backup file\",\n\tstatusLoadingCore: \"Loading core code\",\n\terrorLoadingCore: \"Error loading the core code\",\n\terrorCoreFormat: \"Error with the new core code\",\n\tstatusSavingCore: \"Saving the new core code\",\n\tstatusReloadingCore: \"Reloading the new core code\",\n\tstartLabel: \"start\",\n\tstartPrompt: \"Start the upgrade process\",\n\tcancelLabel: \"cancel\",\n\tcancelPrompt: \"Cancel the upgrade process\",\n\tstep3Title: \"Upgrade cancelled\",\n\tstep3Html: \"You have cancelled the upgrade process\"\n\t});\n\nmerge(config.macros.annotations,{\n\t});\n\nmerge(config.commands.closeTiddler,{\n\ttext: \"close\",\n\ttooltip: \"Close this tiddler\"});\n\nmerge(config.commands.closeOthers,{\n\ttext: \"close others\",\n\ttooltip: \"Close all other tiddlers\"});\n\nmerge(config.commands.editTiddler,{\n\ttext: \"edit\",\n\ttooltip: \"Edit this tiddler\",\n\treadOnlyText: \"view\",\n\treadOnlyTooltip: \"View the source of this tiddler\"});\n\nmerge(config.commands.saveTiddler,{\n\ttext: \"done\",\n\ttooltip: \"Save changes to this tiddler\"});\n\nmerge(config.commands.cancelTiddler,{\n\ttext: \"cancel\",\n\ttooltip: \"Undo changes to this tiddler\",\n\twarning: \"Are you sure you want to abandon your changes to '%0'?\",\n\treadOnlyText: \"done\",\n\treadOnlyTooltip: \"View this tiddler normally\"});\n\nmerge(config.commands.deleteTiddler,{\n\ttext: \"delete\",\n\ttooltip: \"Delete this tiddler\",\n\twarning: \"Are you sure you want to delete '%0'?\"});\n\nmerge(config.commands.permalink,{\n\ttext: \"permalink\",\n\ttooltip: \"Permalink for this tiddler\"});\n\nmerge(config.commands.references,{\n\ttext: \"references\",\n\ttooltip: \"Show tiddlers that link to this one\",\n\tpopupNone: \"No references\"});\n\nmerge(config.commands.jump,{\n\ttext: \"jump\",\n\ttooltip: \"Jump to another open tiddler\"});\n\nmerge(config.commands.fields,{\n\ttext: \"fields\",\n\ttooltip: \"Show the extended fields of this tiddler\",\n\temptyText: \"There are no extended fields for this tiddler\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Field', field: 'field', title: \"Field\", type: 'String'},\n\t\t\t{name: 'Value', field: 'value', title: \"Value\", type: 'String'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t],\n\t\tbuttons: [\n\t\t\t]}});\n\nmerge(config.shadowTiddlers,{\n\tDefaultTiddlers: \"[[GettingStarted]]\",\n\tMainMenu: \"[[GettingStarted]]\",\n\tSiteTitle: \"My TiddlyWiki\",\n\tSiteSubtitle: \"a reusable non-linear personal web notebook\",\n\tSiteUrl: \"\",\n\tSideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal \"DD MMM YYYY\" \"journal\">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel \"options \\u00bb\" \"Change TiddlyWiki advanced options\">>',\n\tSideBarTabs: '<<tabs txtMainTab \"Timeline\" \"Timeline\" TabTimeline \"All\" \"All tiddlers\" TabAll \"Tags\" \"All tags\" TabTags \"More\" \"More lists\" TabMore>>',\n\tTabMore: '<<tabs txtMoreTab \"Missing\" \"Missing tiddlers\" TabMoreMissing \"Orphans\" \"Orphaned tiddlers\" TabMoreOrphans \"Shadowed\" \"Shadowed tiddlers\" TabMoreShadowed>>'\n\t});\n\nmerge(config.annotations,{\n\tAdvancedOptions: \"This shadow tiddler provides access to several advanced options\",\n\tColorPalette: \"These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface\",\n\tDefaultTiddlers: \"The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up\",\n\tEditTemplate: \"The HTML template in this shadow tiddler determines how tiddlers look while they are being edited\",\n\tGettingStarted: \"This shadow tiddler provides basic usage instructions\",\n\tImportTiddlers: \"This shadow tiddler provides access to importing tiddlers\",\n\tMainMenu: \"This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen\",\n\tMarkupPreHead: \"This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file\",\n\tMarkupPostHead: \"This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file\",\n\tMarkupPreBody: \"This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file\",\n\tMarkupPostBody: \"This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block\",\n\tOptionsPanel: \"This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar\",\n\tPageTemplate: \"The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout\",\n\tPluginManager: \"This shadow tiddler provides access to the plugin manager\",\n\tSideBarOptions: \"This shadow tiddler is used as the contents of the option panel in the right-hand sidebar\",\n\tSideBarTabs: \"This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar\",\n\tSiteSubtitle: \"This shadow tiddler is used as the second part of the page title\",\n\tSiteTitle: \"This shadow tiddler is used as the first part of the page title\",\n\tSiteUrl: \"This shadow tiddler should be set to the full target URL for publication\",\n\tStyleSheetColors: \"This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler\",\n\tStyleSheet: \"This tiddler can contain custom CSS definitions\",\n\tStyleSheetLayout: \"This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler\",\n\tStyleSheetLocale: \"This shadow tiddler contains CSS definitions related to the translation locale\",\n\tStyleSheetPrint: \"This shadow tiddler contains CSS definitions for printing\",\n\tSystemSettings: \"This tiddler is used to store configuration options for this TiddlyWiki document\",\n\tTabAll: \"This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar\",\n\tTabMore: \"This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar\",\n\tTabMoreMissing: \"This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar\",\n\tTabMoreOrphans: \"This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar\",\n\tTabMoreShadowed: \"This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar\",\n\tTabTags: \"This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar\",\n\tTabTimeline: \"This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar\",\n\tToolbarCommands: \"This shadow tiddler determines which commands are shown in tiddler toolbars\",\n\tViewTemplate: \"The HTML template in this shadow tiddler determines how tiddlers look\"\n\t});\n//--\n//-- Paramifiers\n//--\n\nfunction getParameters()\n{\n\tvar p = null;\n\tif(window.location.hash) {\n\t\tp = decodeURIComponent(window.location.hash.substr(1));\n\t\tif(config.browser.firefoxDate != null && config.browser.firefoxDate[1] < \"20051111\")\n\t\t\tp = convertUTF8ToUnicode(p);\n\t}\n\treturn p;\n}\n\nfunction invokeParamifier(params,handler)\n{\n\tif(!params || params.length == undefined || params.length <= 1)\n\t\treturn;\n\tvar i;\n\tfor(i=1; i<params.length; i++) {\n\t\tvar p = config.paramifiers[params[i].name];\n\t\tif(p && p[handler] instanceof Function)\n\t\t\tp[handler](params[i].value);\n\t\telse {\n\t\t\tvar h = config.optionHandlers[params[i].name.substr(0,3)];\n\t\t\tif(h && h.set instanceof Function)\n\t\t\t\th.set(params[i].name,params[i].value);\n\t\t}\n\t}\n}\n\nconfig.paramifiers = {};\n\nconfig.paramifiers.start = {\n\toninit: function(v) {\n\t\tsafeMode = v.toLowerCase() == \"safe\";\n\t}\n};\n\nconfig.paramifiers.open = {\n\tonstart: function(v) {\n\t\tif(!readOnly || store.tiddlerExists(v) || store.isShadowTiddler(v))\n\t\t\tstory.displayTiddler(\"bottom\",v,null,false,null);\n\t}\n};\n\nconfig.paramifiers.story = {\n\tonstart: function(v) {\n\t\tvar list = store.getTiddlerText(v,\"\").parseParams(\"open\",null,false);\n\t\tinvokeParamifier(list,\"onstart\");\n\t}\n};\n\nconfig.paramifiers.search = {\n\tonstart: function(v) {\n\t\tstory.search(v,false,false);\n\t}\n};\n\nconfig.paramifiers.searchRegExp = {\n\tonstart: function(v) {\n\t\tstory.prototype.search(v,false,true);\n\t}\n};\n\nconfig.paramifiers.tag = {\n\tonstart: function(v) {\n\t\tstory.displayTiddlers(null,store.filterTiddlers(\"[tag[\"+v+\"]]\"),null,false,null);\n\t}\n};\n\nconfig.paramifiers.newTiddler = {\n\tonstart: function(v) {\n\t\tvar args = v.parseParams(\"anon\", null, null)[0];\n\t\tvar title = args.title ? args.title[0] : v;\n\t\tvar customFields = args.fields ? args.fields[0] : null;\n\t\tif(!readOnly) {\n\t\t\tstory.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,customFields);\n\t\t\tstory.focusTiddler(title,\"text\");\n\t\t\tvar i,tags = args.tag || [];\n\t\t\tfor(i=0;i<tags.length;i++) {\n\t\t\t\tstory.setTiddlerTag(title,tags[i],+1);\n\t\t\t}\n\t\t}\n\t}\n};\n\nconfig.paramifiers.newJournal = {\n\tonstart: function(v) {\n\t\tif(!readOnly) {\n\t\t\tvar now = new Date();\n\t\t\tvar title = now.formatString(v.trim());\n\t\t\tstory.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE);\n\t\t\tstory.focusTiddler(title,\"text\");\n\t\t}\n\t}\n};\n\nconfig.paramifiers.readOnly = {\n\tonconfig: function(v) {\n\t\tvar p = v.toLowerCase();\n\t\treadOnly = p == \"yes\" ? true : (p == \"no\" ? false : readOnly);\n\t}\n};\n\nconfig.paramifiers.theme = {\n\tonconfig: function(v) {\n\t\tstory.switchTheme(v);\n\t}\n};\n\nconfig.paramifiers.upgrade = {\n\tonstart: function(v) {\n\t\tupgradeFrom(v);\n\t}\n};\n\nconfig.paramifiers.recent= {\n\tonstart: function(v) {\n\t\tvar titles=[];\n\t\tvar i,tiddlers=store.getTiddlers(\"modified\",\"excludeLists\").reverse();\n\t\tfor(i=0; i<v && i<tiddlers.length; i++)\n\t\t\ttitles.push(tiddlers[i].title);\n\t\tstory.displayTiddlers(null,titles);\n\t}\n};\n\nconfig.paramifiers.filter = {\n\tonstart: function(v) {\n\t\tstory.displayTiddlers(null,store.filterTiddlers(v),null,false);\n\t}\n};\n\n//--\n//-- Formatter helpers\n//--\n\nfunction Formatter(formatters)\n{\n\tvar n;\n\tthis.formatters = [];\n\tvar pattern = [];\n\tfor(n=0; n<formatters.length; n++) {\n\t\tpattern.push(\"(\" + formatters[n].match + \")\");\n\t\tthis.formatters.push(formatters[n]);\n\t}\n\tthis.formatterRegExp = new RegExp(pattern.join(\"|\"),\"mg\");\n}\n\nconfig.formatterHelpers = {\n\n\tcreateElementAndWikify: function(w)\n\t{\n\t\tw.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);\n\t},\n\n\tinlineCssHelper: function(w)\n\t{\n\t\tvar styles = [];\n\t\tconfig.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;\n\t\tvar lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);\n\t\twhile(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {\n\t\t\tvar s,v;\n\t\t\tif(lookaheadMatch[1]) {\n\t\t\t\ts = lookaheadMatch[1].unDash();\n\t\t\t\tv = lookaheadMatch[2];\n\t\t\t} else {\n\t\t\t\ts = lookaheadMatch[3].unDash();\n\t\t\t\tv = lookaheadMatch[4];\n\t\t\t}\n\t\t\tif(s==\"bgcolor\")\n\t\t\t\ts = \"backgroundColor\";\n\t\t\tif(s==\"float\")\n\t\t\t\ts = \"cssFloat\";\n\t\t\tstyles.push({style: s, value: v});\n\t\t\tw.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;\n\t\t\tconfig.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tlookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);\n\t\t}\n\t\treturn styles;\n\t},\n\n\tapplyCssHelper: function(e,styles)\n\t{\n\t\tvar t;\n\t\tfor(t=0; t< styles.length; t++) {\n\t\t\ttry {\n\t\t\t\te.style[styles[t].style] = styles[t].value;\n\t\t\t} catch (ex) {\n\t\t\t}\n\t\t}\n\t},\n\n\tenclosedTextHelper: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tvar text = lookaheadMatch[1];\n\t\t\tif(config.browser.isIE)\n\t\t\t\ttext = text.replace(/\\n/g,\"\\r\");\n\t\t\tcreateTiddlyElement(w.output,this.element,null,null,text);\n\t\t\tw.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;\n\t\t}\n\t},\n\n\tisExternalLink: function(link)\n\t{\n\t\tif(store.tiddlerExists(link) || store.isShadowTiddler(link)) {\n\t\t\treturn false;\n\t\t}\n\t\tvar urlRegExp = new RegExp(config.textPrimitives.urlPattern,\"mg\");\n\t\tif(urlRegExp.exec(link)) {\n\t\t\treturn true;\n\t\t}\n\t\tif(link.indexOf(\".\")!=-1 || link.indexOf(\"\\\\\")!=-1 || link.indexOf(\"/\")!=-1 || link.indexOf(\"#\")!=-1) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n};\n\n//--\n//-- Standard formatters\n//--\n\nconfig.formatters = [\n{\n\tname: \"table\",\n\tmatch: \"^\\\\|(?:[^\\\\n]*)\\\\|(?:[fhck]?)$\",\n\tlookaheadRegExp: /^\\|([^\\n]*)\\|([fhck]?)$/mg,\n\trowTermRegExp: /(\\|(?:[fhck]?)$\\n?)/mg,\n\tcellRegExp: /(?:\\|([^\\n\\|]*)\\|)|(\\|[fhck]?$\\n?)/mg,\n\tcellTermRegExp: /((?:\\x20*)\\|)/mg,\n\trowTypes: {\"c\":\"caption\", \"h\":\"thead\", \"\":\"tbody\", \"f\":\"tfoot\"},\n\thandler: function(w)\n\t{\n\t\tvar table = createTiddlyElement(w.output,\"table\",null,\"twtable\");\n\t\tvar prevColumns = [];\n\t\tvar currRowType = null;\n\t\tvar rowContainer;\n\t\tvar rowCount = 0;\n\t\tvar onmouseover = function() {jQuery(this).addClass(\"hoverRow\");};\n\t\tvar onmouseout = function() {jQuery(this).removeClass(\"hoverRow\");};\n\t\tw.nextMatch = w.matchStart;\n\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\twhile(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {\n\t\t\tvar nextRowType = lookaheadMatch[2];\n\t\t\tif(nextRowType == \"k\") {\n\t\t\t\ttable.className = lookaheadMatch[1];\n\t\t\t\tw.nextMatch += lookaheadMatch[0].length+1;\n\t\t\t} else {\n\t\t\t\tif(nextRowType != currRowType) {\n\t\t\t\t\trowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);\n\t\t\t\t\tcurrRowType = nextRowType;\n\t\t\t\t}\n\t\t\t\tif(currRowType == \"c\") {\n\t\t\t\t\t// Caption\n\t\t\t\t\tw.nextMatch++;\n\t\t\t\t\tif(rowContainer != table.firstChild)\n\t\t\t\t\t\ttable.insertBefore(rowContainer,table.firstChild);\n\t\t\t\t\trowContainer.setAttribute(\"align\",rowCount == 0?\"top\":\"bottom\");\n\t\t\t\t\tw.subWikifyTerm(rowContainer,this.rowTermRegExp);\n\t\t\t\t} else {\n\t\t\t\t\tvar theRow = createTiddlyElement(rowContainer,\"tr\",null,rowCount%2?\"oddRow\":\"evenRow\");\n\t\t\t\t\ttheRow.onmouseover = onmouseover;\n\t\t\t\t\ttheRow.onmouseout = onmouseout;\n\t\t\t\t\tthis.rowHandler(w,theRow,prevColumns);\n\t\t\t\t\trowCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tlookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t}\n\t},\n\trowHandler: function(w,e,prevColumns)\n\t{\n\t\tvar col = 0;\n\t\tvar colSpanCount = 1;\n\t\tvar prevCell = null;\n\t\tthis.cellRegExp.lastIndex = w.nextMatch;\n\t\tvar cellMatch = this.cellRegExp.exec(w.source);\n\t\twhile(cellMatch && cellMatch.index == w.nextMatch) {\n\t\t\tif(cellMatch[1] == \"~\") {\n\t\t\t\t// Rowspan\n\t\t\t\tvar last = prevColumns[col];\n\t\t\t\tif(last) {\n\t\t\t\t\tlast.rowSpanCount++;\n\t\t\t\t\tlast.element.setAttribute(\"rowspan\",last.rowSpanCount);\n\t\t\t\t\tlast.element.setAttribute(\"rowSpan\",last.rowSpanCount); // Needed for IE\n\t\t\t\t\tlast.element.valign = \"center\";\n\t\t\t\t\tif(colSpanCount > 1) {\n\t\t\t\t\t\tlast.element.setAttribute(\"colspan\",colSpanCount);\n\t\t\t\t\t\tlast.element.setAttribute(\"colSpan\",colSpanCount); // Needed for IE\n\t\t\t\t\t\tcolSpanCount = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tw.nextMatch = this.cellRegExp.lastIndex-1;\n\t\t\t} else if(cellMatch[1] == \">\") {\n\t\t\t\t// Colspan\n\t\t\t\tcolSpanCount++;\n\t\t\t\tw.nextMatch = this.cellRegExp.lastIndex-1;\n\t\t\t} else if(cellMatch[2]) {\n\t\t\t\t// End of row\n\t\t\t\tif(prevCell && colSpanCount > 1) {\n\t\t\t\t\tprevCell.setAttribute(\"colspan\",colSpanCount);\n\t\t\t\t\tprevCell.setAttribute(\"colSpan\",colSpanCount); // Needed for IE\n\t\t\t\t}\n\t\t\t\tw.nextMatch = this.cellRegExp.lastIndex;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\t// Cell\n\t\t\t\tw.nextMatch++;\n\t\t\t\tvar styles = config.formatterHelpers.inlineCssHelper(w);\n\t\t\t\tvar spaceLeft = false;\n\t\t\t\tvar chr = w.source.substr(w.nextMatch,1);\n\t\t\t\twhile(chr == \" \") {\n\t\t\t\t\tspaceLeft = true;\n\t\t\t\t\tw.nextMatch++;\n\t\t\t\t\tchr = w.source.substr(w.nextMatch,1);\n\t\t\t\t}\n\t\t\t\tvar cell;\n\t\t\t\tif(chr == \"!\") {\n\t\t\t\t\tcell = createTiddlyElement(e,\"th\");\n\t\t\t\t\tw.nextMatch++;\n\t\t\t\t} else {\n\t\t\t\t\tcell = createTiddlyElement(e,\"td\");\n\t\t\t\t}\n\t\t\t\tprevCell = cell;\n\t\t\t\tprevColumns[col] = {rowSpanCount:1,element:cell};\n\t\t\t\tif(colSpanCount > 1) {\n\t\t\t\t\tcell.setAttribute(\"colspan\",colSpanCount);\n\t\t\t\t\tcell.setAttribute(\"colSpan\",colSpanCount); // Needed for IE\n\t\t\t\t\tcolSpanCount = 1;\n\t\t\t\t}\n\t\t\t\tconfig.formatterHelpers.applyCssHelper(cell,styles);\n\t\t\t\tw.subWikifyTerm(cell,this.cellTermRegExp);\n\t\t\t\tif(w.matchText.substr(w.matchText.length-2,1) == \" \") // spaceRight\n\t\t\t\t\tcell.align = spaceLeft ? \"center\" : \"left\";\n\t\t\t\telse if(spaceLeft)\n\t\t\t\t\tcell.align = \"right\";\n\t\t\t\tw.nextMatch--;\n\t\t\t}\n\t\t\tcol++;\n\t\t\tthis.cellRegExp.lastIndex = w.nextMatch;\n\t\t\tcellMatch = this.cellRegExp.exec(w.source);\n\t\t}\n\t}\n},\n\n{\n\tname: \"heading\",\n\tmatch: \"^!{1,6}\",\n\ttermRegExp: /(\\n)/mg,\n\thandler: function(w)\n\t{\n\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"h\" + w.matchLength),this.termRegExp);\n\t}\n},\n\n{\n\tname: \"list\",\n\tmatch: \"^(?:[\\\\*#;:]+)\",\n\tlookaheadRegExp: /^(?:(?:(\\*)|(#)|(;)|(:))+)/mg,\n\ttermRegExp: /(\\n)/mg,\n\thandler: function(w)\n\t{\n\t\tvar stack = [w.output];\n\t\tvar currLevel = 0, currType = null;\n\t\tvar listLevel, listType, itemType, baseType;\n\t\tw.nextMatch = w.matchStart;\n\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\twhile(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {\n\t\t\tif(lookaheadMatch[1]) {\n\t\t\t\tlistType = \"ul\";\n\t\t\t\titemType = \"li\";\n\t\t\t} else if(lookaheadMatch[2]) {\n\t\t\t\tlistType = \"ol\";\n\t\t\t\titemType = \"li\";\n\t\t\t} else if(lookaheadMatch[3]) {\n\t\t\t\tlistType = \"dl\";\n\t\t\t\titemType = \"dt\";\n\t\t\t} else if(lookaheadMatch[4]) {\n\t\t\t\tlistType = \"dl\";\n\t\t\t\titemType = \"dd\";\n\t\t\t}\n\t\t\tif(!baseType)\n\t\t\t\tbaseType = listType;\n\t\t\tlistLevel = lookaheadMatch[0].length;\n\t\t\tw.nextMatch += lookaheadMatch[0].length;\n\t\t\tvar t;\n\t\t\tif(listLevel > currLevel) {\n\t\t\t\tfor(t=currLevel; t<listLevel; t++) {\n\t\t\t\t\tvar target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;\n\t\t\t\t\tstack.push(createTiddlyElement(target,listType));\n\t\t\t\t}\n\t\t\t} else if(listType!=baseType && listLevel==1) {\n\t\t\t\tw.nextMatch -= lookaheadMatch[0].length;\n\t\t\t\treturn;\n\t\t\t} else if(listLevel < currLevel) {\n\t\t\t\tfor(t=currLevel; t>listLevel; t--)\n\t\t\t\t\tstack.pop();\n\t\t\t} else if(listLevel == currLevel && listType != currType) {\n\t\t\t\tstack.pop();\n\t\t\t\tstack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));\n\t\t\t}\n\t\t\tcurrLevel = listLevel;\n\t\t\tcurrType = listType;\n\t\t\tvar e = createTiddlyElement(stack[stack.length-1],itemType);\n\t\t\tw.subWikifyTerm(e,this.termRegExp);\n\t\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tlookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t}\n\t}\n},\n\n{\n\tname: \"quoteByBlock\",\n\tmatch: \"^<<<\\\\n\",\n\ttermRegExp: /(^<<<(\\n|$))/mg,\n\telement: \"blockquote\",\n\thandler: config.formatterHelpers.createElementAndWikify\n},\n\n{\n\tname: \"quoteByLine\",\n\tmatch: \"^>+\",\n\tlookaheadRegExp: /^>+/mg,\n\ttermRegExp: /(\\n)/mg,\n\telement: \"blockquote\",\n\thandler: function(w)\n\t{\n\t\tvar stack = [w.output];\n\t\tvar currLevel = 0;\n\t\tvar newLevel = w.matchLength;\n\t\tvar t,matched;\n\t\tdo {\n\t\t\tif(newLevel > currLevel) {\n\t\t\t\tfor(t=currLevel; t<newLevel; t++)\n\t\t\t\t\tstack.push(createTiddlyElement(stack[stack.length-1],this.element));\n\t\t\t} else if(newLevel < currLevel) {\n\t\t\t\tfor(t=currLevel; t>newLevel; t--)\n\t\t\t\t\tstack.pop();\n\t\t\t}\n\t\t\tcurrLevel = newLevel;\n\t\t\tw.subWikifyTerm(stack[stack.length-1],this.termRegExp);\n\t\t\tcreateTiddlyElement(stack[stack.length-1],\"br\");\n\t\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t\tmatched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;\n\t\t\tif(matched) {\n\t\t\t\tnewLevel = lookaheadMatch[0].length;\n\t\t\t\tw.nextMatch += lookaheadMatch[0].length;\n\t\t\t}\n\t\t} while(matched);\n\t}\n},\n\n{\n\tname: \"rule\",\n\tmatch: \"^----+$\\\\n?|<hr ?/?>\\\\n?\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"hr\");\n\t}\n},\n\n{\n\tname: \"monospacedByLine\",\n\tmatch: \"^(?:/\\\\*\\\\{\\\\{\\\\{\\\\*/|\\\\{\\\\{\\\\{|//\\\\{\\\\{\\\\{|<!--\\\\{\\\\{\\\\{-->)\\\\n\",\n\telement: \"pre\",\n\thandler: function(w)\n\t{\n\t\tswitch(w.matchText) {\n\t\tcase \"/*{{{*/\\n\": // CSS\n\t\t\tthis.lookaheadRegExp = /\\/\\*\\{\\{\\{\\*\\/\\n*((?:^[^\\n]*\\n)+?)(\\n*^\\f*\\/\\*\\}\\}\\}\\*\\/$\\n?)/mg;\n\t\t\tbreak;\n\t\tcase \"{{{\\n\": // monospaced block\n\t\t\tthis.lookaheadRegExp = /^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\f*\\}\\}\\}$\\n?)/mg;\n\t\t\tbreak;\n\t\tcase \"//{{{\\n\": // plugin\n\t\t\tthis.lookaheadRegExp = /^\\/\\/\\{\\{\\{\\n\\n*((?:^[^\\n]*\\n)+?)(\\n*^\\f*\\/\\/\\}\\}\\}$\\n?)/mg;\n\t\t\tbreak;\n\t\tcase \"<!--{{{-->\\n\": //template\n\t\t\tthis.lookaheadRegExp = /<!--\\{\\{\\{-->\\n*((?:^[^\\n]*\\n)+?)(\\n*^\\f*<!--\\}\\}\\}-->$\\n?)/mg;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t\tconfig.formatterHelpers.enclosedTextHelper.call(this,w);\n\t}\n},\n\n{\n\tname: \"wikifyComment\",\n\tmatch: \"^(?:/\\\\*\\\\*\\\\*|<!---)\\\\n\",\n\thandler: function(w)\n\t{\n\t\tvar termRegExp = (w.matchText == \"/***\\n\") ? (/(^\\*\\*\\*\\/\\n)/mg) : (/(^--->\\n)/mg);\n\t\tw.subWikifyTerm(w.output,termRegExp);\n\t}\n},\n\n{\n\tname: \"macro\",\n\tmatch: \"<<\",\n\tlookaheadRegExp: /<<([^>\\s]+)(?:\\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t\tinvokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);\n\t\t}\n\t}\n},\n\n{\n\tname: \"prettyLink\",\n\tmatch: \"\\\\[\\\\[\",\n\tlookaheadRegExp: /\\[\\[(.*?)(?:\\|(~)?(.*?))?\\]\\]/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tvar e;\n\t\t\tvar text = lookaheadMatch[1];\n\t\t\tif(lookaheadMatch[3]) {\n\t\t\t\t// Pretty bracketted link\n\t\t\t\tvar link = lookaheadMatch[3];\n\t\t\t\te = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?\n\t\t\t\t\t\tcreateExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);\n\t\t\t} else {\n\t\t\t\t// Simple bracketted link\n\t\t\t\te = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);\n\t\t\t}\n\t\t\tcreateTiddlyText(e,text);\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"wikiLink\",\n\tmatch: config.textPrimitives.unWikiLink+\"?\"+config.textPrimitives.wikiLink,\n\thandler: function(w)\n\t{\n\t\tif(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {\n\t\t\tw.outputText(w.output,w.matchStart+1,w.nextMatch);\n\t\t\treturn;\n\t\t}\n\t\tif(w.matchStart > 0) {\n\t\t\tvar preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,\"mg\");\n\t\t\tpreRegExp.lastIndex = w.matchStart-1;\n\t\t\tvar preMatch = preRegExp.exec(w.source);\n\t\t\tif(preMatch.index == w.matchStart-1) {\n\t\t\t\tw.outputText(w.output,w.matchStart,w.nextMatch);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {\n\t\t\tvar link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);\n\t\t\tw.outputText(link,w.matchStart,w.nextMatch);\n\t\t} else {\n\t\t\tw.outputText(w.output,w.matchStart,w.nextMatch);\n\t\t}\n\t}\n},\n\n{\n\tname: \"urlLink\",\n\tmatch: config.textPrimitives.urlPattern,\n\thandler: function(w)\n\t{\n\t\tw.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);\n\t}\n},\n\n{\n\tname: \"image\",\n\tmatch: \"\\\\[[<>]?[Ii][Mm][Gg]\\\\[\",\n\tlookaheadRegExp: /\\[([<]?)(>?)[Ii][Mm][Gg]\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\])?\\]/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tvar e = w.output;\n\t\t\tif(lookaheadMatch[5]) {\n\t\t\t\tvar link = lookaheadMatch[5];\n\t\t\t\te = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);\n\t\t\t\tjQuery(e).addClass(\"imageLink\");\n\t\t\t}\n\t\t\tvar img = createTiddlyElement(e,\"img\");\n\t\t\tif(lookaheadMatch[1])\n\t\t\t\timg.align = \"left\";\n\t\t\telse if(lookaheadMatch[2])\n\t\t\t\timg.align = \"right\";\n\t\t\tif(lookaheadMatch[3]) {\n\t\t\t\timg.title = lookaheadMatch[3];\n\t\t\t\timg.setAttribute(\"alt\",lookaheadMatch[3]);\n\t\t\t}\n\t\t\timg.src = lookaheadMatch[4];\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"html\",\n\tmatch: \"<[Hh][Tt][Mm][Ll]>\",\n\tlookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\\n)*?)<\\/[Hh][Tt][Mm][Ll]>/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tcreateTiddlyElement(w.output,\"span\").innerHTML = lookaheadMatch[1];\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"commentByBlock\",\n\tmatch: \"/%\",\n\tlookaheadRegExp: /\\/%((?:.|\\n)*?)%\\//mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart)\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t}\n},\n\n{\n\tname: \"characterFormat\",\n\tmatch: \"''|//|__|\\\\^\\\\^|~~|--(?!\\\\s|$)|\\\\{\\\\{\\\\{\",\n\thandler: function(w)\n\t{\n\t\tswitch(w.matchText) {\n\t\tcase \"''\":\n\t\t\tw.subWikifyTerm(w.output.appendChild(document.createElement(\"strong\")),/('')/mg);\n\t\t\tbreak;\n\t\tcase \"//\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"em\"),/(\\/\\/)/mg);\n\t\t\tbreak;\n\t\tcase \"__\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"u\"),/(__)/mg);\n\t\t\tbreak;\n\t\tcase \"^^\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"sup\"),/(\\^\\^)/mg);\n\t\t\tbreak;\n\t\tcase \"~~\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"sub\"),/(~~)/mg);\n\t\t\tbreak;\n\t\tcase \"--\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"strike\"),/(--)/mg);\n\t\t\tbreak;\n\t\tcase \"{{{\":\n\t\t\tvar lookaheadRegExp = /\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}/mg;\n\t\t\tlookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = lookaheadRegExp.exec(w.source);\n\t\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\t\tcreateTiddlyElement(w.output,\"code\",null,null,lookaheadMatch[1]);\n\t\t\t\tw.nextMatch = lookaheadRegExp.lastIndex;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n},\n\n{\n\tname: \"customFormat\",\n\tmatch: \"@@|\\\\{\\\\{\",\n\thandler: function(w)\n\t{\n\t\tswitch(w.matchText) {\n\t\tcase \"@@\":\n\t\t\tvar e = createTiddlyElement(w.output,\"span\");\n\t\t\tvar styles = config.formatterHelpers.inlineCssHelper(w);\n\t\t\tif(styles.length == 0)\n\t\t\t\te.className = \"marked\";\n\t\t\telse\n\t\t\t\tconfig.formatterHelpers.applyCssHelper(e,styles);\n\t\t\tw.subWikifyTerm(e,/(@@)/mg);\n\t\t\tbreak;\n\t\tcase \"{{\":\n\t\t\tvar lookaheadRegExp = /\\{\\{[\\s]*([\\w]+[\\s\\w]*)[\\s]*\\{(\\n?)/mg;\n\t\t\tlookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = lookaheadRegExp.exec(w.source);\n\t\t\tif(lookaheadMatch) {\n\t\t\t\tw.nextMatch = lookaheadRegExp.lastIndex;\n\t\t\t\te = createTiddlyElement(w.output,lookaheadMatch[2] == \"\\n\" ? \"div\" : \"span\",null,lookaheadMatch[1]);\n\t\t\t\tw.subWikifyTerm(e,/(\\}\\}\\})/mg);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n},\n\n{\n\tname: \"mdash\",\n\tmatch: \"--\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"span\").innerHTML = \"&mdash;\";\n\t}\n},\n\n{\n\tname: \"lineBreak\",\n\tmatch: \"\\\\n|<br ?/?>\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"br\");\n\t}\n},\n\n{\n\tname: \"rawText\",\n\tmatch: \"\\\"{3}|<nowiki>\",\n\tlookaheadRegExp: /(?:\\\"{3}|<nowiki>)((?:.|\\n)*?)(?:\\\"{3}|<\\/nowiki>)/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tcreateTiddlyElement(w.output,\"span\",null,null,lookaheadMatch[1]);\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"htmlEntitiesEncoding\",\n\tmatch: \"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"span\").innerHTML = w.matchText;\n\t}\n}\n\n];\n\n//--\n//-- Wikifier\n//--\n\nfunction getParser(tiddler,format)\n{\n\tif(tiddler) {\n\t\tif(!format)\n\t\t\tformat = tiddler.fields[\"wikiformat\"];\n\t\tvar i;\n\t\tif(format) {\n\t\t\tfor(i in config.parsers) {\n\t\t\t\tif(format == config.parsers[i].format)\n\t\t\t\t\treturn config.parsers[i];\n\t\t\t}\n\t\t} else {\n\t\t\tfor(i in config.parsers) {\n\t\t\t\tif(tiddler.isTagged(config.parsers[i].formatTag))\n\t\t\t\t\treturn config.parsers[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn formatter;\n}\n\nfunction Wikifier(source,formatter,highlightRegExp,tiddler)\n{\n\tthis.source = source;\n\tthis.output = null;\n\tthis.formatter = formatter;\n\tthis.nextMatch = 0;\n\tthis.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;\n\tthis.highlightRegExp = highlightRegExp;\n\tthis.highlightMatch = null;\n\tthis.isStatic = false;\n\tif(highlightRegExp) {\n\t\thighlightRegExp.lastIndex = 0;\n\t\tthis.highlightMatch = highlightRegExp.exec(source);\n\t}\n\tthis.tiddler = tiddler;\n}\n\nWikifier.prototype.wikifyPlain = function()\n{\n\tvar e = createTiddlyElement(document.body,\"div\");\n\te.style.display = \"none\";\n\tthis.subWikify(e);\n\tvar text = jQuery(e).text();\n\tjQuery(e).remove();\n\treturn text;\n};\n\nWikifier.prototype.subWikify = function(output,terminator)\n{\n\ttry {\n\t\tif(terminator)\n\t\t\tthis.subWikifyTerm(output,new RegExp(\"(\" + terminator + \")\",\"mg\"));\n\t\telse\n\t\t\tthis.subWikifyUnterm(output);\n\t} catch(ex) {\n\t\tshowException(ex);\n\t}\n};\n\nWikifier.prototype.subWikifyUnterm = function(output)\n{\n\tvar oldOutput = this.output;\n\tthis.output = output;\n\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\tvar formatterMatch = this.formatter.formatterRegExp.exec(this.source);\n\twhile(formatterMatch) {\n\t\t// Output any text before the match\n\t\tif(formatterMatch.index > this.nextMatch)\n\t\t\tthis.outputText(this.output,this.nextMatch,formatterMatch.index);\n\t\t// Set the match parameters for the handler\n\t\tthis.matchStart = formatterMatch.index;\n\t\tthis.matchLength = formatterMatch[0].length;\n\t\tthis.matchText = formatterMatch[0];\n\t\tthis.nextMatch = this.formatter.formatterRegExp.lastIndex;\n\t\tvar t;\n\t\tfor(t=1; t<formatterMatch.length; t++) {\n\t\t\tif(formatterMatch[t]) {\n\t\t\t\tthis.formatter.formatters[t-1].handler(this);\n\t\t\t\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tformatterMatch = this.formatter.formatterRegExp.exec(this.source);\n\t}\n\tif(this.nextMatch < this.source.length) {\n\t\tthis.outputText(this.output,this.nextMatch,this.source.length);\n\t\tthis.nextMatch = this.source.length;\n\t}\n\tthis.output = oldOutput;\n};\n\nWikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)\n{\n\tvar oldOutput = this.output;\n\tthis.output = output;\n\tterminatorRegExp.lastIndex = this.nextMatch;\n\tvar terminatorMatch = terminatorRegExp.exec(this.source);\n\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\tvar formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);\n\twhile(terminatorMatch || formatterMatch) {\n\t\tif(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {\n\t\t\tif(terminatorMatch.index > this.nextMatch)\n\t\t\t\tthis.outputText(this.output,this.nextMatch,terminatorMatch.index);\n\t\t\tthis.matchText = terminatorMatch[1];\n\t\t\tthis.matchLength = terminatorMatch[1].length;\n\t\t\tthis.matchStart = terminatorMatch.index;\n\t\t\tthis.nextMatch = this.matchStart + this.matchLength;\n\t\t\tthis.output = oldOutput;\n\t\t\treturn;\n\t\t}\n\t\tif(formatterMatch.index > this.nextMatch)\n\t\t\tthis.outputText(this.output,this.nextMatch,formatterMatch.index);\n\t\tthis.matchStart = formatterMatch.index;\n\t\tthis.matchLength = formatterMatch[0].length;\n\t\tthis.matchText = formatterMatch[0];\n\t\tthis.nextMatch = this.formatter.formatterRegExp.lastIndex;\n\t\tvar t;\n\t\tfor(t=1; t<formatterMatch.length; t++) {\n\t\t\tif(formatterMatch[t]) {\n\t\t\t\tthis.formatter.formatters[t-1].handler(this);\n\t\t\t\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tterminatorRegExp.lastIndex = this.nextMatch;\n\t\tterminatorMatch = terminatorRegExp.exec(this.source);\n\t\tformatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);\n\t}\n\tif(this.nextMatch < this.source.length) {\n\t\tthis.outputText(this.output,this.nextMatch,this.source.length);\n\t\tthis.nextMatch = this.source.length;\n\t}\n\tthis.output = oldOutput;\n};\n\nWikifier.prototype.outputText = function(place,startPos,endPos)\n{\n\twhile(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {\n\t\tif(this.highlightMatch.index > startPos) {\n\t\t\tcreateTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));\n\t\t\tstartPos = this.highlightMatch.index;\n\t\t}\n\t\tvar highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);\n\t\tcreateTiddlyElement(place,\"span\",null,\"highlight\",this.source.substring(startPos,highlightEnd));\n\t\tstartPos = highlightEnd;\n\t\tif(startPos >= this.highlightRegExp.lastIndex)\n\t\t\tthis.highlightMatch = this.highlightRegExp.exec(this.source);\n\t}\n\tif(startPos < endPos) {\n\t\tcreateTiddlyText(place,this.source.substring(startPos,endPos));\n\t}\n};\n\nfunction wikify(source,output,highlightRegExp,tiddler)\n{\n\tif(source) {\n\t\tvar wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);\n\t\tvar t0 = new Date();\n\t\twikifier.subWikify(output);\n\t\tif(tiddler && config.options.chkDisplayInstrumentation)\n\t\t\tdisplayMessage(\"wikify:\" +tiddler.title+ \" in \" + (new Date()-t0) + \" ms\");\n\t}\n}\n\nfunction wikifyStatic(source,highlightRegExp,tiddler,format)\n{\n\tvar e = createTiddlyElement(document.body,\"pre\");\n\te.style.display = \"none\";\n\tvar html = \"\";\n\tif(source && source != \"\") {\n\t\tif(!tiddler)\n\t\t\ttiddler = new Tiddler(\"temp\");\n\t\tvar wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);\n\t\twikifier.isStatic = true;\n\t\twikifier.subWikify(e);\n\t\thtml = e.innerHTML;\n\t\tjQuery(e).remove();\n\t}\n\treturn html;\n}\n\nfunction wikifyPlainText(text,limit,tiddler)\n{\n\tif(limit > 0)\n\t\ttext = text.substr(0,limit);\n\tvar wikifier = new Wikifier(text,formatter,null,tiddler);\n\treturn wikifier.wikifyPlain();\n}\n\nfunction highlightify(source,output,highlightRegExp,tiddler)\n{\n\tif(source) {\n\t\tvar wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);\n\t\twikifier.outputText(output,0,source.length);\n\t}\n}\n\n//--\n//-- Macro definitions\n//--\n\nfunction invokeMacro(place,macro,params,wikifier,tiddler)\n{\n\ttry {\n\t\tvar m = config.macros[macro];\n\t\tif(m && m.handler) {\n\t\t\tvar tiddlerElem = story.findContainingTiddler(place);\n\t\t\twindow.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute(\"tiddler\")) : null;\n\t\t\twindow.place = place;\n\t\t\tvar allowEval = true;\n\t\t\tif(config.evaluateMacroParameters==\"system\") {\n\t\t\t\tif(!tiddler || tiddler.tags.indexOf(\"systemAllowEval\") == -1) {\n\t\t\t\t\tallowEval = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tm.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);\n\t\t} else {\n\t\t\tcreateTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));\n\t\t}\n\t} catch(ex) {\n\t\tcreateTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));\n\t}\n}\n\nconfig.macros.version.handler = function(place)\n{\n\tjQuery(\"<span/>\").text(formatVersion()).appendTo(place);\n};\n\nconfig.macros.today.handler = function(place,macroName,params)\n{\n\tvar now = new Date();\n\tvar text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();\n\tjQuery(\"<span/>\").text(text).appendTo(place);\n};\n\nconfig.macros.list.template = \"<<view title link>>\";\nconfig.macros.list.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tvar list = document.createElement(\"ul\");\n\tjQuery(list).attr({ refresh: \"macro\", macroName: macroName }).data(\"params\", paramString);\n\tplace.appendChild(list);\n\tthis.refresh(list);\n};\n\nconfig.macros.list.refresh = function(list) {\n\tvar paramString = jQuery(list).data(\"params\");\n\tvar params = paramString.readMacroParams();\n\tvar args = paramString.parseParams(\"anon\", null, null)[0];\n\tvar type = args.anon ? args.anon[0] : \"all\";\n\tjQuery(list).empty().addClass(\"list list-\" + type);\n\tvar template = args.template ? store.getTiddlerText(args.template[0]) : false;\n\tif(!template) {\n\t\ttemplate = config.macros.list.template;\n\t}\n\tif(this[type].prompt)\n\t\tcreateTiddlyElement(list,\"li\",null,\"listTitle\",this[type].prompt);\n\tvar results;\n\tif(this[type].handler)\n\t\tresults = this[type].handler(params);\n\tvar t;\n\tfor(t = 0; t < results.length; t++) {\n\t\tvar li = document.createElement(\"li\");\n\t\tlist.appendChild(li);\n\t\tvar tiddler = results[t];\n\t\tif(typeof(tiddler) == 'string') { // deal with missing etc..\n\t\t\t\ttiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);\n\t\t}\n\t\twikify(template, li, null, tiddler);\n\t}\n\tif(results.length === 0 && args.emptyMessage) {\n\t\tjQuery(list).addClass(\"emptyList\");\n\t\tjQuery(\"<li />\").text(args.emptyMessage[0]).appendTo(list);\n\t}\n};\n\nconfig.macros.list.all.handler = function(params)\n{\n\treturn store.reverseLookup(\"tags\",\"excludeLists\",false,\"title\");\n};\n\nconfig.macros.list.missing.handler = function(params)\n{\n\treturn store.getMissingLinks();\n};\n\nconfig.macros.list.orphans.handler = function(params)\n{\n\treturn store.getOrphans();\n};\n\nconfig.macros.list.shadowed.handler = function(params)\n{\n\treturn store.getShadowed();\n};\n\nconfig.macros.list.touched.handler = function(params)\n{\n\treturn store.getTouched();\n};\n\nconfig.macros.list.filter.handler = function(params)\n{\n\tvar filter = params[1];\n\tvar results = [];\n\tif(filter) {\n\t\tvar tiddlers = store.filterTiddlers(filter);\n\t\tvar t;\n\t\tfor(t=0; t<tiddlers.length; t++)\n\t\t\tresults.push(tiddlers[t].title);\n\t}\n\treturn results;\n};\n\nconfig.macros.allTags.handler = function(place,macroName,params)\n{\n\tvar tags = store.getTags(params[0]);\n\tvar ul = createTiddlyElement(place,\"ul\");\n\tif(tags.length == 0)\n\t\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",this.noTags);\n\tvar t;\n\tfor(t=0; t<tags.length; t++) {\n\t\tvar title = tags[t][0];\n\t\tvar info = getTiddlyLinkInfo(title);\n\t\tvar li = createTiddlyElement(ul,\"li\");\n\t\tvar btn = createTiddlyButton(li,title + \" (\" + tags[t][1] + \")\",this.tooltip.format([title]),onClickTag,info.classes);\n\t\tbtn.setAttribute(\"tag\",title);\n\t\tbtn.setAttribute(\"refresh\",\"link\");\n\t\tbtn.setAttribute(\"tiddlyLink\",title);\n\t\tif(params[1]) {\n\t\t\tbtn.setAttribute(\"sortby\",params[1]);\n\t\t}\n\t}\n};\n\nvar macro = config.macros.timeline;\nmerge(macro, {\n\thandler: function(place,macroName,params, wikifier, paramString, tiddler) {\n\t\tvar container = jQuery(\"<div />\").attr(\"params\", paramString).\n\t\t\tattr(\"macroName\", macroName).appendTo(place)[0];\n\t\tmacro.refresh(container);\n\t},\n\trefresh: function(container) {\n\t\tjQuery(container).attr(\"refresh\", \"macro\").empty();\n\t\tvar paramString = jQuery(container).attr(\"params\");\n\t\tvar args = paramString.parseParams(\"anon\", null, null)[0];\n\t\tvar params = args.anon || [];\n\n\t\tvar field = params[0] || \"modified\";\n\t\tvar prefix = field.charAt(0);\n\t\tvar no_prefix_field = prefix === \"-\" || prefix === \"+\" ? field.substr(1, field.length) : field;\n\t\tvar dateFormat = params[2] || this.dateFormat;\n\t\tvar groupTemplate = macro.groupTemplate.format(no_prefix_field, dateFormat);\n\t\tgroupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :\n\t\t\tgroupTemplate;\n\n\t\tvar itemTemplate = macro.itemTemplate;\n\t\titemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :\n\t\t\titemTemplate;\n\n\t\tvar tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :\n\t\t\tstore.reverseLookup(\"tags\", \"excludeLists\", false, field);\n\t\tvar lastGroup = \"\", ul;\n\t\tvar last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;\n\t\tvar t;\n\t\tfor(t=tiddlers.length-1; t>=last; t--) {\n\t\t\tvar tiddler = tiddlers[t];\n\t\t\tvar theGroup = wikifyPlainText(groupTemplate,0,tiddler);\n\t\t\tif(typeof(ul) == \"undefined\" || theGroup != lastGroup) {\n\t\t\t\tul = document.createElement(\"ul\");\n\t\t\t\tjQuery(ul).addClass(\"timeline\");\n\t\t\t\tcontainer.appendChild(ul);\n\t\t\t\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",theGroup);\n\t\t\t\tlastGroup = theGroup;\n\t\t\t}\n\t\t\tvar item = createTiddlyElement(ul,\"li\",null,\"listLink\");\n\t\t\twikify(itemTemplate,item,null,tiddler);\n\t\t}\n\t},\n\tgroupTemplate: \"<<view %0 date '%1'>>\", \n\titemTemplate: \"<<view title link>>\"\n});\n\nconfig.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar allowEval = true;\n\tvar stack = config.macros.tiddler.tiddlerStack;\n\tif(stack.length > 0 && config.evaluateMacroParameters == \"system\") {\n\t\t// included tiddler and \"system\" evaluation required, so check tiddler tagged appropriately\n\t\tvar title = stack[stack.length-1];\n\t\tvar pos = title.indexOf(config.textPrimitives.sectionSeparator);\n\t\tif(pos != -1) {\n\t\t\ttitle = title.substr(0,pos); // get the base tiddler title\n\t\t}\n\t\tvar t = store.getTiddler(title);\n\t\tif(!t || t.tags.indexOf(\"systemAllowEval\") == -1) {\n\t\t\tallowEval = false;\n\t\t}\n\t}\n\tparams = paramString.parseParams(\"name\",null,allowEval,false,true);\n\tvar names = params[0][\"name\"];\n\tvar tiddlerName = names[0];\n\tvar className = names[1] || null;\n\tvar args = params[0][\"with\"];\n\tvar wrapper = createTiddlyElement(place,\"span\",null,className,null,{\n\t\trefresh: \"content\", tiddler: tiddlerName\n\t});\n\tif(args!==undefined)\n\t\twrapper.setAttribute(\"args\",\"[[\"+args.join(\"]] [[\")+\"]]\");\n\tthis.transclude(wrapper,tiddlerName,args);\n};\n\nconfig.macros.tiddler.transclude = function(wrapper,tiddlerName,args)\n{\n\tvar text = store.getTiddlerText(tiddlerName);\n\tif(!text)\n\t\treturn;\n\tvar stack = config.macros.tiddler.tiddlerStack;\n\tif(stack.indexOf(tiddlerName) !== -1)\n\t\treturn;\n\tstack.push(tiddlerName);\n\ttry {\n\t\tif(typeof args == \"string\")\n\t\t\targs = args.readBracketedList();\n\t\tvar n = args ? Math.min(args.length,9) : 0;\n\t\tvar i;\n\t\tfor(i=0; i<n; i++) {\n\t\t\tvar placeholderRE = new RegExp(\"\\\\$\" + (i + 1),\"mg\");\n\t\t\ttext = text.replace(placeholderRE,args[i]);\n\t\t}\n\t\tconfig.macros.tiddler.renderText(wrapper,text,tiddlerName);\n\t} finally {\n\t\tstack.pop();\n\t}\n};\n\nconfig.macros.tiddler.renderText = function(place,text,tiddlerName)\n{\n\twikify(text,place,null,store.getTiddler(tiddlerName));\n};\n\nconfig.macros.tiddler.tiddlerStack = [];\n\nconfig.macros.tag.handler = function(place,macroName,params)\n{\n\tvar btn = createTagButton(place,params[0],null,params[1],params[2]);\n\tif(params[3]) {\n\t\tbtn.setAttribute('sortby',params[3]);\n\t}\n};\n\nconfig.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tparams = paramString.parseParams(\"anon\",null,true,false,false);\n\tvar ul = createTiddlyElement(place,\"ul\");\n\tvar title = getParam(params,\"anon\",\"\");\n\tif(title && store.tiddlerExists(title))\n\t\ttiddler = store.getTiddler(title);\n\tvar sep = getParam(params,\"sep\",\" \");\n\tvar lingo = config.views.wikified.tag;\n\tvar label = null;\n\tvar t;\n\tfor(t=0; t<tiddler.tags.length; t++) {\n\t\tvar tag = store.getTiddler(tiddler.tags[t]);\n\t\tif(!tag || !tag.tags.contains(\"excludeLists\")) {\n\t\t\tif(!label)\n\t\t\t\tlabel = createTiddlyElement(ul,\"li\",null,\"listTitle\",lingo.labelTags.format([tiddler.title]));\n\t\t\tcreateTagButton(createTiddlyElement(ul,\"li\"),tiddler.tags[t],tiddler.title);\n\t\t\tif(t<tiddler.tags.length-1)\n\t\t\t\tcreateTiddlyText(ul,sep);\n\t\t}\n\t}\n\tif(!label)\n\t\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",lingo.labelNoTags.format([tiddler.title]));\n};\n\nconfig.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tparams = paramString.parseParams(\"anon\",null,true,false,false);\n\tvar ul = createTiddlyElement(place,\"ul\");\n\tvar title = getParam(params,\"anon\",\"\");\n\tif(title == \"\" && tiddler instanceof Tiddler)\n\t\ttitle = tiddler.title;\n\tvar sep = getParam(params,\"sep\",\" \");\n\tul.setAttribute(\"title\",this.tooltip.format([title]));\n\tvar sortby = getParam(params,\"sortBy\",false);\n\tvar tagged = store.getTaggedTiddlers(title,sortby);\n\tvar prompt = tagged.length == 0 ? this.labelNotTag : this.label;\n\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",prompt.format([title,tagged.length]));\n\tvar t;\n\tfor(t=0; t<tagged.length; t++) {\n\t\tcreateTiddlyLink(createTiddlyElement(ul,\"li\"),tagged[t].title,true);\n\t\tif(t<tagged.length-1)\n\t\t\tcreateTiddlyText(ul,sep);\n\t}\n};\n\nconfig.macros.closeAll.handler = function(place)\n{\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick);\n};\n\nconfig.macros.closeAll.onClick = function(e)\n{\n\tstory.closeAllTiddlers();\n\treturn false;\n};\n\nconfig.macros.permaview.handler = function(place)\n{\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick);\n};\n\nconfig.macros.permaview.onClick = function(e)\n{\n\tstory.permaView();\n\treturn false;\n};\n\nconfig.macros.saveChanges.handler = function(place,macroName,params)\n{\n\tif(!readOnly)\n\t\tcreateTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);\n};\n\nconfig.macros.saveChanges.onClick = function(e)\n{\n\tsaveChanges();\n\treturn false;\n};\n\nconfig.macros.slider.onClickSlider = function(ev)\n{\n\tvar n = this.nextSibling;\n\tvar cookie = n.getAttribute(\"cookie\");\n\tvar isOpen = n.style.display != \"none\";\n\tif(config.options.chkAnimate && anim && typeof Slider == \"function\")\n\t\tanim.startAnimating(new Slider(n,!isOpen,null,\"none\"));\n\telse\n\t\tn.style.display = isOpen ? \"none\" : \"block\";\n\tconfig.options[cookie] = !isOpen;\n\tsaveOption(cookie);\n\treturn false;\n};\n\nconfig.macros.slider.createSlider = function(place,cookie,title,tooltip)\n{\n\tvar c = cookie || \"\";\n\tcreateTiddlyButton(place,title,tooltip,this.onClickSlider);\n\tvar panel = createTiddlyElement(null,\"div\",null,\"sliderPanel\");\n\tpanel.setAttribute(\"cookie\",c);\n\tpanel.style.display = config.options[c] ? \"block\" : \"none\";\n\tplace.appendChild(panel);\n\treturn panel;\n};\n\nconfig.macros.slider.handler = function(place,macroName,params)\n{\n\tvar panel = this.createSlider(place,params[0],params[2],params[3]);\n\tvar text = store.getTiddlerText(params[1]);\n\tpanel.setAttribute(\"refresh\",\"content\");\n\tpanel.setAttribute(\"tiddler\",params[1]);\n\tif(text)\n\t\twikify(text,panel,null,store.getTiddler(params[1]));\n};\n\n// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>\nconfig.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar panel = wikifier ? createTiddlyElement(place,\"div\",null,\"gradient\") : place;\n\tpanel.style.position = \"relative\";\n\tpanel.style.overflow = \"hidden\";\n\tpanel.style.zIndex = \"0\";\n\tif(wikifier) {\n\t\tvar styles = config.formatterHelpers.inlineCssHelper(wikifier);\n\t\tconfig.formatterHelpers.applyCssHelper(panel,styles);\n\t}\n\tparams = paramString.parseParams(\"color\");\n\tvar locolors = [], hicolors = [];\n\tvar t;\n\tfor(t=2; t<params.length; t++) {\n\t\tvar c = params[t].value;\n\t\tif(params[t].name == \"snap\") {\n\t\t\thicolors[hicolors.length-1] = c;\n\t\t} else {\n\t\t\tlocolors.push(c);\n\t\t\thicolors.push(c);\n\t\t}\n\t}\n\tdrawGradient(panel,params[1].value != \"vert\",locolors,hicolors);\n\tif(wikifier)\n\t\twikifier.subWikify(panel,\">>\");\n\tif(document.all) {\n\t\tpanel.style.height = \"100%\";\n\t\tpanel.style.width = \"100%\";\n\t}\n};\n\nconfig.macros.message.handler = function(place,macroName,params)\n{\n\tif(params[0]) {\n\t\tvar names = params[0].split(\".\");\n\t\tvar lookupMessage = function(root,nameIndex) {\n\t\t\t\tif(root[names[nameIndex]]) {\n\t\t\t\t\tif(nameIndex < names.length-1)\n\t\t\t\t\t\treturn (lookupMessage(root[names[nameIndex]],nameIndex+1));\n\t\t\t\t\telse\n\t\t\t\t\t\treturn root[names[nameIndex]];\n\t\t\t\t} else\n\t\t\t\t\treturn null;\n\t\t\t};\n\t\tvar m = lookupMessage(config,0);\n\t\tif(m == null)\n\t\t\tm = lookupMessage(window,0);\n\t\tcreateTiddlyText(place,m.toString().format(params.splice(1)));\n\t}\n};\n\n\nconfig.macros.view.depth = 0;\nconfig.macros.view.values = [];\nconfig.macros.view.views = {\n\ttext: function(value,place,params,wikifier,paramString,tiddler) {\n\t\thighlightify(value,place,highlightHack,tiddler);\n\t},\n\tlink: function(value,place,params,wikifier,paramString,tiddler) {\n\t\tcreateTiddlyLink(place,value,true);\n\t},\n\twikified: function(value,place,params,wikifier,paramString,tiddler) {\n\t\tif(config.macros.view.depth>50)\n\t\t\treturn;\n\t\tif(config.macros.view.depth>0) {\n\t\t\tif (value==config.macros.view.values[config.macros.view.depth-1]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tconfig.macros.view.values[config.macros.view.depth] = value;\n\t\tconfig.macros.view.depth++;\n\t\tif(params[2])\n\t\t\tvalue=params[2].unescapeLineBreaks().format([value]);\n\t\twikify(value,place,highlightHack,tiddler);\n\t\tconfig.macros.view.depth--;\n\t\tconfig.macros.view.values[config.macros.view.depth] = null;\n\t},\n\tdate: function(value,place,params,wikifier,paramString,tiddler) {\n\t\tvalue = Date.convertFromYYYYMMDDHHMM(value);\n\t\tcreateTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));\n\t}\n};\n\nconfig.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tif((tiddler instanceof Tiddler) && params[0]) {\n\t\tvar value = store.getValue(tiddler,params[0]);\n\t\tif(value) {\n\t\t\tvar type = params[1] || config.macros.view.defaultView;\n\t\t\tvar handler = config.macros.view.views[type];\n\t\t\tif(handler)\n\t\t\t\thandler(value,place,params,wikifier,paramString,tiddler);\n\t\t}\n\t}\n};\n\nconfig.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar field = params[0];\n\tvar rows = params[1] || 0;\n\tvar defVal = params[2] || '';\n\tif((tiddler instanceof Tiddler) && field) {\n\t\tstory.setDirty(tiddler.title,true);\n\t\tvar e,v;\n\t\tif(field != \"text\" && !rows) {\n\t\t\te = createTiddlyElement(null,\"input\",null,null,null,{\n\t\t\t\ttype: \"text\", edit: field, size: \"40\", autocomplete: \"off\"\n\t\t\t});\n\t\t\te.value = store.getValue(tiddler,field) || defVal;\n\t\t\tplace.appendChild(e);\n\t\t} else {\n\t\t\tvar wrapper1 = createTiddlyElement(null,\"fieldset\",null,\"fieldsetFix\");\n\t\t\tvar wrapper2 = createTiddlyElement(wrapper1,\"div\");\n\t\t\te = createTiddlyElement(wrapper2,\"textarea\");\n\t\t\te.value = v = store.getValue(tiddler,field) || defVal;\n\t\t\trows = rows || 10;\n\t\t\tvar lines = v.match(/\\n/mg);\n\t\t\tvar maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);\n\t\t\tif(lines != null && lines.length > rows)\n\t\t\t\trows = lines.length + 5;\n\t\t\trows = Math.min(rows,maxLines);\n\t\t\te.setAttribute(\"rows\",rows);\n\t\t\te.setAttribute(\"edit\",field);\n\t\t\tplace.appendChild(wrapper1);\n\t\t}\n\t\tif(tiddler.isReadOnly()) {\n\t\t\te.setAttribute(\"readOnly\",\"readOnly\");\n\t\t\tjQuery(e).addClass(\"readOnly\");\n\t\t}\n\t\treturn e;\n\t}\n};\n\nconfig.macros.tagChooser.onClick = function(ev)\n{\n\tvar e = ev || window.event;\n\tvar lingo = config.views.editor.tagChooser;\n\tvar popup = Popup.create(this);\n\tvar tags = store.getTags(this.getAttribute(\"tags\"));\n\tif(tags.length == 0)\n\t\tjQuery(\"<li/>\").text(lingo.popupNone).appendTo(popup);\n\tvar t;\n\tfor(t=0; t<tags.length; t++) {\n\t\tvar tag = createTiddlyButton(createTiddlyElement(popup,\"li\"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);\n\t\ttag.setAttribute(\"tag\",tags[t][0]);\n\t\ttag.setAttribute(\"tiddler\",this.getAttribute(\"tiddler\"));\n\t}\n\tPopup.show();\n\te.cancelBubble = true;\n\tif(e.stopPropagation) e.stopPropagation();\n\treturn false;\n};\n\nconfig.macros.tagChooser.onTagClick = function(ev)\n{\n\tvar e = ev || window.event;\n\tif(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click\n\tvar tag = this.getAttribute(\"tag\");\n\tvar title = this.getAttribute(\"tiddler\");\n\tif(!readOnly)\n\t\tstory.setTiddlerTag(title,tag,0);\n\treturn false;\n};\n\nconfig.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tif(tiddler instanceof Tiddler) {\n\t\tvar lingo = config.views.editor.tagChooser;\n\t\tvar btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);\n\t\tbtn.setAttribute(\"tiddler\",tiddler.title);\n\t\tbtn.setAttribute(\"tags\",params[0]);\n\t}\n};\n\nconfig.macros.refreshDisplay.handler = function(place)\n{\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick);\n};\n\nconfig.macros.refreshDisplay.onClick = function(e)\n{\n\trefreshAll();\n\treturn false;\n};\n\nconfig.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar title = tiddler ? tiddler.title : null;\n\tvar a = title ? config.annotations[title] : null;\n\tif(!tiddler || !title || !a)\n\t\treturn;\n\tvar text = a.format([title]);\n\twikify(text,createTiddlyElement(place,\"div\",null,\"annotation\"),null,tiddler);\n};\n//--\n//-- NewTiddler and NewJournal macros\n//--\n\nconfig.macros.newTiddler.createNewTiddlerButton = function(place,title,params,label,prompt,accessKey,newFocus,isJournal)\n{\n\tvar tags = [];\n\tvar t;\n\tfor(t=1; t<params.length; t++) {\n\t\tif((params[t].name == \"anon\" && t != 1) || (params[t].name == \"tag\"))\n\t\t\ttags.push(params[t].value);\n\t}\n\tlabel = getParam(params,\"label\",label);\n\tprompt = getParam(params,\"prompt\",prompt);\n\taccessKey = getParam(params,\"accessKey\",accessKey);\n\tnewFocus = getParam(params,\"focus\",newFocus);\n\tvar customFields = getParam(params,\"fields\",\"\");\n\tif(!customFields && !store.isShadowTiddler(title))\n\t\tcustomFields = String.encodeHashMap(config.defaultCustomFields);\n\tvar btn = createTiddlyButton(place,label,prompt,this.onClickNewTiddler,null,null,accessKey);\n\tbtn.setAttribute(\"newTitle\",title);\n\tbtn.setAttribute(\"isJournal\",isJournal ? \"true\" : \"false\");\n\tif(tags.length > 0)\n\t\tbtn.setAttribute(\"params\",tags.join(\"|\"));\n\tbtn.setAttribute(\"newFocus\",newFocus);\n\tbtn.setAttribute(\"newTemplate\",getParam(params,\"template\",DEFAULT_EDIT_TEMPLATE));\n\tif(customFields !== \"\")\n\t\tbtn.setAttribute(\"customFields\",customFields);\n\tvar text = getParam(params,\"text\");\n\tif(text !== undefined)\n\t\tbtn.setAttribute(\"newText\",text);\n\treturn btn;\n};\n\nconfig.macros.newTiddler.onClickNewTiddler = function()\n{\n\tvar title = this.getAttribute(\"newTitle\");\n\tif(this.getAttribute(\"isJournal\") == \"true\") {\n\t\ttitle = new Date().formatString(title.trim());\n\t}\n\tvar params = this.getAttribute(\"params\");\n\tvar tags = params ? params.split(\"|\") : [];\n\tvar focus = this.getAttribute(\"newFocus\");\n\tvar template = this.getAttribute(\"newTemplate\");\n\tvar customFields = this.getAttribute(\"customFields\");\n\tif(!customFields && !store.isShadowTiddler(title))\n\t\tcustomFields = String.encodeHashMap(config.defaultCustomFields);\n\tstory.displayTiddler(null,title,template,false,null,null);\n\tvar tiddlerElem = story.getTiddler(title);\n\tif(customFields)\n\t\tstory.addCustomFields(tiddlerElem,customFields);\n\tvar text = this.getAttribute(\"newText\");\n\tif(typeof text == \"string\" && story.getTiddlerField(title,\"text\"))\n\t\tstory.getTiddlerField(title,\"text\").value = text.format([title]);\n\tvar t;\n\tfor(t=0;t<tags.length;t++)\n\t\tstory.setTiddlerTag(title,tags[t],+1);\n\tstory.focusTiddler(title,focus);\n\treturn false;\n};\n\nconfig.macros.newTiddler.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tif(!readOnly) {\n\t\tparams = paramString.parseParams(\"anon\",null,true,false,false);\n\t\tvar title = params[1] && params[1].name == \"anon\" ? params[1].value : this.title;\n\t\ttitle = getParam(params,\"title\",title);\n\t\tthis.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,\"title\",false);\n\t}\n};\n\nconfig.macros.newJournal.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tif(!readOnly) {\n\t\tparams = paramString.parseParams(\"anon\",null,true,false,false);\n\t\tvar title = params[1] && params[1].name == \"anon\" ? params[1].value : config.macros.timeline.dateFormat;\n\t\ttitle = getParam(params,\"title\",title);\n\t\tconfig.macros.newTiddler.createNewTiddlerButton(place,title,params,this.label,this.prompt,this.accessKey,\"text\",true);\n\t}\n};\n\n//--\n//-- Search macro\n//--\n\nconfig.macros.search.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tparams = paramString.parseParams(\"anon\",null,false,false,false);\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick,\"searchButton\");\n\tvar txt = createTiddlyElement(null,\"input\",null,\"txtOptionInput searchField\");\n\ttxt.value = getParam(params,\"anon\",\"\");\n\tif(config.browser.isSafari) {\n\t\ttxt.setAttribute(\"type\",\"search\");\n\t\ttxt.setAttribute(\"results\",\"5\");\n\t} else {\n\t\ttxt.setAttribute(\"type\",\"text\");\n\t}\n\tplace.appendChild(txt);\n\ttxt.onkeyup = this.onKeyPress;\n\ttxt.onfocus = this.onFocus;\n\ttxt.setAttribute(\"size\",this.sizeTextbox);\n\ttxt.setAttribute(\"accessKey\",getParam(params,\"accesskey\",this.accessKey));\n\ttxt.setAttribute(\"autocomplete\",\"off\");\n\ttxt.setAttribute(\"lastSearchText\",\"\");\n\ttxt.setAttribute(\"placeholder\",getParam(params,\"placeholder\",this.placeholder));\n};\n\n// Global because there's only ever one outstanding incremental search timer\nconfig.macros.search.timeout = null;\n\nconfig.macros.search.doSearch = function(txt)\n{\n\tif(txt.value.length > 0) {\n\t\tstory.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);\n\t\ttxt.setAttribute(\"lastSearchText\",txt.value);\n\t}\n};\n\nconfig.macros.search.onClick = function(e)\n{\n\tconfig.macros.search.doSearch(this.nextSibling);\n\treturn false;\n};\n\nconfig.macros.search.onKeyPress = function(ev)\n{\n\tvar me = config.macros.search;\n\tvar e = ev || window.event;\n\tswitch(e.keyCode) {\n\t\tcase 9: // Tab\n\t\t\treturn;\n\t\tcase 13: // Ctrl-Enter\n\t\tcase 10: // Ctrl-Enter on IE PC\n\t\t\tme.doSearch(this);\n\t\t\tbreak;\n\t\tcase 27: // Escape\n\t\t\tthis.value = \"\";\n\t\t\tclearMessage();\n\t\t\tbreak;\n\t}\n\tif(config.options.chkIncrementalSearch) {\n\t\tif(this.value.length > 2) {\n\t\t\tif(this.value != this.getAttribute(\"lastSearchText\")) {\n\t\t\t\tif(me.timeout) {\n\t\t\t\t\tclearTimeout(me.timeout);\n\t\t\t\t}\n\t\t\t\tvar txt = this;\n\t\t\t\tme.timeout = setTimeout(function() {me.doSearch(txt);},500);\n\t\t\t}\n\t\t} else {\n\t\t\tif(me.timeout) {\n\t\t\t\tclearTimeout(me.timeout);\n\t\t\t}\n\t\t}\n\t}\n};\n\nconfig.macros.search.onFocus = function(e)\n{\n\tthis.select();\n};\n\n//--\n//-- Tabs macro\n//--\n\nconfig.macros.tabs.handler = function(place,macroName,params)\n{\n\tvar cookie = params[0];\n\tvar numTabs = (params.length-1)/3;\n\tvar wrapper = createTiddlyElement(null,\"div\",null,\"tabsetWrapper \" + cookie);\n\tvar tabset = createTiddlyElement(wrapper,\"div\",null,\"tabset\");\n\ttabset.setAttribute(\"cookie\",cookie);\n\tvar validTab = false;\n\tvar t;\n\tfor(t=0; t<numTabs; t++) {\n\t\tvar label = params[t*3+1];\n\t\tvar prompt = params[t*3+2];\n\t\tvar content = params[t*3+3];\n\t\tvar tab = createTiddlyButton(tabset,label,prompt,this.onClickTab,\"tab tabUnselected\");\n\t\tcreateTiddlyElement(tab,\"span\",null,null,\" \",{style:\"font-size:0pt;line-height:0px\"});\n\t\ttab.setAttribute(\"tab\",label);\n\t\ttab.setAttribute(\"content\",content);\n\t\ttab.title = prompt;\n\t\tif(config.options[cookie] == label)\n\t\t\tvalidTab = true;\n\t}\n\tif(!validTab)\n\t\tconfig.options[cookie] = params[1];\n\tplace.appendChild(wrapper);\n\tthis.switchTab(tabset,config.options[cookie]);\n};\n\nconfig.macros.tabs.onClickTab = function(e)\n{\n\tconfig.macros.tabs.switchTab(this.parentNode,this.getAttribute(\"tab\"));\n\treturn false;\n};\n\nconfig.macros.tabs.switchTab = function(tabset,tab)\n{\n\tvar cookie = tabset.getAttribute(\"cookie\");\n\tvar theTab = null;\n\tvar nodes = tabset.childNodes;\n\tvar t;\n\tfor(t=0; t<nodes.length; t++) {\n\t\tif(nodes[t].getAttribute && nodes[t].getAttribute(\"tab\") == tab) {\n\t\t\ttheTab = nodes[t];\n\t\t\ttheTab.className = \"tab tabSelected\";\n\t\t} else {\n\t\t\tnodes[t].className = \"tab tabUnselected\";\n\t\t}\n\t}\n\tif(theTab) {\n\t\tif(tabset.nextSibling && tabset.nextSibling.className == \"tabContents\")\n\t\t\tjQuery(tabset.nextSibling).remove();\n\t\tvar tabContent = createTiddlyElement(null,\"div\",null,\"tabContents\");\n\t\ttabset.parentNode.insertBefore(tabContent,tabset.nextSibling);\n\t\tvar contentTitle = theTab.getAttribute(\"content\");\n\t\twikify(store.getTiddlerText(contentTitle),tabContent,null,store.getTiddler(contentTitle));\n\t\tif(cookie) {\n\t\t\tconfig.options[cookie] = tab;\n\t\t\tsaveOption(cookie);\n\t\t}\n\t}\n};\n\n//--\n//-- Tiddler toolbar\n//--\n\n// Create a toolbar command button\nconfig.macros.toolbar.createCommand = function(place,commandName,tiddler,className)\n{\n\tif(typeof commandName != \"string\") {\n\t\tvar c = null;\n\t\tvar t;\n\t\tfor(t in config.commands) {\n\t\t\tif(config.commands[t] == commandName)\n\t\t\t\tc = t;\n\t\t}\n\t\tcommandName = c;\n\t}\n\tif((tiddler instanceof Tiddler) && (typeof commandName == \"string\")) {\n\t\tvar command = config.commands[commandName];\n\t\tif(command.isEnabled ? command.isEnabled(tiddler) : this.isCommandEnabled(command,tiddler)) {\n\t\t\tvar text = command.getText ? command.getText(tiddler) : this.getCommandText(command,tiddler);\n\t\t\tvar tooltip = command.getTooltip ? command.getTooltip(tiddler) : this.getCommandTooltip(command,tiddler);\n\t\t\tvar cmd = command.type == \"popup\" ? this.onClickPopup : this.onClickCommand;\n\t\t\tvar btn = createTiddlyButton(null,text,tooltip,cmd);\n\t\t\tbtn.setAttribute(\"commandName\",commandName);\n\t\t\tbtn.setAttribute(\"tiddler\",tiddler.title);\n\t\t\tjQuery(btn).addClass(\"command_\" + commandName);\n\t\t\tif(className)\n\t\t\t\tjQuery(btn).addClass(className);\n\t\t\tplace.appendChild(btn);\n\t\t}\n\t}\n};\n\nconfig.macros.toolbar.isCommandEnabled = function(command,tiddler)\n{\n\tvar title = tiddler.title;\n\tvar ro = tiddler.isReadOnly();\n\tvar shadow = store.isShadowTiddler(title) && !store.tiddlerExists(title);\n\treturn (!ro || (ro && !command.hideReadOnly)) && !(shadow && command.hideShadow);\n};\n\nconfig.macros.toolbar.getCommandText = function(command,tiddler)\n{\n\treturn (tiddler.isReadOnly() && command.readOnlyText) || command.text;\n};\n\nconfig.macros.toolbar.getCommandTooltip = function(command,tiddler)\n{\n\treturn (tiddler.isReadOnly() && command.readOnlyTooltip) || command.tooltip;\n};\n\nconfig.macros.toolbar.onClickCommand = function(ev)\n{\n\tvar e = ev || window.event;\n\te.cancelBubble = true;\n\tif(e.stopPropagation) e.stopPropagation();\n\tvar command = config.commands[this.getAttribute(\"commandName\")];\n\treturn command.handler(e,this,this.getAttribute(\"tiddler\"));\n};\n\nconfig.macros.toolbar.onClickPopup = function(ev)\n{\n\tvar e = ev || window.event;\n\te.cancelBubble = true;\n\tif(e.stopPropagation) e.stopPropagation();\n\tvar popup = Popup.create(this);\n\tvar command = config.commands[this.getAttribute(\"commandName\")];\n\tvar title = this.getAttribute(\"tiddler\");\n\tpopup.setAttribute(\"tiddler\",title);\n\tcommand.handlePopup(popup,title);\n\tPopup.show();\n\treturn false;\n};\n\n// Invoke the first command encountered from a given place that is tagged with a specified class\nconfig.macros.toolbar.invokeCommand = function(place,className,event)\n{\n\tvar children = place.getElementsByTagName(\"a\");\n\tvar t;\n\tfor(t=0; t<children.length; t++) {\n\t\tvar c = children[t];\n\t\tif(jQuery(c).hasClass(className) && c.getAttribute && c.getAttribute(\"commandName\")) {\n\t\t\tif(c.onclick instanceof Function)\n\t\t\t\tc.onclick.call(c,event);\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\nconfig.macros.toolbar.onClickMore = function(ev)\n{\n\tvar e = this.nextSibling;\n\te.style.display = \"inline\";\n\tthis.style.display = \"none\";\n\treturn false;\n};\n\nconfig.macros.toolbar.onClickLess = function(ev)\n{\n\tvar e = this.parentNode;\n\tvar m = e.previousSibling;\n\te.style.display = \"none\";\n\tm.style.display = \"inline\";\n\treturn false;\n};\n\nconfig.macros.toolbar.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar t;\n\tfor(t=0; t<params.length; t++) {\n\t\tvar btn;\n\t\tvar c = params[t];\n\t\tswitch(c) {\n\t\tcase \"!\":\n\t\t\tcreateTiddlyText(place,this.separator);\n\t\t\tbreak;\n\t\tcase \"*\":\n\t\t\tcreateTiddlyElement(place,\"br\");\n\t\t\tbreak;\n\t\tcase \"<\":\n\t\t\tbtn = createTiddlyButton(place,this.lessLabel,this.lessPrompt,config.macros.toolbar.onClickLess);\n\t\t\tjQuery(btn).addClass(\"lessCommand\");\n\t\t\tbreak;\n\t\tcase \">\":\n\t\t\tbtn = createTiddlyButton(place,this.moreLabel,this.morePrompt,config.macros.toolbar.onClickMore);\n\t\t\tjQuery(btn).addClass(\"moreCommand\");\n\t\t\tvar e = createTiddlyElement(place,\"span\",null,\"moreCommand\");\n\t\t\te.style.display = \"none\";\n\t\t\tplace = e;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tvar className = \"\";\n\t\t\tswitch(c.substr(0,1)) {\n\t\t\tcase \"+\":\n\t\t\t\tclassName = \"defaultCommand\";\n\t\t\t\tc = c.substr(1);\n\t\t\t\tbreak;\n\t\t\tcase \"-\":\n\t\t\t\tclassName = \"cancelCommand\";\n\t\t\t\tc = c.substr(1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif(config.commands[c]) {\n\t\t\t\tthis.createCommand(place,c,tiddler,className);\n\t\t\t} else {\n\t\t\t\tthis.customCommand(place,c,wikifier,tiddler);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n};\n\n// Overrideable function to extend toolbar handler\nconfig.macros.toolbar.customCommand = function(place,command,wikifier,tiddler)\n{\n};\n\n//--\n//-- Menu and toolbar commands\n//--\n\nconfig.commands.closeTiddler.handler = function(event,src,title)\n{\n\tif(story.isDirty(title) && !readOnly) {\n\t\tif(!confirm(config.commands.cancelTiddler.warning.format([title])))\n\t\t\treturn false;\n\t}\n\tstory.setDirty(title,false);\n\tstory.closeTiddler(title,true);\n\treturn false;\n};\n\nconfig.commands.closeOthers.handler = function(event,src,title)\n{\n\tstory.closeAllTiddlers(title);\n\treturn false;\n};\n\nconfig.commands.editTiddler.handler = function(event,src,title)\n{\n\tclearMessage();\n\tvar tiddlerElem = story.getTiddler(title);\n\tvar fields = tiddlerElem.getAttribute(\"tiddlyFields\");\n\tstory.displayTiddler(null,title,DEFAULT_EDIT_TEMPLATE,false,null,fields);\n\tvar e = story.getTiddlerField(title,config.options.txtEditorFocus||\"text\");\n\tif(e) {\n\t\tsetCaretPosition(e,0);\n\t}\n\treturn false;\n};\n\nconfig.commands.saveTiddler.handler = function(event,src,title)\n{\n\tvar newTitle = story.saveTiddler(title,event.shiftKey);\n\tif(newTitle)\n\t\tstory.displayTiddler(null,newTitle);\n\treturn false;\n};\n\nconfig.commands.cancelTiddler.handler = function(event,src,title)\n{\n\tif(story.hasChanges(title) && !readOnly) {\n\t\tif(!confirm(this.warning.format([title])))\n\t\t\treturn false;\n\t}\n\tstory.setDirty(title,false);\n\tstory.displayTiddler(null,title);\n\treturn false;\n};\n\nconfig.commands.deleteTiddler.handler = function(event,src,title)\n{\n\tvar deleteIt = true;\n\tif(config.options.chkConfirmDelete)\n\t\tdeleteIt = confirm(this.warning.format([title]));\n\tif(deleteIt) {\n\t\tstore.removeTiddler(title);\n\t\tstory.closeTiddler(title,true);\n\t\tautoSaveChanges();\n\t}\n\treturn false;\n};\n\nconfig.commands.permalink.handler = function(event,src,title)\n{\n\tvar t = encodeURIComponent(String.encodeTiddlyLink(title));\n\tif(window.location.hash != t)\n\t\twindow.location.hash = t;\n\treturn false;\n};\n\nconfig.commands.references.handlePopup = function(popup,title)\n{\n\tvar references = store.getReferringTiddlers(title);\n\tvar c = false;\n\tvar r;\n\tfor(r=0; r<references.length; r++) {\n\t\tif(references[r].title != title && !references[r].isTagged(\"excludeLists\")) {\n\t\t\tcreateTiddlyLink(createTiddlyElement(popup,\"li\"),references[r].title,true);\n\t\t\tc = true;\n\t\t}\n\t}\n\tif(!c)\n\t\tcreateTiddlyElement(popup,\"li\",null,\"disabled\",this.popupNone);\n};\n\nconfig.commands.jump.handlePopup = function(popup,title)\n{\n\tstory.forEachTiddler(function(title,element) {\n\t\tcreateTiddlyLink(createTiddlyElement(popup,\"li\"),title,true,null,false,null,true);\n\t\t});\n};\n\nconfig.commands.fields.handlePopup = function(popup,title)\n{\n\tvar tiddler = store.fetchTiddler(title);\n\tif(!tiddler)\n\t\treturn;\n\tvar items = [];\n\tstore.forEachField(tiddler,function(tiddler,fieldName,value){items.push({field:fieldName,value:value});},true);\n\titems.sort(function(a,b) {return a.field < b.field ? -1 : (a.field == b.field ? 0 : +1);});\n\tif(items.length > 0)\n\t\tListView.create(popup,items,this.listViewTemplate);\n\telse\n\t\tcreateTiddlyElement(popup,\"div\",null,null,this.emptyText);\n};\n\n//--\n//-- Tiddler() object\n//--\n\nfunction Tiddler(title)\n{\n\tthis.title = title;\n\tthis.text = \"\";\n\tthis.creator = null;\n\tthis.modifier = null;\n\tthis.created = new Date();\n\tthis.modified = this.created;\n\tthis.links = [];\n\tthis.linksUpdated = false;\n\tthis.tags = [];\n\tthis.fields = {};\n\treturn this;\n}\n\nTiddler.prototype.getLinks = function()\n{\n\tif(this.linksUpdated==false)\n\t\tthis.changed();\n\treturn this.links;\n};\n\n// Returns the fields that are inherited in string field:\"value\" field2:\"value2\" format\nTiddler.prototype.getInheritedFields = function()\n{\n\tvar f = {};\n\tvar i;\n\tfor(i in this.fields) {\n\t\tif(i==\"server.host\" || i==\"server.workspace\" || i==\"wikiformat\"|| i==\"server.type\") {\n\t\t\tf[i] = this.fields[i];\n\t\t}\n\t}\n\treturn String.encodeHashMap(f);\n};\n\n// Increment the changeCount of a tiddler\nTiddler.prototype.incChangeCount = function()\n{\n\tvar c = this.fields['changecount'];\n\tc = c ? parseInt(c,10) : 0;\n\tthis.fields['changecount'] = String(c+1);\n};\n\n// Clear the changeCount of a tiddler\nTiddler.prototype.clearChangeCount = function()\n{\n\tif(this.fields['changecount']) {\n\t\tdelete this.fields['changecount'];\n\t}\n};\n\nTiddler.prototype.doNotSave = function()\n{\n\treturn this.fields['doNotSave'];\n};\n\n// Returns true if the tiddler has been updated since the tiddler was created or downloaded\nTiddler.prototype.isTouched = function()\n{\n\tvar changecount = this.fields.changecount || 0;\n\treturn changecount > 0;\n};\n\n// Change the text and other attributes of a tiddler\nTiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)\n{\n\tthis.assign(title,text,modifier,modified,tags,created,fields,creator);\n\tthis.changed();\n\treturn this;\n};\n\n// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call\nTiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)\n{\n\tif(title != undefined)\n\t\tthis.title = title;\n\tif(text != undefined)\n\t\tthis.text = text;\n\tif(modifier != undefined)\n\t\tthis.modifier = modifier;\n\tif(modified != undefined)\n\t\tthis.modified = modified;\n\tif(creator != undefined)\n\t\tthis.creator = creator;\n\tif(created != undefined)\n\t\tthis.created = created;\n\tif(fields != undefined)\n\t\tthis.fields = fields;\n\tif(tags != undefined)\n\t\tthis.tags = (typeof tags == \"string\") ? tags.readBracketedList() : tags;\n\telse if(this.tags == undefined)\n\t\tthis.tags = [];\n\treturn this;\n};\n\n// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)\nTiddler.prototype.getTags = function()\n{\n\treturn String.encodeTiddlyLinkList(this.tags);\n};\n\n// Test if a tiddler carries a tag\nTiddler.prototype.isTagged = function(tag)\n{\n\treturn this.tags.indexOf(tag) != -1;\n};\n\n// Static method to convert \"\\n\" to newlines, \"\\s\" to \"\\\"\nTiddler.unescapeLineBreaks = function(text)\n{\n\treturn text ? text.unescapeLineBreaks() : \"\";\n};\n\n// Convert newlines to \"\\n\", \"\\\" to \"\\s\"\nTiddler.prototype.escapeLineBreaks = function()\n{\n\treturn this.text.escapeLineBreaks();\n};\n\n// Updates the secondary information (like links[] array) after a change to a tiddler\nTiddler.prototype.changed = function()\n{\n\tthis.links = [];\n\tvar text = this.text;\n\t// remove 'quoted' text before scanning tiddler source\n\ttext = text.replace(/\\/%((?:.|\\n)*?)%\\//g,\"\").\n\t\treplace(/\\{{3}((?:.|\\n)*?)\\}{3}/g,\"\").\n\t\treplace(/\"\"\"((?:.|\\n)*?)\"\"\"/g,\"\").\n\t\treplace(/<nowiki\\>((?:.|\\n)*?)<\\/nowiki\\>/g,\"\").\n\t\treplace(/<html\\>((?:.|\\n)*?)<\\/html\\>/g,\"\").\n\t\treplace(/<script((?:.|\\n)*?)<\\/script\\>/g,\"\");\n\tvar t = this.autoLinkWikiWords() ? 0 : 1;\n\tvar tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;\n\ttiddlerLinkRegExp.lastIndex = 0;\n\tvar formatMatch = tiddlerLinkRegExp.exec(text);\n\twhile(formatMatch) {\n\t\tvar lastIndex = tiddlerLinkRegExp.lastIndex;\n\t\tif(t==0 && formatMatch[1] && formatMatch[1] != this.title) {\n\t\t\t// wikiWordLink\n\t\t\tif(formatMatch.index > 0) {\n\t\t\t\tvar preRegExp = new RegExp(config.textPrimitives.unWikiLink+\"|\"+config.textPrimitives.anyLetter,\"mg\");\n\t\t\t\tpreRegExp.lastIndex = formatMatch.index-1;\n\t\t\t\tvar preMatch = preRegExp.exec(text);\n\t\t\t\tif(preMatch.index != formatMatch.index-1)\n\t\t\t\t\tthis.links.pushUnique(formatMatch[1]);\n\t\t\t} else {\n\t\t\t\tthis.links.pushUnique(formatMatch[1]);\n\t\t\t}\n\t\t}\n\t\telse if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink\n\t\t\tthis.links.pushUnique(formatMatch[3-t]);\n\t\telse if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink\n\t\t\tthis.links.pushUnique(formatMatch[4-t]);\n\t\ttiddlerLinkRegExp.lastIndex = lastIndex;\n\t\tformatMatch = tiddlerLinkRegExp.exec(text);\n\t}\n\tthis.linksUpdated = true;\n};\n\nTiddler.prototype.getSubtitle = function()\n{\n\tvar modifier = this.modifier;\n\tif(!modifier)\n\t\tmodifier = config.messages.subtitleUnknown || \"\";\n\tvar modified = this.modified;\n\tif(modified)\n\t\tmodified = modified.toLocaleString();\n\telse\n\t\tmodified = config.messages.subtitleUnknown || \"\";\n\tvar f = config.messages.tiddlerLinkTooltip || \"%0 - %1, %2\";\n\treturn f.format([this.title,modifier,modified]);\n};\n\nTiddler.prototype.isReadOnly = function()\n{\n\treturn readOnly;\n};\n\nTiddler.prototype.autoLinkWikiWords = function()\n{\n\treturn !(this.isTagged(\"systemConfig\") || this.isTagged(\"excludeMissing\"));\n};\n\nTiddler.prototype.getServerType = function()\n{\n\tvar serverType = null;\n\tif(this.fields['server.type'])\n\t\tserverType = this.fields['server.type'];\n\tif(!serverType)\n\t\tserverType = this.fields['wikiformat'];\n\tif(serverType && !config.adaptors[serverType])\n\t\tserverType = null;\n\treturn serverType;\n};\n\nTiddler.prototype.getAdaptor = function()\n{\n\tvar serverType = this.getServerType();\n\treturn serverType ? new config.adaptors[serverType]() : null;\n};\n\n//--\n//-- TiddlyWiki instance contains TiddlerS\n//--\n\nfunction TiddlyWiki(params)\n{\n\tvar tiddlers = {}; // Hashmap by name of tiddlers\n\tif(params && params.config) {\n\t\tthis.config = config;\n\t}\n\tthis.tiddlersUpdated = false;\n\tthis.namedNotifications = []; // Array of {name:,notify:} of notification functions\n\tthis.notificationLevel = 0;\n\tthis.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.\n\tthis.clear = function() {\n\t\ttiddlers = {};\n\t\tthis.setDirty(false);\n\t};\n\tthis.fetchTiddler = function(title) {\n\t\tvar t = tiddlers[title];\n\t\treturn t instanceof Tiddler ? t : null;\n\t};\n\tthis.deleteTiddler = function(title) {\n\t\tdelete this.slices[title];\n\t\tdelete tiddlers[title];\n\t};\n\tthis.addTiddler = function(tiddler) {\n\t\tdelete this.slices[tiddler.title];\n\t\ttiddlers[tiddler.title] = tiddler;\n\t};\n\tthis.forEachTiddler = function(callback) {\n\t\tvar t;\n\t\tfor(t in tiddlers) {\n\t\t\tvar tiddler = tiddlers[t];\n\t\t\tif(tiddler instanceof Tiddler)\n\t\t\t\tcallback.call(this,t,tiddler);\n\t\t}\n\t};\n}\n\nTiddlyWiki.prototype.setDirty = function(dirty)\n{\n\tthis.dirty = dirty;\n};\n\nTiddlyWiki.prototype.isDirty = function()\n{\n\treturn this.dirty;\n};\n\nTiddlyWiki.prototype.tiddlerExists = function(title)\n{\n\tvar t = this.fetchTiddler(title);\n\treturn t != undefined;\n};\n\nTiddlyWiki.prototype.isShadowTiddler = function(title)\n{\n\treturn config.shadowTiddlers[title] === undefined ? false : true;\n};\n\nTiddlyWiki.prototype.createTiddler = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(!tiddler) {\n\t\ttiddler = new Tiddler(title);\n\t\tthis.addTiddler(tiddler);\n\t\tthis.setDirty(true);\n\t}\n\treturn tiddler;\n};\n\nTiddlyWiki.prototype.getTiddler = function(title)\n{\n\tvar t = this.fetchTiddler(title);\n\tif(t != undefined)\n\t\treturn t;\n\telse\n\t\treturn null;\n};\n\nTiddlyWiki.prototype.getShadowTiddlerText = function(title)\n{\n\tif(typeof config.shadowTiddlers[title] == \"string\")\n\t\treturn config.shadowTiddlers[title];\n\telse\n\t\treturn \"\";\n};\n\n// Retrieve tiddler contents\nTiddlyWiki.prototype.getTiddlerText = function(title,defaultText)\n{\n\tif(!title)\n\t\treturn defaultText;\n\tvar pos = title.indexOf(config.textPrimitives.sectionSeparator);\n\tvar section = null;\n\tif(pos != -1) {\n\t\tsection = title.substr(pos + config.textPrimitives.sectionSeparator.length);\n\t\ttitle = title.substr(0,pos);\n\t}\n\tpos = title.indexOf(config.textPrimitives.sliceSeparator);\n\tif(pos != -1) {\n\t\tvar slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));\n\t\tif(slice)\n\t\t\treturn slice;\n\t}\n\tvar tiddler = this.fetchTiddler(title);\n\tvar text = tiddler ? tiddler.text : null;\n\tif(!tiddler && this.isShadowTiddler(title)) {\n\t\ttext = this.getShadowTiddlerText(title);\n\t}\n\tif(text) {\n\t\tif(!section)\n\t\t\treturn text;\n\t\tvar re = new RegExp(\"(^!{1,6}[ \\t]*\" + section.escapeRegExp() + \"[ \\t]*\\n)\",\"mg\");\n\t\tre.lastIndex = 0;\n\t\tvar match = re.exec(text);\n\t\tif(match) {\n\t\t\tvar t = text.substr(match.index+match[1].length);\n\t\t\tvar re2 = /^!/mg;\n\t\t\tre2.lastIndex = 0;\n\t\t\tmatch = re2.exec(t); //# search for the next heading\n\t\t\tif(match)\n\t\t\t\tt = t.substr(0,match.index-1);//# don't include final \\n\n\t\t\treturn t;\n\t\t}\n\t\treturn defaultText;\n\t}\n\tif(defaultText != undefined)\n\t\treturn defaultText;\n\treturn null;\n};\n\nTiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)\n{\n\tvar bracketRegExp = new RegExp(\"(?:\\\\[\\\\[([^\\\\]]+)\\\\]\\\\])\",\"mg\");\n\tvar text = this.getTiddlerText(title,null);\n\tif(text == null)\n\t\treturn defaultText;\n\tvar textOut = [];\n\tvar match,lastPos = 0;\n\tdo {\n\t\tmatch = bracketRegExp.exec(text);\n\t\tif(match) {\n\t\t\ttextOut.push(text.substr(lastPos,match.index-lastPos));\n\t\t\tif(match[1]) {\n\t\t\t\tif(depth <= 0)\n\t\t\t\t\ttextOut.push(match[1]);\n\t\t\t\telse\n\t\t\t\t\ttextOut.push(this.getRecursiveTiddlerText(match[1],\"\",depth-1));\n\t\t\t}\n\t\t\tlastPos = match.index + match[0].length;\n\t\t} else {\n\t\t\ttextOut.push(text.substr(lastPos));\n\t\t}\n\t} while(match);\n\treturn textOut.join(\"\");\n};\n\n//TiddlyWiki.prototype.slicesRE = /(?:^([\\'\\/]{0,2})~?([\\.\\w]+)\\:\\1[\\t\\x20]*([^\\n]+)[\\t\\x20]*$)|(?:^\\|([\\'\\/]{0,2})~?([\\.\\w]+)\\:?\\4\\|[\\t\\x20]*([^\\n]+)[\\t\\x20]*\\|$)/gm;\nTiddlyWiki.prototype.slicesRE = /(?:^([\\'\\/]{0,2})~?([\\.\\w]+)\\:\\1[\\t\\x20]*([^\\n]*)[\\t\\x20]*$)|(?:^\\|([\\'\\/]{0,2})~?([\\.\\w]+)\\:?\\4\\|[\\t\\x20]*([^\\|\\n]*)[\\t\\x20]*\\|$)/gm;\n// @internal\nTiddlyWiki.prototype.calcAllSlices = function(title)\n{\n\tvar slices = {};\n\tvar text = this.getTiddlerText(title,\"\");\n\tthis.slicesRE.lastIndex = 0;\n\tvar m = this.slicesRE.exec(text);\n\twhile(m) {\n\t\tif(m[2])\n\t\t\tslices[m[2]] = m[3];\n\t\telse\n\t\t\tslices[m[5]] = m[6];\n\t\tm = this.slicesRE.exec(text);\n\t}\n\treturn slices;\n};\n\n// Returns the slice of text of the given name\nTiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)\n{\n\tvar slices = this.slices[title];\n\tif(!slices) {\n\t\tslices = this.calcAllSlices(title);\n\t\tthis.slices[title] = slices;\n\t}\n\treturn slices[sliceName];\n};\n\n// Build an hashmap of the specified named slices of a tiddler\nTiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)\n{\n\tvar t,r = {};\n\tfor(t=0; t<sliceNames.length; t++) {\n\t\tvar slice = this.getTiddlerSlice(title,sliceNames[t]);\n\t\tif(slice)\n\t\t\tr[sliceNames[t]] = slice;\n\t}\n\treturn r;\n};\n\nTiddlyWiki.prototype.suspendNotifications = function()\n{\n\tthis.notificationLevel--;\n};\n\nTiddlyWiki.prototype.resumeNotifications = function()\n{\n\tthis.notificationLevel++;\n};\n\n// Invoke the notification handlers for a particular tiddler\nTiddlyWiki.prototype.notify = function(title,doBlanket)\n{\n\tif(!this.notificationLevel) {\n\t    var t;\n\t\tfor(t=0; t<this.namedNotifications.length; t++) {\n\t\t\tvar n = this.namedNotifications[t];\n\t\t\tif((n.name == null && doBlanket) || (n.name == title))\n\t\t\t\tn.notify(title);\n\t\t}\n\t}\n};\n\n// Invoke the notification handlers for all tiddlers\nTiddlyWiki.prototype.notifyAll = function()\n{\n\tif(!this.notificationLevel) {\n\t    var t;\n\t\tfor(t=0; t<this.namedNotifications.length; t++) {\n\t\t\tvar n = this.namedNotifications[t];\n\t\t\tif(n.name)\n\t\t\t\tn.notify(n.name);\n\t\t}\n\t}\n};\n\n// Add a notification handler to a tiddler\nTiddlyWiki.prototype.addNotification = function(title,fn)\n{\n\tvar i;\n\tfor(i=0; i<this.namedNotifications.length; i++) {\n\t\tif((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))\n\t\t\treturn this;\n\t}\n\tthis.namedNotifications.push({name: title, notify: fn});\n\treturn this;\n};\n\nTiddlyWiki.prototype.removeTiddler = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\tthis.deleteTiddler(title);\n\t\tthis.notify(title,true);\n\t\tthis.setDirty(true);\n\t}\n};\n\n// Reset the sync status of a freshly synced tiddler\nTiddlyWiki.prototype.resetTiddler = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\ttiddler.clearChangeCount();\n\t\tthis.notify(title,true);\n\t\tthis.setDirty(true);\n\t}\n};\n\nTiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\tvar t = tiddler.tags.indexOf(tag);\n\t\tif(t != -1)\n\t\t\ttiddler.tags.splice(t,1);\n\t\tif(status)\n\t\t\ttiddler.tags.push(tag);\n\t\ttiddler.changed();\n\t\ttiddler.incChangeCount();\n\t\tthis.notify(title,true);\n\t\tthis.setDirty(true);\n\t}\n};\n\nTiddlyWiki.prototype.addTiddlerFields = function(title,fields)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(!tiddler)\n\t\treturn;\n\tmerge(tiddler.fields,fields);\n\ttiddler.changed();\n\ttiddler.incChangeCount();\n\tthis.notify(title,true);\n\tthis.setDirty(true);\n};\n\n// Store tiddler in TiddlyWiki instance\nTiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)\n{\n\tvar tiddler;\n\tif(title instanceof Tiddler) {\n\t\ttiddler = title;\n\t\ttitle = tiddler.title;\n\t\tnewTitle = title;\n\t} else {\n\t\ttiddler = this.fetchTiddler(title);\n\t\tif(tiddler) {\n\t\t\tcreated = created || tiddler.created; // Preserve created date\n\t\t\tcreator = creator || tiddler.creator;\n\t\t\tthis.deleteTiddler(title);\n\t\t} else {\n\t\t\tcreated = created || modified;\n\t\t\ttiddler = new Tiddler();\n\t\t}\n\t\tfields = merge(merge({},fields),config.defaultCustomFields,true);\n\t\ttiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);\n\t}\n\tthis.addTiddler(tiddler);\n\tif(clearChangeCount)\n\t\ttiddler.clearChangeCount();\n\telse\n\t\ttiddler.incChangeCount();\n\tif(title != newTitle)\n\t\tthis.notify(title,true);\n\tthis.notify(newTitle,true);\n\tthis.setDirty(true);\n\treturn tiddler;\n};\n\nTiddlyWiki.prototype.incChangeCount = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler)\n\t\ttiddler.incChangeCount();\n};\n\nTiddlyWiki.prototype.getLoader = function()\n{\n\tif(!this.loader)\n\t\tthis.loader = new TW21Loader();\n\treturn this.loader;\n};\n\nTiddlyWiki.prototype.getSaver = function()\n{\n\tif(!this.saver)\n\t\tthis.saver = new TW21Saver();\n\treturn this.saver;\n};\n\n// Return all tiddlers formatted as an HTML string\nTiddlyWiki.prototype.allTiddlersAsHtml = function()\n{\n\treturn this.getSaver().externalize(store);\n};\n\n// Load contents of a TiddlyWiki from an HTML DIV\nTiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)\n{\n\tthis.idPrefix = idPrefix;\n\tvar storeElem = (typeof src == \"string\") ? document.getElementById(src) : src;\n\tif(!storeElem)\n\t\treturn;\n\tvar tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);\n\tthis.setDirty(false);\n\tif(!noUpdate) {\n\t\tvar i;\n\t\tfor(i = 0;i<tiddlers.length; i++)\n\t\t\ttiddlers[i].changed();\n\t}\n\tjQuery(document).trigger(\"loadTiddlers\");\n};\n\n// Load contents of a TiddlyWiki from a string\n// Returns null if there's an error\nTiddlyWiki.prototype.importTiddlyWiki = function(text)\n{\n\tvar posDiv = locateStoreArea(text);\n\tif(!posDiv)\n\t\treturn null;\n\tvar content = \"<\" + \"html><\" + \"body>\" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + \"<\" + \"/body><\" + \"/html>\";\n\t// Create the iframe\n\tvar iframe = document.createElement(\"iframe\");\n\tiframe.style.display = \"none\";\n\tdocument.body.appendChild(iframe);\n\tvar doc = iframe.document;\n\tif(iframe.contentDocument)\n\t\tdoc = iframe.contentDocument; // For NS6\n\telse if(iframe.contentWindow)\n\t\tdoc = iframe.contentWindow.document; // For IE5.5 and IE6\n\t// Put the content in the iframe\n\tdoc.open();\n\tdoc.writeln(content);\n\tdoc.close();\n\t// Load the content into a TiddlyWiki() object\n\tvar storeArea = doc.getElementById(\"storeArea\");\n\tthis.loadFromDiv(storeArea,\"store\");\n\t// Get rid of the iframe\n\tiframe.parentNode.removeChild(iframe);\n\treturn this;\n};\n\nTiddlyWiki.prototype.updateTiddlers = function()\n{\n\tthis.tiddlersUpdated = true;\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\ttiddler.changed();\n\t});\n};\n\n// Return an array of tiddlers matching a search regular expression\nTiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)\n{\n\tvar candidates = this.reverseLookup(\"tags\",excludeTag,!!match);\n\tvar t,results = [];\n\tfor(t=0; t<candidates.length; t++) {\n\t\tif((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))\n\t\t\tresults.push(candidates[t]);\n\t}\n\tif(!sortField)\n\t\tsortField = \"title\";\n\tresults.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});\n\treturn results;\n};\n\n// Returns a list of all tags in use\n//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag\n// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances\nTiddlyWiki.prototype.getTags = function(excludeTag)\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t    var g,c;\n\t\tfor(g=0; g<tiddler.tags.length; g++) {\n\t\t\tvar tag = tiddler.tags[g];\n\t\t\tvar n = true;\n\t\t\tfor(c=0; c<results.length; c++) {\n\t\t\t\tif(results[c][0] == tag) {\n\t\t\t\t\tn = false;\n\t\t\t\t\tresults[c][1]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(n && excludeTag) {\n\t\t\t\tvar t = this.fetchTiddler(tag);\n\t\t\t\tif(t && t.isTagged(excludeTag))\n\t\t\t\t\tn = false;\n\t\t\t}\n\t\t\tif(n)\n\t\t\t\tresults.push([tag,1]);\n\t\t}\n\t});\n\tresults.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});\n\treturn results;\n};\n\n// Return an array of the tiddlers that are tagged with a given tag\nTiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)\n{\n\treturn this.reverseLookup(\"tags\",tag,true,sortField);\n};\n\nTiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)\n{\n\treturn this.reverseLookup(field,value,true,sortField);\n};\n\n// Return an array of the tiddlers that link to a given tiddler\nTiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)\n{\n\tif(!this.tiddlersUpdated)\n\t\tthis.updateTiddlers();\n\treturn this.reverseLookup(\"links\",title,true,sortField);\n};\n\n// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, \"links\" or \"tags\")\n// lookupMatch == true to match tiddlers, false to exclude tiddlers\nTiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tvar f = !lookupMatch;\n\t\tvar values;\n\t\tif([\"links\", \"tags\"].contains(lookupField)) {\n\t\t\tvalues = tiddler[lookupField];\n\t\t} else {\n\t\t\tvar accessor = TiddlyWiki.standardFieldAccess[lookupField];\n\t\t\tif(accessor) {\n\t\t\t\tvalues = [ accessor.get(tiddler) ];\n\t\t\t} else {\n\t\t\t\tvalues = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];\n\t\t\t}\n\t\t}\n\t\tvar lookup;\n\t\tfor(lookup=0; lookup<values.length; lookup++) {\n\t\t\tif(values[lookup] == lookupValue)\n\t\t\t\tf = lookupMatch;\n\t\t}\n\t\tif(f)\n\t\t\tresults.push(tiddler);\n\t});\n\tif(!sortField)\n\t\tsortField = \"title\";\n\treturn this.sortTiddlers(results,sortField);\n};\n\n// Return the tiddlers as a sorted array\nTiddlyWiki.prototype.getTiddlers = function(field,excludeTag)\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tif(excludeTag == undefined || !tiddler.isTagged(excludeTag))\n\t\t\tresults.push(tiddler);\n\t});\n\tif(field)\n\t\tresults.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});\n\treturn results;\n};\n\n// Return array of names of tiddlers that are referred to but not defined\nTiddlyWiki.prototype.getMissingLinks = function()\n{\n\tif(!this.tiddlersUpdated)\n\t\tthis.updateTiddlers();\n\tvar results = [];\n\tthis.forEachTiddler(function (title,tiddler) {\n\t\tif(tiddler.isTagged(\"excludeMissing\") || tiddler.isTagged(\"systemConfig\"))\n\t\t\treturn;\n\t\tvar n;\n\t\tfor(n=0; n<tiddler.links.length;n++) {\n\t\t\tvar link = tiddler.links[n];\n\t\t\tif(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])\n\t\t\t\tresults.pushUnique(link);\n\t\t}\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n// Return an array of names of tiddlers that are defined but not referred to\nTiddlyWiki.prototype.getOrphans = function()\n{\n\tvar results = [];\n\tthis.forEachTiddler(function (title,tiddler) {\n\t\tif(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged(\"excludeLists\"))\n\t\t\tresults.push(title);\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n// Return an array of names of all the shadow tiddlers\nTiddlyWiki.prototype.getShadowed = function()\n{\n\tvar t,results = [];\n\tfor(t in config.shadowTiddlers) {\n\t\tif(this.isShadowTiddler(t))\n\t\t\tresults.push(t);\n\t}\n\tresults.sort();\n\treturn results;\n};\n\n// Return an array of tiddlers that have been touched since they were downloaded or created\nTiddlyWiki.prototype.getTouched = function()\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tif(tiddler.isTouched())\n\t\t\tresults.push(tiddler);\n\t\t});\n\tresults.sort();\n\treturn results;\n};\n\n// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist\nTiddlyWiki.prototype.resolveTiddler = function(tiddler)\n{\n\tvar t = (typeof tiddler == \"string\") ? this.getTiddler(tiddler) : tiddler;\n\treturn t instanceof Tiddler ? t : null;\n};\n\n// Sort a list of tiddlers\nTiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)\n{\n\tvar asc = +1;\n\tswitch(field.substr(0,1)) {\n\tcase \"-\":\n\t\tasc = -1;\n\t\tfield = field.substr(1);\n\t\tbreak;\n\tcase \"+\":\n\t\tfield = field.substr(1);\n\t\tbreak;\n\t}\n\tif(TiddlyWiki.standardFieldAccess[field]) {\n\t\tif(field==\"title\") {\n\t\t\ttiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});\n\t\t} else {\n\t\t\ttiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});\n\t\t}\n\t} else {\n\t\ttiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});\n\t}\n\treturn tiddlers;\n};\n\n//--\n//-- Filter a list of tiddlers\n//--\n\nconfig.filters = {\n\ttiddler: function(results,match) {\n\t\tvar title = match[1]||match[4];\n\t\tvar tiddler = this.fetchTiddler(title);\n\t\tif(tiddler) {\n\t\t\tresults.pushUnique(tiddler);\n\t\t} else if(this.isShadowTiddler(title)) {\n\t\t\ttiddler = new Tiddler();\n\t\t\ttiddler.set(title,this.getTiddlerText(title));\n\t\t\tresults.pushUnique(tiddler);\n\t\t} else {\n\t\t\tresults.pushUnique(new Tiddler(title));\n\t\t}\n\t\treturn results;\n\t},\n\ttag: function(results,match) {\n\t\tvar m,matched = this.getTaggedTiddlers(match[3]);\n\t\tfor(m=0; m<matched.length; m++) {\n\t\t\tresults.pushUnique(matched[m]);\n\t\t}\n\t\treturn results;\n\t},\n\tsort: function(results,match) {\n\t\treturn this.sortTiddlers(results,match[3]);\n\t},\n\tlimit: function(results,match) {\n\t\treturn results.slice(0,parseInt(match[3],10));\n\t},\n\tfield: function(results,match) {\n\t\tvar m,matched = this.getValueTiddlers(match[2],match[3]);\n\t\tfor (m = 0; m < matched.length; m++) {\n\t\t\tresults.pushUnique(matched[m]);\n\t\t}\n\t\treturn results;\n\t}\n};\n\n// Filter a list of tiddlers\nTiddlyWiki.prototype.filterTiddlers = function(filter)\n{\n\tvar re = /([^\\s\\[\\]]+)|(?:\\[([ \\w\\.\\-]+)\\[([^\\]]+)\\]\\])|(?:\\[\\[([^\\]]+)\\]\\])/mg;\n\n\tvar results = [];\n\tif(filter) {\n\t\tvar match = re.exec(filter);\n\t\twhile(match) {\n\t\t\tvar handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';\n\t\t\tresults = config.filters[handler].call(this,results,match);\n\t\t\tmatch = re.exec(filter);\n\t\t}\n\t}\n\treturn results;\n};\n// Returns true if path is a valid field name (path),\n// i.e. a sequence of identifiers, separated by \".\"\nTiddlyWiki.isValidFieldName = function(name)\n{\n\tvar match = /[a-zA-Z_]\\w*(\\.[a-zA-Z_]\\w*)*/.exec(name);\n\treturn match && (match[0] == name);\n};\n\n// Throws an exception when name is not a valid field name.\nTiddlyWiki.checkFieldName = function(name)\n{\n\tif(!TiddlyWiki.isValidFieldName(name))\n\t\tthrow config.messages.invalidFieldName.format([name]);\n};\n\nfunction StringFieldAccess(n,readOnly)\n{\n\tthis.set = readOnly ?\n\t\t\tfunction(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :\n\t\t\tfunction(t,v) {if(v != t[n]) {t[n] = v; return true;}};\n\tthis.get = function(t) {return t[n];};\n}\n\nfunction DateFieldAccess(n)\n{\n\tthis.set = function(t,v) {\n\t\tvar d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);\n\t\tif(d != t[n]) {\n\t\t\tt[n] = d; return true;\n\t\t}\n\t};\n\tthis.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};\n}\n\nfunction LinksFieldAccess(n)\n{\n\tthis.set = function(t,v) {\n\t\tvar s = (typeof v == \"string\") ? v.readBracketedList() : v;\n\t\tif(s.toString() != t[n].toString()) {\n\t\t\tt[n] = s; return true;\n\t\t}\n\t};\n\tthis.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};\n}\n\nTiddlyWiki.standardFieldAccess = {\n\t// The set functions return true when setting the data has changed the value.\n\t\"title\":    new StringFieldAccess(\"title\",true),\n\t// Handle the \"tiddler\" field name as the title\n\t\"tiddler\":  new StringFieldAccess(\"title\",true),\n\t\"text\":     new StringFieldAccess(\"text\"),\n\t\"modifier\": new StringFieldAccess(\"modifier\"),\n\t\"modified\": new DateFieldAccess(\"modified\"),\n\t\"creator\":  new StringFieldAccess(\"creator\"),\n\t\"created\":  new DateFieldAccess(\"created\"),\n\t\"tags\":     new LinksFieldAccess(\"tags\")\n};\n\nTiddlyWiki.isStandardField = function(name)\n{\n\treturn TiddlyWiki.standardFieldAccess[name] != undefined;\n};\n\n// Sets the value of the given field of the tiddler to the value.\n// Setting an ExtendedField's value to null or undefined removes the field.\n// Setting a namespace to undefined removes all fields of that namespace.\n// The fieldName is case-insensitive.\n// All values will be converted to a string value.\nTiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)\n{\n\tTiddlyWiki.checkFieldName(fieldName);\n\tvar t = this.resolveTiddler(tiddler);\n\tif(!t)\n\t\treturn;\n\tfieldName = fieldName.toLowerCase();\n\tvar isRemove = (value === undefined) || (value === null);\n\tvar accessor = TiddlyWiki.standardFieldAccess[fieldName];\n\tif(accessor) {\n\t\tif(isRemove)\n\t\t\t// don't remove StandardFields\n\t\t\treturn;\n\t\tvar h = TiddlyWiki.standardFieldAccess[fieldName];\n\t\tif(!h.set(t,value))\n\t\t\treturn;\n\t} else {\n\t\tvar oldValue = t.fields[fieldName];\n\t\tif(isRemove) {\n\t\t\tif(oldValue !== undefined) {\n\t\t\t\t// deletes a single field\n\t\t\t\tdelete t.fields[fieldName];\n\t\t\t} else {\n\t\t\t\t// no concrete value is defined for the fieldName\n\t\t\t\t// so we guess this is a namespace path.\n\t\t\t\t// delete all fields in a namespace\n\t\t\t\tvar re = new RegExp(\"^\"+fieldName+\"\\\\.\");\n\t\t\t\tvar dirty = false;\n\t\t\t\tvar n;\n\t\t\t\tfor(n in t.fields) {\n\t\t\t\t\tif(n.match(re)) {\n\t\t\t\t\t\tdelete t.fields[n];\n\t\t\t\t\t\tdirty = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!dirty)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\t// the \"normal\" set case. value is defined (not null/undefined)\n\t\t\t// For convenience provide a nicer conversion Date->String\n\t\t\tvalue = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);\n\t\t\tif(oldValue == value)\n\t\t\t\treturn;\n\t\t\tt.fields[fieldName] = value;\n\t\t}\n\t}\n\t// When we are here the tiddler/store really was changed.\n\tthis.notify(t.title,true);\n\tif(!fieldName.match(/^temp\\./))\n\t\tthis.setDirty(true);\n};\n\n// Returns the value of the given field of the tiddler.\n// The fieldName is case-insensitive.\n// Will only return String values (or undefined).\nTiddlyWiki.prototype.getValue = function(tiddler,fieldName)\n{\n\tvar t = this.resolveTiddler(tiddler);\n\tif(!t)\n\t\treturn undefined;\n\tif(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {\n\t\tvar sliceType = fieldName.substr(0, 2);\n\t\tvar sliceName = fieldName.substring(2);\n\t\treturn store.getTiddlerText(\"%0%1%2\".format(t.title,sliceType,sliceName));\n\t} else {\n\t\tfieldName = fieldName.toLowerCase();\n\t\tvar accessor = TiddlyWiki.standardFieldAccess[fieldName];\n\t\tif(accessor) {\n\t\t\treturn accessor.get(t);\n\t\t}\n\t}\n\treturn t.fields[fieldName];\n};\n\n// Calls the callback function for every field in the tiddler.\n// When callback function returns a non-false value the iteration stops\n// and that value is returned.\n// The order of the fields is not defined.\n// @param callback a function(tiddler,fieldName,value).\nTiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)\n{\n\tvar t = this.resolveTiddler(tiddler);\n\tif(!t)\n\t\treturn undefined;\n\tvar n,result;\n\tfor(n in t.fields) {\n\t\tresult = callback(t,n,t.fields[n]);\n\t\tif(result)\n\t\t\treturn result;\n\t\t}\n\tif(onlyExtendedFields)\n\t\treturn undefined;\n\tfor(n in TiddlyWiki.standardFieldAccess) {\n\t\tif(n != \"tiddler\") {\n\t\t\t// even though the \"title\" field can also be referenced through the name \"tiddler\"\n\t\t\t// we only visit this field once.\n\t\t\tresult = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));\n\t\t\tif(result)\n\t\t\t\treturn result;\n\t\t}\n\t}\n\treturn undefined;\n};\n\n//--\n//-- Story functions\n//--\n\nfunction Story(containerId,idPrefix)\n{\n\tthis.container = containerId;\n\tthis.idPrefix = idPrefix;\n\tthis.highlightRegExp = null;\n\tthis.tiddlerId = function(title) {\n\t\ttitle = title.replace(/_/g, \"__\").replace(/ /g, \"_\");\n\t\tvar id = this.idPrefix + title;\n\t\treturn id==this.container ? this.idPrefix + \"_\" + title : id;\n\t};\n\tthis.containerId = function() {\n\t\treturn this.container;\n\t};\n}\n\nStory.prototype.getTiddler = function(title)\n{\n\treturn document.getElementById(this.tiddlerId(title));\n};\n\nStory.prototype.getContainer = function()\n{\n\treturn document.getElementById(this.containerId());\n};\n\nStory.prototype.forEachTiddler = function(fn)\n{\n\tvar place = this.getContainer();\n\tif(!place)\n\t\treturn;\n\tvar e = place.firstChild;\n\twhile(e) {\n\t\tvar n = e.nextSibling;\n\t\tvar title = e.getAttribute(\"tiddler\");\n\t\tif(title) {\n\t\t\tfn.call(this,title,e);\n\t\t}\n\t\te = n;\n\t}\n};\n\nStory.prototype.displayDefaultTiddlers = function()\n{\n\tthis.displayTiddlers(null,store.filterTiddlers(store.getTiddlerText(\"DefaultTiddlers\")),null,null,null,String.encodeHashMap(config.defaultCustomFields));\n};\n\nStory.prototype.displayTiddlers = function(srcElement,titles,template,animate,unused,customFields,toggle)\n{\n\tvar t;\n\tfor(t = titles.length-1;t>=0;t--)\n\t\tthis.displayTiddler(srcElement,titles[t],template,animate,unused,customFields);\n};\n\nStory.prototype.displayTiddler = function(srcElement,tiddler,template,animate,unused,customFields,toggle,animationSrc)\n{\n\tvar title = (tiddler instanceof Tiddler) ? tiddler.title : tiddler;\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem) {\n\t\tif(toggle) {\n\t\t\tif(tiddlerElem.getAttribute(\"dirty\") != \"true\")\n\t\t\t\tthis.closeTiddler(title,true);\n\t\t} else {\n\t\t\tthis.refreshTiddler(title,template,false,customFields);\n\t\t}\n\t} else {\n\t\tvar place = this.getContainer();\n\t\tvar before = this.positionTiddler(srcElement);\n\t\ttiddlerElem = this.createTiddler(place,before,title,template,customFields);\n\t}\n\tif(animationSrc && typeof animationSrc !== \"string\") {\n\t\tsrcElement = animationSrc;\n\t}\n\tif(srcElement && typeof srcElement !== \"string\") {\n\t\tif(config.options.chkAnimate && (animate == undefined || animate == true) && anim && typeof Zoomer == \"function\" && typeof Scroller == \"function\")\n\t\t\tanim.startAnimating(new Zoomer(title,srcElement,tiddlerElem),new Scroller(tiddlerElem));\n\t\telse\n\t\t\twindow.scrollTo(0,ensureVisible(tiddlerElem));\n\t}\n\treturn tiddlerElem;\n};\n\nStory.prototype.positionTiddler = function(srcElement)\n{\n\tvar place = this.getContainer();\n\tvar before = null;\n\tif(typeof srcElement == \"string\") {\n\t\tswitch(srcElement) {\n\t\tcase \"top\":\n\t\t\tbefore = place.firstChild;\n\t\t\tbreak;\n\t\tcase \"bottom\":\n\t\t\tbefore = null;\n\t\t\tbreak;\n\t\t}\n\t} else {\n\t\tvar after = this.findContainingTiddler(srcElement);\n\t\tif(after == null) {\n\t\t\tbefore = place.firstChild;\n\t\t} else if(after.nextSibling) {\n\t\t\tbefore = after.nextSibling;\n\t\t\tif(before.nodeType != 1)\n\t\t\t\tbefore = null;\n\t\t}\n\t}\n\treturn before;\n};\n\nStory.prototype.createTiddler = function(place,before,title,template,customFields)\n{\n\tvar tiddlerElem = createTiddlyElement(null,\"div\",this.tiddlerId(title),\"tiddler\");\n\ttiddlerElem.setAttribute(\"refresh\",\"tiddler\");\n\tif(customFields)\n\t\ttiddlerElem.setAttribute(\"tiddlyFields\",customFields);\n\tplace.insertBefore(tiddlerElem,before);\n\tvar defaultText = null;\n\tif(!store.tiddlerExists(title) && !store.isShadowTiddler(title))\n\t\tdefaultText = this.loadMissingTiddler(title,customFields);\n\tthis.refreshTiddler(title,template,false,customFields,defaultText);\n\treturn tiddlerElem;\n};\n\nStory.prototype.loadMissingTiddler = function(title,fields,callback)\n{\n\tvar getTiddlerCallback = function(context)\n\t{\n\t\tif(context.status) {\n\t\t\tvar t = context.tiddler;\n\t\t\tif(!t.created)\n\t\t\t\tt.created = new Date();\n\t\t\tif(!t.modified)\n\t\t\t\tt.modified = t.created;\n\t\t\tvar dirty = store.isDirty();\n\t\t\tcontext.tiddler = store.saveTiddler(t.title,t.title,t.text,t.modifier,t.modified,t.tags,t.fields,true,t.created,t.creator);\n\t\t\tif(window.location.protocol != \"file:\")\n\t\t\t\tstore.setDirty(dirty);\n\t\t\tautoSaveChanges();\n\t\t} else {\n\t\t\tstory.refreshTiddler(context.title,null,true);\n\t\t}\n\t\tcontext.adaptor.close();\n\t\tif(callback) {\n\t\t\tcallback(context);\n\t\t}\n\t};\n\tvar tiddler = new Tiddler(title);\n\ttiddler.fields = typeof fields == \"string\" ? fields.decodeHashMap() : fields||{};\n\tvar context = {serverType:tiddler.getServerType()};\n\tif(!context.serverType)\n\t\treturn \"\";\n\tcontext.host = tiddler.fields['server.host'];\n\tcontext.workspace = tiddler.fields['server.workspace'];\n\tvar adaptor = new config.adaptors[context.serverType]();\n\tadaptor.getTiddler(title,context,null,getTiddlerCallback);\n\treturn config.messages.loadingMissingTiddler.format([title,context.serverType,context.host,context.workspace]);\n};\n\nStory.prototype.chooseTemplateForTiddler = function(title,template)\n{\n\tif(!template)\n\t\ttemplate = DEFAULT_VIEW_TEMPLATE;\n\tif(template == DEFAULT_VIEW_TEMPLATE || template == DEFAULT_EDIT_TEMPLATE)\n\t\ttemplate = config.tiddlerTemplates[template];\n\treturn template;\n};\n\nStory.prototype.getTemplateForTiddler = function(title,template,tiddler)\n{\n\treturn store.getRecursiveTiddlerText(template,null,10);\n};\n\nStory.prototype.refreshTiddler = function(title,template,force,customFields,defaultText)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem) {\n\t\tif(tiddlerElem.getAttribute(\"dirty\") == \"true\" && !force)\n\t\t\treturn tiddlerElem;\n\t\ttemplate = this.chooseTemplateForTiddler(title,template);\n\t\tvar currTemplate = tiddlerElem.getAttribute(\"template\");\n\t\tif((template != currTemplate) || force) {\n\t\t\tvar tiddler = store.getTiddler(title);\n\t\t\tif(!tiddler) {\n\t\t\t\ttiddler = new Tiddler();\n\t\t\t\tif(store.isShadowTiddler(title)) {\n\t\t\t\t\tvar tags = [];\n\t\t\t\t\ttiddler.set(title,store.getTiddlerText(title),config.views.wikified.shadowModifier,version.date,tags,version.date);\n\t\t\t\t} else {\n\t\t\t\t\tvar text = template==\"EditTemplate\" ?\n\t\t\t\t\t\t\t\tconfig.views.editor.defaultText.format([title]) :\n\t\t\t\t\t\t\t\tconfig.views.wikified.defaultText.format([title]);\n\t\t\t\t\ttext = defaultText || text;\n\t\t\t\t\tvar fields = customFields ? customFields.decodeHashMap() : null;\n\t\t\t\t\ttiddler.set(title,text,config.views.wikified.defaultModifier,version.date,[],version.date,fields);\n\t\t\t\t}\n\t\t\t}\n\t\t\ttiddlerElem.setAttribute(\"tags\",tiddler.tags.join(\" \"));\n\t\t\ttiddlerElem.setAttribute(\"tiddler\",title);\n\t\t\ttiddlerElem.setAttribute(\"template\",template);\n\t\t\ttiddlerElem.onmouseover = this.onTiddlerMouseOver;\n\t\t\ttiddlerElem.onmouseout = this.onTiddlerMouseOut;\n\t\t\ttiddlerElem.ondblclick = this.onTiddlerDblClick;\n\t\t\ttiddlerElem[window.event?\"onkeydown\":\"onkeypress\"] = this.onTiddlerKeyPress;\n\t\t\ttiddlerElem.innerHTML = this.getTemplateForTiddler(title,template,tiddler);\n\t\t\tapplyHtmlMacros(tiddlerElem,tiddler);\n\t\t\tif(store.getTaggedTiddlers(title).length > 0)\n\t\t\t\tjQuery(tiddlerElem).addClass(\"isTag\");\n\t\t\telse\n\t\t\t\tjQuery(tiddlerElem).removeClass(\"isTag\");\n\t\t\tif(store.tiddlerExists(title)) {\n\t\t\t\tjQuery(tiddlerElem).removeClass(\"shadow\");\n\t\t\t\tjQuery(tiddlerElem).removeClass(\"missing\");\n\t\t\t} else {\n\t\t\t\tjQuery(tiddlerElem).addClass(store.isShadowTiddler(title) ? \"shadow\" : \"missing\");\n\t\t\t}\n\t\t\tif(customFields)\n\t\t\t\tthis.addCustomFields(tiddlerElem,customFields);\n\t\t}\n\t}\n\treturn tiddlerElem;\n};\n\nStory.prototype.addCustomFields = function(place,customFields)\n{\n\tvar fields = customFields.decodeHashMap();\n\tvar w = createTiddlyElement(place,\"div\",null,\"customFields\");\n\tw.style.display = \"none\";\n\tvar t;\n\tfor(t in fields) {\n\t\tvar e = document.createElement(\"input\");\n\t\te.setAttribute(\"type\",\"text\");\n\t\te.setAttribute(\"value\",fields[t]);\n\t\tw.appendChild(e);\n\t\te.setAttribute(\"edit\",t);\n\t}\n};\n\nStory.prototype.refreshAllTiddlers = function(force)\n{\n\tvar e = this.getContainer().firstChild;\n\twhile(e) {\n\t\tvar template = e.getAttribute(\"template\");\n\t\tif(template && e.getAttribute(\"dirty\") != \"true\") {\n\t\t\tthis.refreshTiddler(e.getAttribute(\"tiddler\"),force ? null : template,true);\n\t\t}\n\t\te = e.nextSibling;\n\t}\n};\n\nStory.prototype.onTiddlerMouseOver = function(e)\n{\n\tjQuery(this).addClass(\"selected\");\n};\n\nStory.prototype.onTiddlerMouseOut = function(e)\n{\n\tjQuery(this).removeClass(\"selected\");\n};\n\nStory.prototype.onTiddlerDblClick = function(ev)\n{\n\tvar e = ev || window.event;\n\tvar target = resolveTarget(e);\n\tif(target && target.nodeName.toLowerCase() != \"input\" && target.nodeName.toLowerCase() != \"textarea\") {\n\t\tif(document.selection && document.selection.empty)\n\t\t\tdocument.selection.empty();\n\t\tconfig.macros.toolbar.invokeCommand(this,\"defaultCommand\",e);\n\t\te.cancelBubble = true;\n\t\tif(e.stopPropagation) e.stopPropagation();\n\t\treturn true;\n\t}\n\treturn false;\n};\n\nStory.prototype.onTiddlerKeyPress = function(ev)\n{\n\tvar e = ev || window.event;\n\tclearMessage();\n\tvar consume = false;\n\tvar title = this.getAttribute(\"tiddler\");\n\tvar target = resolveTarget(e);\n\tswitch(e.keyCode) {\n\tcase 9: // Tab\n\t\tvar ed = story.getTiddlerField(title,\"text\");\n\t\tif(target.tagName.toLowerCase() == \"input\" && ed.value==config.views.editor.defaultText.format([title])) {\n\t\t\t// moving from input field and editor still contains default text, so select it\n\t\t\ted.focus();\n\t\t\ted.select();\n\t\t\tconsume = true;\n\t\t}\n\t\tif(config.options.chkInsertTabs && target.tagName.toLowerCase() == \"textarea\") {\n\t\t\treplaceSelection(target,String.fromCharCode(9));\n\t\t\tconsume = true;\n\t\t}\n\t\tif(config.isOpera) {\n\t\t\ttarget.onblur = function() {\n\t\t\t\tthis.focus();\n\t\t\t\tthis.onblur = null;\n\t\t\t};\n\t\t}\n\t\tbreak;\n\tcase 13: // Ctrl-Enter\n\tcase 10: // Ctrl-Enter on IE PC\n\tcase 77: // Ctrl-Enter is \"M\" on some platforms\n\t\tif(e.ctrlKey) {\n\t\t\tblurElement(this);\n\t\t\tconfig.macros.toolbar.invokeCommand(this,\"defaultCommand\",e);\n\t\t\tconsume = true;\n\t\t}\n\t\tbreak;\n\tcase 27: // Escape\n\t\tblurElement(this);\n\t\tconfig.macros.toolbar.invokeCommand(this,\"cancelCommand\",e);\n\t\tconsume = true;\n\t\tbreak;\n\t}\n\te.cancelBubble = consume;\n\tif(consume) {\n\t\tif(e.stopPropagation) e.stopPropagation(); // Stop Propagation\n\t\te.returnValue = true; // Cancel The Event in IE\n\t\tif(e.preventDefault ) e.preventDefault(); // Cancel The Event in Moz\n\t}\n\treturn !consume;\n};\n\nStory.prototype.getTiddlerField = function(title,field)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tvar e = null;\n\tif(tiddlerElem) {\n\t\tvar t,children = tiddlerElem.getElementsByTagName(\"*\");\n\t\tfor(t=0; t<children.length; t++) {\n\t\t\tvar c = children[t];\n\t\t\tif(c.tagName.toLowerCase() == \"input\" || c.tagName.toLowerCase() == \"textarea\") {\n\t\t\t\tif(!e)\n\t\t\t\t\te = c;\n\t\t\t\tif(c.getAttribute(\"edit\") == field)\n\t\t\t\t\te = c;\n\t\t\t}\n\t\t}\n\t}\n\treturn e;\n};\n\nStory.prototype.focusTiddler = function(title,field)\n{\n\tvar e = this.getTiddlerField(title,field);\n\tif(e) {\n\t\te.focus();\n\t\te.select();\n\t}\n};\n\nStory.prototype.blurTiddler = function(title)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem && tiddlerElem.focus && tiddlerElem.blur) {\n\t\ttiddlerElem.focus();\n\t\ttiddlerElem.blur();\n\t}\n};\n\nStory.prototype.setTiddlerField = function(title,tag,mode,field)\n{\n\tvar c = this.getTiddlerField(title,field);\n\tvar tags = c.value.readBracketedList();\n\ttags.setItem(tag,mode);\n\tc.value = String.encodeTiddlyLinkList(tags);\n};\n\nStory.prototype.setTiddlerTag = function(title,tag,mode)\n{\n\tthis.setTiddlerField(title,tag,mode,\"tags\");\n};\n\nStory.prototype.closeTiddler = function(title,animate,unused)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem) {\n\t\tclearMessage();\n\t\tthis.scrubTiddler(tiddlerElem);\n\t\tif(config.options.chkAnimate && animate && anim && typeof Slider == \"function\")\n\t\t\tanim.startAnimating(new Slider(tiddlerElem,false,null,\"all\"));\n\t\telse {\n\t\t\tjQuery(tiddlerElem).remove();\n\t\t}\n\t}\n};\n\nStory.prototype.scrubTiddler = function(tiddlerElem)\n{\n\ttiddlerElem.id = null;\n};\n\nStory.prototype.setDirty = function(title,dirty)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem)\n\t\ttiddlerElem.setAttribute(\"dirty\",dirty ? \"true\" : \"false\");\n};\n\nStory.prototype.isDirty = function(title)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem)\n\t\treturn tiddlerElem.getAttribute(\"dirty\") == \"true\";\n\treturn null;\n};\n\nStory.prototype.areAnyDirty = function()\n{\n\tvar r = false;\n\tthis.forEachTiddler(function(title,element) {\n\t\tif(this.isDirty(title))\n\t\t\tr = true;\n\t});\n\treturn r;\n};\n\nStory.prototype.closeAllTiddlers = function(exclude)\n{\n\tclearMessage();\n\tthis.forEachTiddler(function(title,element) {\n\t\tif((title != exclude) && element.getAttribute(\"dirty\") != \"true\")\n\t\t\tthis.closeTiddler(title);\n\t});\n\twindow.scrollTo(0,ensureVisible(this.container));\n};\n\nStory.prototype.isEmpty = function()\n{\n\tvar place = this.getContainer();\n\treturn place && place.firstChild == null;\n};\n\nStory.prototype.search = function(text,useCaseSensitive,useRegExp)\n{\n\tthis.closeAllTiddlers();\n\thighlightHack = new RegExp(useRegExp ? text : text.escapeRegExp(),useCaseSensitive ? \"mg\" : \"img\");\n\tvar matches = store.search(highlightHack,\"title\",\"excludeSearch\");\n\tthis.displayTiddlers(null,matches);\n\thighlightHack = null;\n\tvar q = useRegExp ? \"/\" : \"'\";\n\tif(matches.length > 0)\n\t\tdisplayMessage(config.macros.search.successMsg.format([matches.length.toString(),q + text + q]));\n\telse\n\t\tdisplayMessage(config.macros.search.failureMsg.format([q + text + q]));\n};\n\nStory.prototype.findContainingTiddler = function(e)\n{\n\twhile(e && !jQuery(e).hasClass(\"tiddler\")) {\n\t\te = jQuery(e).hasClass(\"popup\") && Popup.stack[0] ? Popup.stack[0].root : e.parentNode;\n\t}\n\treturn e;\n};\n\nStory.prototype.gatherSaveFields = function(e,fields)\n{\n\tif(e && e.getAttribute) {\n\t\tvar f = e.getAttribute(\"edit\");\n\t\tif(f)\n\t\t\tfields[f] = e.value.replace(/\\r/mg,\"\");\n\t\tif(e.hasChildNodes()) {\n\t\t\tvar t,c = e.childNodes;\n\t\t\tfor(t=0; t<c.length; t++)\n\t\t\t\tthis.gatherSaveFields(c[t],fields);\n\t\t}\n\t}\n};\n\nStory.prototype.hasChanges = function(title)\n{\n\tvar e = this.getTiddler(title);\n\tif(e) {\n\t\tvar fields = {};\n\t\tthis.gatherSaveFields(e,fields);\n\t\tif(store.fetchTiddler(title)) {\n\t\t    var n;\n\t\t\tfor(n in fields) {\n\t\t\t\tif(store.getValue(title,n) != fields[n]) //# tiddler changed\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tif(store.isShadowTiddler(title) && store.getShadowTiddlerText(title) == fields.text) { //# not checking for title or tags\n\t\t\t\treturn false;\n\t\t\t} else { //# changed shadow or new tiddler\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t}\n\treturn false;\n};\n\nStory.prototype.saveTiddler = function(title,minorUpdate)\n{\n\tvar tiddlerElem = this.getTiddler(title);\n\tif(tiddlerElem) {\n\t\tvar fields = {};\n\t\tthis.gatherSaveFields(tiddlerElem,fields);\n\t\tvar newTitle = fields.title || title;\n\t\tif(!store.tiddlerExists(newTitle)) {\n\t\t\tnewTitle = newTitle.trim();\n\t\t\tvar creator = config.options.txtUserName;\n\t\t}\n\t\tif(store.tiddlerExists(newTitle) && newTitle != title) {\n\t\t\tif(!confirm(config.messages.overwriteWarning.format([newTitle.toString()])))\n\t\t\t\treturn null;\n\t\t\t\ttitle = newTitle;\n\t\t}\n\t\tif(newTitle != title)\n\t\t\tthis.closeTiddler(newTitle,false);\n\t\ttiddlerElem.id = this.tiddlerId(newTitle);\n\t\ttiddlerElem.setAttribute(\"tiddler\",newTitle);\n\t\ttiddlerElem.setAttribute(\"template\",DEFAULT_VIEW_TEMPLATE);\n\t\ttiddlerElem.setAttribute(\"dirty\",\"false\");\n\t\tif(config.options.chkForceMinorUpdate)\n\t\t\tminorUpdate = !minorUpdate;\n\t\tif(!store.tiddlerExists(newTitle))\n\t\t\tminorUpdate = false;\n\t\tvar newDate = new Date();\n\t\tif(store.tiddlerExists(title)) {\n\t\t\tvar t = store.fetchTiddler(title);\n\t\t\tvar extendedFields = t.fields;\n\t\t\tcreator = t.creator;\n\t\t} else {\n\t\t\textendedFields = merge({},config.defaultCustomFields);\n\t\t}\n\t\tvar n;\n\t\tfor(n in fields) {\n\t\t\tif(!TiddlyWiki.isStandardField(n))\n\t\t\t\textendedFields[n] = fields[n];\n\t\t}\n\t\tvar tiddler = store.saveTiddler(title,newTitle,fields.text,minorUpdate ? undefined : config.options.txtUserName,minorUpdate ? undefined : newDate,fields.tags,extendedFields,null,null,creator);\n\t\tautoSaveChanges(null,[tiddler]);\n\t\treturn newTitle;\n\t}\n\treturn null;\n};\n\nStory.prototype.permaView = function()\n{\n\tvar links = [];\n\tthis.forEachTiddler(function(title,element) {\n\t\tlinks.push(String.encodeTiddlyLink(title));\n\t});\n\tvar t = encodeURIComponent(links.join(\" \"));\n\tif(t == \"\")\n\t\tt = \"#\";\n\tif(window.location.hash != t)\n\t\twindow.location.hash = t;\n};\n\nStory.prototype.switchTheme = function(theme)\n{\n\tif(safeMode)\n\t\treturn;\n\n\tvar isAvailable = function(title) {\n\t\tvar s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;\n\t\tif(s!=-1)\n\t\t\ttitle = title.substr(0,s);\n\t\treturn store.tiddlerExists(title) || store.isShadowTiddler(title);\n\t};\n\n\tvar getSlice = function(theme,slice) {\n\t\tvar r;\n\t\tif(readOnly)\n\t\t\tr = store.getTiddlerSlice(theme,slice+\"ReadOnly\") || store.getTiddlerSlice(theme,\"Web\"+slice);\n\t\tr = r || store.getTiddlerSlice(theme,slice);\n\t\tif(r && r.indexOf(config.textPrimitives.sectionSeparator)==0)\n\t\t\tr = theme + r;\n\t\treturn isAvailable(r) ? r : slice;\n\t};\n\n\tvar replaceNotification = function(i,name,theme,slice) {\n\t\tvar newName = getSlice(theme,slice);\n\t\tif(name!=newName && store.namedNotifications[i].name==name) {\n\t\t\tstore.namedNotifications[i].name = newName;\n\t\t\treturn newName;\n\t\t}\n\t\treturn name;\n\t};\n\n\tvar pt = config.refresherData.pageTemplate;\n\tvar vi = DEFAULT_VIEW_TEMPLATE;\n\tvar vt = config.tiddlerTemplates[vi];\n\tvar ei = DEFAULT_EDIT_TEMPLATE;\n\tvar et = config.tiddlerTemplates[ei];\n\n\tvar i;\n\tfor(i=0; i<config.notifyTiddlers.length; i++) {\n\t\tvar name = config.notifyTiddlers[i].name;\n\t\tswitch(name) {\n\t\tcase \"PageTemplate\":\n\t\t\tconfig.refresherData.pageTemplate = replaceNotification(i,config.refresherData.pageTemplate,theme,name);\n\t\t\tbreak;\n\t\tcase \"StyleSheet\":\n\t\t\tremoveStyleSheet(config.refresherData.styleSheet);\n\t\t\tconfig.refresherData.styleSheet = replaceNotification(i,config.refresherData.styleSheet,theme,name);\n\t\t\tbreak;\n\t\tcase \"ColorPalette\":\n\t\t\tconfig.refresherData.colorPalette = replaceNotification(i,config.refresherData.colorPalette,theme,name);\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t}\n\tconfig.tiddlerTemplates[vi] = getSlice(theme,\"ViewTemplate\");\n\tconfig.tiddlerTemplates[ei] = getSlice(theme,\"EditTemplate\");\n\tif(!startingUp) {\n\t\tif(config.refresherData.pageTemplate!=pt || config.tiddlerTemplates[vi]!=vt || config.tiddlerTemplates[ei]!=et) {\n\t\t\trefreshAll();\n\t\t\tthis.refreshAllTiddlers(true);\n\t\t} else {\n\t\t\tsetStylesheet(store.getRecursiveTiddlerText(config.refresherData.styleSheet,\"\",10),config.refreshers.styleSheet);\n\t\t}\n\t\tconfig.options.txtTheme = theme;\n\t\tsaveOption(\"txtTheme\");\n\t}\n};\n\n//--\n//-- Manager UI for groups of tiddlers\n//--\n\nconfig.macros.plugins.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tvar wizard = new Wizard();\n\twizard.createWizard(place,this.wizardTitle);\n\twizard.addStep(this.step1Title,this.step1Html);\n\tvar markList = wizard.getElement(\"markList\");\n\tvar listWrapper = document.createElement(\"div\");\n\tmarkList.parentNode.insertBefore(listWrapper,markList);\n\tlistWrapper.setAttribute(\"refresh\",\"macro\");\n\tlistWrapper.setAttribute(\"macroName\",\"plugins\");\n\tlistWrapper.setAttribute(\"params\",paramString);\n\tthis.refresh(listWrapper,paramString);\n};\n\nconfig.macros.plugins.refresh = function(listWrapper,params)\n{\n\tvar me = config.macros.plugins;\n\tvar wizard = new Wizard(listWrapper);\n\tvar selectedRows = [];\n\tListView.forEachSelector(listWrapper,function(e,rowName) {\n\t\t\tif(e.checked)\n\t\t\t\tselectedRows.push(e.getAttribute(\"rowName\"));\n\t\t});\n\tjQuery(listWrapper).empty();\n\tparams = params.parseParams(\"anon\");\n\tvar plugins = installedPlugins.slice(0);\n\tvar t,tiddler,p;\n\tvar configTiddlers = store.getTaggedTiddlers(\"systemConfig\");\n\tfor(t=0; t<configTiddlers.length; t++) {\n\t\ttiddler = configTiddlers[t];\n\t\tif(plugins.findByField(\"title\",tiddler.title) == null) {\n\t\t\tp = getPluginInfo(tiddler);\n\t\t\tp.executed = false;\n\t\t\tp.log.splice(0,0,this.skippedText);\n\t\t\tplugins.push(p);\n\t\t}\n\t}\n\tfor(t=0; t<plugins.length; t++) {\n\t\tp = plugins[t];\n\t\tp.size = p.tiddler.text ? p.tiddler.text.length : 0;\n\t\tp.forced = p.tiddler.isTagged(\"systemConfigForce\");\n\t\tp.disabled = p.tiddler.isTagged(\"systemConfigDisable\");\n\t\tp.Selected = selectedRows.indexOf(plugins[t].title) != -1;\n\t}\n\tif(plugins.length == 0) {\n\t\tcreateTiddlyElement(listWrapper,\"em\",null,null,this.noPluginText);\n\t\twizard.setButtons([]);\n\t} else {\n\t\tvar template = readOnly ? this.listViewTemplateReadOnly : this.listViewTemplate;\n\t\tvar listView = ListView.create(listWrapper,plugins,template,this.onSelectCommand);\n\t\twizard.setValue(\"listView\",listView);\n\t\tif(!readOnly) {\n\t\t\twizard.setButtons([\n\t\t\t\t{caption: me.removeLabel, tooltip: me.removePrompt, onClick: me.doRemoveTag},\n\t\t\t\t{caption: me.deleteLabel, tooltip: me.deletePrompt, onClick: me.doDelete}\n\t\t\t]);\n\t\t}\n\t}\n};\n\nconfig.macros.plugins.doRemoveTag = function(e)\n{\n\tvar wizard = new Wizard(this);\n\tvar listView = wizard.getValue(\"listView\");\n\tvar rowNames = ListView.getSelectedRows(listView);\n\tif(rowNames.length == 0) {\n\t\talert(config.messages.nothingSelected);\n\t} else {\n\t\tvar t;\n\t\tfor(t=0; t<rowNames.length; t++) {\n\t\t\tstore.setTiddlerTag(rowNames[t],false,\"systemConfig\");\n\t\t}\n\t\tautoSaveChanges();\n\t}\n};\n\nconfig.macros.plugins.doDelete = function(e)\n{\n\tvar wizard = new Wizard(this);\n\tvar listView = wizard.getValue(\"listView\");\n\tvar rowNames = ListView.getSelectedRows(listView);\n\tif(rowNames.length == 0) {\n\t\talert(config.messages.nothingSelected);\n\t} else {\n\t\tif(confirm(config.macros.plugins.confirmDeleteText.format([rowNames.join(\", \")]))) {\n\t\t\tvar t;\n\t\t\tfor(t=0; t<rowNames.length; t++) {\n\t\t\t\tstore.removeTiddler(rowNames[t]);\n\t\t\t\tstory.closeTiddler(rowNames[t],true);\n\t\t\t}\n\t\t}\n\t\tautoSaveChanges();\n\t}\n};\n\n//--\n//-- Message area\n//--\n\nfunction getMessageDiv()\n{\n\tvar msgArea = document.getElementById(\"messageArea\");\n\tif(!msgArea)\n\t\treturn null;\n\tif(!msgArea.hasChildNodes())\n\t\tcreateTiddlyButton(createTiddlyElement(msgArea,\"div\",null,\"messageToolbar\"),\n\t\t\tconfig.messages.messageClose.text,\n\t\t\tconfig.messages.messageClose.tooltip,\n\t\t\tclearMessage);\n\tmsgArea.style.display = \"block\";\n\treturn createTiddlyElement(msgArea,\"div\");\n}\n\nfunction displayMessage(text,linkText)\n{\n\tvar e = getMessageDiv();\n\tif(!e) {\n\t\talert(text);\n\t\treturn;\n\t}\n\tif(linkText) {\n\t\tvar link = createTiddlyElement(e,\"a\",null,null,text);\n\t\tlink.href = linkText;\n\t\tlink.target = \"_blank\";\n\t} else {\n\t\te.appendChild(document.createTextNode(text));\n\t}\n}\n\nfunction clearMessage()\n{\n\tvar msgArea = document.getElementById(\"messageArea\");\n\tif(msgArea) {\n\t\tjQuery(msgArea).empty();\n\t\tmsgArea.style.display = \"none\";\n\t}\n\treturn false;\n}\n\n//--\n//-- Refresh mechanism\n//--\n\nconfig.notifyTiddlers = [\n\t{name: \"SystemSettings\", notify: onSystemSettingsChange},\n\t{name: \"StyleSheetLayout\", notify: refreshStyles},\n\t{name: \"StyleSheetColors\", notify: refreshStyles},\n\t{name: \"StyleSheet\", notify: refreshStyles},\n\t{name: \"StyleSheetPrint\", notify: refreshStyles},\n\t{name: \"PageTemplate\", notify: refreshPageTemplate},\n\t{name: \"SiteTitle\", notify: refreshPageTitle},\n\t{name: \"SiteSubtitle\", notify: refreshPageTitle},\n\t{name: \"WindowTitle\", notify: refreshPageTitle},\n\t{name: \"ColorPalette\", notify: refreshColorPalette},\n\t{name: null, notify: refreshDisplay}\n];\n\nconfig.refreshers = {\n\tlink: function(e,changeList)\n\t\t{\n\t\tvar title = e.getAttribute(\"tiddlyLink\");\n\t\trefreshTiddlyLink(e,title);\n\t\treturn true;\n\t\t},\n\n\ttiddler: function(e,changeList)\n\t\t{\n\t\tvar title = e.getAttribute(\"tiddler\");\n\t\tvar template = e.getAttribute(\"template\");\n\t\tif(changeList && (changeList.indexOf && changeList.indexOf(title) != -1) && !story.isDirty(title))\n\t\t\tstory.refreshTiddler(title,template,true);\n\t\telse\n\t\t\trefreshElements(e,changeList);\n\t\treturn true;\n\t\t},\n\n\tcontent: function(e,changeList)\n\t\t{\n\t\tvar title = e.getAttribute(\"tiddler\");\n\t\tvar force = e.getAttribute(\"force\");\n\t\tvar args = e.getAttribute(\"args\");\n\t\tif(force != null || changeList == null || (changeList.indexOf && changeList.indexOf(title) != -1)) {\n\t\t\tjQuery(e).empty();\n\t\t\tconfig.macros.tiddler.transclude(e,title,args);\n\t\t\treturn true;\n\t\t} else\n\t\t\treturn false;\n\t\t},\n\n\tmacro: function(e,changeList)\n\t\t{\n\t\tvar macro = e.getAttribute(\"macroName\");\n\t\tvar params = e.getAttribute(\"params\");\n\t\tif(macro)\n\t\t\tmacro = config.macros[macro];\n\t\tif(macro && macro.refresh)\n\t\t\tmacro.refresh(e,params);\n\t\treturn true;\n\t\t}\n};\n\nconfig.refresherData = {\n\tstyleSheet: \"StyleSheet\",\n\tdefaultStyleSheet: \"StyleSheet\",\n\tpageTemplate: \"PageTemplate\",\n\tdefaultPageTemplate: \"PageTemplate\",\n\tcolorPalette: \"ColorPalette\",\n\tdefaultColorPalette: \"ColorPalette\"\n};\n\nfunction refreshElements(root,changeList)\n{\n\tvar c,nodes = root.childNodes;\n\tfor(c=0; c<nodes.length; c++) {\n\t\tvar e = nodes[c], type = null;\n\t\tif(e.getAttribute && (e.tagName ? e.tagName != \"IFRAME\" : true))\n\t\t\ttype = e.getAttribute(\"refresh\");\n\t\tvar refresher = config.refreshers[type];\n\t\tvar refreshed = false;\n\t\tif(refresher != undefined)\n\t\t\trefreshed = refresher(e,changeList);\n\t\tif(e.hasChildNodes() && !refreshed)\n\t\t\trefreshElements(e,changeList);\n\t}\n}\n\nfunction applyHtmlMacros(root,tiddler)\n{\n\tvar e = root.firstChild;\n\twhile(e) {\n\t\tvar nextChild = e.nextSibling;\n\t\tif(e.getAttribute) {\n\t\t\tvar macro = e.getAttribute(\"macro\");\n\t\t\tif(macro) {\n\t\t\t\te.removeAttribute(\"macro\");\n\t\t\t\tvar params = \"\";\n\t\t\t\tvar p = macro.indexOf(\" \");\n\t\t\t\tif(p != -1) {\n\t\t\t\t\tparams = macro.substr(p+1);\n\t\t\t\t\tmacro = macro.substr(0,p);\n\t\t\t\t}\n\t\t\t\tinvokeMacro(e,macro,params,null,tiddler);\n\t\t\t}\n\t\t}\n\t\tif(e.hasChildNodes())\n\t\t\tapplyHtmlMacros(e,tiddler);\n\t\te = nextChild;\n\t}\n}\n\nfunction refreshPageTemplate(title)\n{\n\tvar stash = jQuery(\"<div/>\").appendTo(\"body\").hide()[0];\n\tvar display = story.getContainer();\n\tvar nodes,t;\n\tif(display) {\n\t\tnodes = display.childNodes;\n\t\tfor(t=nodes.length-1; t>=0; t--)\n\t\t\tstash.appendChild(nodes[t]);\n\t}\n\tvar wrapper = document.getElementById(\"contentWrapper\");\n\n\tvar isAvailable = function(title) {\n\t\tvar s = title ? title.indexOf(config.textPrimitives.sectionSeparator) : -1;\n\t\tif(s!=-1)\n\t\t\ttitle = title.substr(0,s);\n\t\treturn store.tiddlerExists(title) || store.isShadowTiddler(title);\n\t};\n\tif(!title || !isAvailable(title))\n\t\ttitle = config.refresherData.pageTemplate;\n\tif(!isAvailable(title))\n\t\ttitle = config.refresherData.defaultPageTemplate; //# this one is always avaialable\n\twrapper.innerHTML = store.getRecursiveTiddlerText(title,null,10);\n\tapplyHtmlMacros(wrapper);\n\trefreshElements(wrapper);\n\tdisplay = story.getContainer();\n\tjQuery(display).empty();\n\tif(!display)\n\t\tdisplay = createTiddlyElement(wrapper,\"div\",story.containerId());\n\tnodes = stash.childNodes;\n\tfor(t=nodes.length-1; t>=0; t--)\n\t\tdisplay.appendChild(nodes[t]);\n\tjQuery(stash).remove();\n}\n\nfunction refreshDisplay(hint)\n{\n\tif(typeof hint == \"string\")\n\t\thint = [hint];\n\tvar e = document.getElementById(\"contentWrapper\");\n\trefreshElements(e,hint);\n\tif(backstage.isPanelVisible()) {\n\t\te = document.getElementById(\"backstage\");\n\t\trefreshElements(e,hint);\n\t}\n}\n\nfunction refreshPageTitle()\n{\n\tdocument.title = getPageTitle();\n}\n\nfunction getPageTitle()\n{\n\treturn wikifyPlainText(store.getTiddlerText(\"WindowTitle\",\"\"),null,tiddler);\n}\n\nfunction refreshStyles(title,doc)\n{\n\tsetStylesheet(title == null ? \"\" : store.getRecursiveTiddlerText(title,\"\",10),title,doc || document);\n}\n\nfunction refreshColorPalette(title)\n{\n\tif(!startingUp)\n\t\trefreshAll();\n}\n\nfunction refreshAll()\n{\n\trefreshPageTemplate();\n\trefreshDisplay();\n\trefreshStyles(\"StyleSheetLayout\");\n\trefreshStyles(\"StyleSheetColors\");\n\trefreshStyles(config.refresherData.styleSheet);\n\trefreshStyles(\"StyleSheetPrint\");\n}\n\n//--\n//-- Option handling\n//--\n\nconfig.optionHandlers = {\n\t'txt': {\n\t\tget: function(name) {return encodeCookie(config.options[name].toString());},\n\t\tset: function(name,value) {config.options[name] = decodeCookie(value);}\n\t},\n\t'chk': {\n\t\tget: function(name) {return config.options[name] ? 'true' : 'false';},\n\t\tset: function(name,value) {config.options[name] = value == 'true';}\n\t}\n};\n\nfunction setOption(name,value)\n{\n\tvar optType = name.substr(0,3);\n\tif(config.optionHandlers[optType] && config.optionHandlers[optType].set)\n\t\tconfig.optionHandlers[optType].set(name,value);\n}\n\n// Gets the value of an option as a string. Most code should just read from config.options.* directly\nfunction getOption(name)\n{\n\tvar optType = name.substr(0,3);\n\treturn config.optionHandlers[optType] && config.optionHandlers[optType].get ? config.optionHandlers[optType].get(name) : null;\n}\n\nfunction loadOptions()\n{\n\tif(safeMode)\n\t\treturn;\n\tloadCookies();\n\tloadSystemSettings();\n}\n// @Deprecated; retained for backwards compatibility\nvar loadOptionsCookie = loadOptions;\n\nfunction getCookies()\n{\n\tvar cookieList = document.cookie.split(';');\n\tvar i,cookies = {};\n\tfor(i=0; i<cookieList.length; i++) {\n\t\tvar p = cookieList[i].indexOf('=');\n\t\tif(p != -1) {\n\t\t\tvar name = cookieList[i].substr(0,p).trim();\n\t\t\tvar value = cookieList[i].substr(p+1).trim();\n\t\t\tcookies[name] = value;\n\t\t}\n\t}\n\treturn cookies;\n}\n\nfunction loadCookies()\n{\n\tvar i,cookies = getCookies();\n\tif(cookies['TiddlyWiki']) {\n\t\tcookies = cookies['TiddlyWiki'].decodeHashMap();\n\t}\n\tfor(i in cookies) {\n\t\tif(config.optionsSource[i] != 'setting') {\n\t\t\tsetOption(i,cookies[i]);\n\t\t}\n\t}\n}\n\nfunction loadSystemSettings()\n{\n\tvar key,settings = store.calcAllSlices('SystemSettings');\n\tconfig.optionsSource = {};\n\tfor(key in settings) {\n\t\tsetOption(key,settings[key]);\n\t\tconfig.optionsSource[key] = 'setting';\n\t}\n}\n\nfunction onSystemSettingsChange()\n{\n\tif(!startingUp) {\n\t\tloadSystemSettings();\n\t}\n}\n\nfunction saveOption(name)\n{\n\tif(safeMode)\n\t\treturn;\n\tif(name.match(/[()\\s]/g, '_')) {\n\t\talert(config.messages.invalidCookie.format([name]));\n\t\treturn;\n\t}\n\tsaveCookie(name);\n\tif(config.optionsSource[name] == 'setting') {\n\t\tsaveSystemSetting(name,true);\n\t}\n}\n// @Deprecated; retained for backwards compatibility\nvar saveOptionCookie = saveOption;\n\nfunction removeCookie(name)\n{\n\tdocument.cookie = name + '=; expires=Thu, 01-Jan-1970 00:00:01 UTC; path=/;';\n}\n\nfunction saveCookie(name)\n{\n\tvar key,cookies = {};\n\tfor(key in config.options) {\n\t\tvar value = getOption(key);\n\t\tvalue = value == null ? 'false' : value;\n\t\tcookies[key] = value;\n\t}\n\tdocument.cookie = 'TiddlyWiki=' + String.encodeHashMap(cookies) + '; expires=Fri, 1 Jan 2038 12:00:00 UTC; path=/';\n\tcookies = getCookies();\n\tvar c;\n\tfor(c in cookies) {\n\t\tvar optType = c.substr(0,3);\n\t\tif(config.optionHandlers[optType])\n\t\t\tremoveCookie(c);\n\t}\n}\n\nvar systemSettingSave;\nfunction commitSystemSettings(storeWasDirty)\n{\n\tif(systemSettingSave) {\n\t\twindow.clearTimeout(systemSettingSave);\n\t}\n\tsystemSettingSave = window.setTimeout(function() {\n\t\tvar tiddler = store.getTiddler('SystemSettings');\n\t\tautoSaveChanges(null,[tiddler]);\n\t}, 1000);\n}\n\nfunction saveSystemSetting(name,saveFile)\n{\n\tvar title = 'SystemSettings';\n\tvar slice = store.getTiddlerSlice(title,name);\n\tif(readOnly || slice === getOption(name)) {\n\t\treturn; //# don't save if read-only or the option hasn't changed\n\t}\n\tvar slices = store.calcAllSlices(title);\n\tvar key;\n\tfor(key in config.optionsSource) {\n\t\tvar value = getOption(key) || '';\n\t\tif(slices[key] !== value) {\n\t\t\tslices[key] = value;\n\t\t}\n\t}\n\tvar text = [];\n\tfor(key in slices) {\n\t\ttext.push('%0: %1'.format([key,slices[key]]));\n\t}\n\ttext = text.sort().join('\\n');\n\tvar storeWasDirty = store.isDirty();\n\tvar tiddler = store.getTiddler(title);\n\tif(tiddler) {\n\t\ttiddler.text = text;\n\t\ttiddler = store.saveTiddler(tiddler);\n\t} else {\n\t\ttiddler = store.saveTiddler(title,title,text,'System',new Date(),['excludeLists'],config.defaultCustomFields);\n\t}\n\tif(saveFile) {\n\t\tcommitSystemSettings(storeWasDirty);\n\t}\n}\n\nfunction encodeCookie(s)\n{\n\treturn escape(convertUnicodeToHtmlEntities(s));\n}\n\nfunction decodeCookie(s)\n{\n\ts = unescape(s);\n\tvar re = /&#[0-9]{1,5};/g;\n\treturn s.replace(re,function($0) {return String.fromCharCode(eval($0.replace(/[&#;]/g,'')));});\n}\n\nconfig.macros.option.genericCreate = function(place,type,opt,className,desc)\n{\n\tvar typeInfo = config.macros.option.types[type];\n\tvar c = document.createElement(typeInfo.elementType);\n\tif(typeInfo.typeValue)\n\t\tc.setAttribute('type',typeInfo.typeValue);\n\tc[typeInfo.eventName] = typeInfo.onChange;\n\tc.setAttribute('option',opt);\n\tc.className = className || typeInfo.className;\n\tif(config.optionsDesc[opt])\n\t\tc.setAttribute('title',config.optionsDesc[opt]);\n\tplace.appendChild(c);\n\tif(desc != 'no')\n\t\tcreateTiddlyText(place,config.optionsDesc[opt] || opt);\n\tc[typeInfo.valueField] = config.options[opt];\n\treturn c;\n};\n\nconfig.macros.option.genericOnChange = function(e)\n{\n\tvar opt = this.getAttribute('option');\n\tif(opt) {\n\t\tvar optType = opt.substr(0,3);\n\t\tvar handler = config.macros.option.types[optType];\n\t\tif(handler.elementType && handler.valueField)\n\t\t\tconfig.macros.option.propagateOption(opt,handler.valueField,this[handler.valueField],handler.elementType,this);\n\t}\n\treturn true;\n};\n\nconfig.macros.option.types = {\n\t'txt': {\n\t\telementType: 'input',\n\t\tvalueField: 'value',\n\t\teventName: 'onchange',\n\t\tclassName: 'txtOptionInput',\n\t\tcreate: config.macros.option.genericCreate,\n\t\tonChange: config.macros.option.genericOnChange\n\t},\n\t'chk': {\n\t\telementType: 'input',\n\t\tvalueField: 'checked',\n\t\teventName: 'onclick',\n\t\tclassName: 'chkOptionInput',\n\t\ttypeValue: 'checkbox',\n\t\tcreate: config.macros.option.genericCreate,\n\t\tonChange: config.macros.option.genericOnChange\n\t}\n};\n\nconfig.macros.option.propagateOption = function(opt,valueField,value,elementType,elem)\n{\n\tconfig.options[opt] = value;\n\tsaveOption(opt);\n\tvar t,nodes = document.getElementsByTagName(elementType);\n\tfor(t=0; t<nodes.length; t++) {\n\t\tvar optNode = nodes[t].getAttribute('option');\n\t\tif(opt == optNode && nodes[t]!=elem)\n\t\t\tnodes[t][valueField] = value;\n\t}\n};\n\nconfig.macros.option.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tparams = paramString.parseParams('anon',null,true,false,false);\n\tvar opt = (params[1] && params[1].name == 'anon') ? params[1].value : getParam(params,'name',null);\n\tvar className = (params[2] && params[2].name == 'anon') ? params[2].value : getParam(params,'class',null);\n\tvar desc = getParam(params,'desc','no');\n\tvar type = opt.substr(0,3);\n\tvar h = config.macros.option.types[type];\n\tif(h && h.create)\n\t\th.create(place,type,opt,className,desc);\n};\n\nconfig.macros.options.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tparams = paramString.parseParams('anon',null,true,false,false);\n\tvar showUnknown = getParam(params,'showUnknown','no');\n\tvar wizard = new Wizard();\n\twizard.createWizard(place,this.wizardTitle);\n\twizard.addStep(this.step1Title,this.step1Html);\n\tvar markList = wizard.getElement('markList');\n\tvar chkUnknown = wizard.getElement('chkUnknown');\n\tchkUnknown.checked = showUnknown == 'yes';\n\tchkUnknown.onchange = this.onChangeUnknown;\n\tvar listWrapper = document.createElement('div');\n\tmarkList.parentNode.insertBefore(listWrapper,markList);\n\twizard.setValue('listWrapper',listWrapper);\n\tthis.refreshOptions(listWrapper,showUnknown == 'yes');\n};\n\nconfig.macros.options.refreshOptions = function(listWrapper,showUnknown)\n{\n\tvar n,opts = [];\n\tfor(n in config.options) {\n\t\tvar opt = {};\n\t\topt.option = '';\n\t\topt.name = n;\n\t\topt.lowlight = !config.optionsDesc[n];\n\t\topt.description = opt.lowlight ? this.unknownDescription : config.optionsDesc[n];\n\t\tif(!opt.lowlight || showUnknown)\n\t\t\topts.push(opt);\n\t}\n\topts.sort(function(a,b) {return a.name.substr(3) < b.name.substr(3) ? -1 : (a.name.substr(3) == b.name.substr(3) ? 0 : +1);});\n\tListView.create(listWrapper,opts,this.listViewTemplate);\n\tfor(n=0; n<opts.length; n++) {\n\t\tvar type = opts[n].name.substr(0,3);\n\t\tvar h = config.macros.option.types[type];\n\t\tif(h && h.create) {\n\t\t\th.create(opts[n].colElements['option'],type,opts[n].name,null,'no');\n\t\t}\n\t}\n};\n\nconfig.macros.options.onChangeUnknown = function(e)\n{\n\tvar wizard = new Wizard(this);\n\tvar listWrapper = wizard.getValue('listWrapper');\n\tjQuery(listWrapper).empty();\n\tconfig.macros.options.refreshOptions(listWrapper,this.checked);\n\treturn false;\n};\n\n// If there are unsaved changes, force the user to confirm before exitting\nfunction confirmExit()\n{\n\thadConfirmExit = true;\n\tif((store && store.isDirty && store.isDirty()) || (story && story.areAnyDirty && story.areAnyDirty()))\n\t\treturn config.messages.confirmExit;\n}\n\n// Give the user a chance to save changes before exitting\nfunction checkUnsavedChanges()\n{\n\tif(store && store.isDirty && store.isDirty() && window.hadConfirmExit === false) {\n\t\tif(confirm(config.messages.unsavedChangesWarning))\n\t\t\tsaveChanges();\n\t}\n}\n\nfunction saveChanges() {\n\t// expects to be implemented elsewhere\n}\n\nfunction autoSaveChanges(onlyIfDirty,tiddlers)\n{\n\tif(config.options.chkAutoSave)\n\t\tsaveChanges(onlyIfDirty,tiddlers);\n}\n//--\n//-- Filesystem utilities\n//--\nfunction convertUTF8ToUnicode(u)\n{\n\treturn config.browser.isOpera || !window.netscape ? manualConvertUTF8ToUnicode(u) : mozConvertUTF8ToUnicode(u);\n}\n\nfunction manualConvertUTF8ToUnicode(utf)\n{\n\tvar uni = utf;\n\tvar src = 0;\n\tvar dst = 0;\n\tvar b1, b2, b3;\n\tvar c;\n\twhile(src < utf.length) {\n\t\tb1 = utf.charCodeAt(src++);\n\t\tif(b1 < 0x80) {\n\t\t\tdst++;\n\t\t} else if(b1 < 0xE0) {\n\t\t\tb2 = utf.charCodeAt(src++);\n\t\t\tc = String.fromCharCode(((b1 & 0x1F) << 6) | (b2 & 0x3F));\n\t\t\tuni = uni.substring(0,dst++).concat(c,utf.substr(src));\n\t\t} else {\n\t\t\tb2 = utf.charCodeAt(src++);\n\t\t\tb3 = utf.charCodeAt(src++);\n\t\t\tc = String.fromCharCode(((b1 & 0xF) << 12) | ((b2 & 0x3F) << 6) | (b3 & 0x3F));\n\t\t\tuni = uni.substring(0,dst++).concat(c,utf.substr(src));\n\t\t}\n\t}\n\treturn uni;\n}\n\nfunction mozConvertUTF8ToUnicode(u)\n{\n\ttry {\n\t\tnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalXPConnect\");\n\t\tvar converter = Components.classes[\"@mozilla.org/intl/scriptableunicodeconverter\"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);\n\t\tconverter.charset = \"UTF-8\";\n\t} catch(ex) {\n\t\treturn manualConvertUTF8ToUnicode(u);\n\t} // fallback\n\tvar s = converter.ConvertToUnicode(u);\n\tvar fin = converter.Finish();\n\treturn fin.length > 0 ? s+fin : s;\n}\n\nfunction convertUnicodeToFileFormat(s)\n{\n\treturn config.browser.isOpera || !window.netscape ? (config.browser.isIE ? convertUnicodeToHtmlEntities(s) : s) : mozConvertUnicodeToUTF8(s);\n}\n\nfunction convertUnicodeToHtmlEntities(s)\n{\n\tvar re = /[^\\u0000-\\u007F]/g;\n\treturn s.replace(re,function($0) {return \"&#\" + $0.charCodeAt(0).toString() + \";\";});\n}\n\nfunction convertUnicodeToUTF8(s)\n{\n// return convertUnicodeToFileFormat to allow plugin migration\n\treturn convertUnicodeToFileFormat(s);\n}\n\nfunction manualConvertUnicodeToUTF8(s)\n{\n\treturn unescape(encodeURIComponent(s));\n}\n\nfunction mozConvertUnicodeToUTF8(s)\n{\n\ttry {\n\t\tnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalXPConnect\");\n\t\tvar converter = Components.classes[\"@mozilla.org/intl/scriptableunicodeconverter\"].createInstance(Components.interfaces.nsIScriptableUnicodeConverter);\n\t\tconverter.charset = \"UTF-8\";\n\t} catch(ex) {\n\t\treturn manualConvertUnicodeToUTF8(s);\n\t} // fallback\n\tvar u = converter.ConvertFromUnicode(s);\n\tvar fin = converter.Finish();\n\treturn fin.length > 0 ? u + fin : u;\n}\n\nfunction convertUriToUTF8(uri,charSet)\n{\n\tif(window.netscape == undefined || charSet == undefined || charSet == \"\")\n\t\treturn uri;\n\ttry {\n\t\tnetscape.security.PrivilegeManager.enablePrivilege(\"UniversalXPConnect\");\n\t\tvar converter = Components.classes[\"@mozilla.org/intl/utf8converterservice;1\"].getService(Components.interfaces.nsIUTF8ConverterService);\n\t} catch(ex) {\n\t\treturn uri;\n\t}\n\treturn converter.convertURISpecToUTF8(uri,charSet);\n}\n//--\n//-- Server adaptor base class\n//--\n\nfunction AdaptorBase()\n{\n\tthis.host = null;\n\tthis.store = null;\n\treturn this;\n}\n\nAdaptorBase.prototype.close = function()\n{\n\treturn true;\n};\n\nAdaptorBase.prototype.fullHostName = function(host)\n{\n\tif(!host)\n\t\treturn '';\n\thost = host.trim();\n\tif(!host.match(/:\\/\\//))\n\t\thost = 'http://' + host;\n\tif(host.substr(host.length-1) == '/')\n\t\thost = host.substr(0,host.length-1);\n\treturn host;\n};\n\nAdaptorBase.minHostName = function(host)\n{\n\treturn host;\n};\n\nAdaptorBase.prototype.setContext = function(context,userParams,callback)\n{\n\tif(!context) context = {};\n\tcontext.userParams = userParams;\n\tif(callback) context.callback = callback;\n\tcontext.adaptor = this;\n\tif(!context.host)\n\t\tcontext.host = this.host;\n\tcontext.host = this.fullHostName(context.host);\n\tif(!context.workspace)\n\t\tcontext.workspace = this.workspace;\n\treturn context;\n};\n\n// Open the specified host\nAdaptorBase.prototype.openHost = function(host,context,userParams,callback)\n{\n\tthis.host = host;\n\tcontext = this.setContext(context,userParams,callback);\n\tcontext.status = true;\n\tif(callback)\n\t\twindow.setTimeout(function() {context.callback(context,userParams);},10);\n\treturn true;\n};\n\n// Open the specified workspace\nAdaptorBase.prototype.openWorkspace = function(workspace,context,userParams,callback)\n{\n\tthis.workspace = workspace;\n\tcontext = this.setContext(context,userParams,callback);\n\tcontext.status = true;\n\tif(callback)\n\t\twindow.setTimeout(function() {callback(context,userParams);},10);\n\treturn true;\n};\n\n//--\n//-- HTTP request code\n//--\n\nfunction ajaxReq(args)\n{\n\tif(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf(\"http\") == -1)\n\t\twindow.netscape.security.PrivilegeManager.enablePrivilege(\"UniversalBrowserRead\");\n\treturn jQuery.ajax(args);\n}\n\nfunction httpReq(type,url,callback,params,headers,data,contentType,username,password,allowCache)\n{\n\tvar httpSuccess = function(xhr) {\n\t\ttry {\n\t\t\t// IE error sometimes returns 1223 when it should be 204 so treat it as success, see #1450\n\t\t\treturn (!xhr.status && location.protocol === \"file:\") ||\n\t\t\t\t(xhr.status >= 200 && xhr.status < 300) ||\n\t\t\t\txhr.status === 304 || xhr.status === 1223;\n\t\t} catch(e) {}\n\t\treturn false;\n\t};\n\n\tvar options = {\n\t\ttype:type,\n\t\turl:url,\n\t\tprocessData:false,\n\t\tdata:data,\n\t\tcache:!!allowCache,\n\t\tbeforeSend: function(xhr) {\n\t\t\tvar i;\n\t\t\tfor(i in headers)\n\t\t\t\txhr.setRequestHeader(i,headers[i]);\n\t\t\txhr.setRequestHeader(\"X-Requested-With\", \"TiddlyWiki \" + formatVersion());\n\t\t}\n\t};\n\n\tif(callback) {\n\t\toptions.complete = function(xhr,textStatus) {\n\t\t\tif(httpSuccess(xhr))\n\t\t\t\tcallback(true,params,xhr.responseText,url,xhr);\n\t\t\telse\n\t\t\t\tcallback(false,params,null,url,xhr);\n\t\t};\n\t}\n\tif(contentType)\n\t\toptions.contentType = contentType;\n\tif(username)\n\t\toptions.username = username;\n\tif(password)\n\t\toptions.password = password;\n\tif(window.Components && window.netscape && window.netscape.security && document.location.protocol.indexOf(\"http\") == -1)\n\t\twindow.netscape.security.PrivilegeManager.enablePrivilege(\"UniversalBrowserRead\");\n\treturn jQuery.ajax(options);\n}\n//--\n//-- TiddlyWiki-specific utility functions\n//--\n\n// Returns TiddlyWiki version string\nfunction formatVersion(v)\n{\n\tv = v || version;\n\treturn v.major + \".\" + v.minor + \".\" + v.revision +\n\t\t(v.alpha ? \" (alpha \" + v.alpha + \")\" : \"\") +\n\t\t(v.beta ? \" (beta \" + v.beta + \")\" : \"\");\n}\n\nfunction compareVersions(v1,v2)\n{\n\tvar x1,x2,i,a = [\"major\",\"minor\",\"revision\"];\n\tfor(i = 0; i<a.length; i++) {\n\t\tx1 = v1[a[i]] || 0;\n\t\tx2 = v2[a[i]] || 0;\n\t\tif(x1<x2)\n\t\t\treturn 1;\n\t\tif(x1>x2)\n\t\t\treturn -1;\n\t}\n\tx1 = v1.beta || 9999;\n\tx2 = v2.beta || 9999;\n\tif(x1<x2)\n\t\treturn 1;\n\treturn x1 > x2 ? -1 : 0;\n}\n\nfunction merge(dst,src,preserveExisting)\n{\n\tvar i;\n\tfor(i in src) {\n\t\tif(!preserveExisting || dst[i] === undefined)\n\t\t\tdst[i] = src[i];\n\t}\n\treturn dst;\n}\n\n// Resolve the target object of an event\nfunction resolveTarget(e)\n{\n\tvar obj;\n\tif(e.target)\n\t\tobj = e.target;\n\telse if(e.srcElement)\n\t\tobj = e.srcElement;\n\tif(obj.nodeType == 3) // defeat Safari bug\n\t\tobj = obj.parentNode;\n\treturn obj;\n}\n\n// Returns a string containing the description of an exception, optionally prepended by a message\nfunction exceptionText(e,message)\n{\n\tvar s = e.description || e.toString();\n\treturn message ? \"%0:\\n%1\".format([message,s]) : s;\n}\n\n// Displays an alert of an exception description with optional message\nfunction showException(e,message)\n{\n\talert(exceptionText(e,message));\n}\n\nfunction alertAndThrow(m)\n{\n\talert(m);\n\tthrow(m);\n}\n\nfunction glyph(name)\n{\n\tvar g = config.glyphs;\n\tvar b = g.currBrowser;\n\tif(b == null) {\n\t\tb = 0;\n\t\twhile(b < g.browsers.length-1 && !g.browsers[b]())\n\t\t\tb++;\n\t\tg.currBrowser = b;\n\t}\n\tif(!g.codes[name])\n\t\treturn \"\";\n\treturn g.codes[name][b];\n}\n\nfunction createTiddlyText(parent,text)\n{\n\treturn parent.appendChild(document.createTextNode(text));\n}\n\nfunction createTiddlyCheckbox(parent,caption,checked,onChange)\n{\n\tvar cb = document.createElement(\"input\");\n\tcb.setAttribute(\"type\",\"checkbox\");\n\tcb.onclick = onChange;\n\tparent.appendChild(cb);\n\tcb.checked = checked;\n\tcb.className = \"chkOptionInput\";\n\tif(caption)\n\t\twikify(caption,parent);\n\treturn cb;\n}\n\nfunction createTiddlyElement(parent,element,id,className,text,attribs)\n{\n\tvar n,e = document.createElement(element);\n\tif(className != null)\n\t\te.className = className;\n\tif(id != null)\n\t\te.setAttribute(\"id\",id);\n\tif(text != null)\n\t\te.appendChild(document.createTextNode(text));\n\tif(attribs) {\n\t\tfor(n in attribs) {\n\t\t\te.setAttribute(n,attribs[n]);\n\t\t}\n\t}\n\tif(parent != null)\n\t\tparent.appendChild(e);\n\treturn e;\n}\n\nfunction createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)\n{\n\tvar i,btn = document.createElement(\"a\");\n\tbtn.setAttribute(\"href\",\"javascript:;\");\n\tif(action) {\n\t\tbtn.onclick = action;\n\t}\n\tif(tooltip)\n\t\tbtn.setAttribute(\"title\",tooltip);\n\tif(text)\n\t\tbtn.appendChild(document.createTextNode(text));\n\tbtn.className = className || \"button\";\n\tif(id)\n\t\tbtn.id = id;\n\tif(attribs) {\n\t\tfor(i in attribs) {\n\t\t\tbtn.setAttribute(i,attribs[i]);\n\t\t}\n\t}\n\tif(parent)\n\t\tparent.appendChild(btn);\n\tif(accessKey)\n\t\tbtn.setAttribute(\"accessKey\",accessKey);\n\treturn btn;\n}\n\nfunction createExternalLink(place,url,label)\n{\n\tvar link = document.createElement(\"a\");\n\tlink.className = \"externalLink\";\n\tlink.href = url;\n\tvar f = config.messages.externalLinkTooltip;\n\tlink.title = f ? f.format([url]) : url;\n\tif(config.options.chkOpenInNewWindow)\n\t\tlink.target = \"_blank\";\n\tplace.appendChild(link);\n\tif(label)\n\t\tcreateTiddlyText(link, label);\n\treturn link;\n}\n\nfunction getTiddlyLinkInfo(title,currClasses)\n{\n\tvar classes = currClasses ? currClasses.split(\" \") : [];\n\tclasses.pushUnique(\"tiddlyLink\");\n\tvar tiddler = store.fetchTiddler(title);\n\tvar subTitle;\n\tif(tiddler) {\n\t\tsubTitle = tiddler.getSubtitle();\n\t\tclasses.pushUnique(\"tiddlyLinkExisting\");\n\t\tclasses.remove(\"tiddlyLinkNonExisting\");\n\t\tclasses.remove(\"shadow\");\n\t} else {\n\t    var f;\n\t\tclasses.remove(\"tiddlyLinkExisting\");\n\t\tclasses.pushUnique(\"tiddlyLinkNonExisting\");\n\t\tif(store.isShadowTiddler(title)) {\n\t\t\tf = config.messages.shadowedTiddlerToolTip;\n\t\t\tclasses.pushUnique(\"shadow\");\n\t\t} else {\n\t\t\tf = config.messages.undefinedTiddlerToolTip;\n\t\t\tclasses.remove(\"shadow\");\n\t\t}\n\t\tsubTitle = f ? f.format([title]) : \"\";\n\t}\n\tif(typeof config.annotations[title]==\"string\")\n\t\tsubTitle = config.annotations[title];\n\treturn {classes: classes.join(\" \"),subTitle: subTitle};\n}\n\n// Event handler for clicking on a tiddly link\nfunction onClickTiddlerLink(ev)\n{\n\tvar e = ev || window.event;\n\tvar target = resolveTarget(e);\n\tvar link = target;\n\tvar title = null;\n\tvar fields = null;\n\tvar noToggle = null;\n\tdo {\n\t\ttitle = link.getAttribute(\"tiddlyLink\");\n\t\tfields = link.getAttribute(\"tiddlyFields\");\n\t\tnoToggle = link.getAttribute(\"noToggle\");\n\t\tlink = link.parentNode;\n\t} while(title == null && link != null);\n\tif(!store.isShadowTiddler(title)) {\n\t\tvar f = fields ? fields.decodeHashMap() : {};\n\t\tfields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));\n\t}\n\tif(title) {\n\t\tvar toggling = e.metaKey || e.ctrlKey;\n\t\tif(config.options.chkToggleLinks)\n\t\t\ttoggling = !toggling;\n\t\tif(noToggle)\n\t\t\ttoggling = false;\n\t\tif(store.getTiddler(title))\n\t\t\tfields = null;\n\t\tstory.displayTiddler(target,title,null,true,null,fields,toggling);\n\t}\n\tclearMessage();\n\treturn false;\n}\n\nfunction createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)\n{\n\tvar title = jQuery.trim(title);\n\tvar text = includeText ? title : null;\n\tvar i = getTiddlyLinkInfo(title,className);\n\tvar btn = isStatic ? createExternalLink(place,store.getTiddlerText(\"SiteUrl\",null) + \"#\" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);\n\tif(isStatic)\n\t\tbtn.className += ' ' + className;\n\tbtn.setAttribute(\"refresh\",\"link\");\n\tbtn.setAttribute(\"tiddlyLink\",title);\n\tif(noToggle)\n\t\tbtn.setAttribute(\"noToggle\",\"true\");\n\tif(linkedFromTiddler) {\n\t\tvar fields = linkedFromTiddler.getInheritedFields();\n\t\tif(fields)\n\t\t\tbtn.setAttribute(\"tiddlyFields\",fields);\n\t}\n\treturn btn;\n}\n\nfunction refreshTiddlyLink(e,title)\n{\n\tvar i = getTiddlyLinkInfo(title,e.className);\n\te.className = i.classes;\n\te.title = i.subTitle;\n}\n\nfunction createTiddlyDropDown(place,onchange,options,defaultValue)\n{\n\tvar sel = createTiddlyElement(place,\"select\");\n\tsel.onchange = onchange;\n\tvar t;\n\tfor(t=0; t<options.length; t++) {\n\t\tvar e = createTiddlyElement(sel,\"option\",null,null,options[t].caption);\n\t\te.value = options[t].name;\n\t\tif(options[t].name == defaultValue)\n\t\t\te.selected = true;\n\t}\n\treturn sel;\n}\n\n//--\n//-- TiddlyWiki-specific popup utility functions\n//--\n\n// Event handler for 'open all' on a tiddler popup\nfunction onClickTagOpenAll(ev)\n{\n\tvar tiddlers = store.getTaggedTiddlers(this.getAttribute(\"tag\"));\n\tvar sortby = this.getAttribute(\"sortby\");\n\tif(sortby&&sortby.length) {\n\t\tstore.sortTiddlers(tiddlers,sortby);\n\t}\n\tstory.displayTiddlers(this,tiddlers);\n\treturn false;\n}\n\n// Event handler for clicking on a tiddler tag\nfunction onClickTag(ev)\n{\n\tvar e = ev || window.event;\n\tvar popup = Popup.create(this);\n\tjQuery(popup).addClass(\"taggedTiddlerList\");\n\tvar tag = this.getAttribute(\"tag\");\n\tvar title = this.getAttribute(\"tiddler\");\n\tif(popup && tag) {\n\t\tvar tagged = tag.indexOf(\"[\")==-1 ? store.getTaggedTiddlers(tag) : store.filterTiddlers(tag);\n\t\tvar sortby = this.getAttribute(\"sortby\");\n\t\tif(sortby&&sortby.length) {\n\t\t\tstore.sortTiddlers(tagged,sortby);\n\t\t}\n\t\tvar titles = [];\n\t\tvar r;\n\t\tfor(r=0;r<tagged.length;r++) {\n\t\t\tif(tagged[r].title != title)\n\t\t\t\ttitles.push(tagged[r].title);\n\t\t}\n\t\tvar lingo = config.views.wikified.tag;\n\t\tif(titles.length > 0) {\n\t\t\tvar openAll = createTiddlyButton(createTiddlyElement(popup,\"li\"),lingo.openAllText.format([tag]),lingo.openAllTooltip,onClickTagOpenAll);\n\t\t\topenAll.setAttribute(\"tag\",tag);\n\t\t\topenAll.setAttribute(\"sortby\",sortby);\n\t\t\tcreateTiddlyElement(createTiddlyElement(popup,\"li\",null,\"listBreak\"),\"div\");\n\t\t\tfor(r=0; r<titles.length; r++) {\n\t\t\t\tcreateTiddlyLink(createTiddlyElement(popup,\"li\"),titles[r],true);\n\t\t\t}\n\t\t} else {\n\t\t\tcreateTiddlyElement(popup,\"li\",null,\"disabled\",lingo.popupNone.format([tag]));\n\t\t}\n\t\tcreateTiddlyElement(createTiddlyElement(popup,\"li\",null,\"listBreak\"),\"div\");\n\t\tvar h = createTiddlyLink(createTiddlyElement(popup,\"li\"),tag,false);\n\t\tcreateTiddlyText(h,lingo.openTag.format([tag]));\n\t}\n\tPopup.show();\n\te.cancelBubble = true;\n\tif(e.stopPropagation) e.stopPropagation();\n\treturn false;\n}\n\n// Create a button for a tag with a popup listing all the tiddlers that it tags\nfunction createTagButton(place,tag,excludeTiddler,title,tooltip)\n{\n\tvar btn = createTiddlyButton(place,title||tag,(tooltip||config.views.wikified.tag.tooltip).format([tag]),onClickTag);\n\tbtn.setAttribute(\"tag\",tag);\n\tif(excludeTiddler)\n\t\tbtn.setAttribute(\"tiddler\",excludeTiddler);\n\treturn btn;\n}\n\nfunction onClickTiddlyPopup(ev)\n{\n\tvar e = ev || window.event;\n\tvar tiddler = this.tiddler;\n\tif(tiddler.text) {\n\t\tvar popup = Popup.create(this,\"div\",\"popupTiddler\");\n\t\twikify(tiddler.text,popup,null,tiddler);\n\t\tPopup.show();\n\t}\n\tif(e) e.cancelBubble = true;\n\tif(e && e.stopPropagation) e.stopPropagation();\n\treturn false;\n}\n\nfunction createTiddlyPopup(place,caption,tooltip,tiddler)\n{\n\tif(tiddler.text) {\n\t\tcreateTiddlyLink(place,caption,true);\n\t\tvar btn = createTiddlyButton(place,glyph(\"downArrow\"),tooltip,onClickTiddlyPopup,\"tiddlerPopupButton\");\n\t\tbtn.tiddler = tiddler;\n\t} else {\n\t\tcreateTiddlyText(place,caption);\n\t}\n}\n\nfunction onClickError(ev)\n{\n\tvar e = ev || window.event;\n\tvar popup = Popup.create(this);\n\tvar lines = this.getAttribute(\"errorText\").split(\"\\n\");\n\tvar t;\n\tfor(t=0; t<lines.length; t++)\n\t\tcreateTiddlyElement(popup,\"li\",null,null,lines[t]);\n\tPopup.show();\n\te.cancelBubble = true;\n\tif(e.stopPropagation) e.stopPropagation();\n\treturn false;\n}\n\nfunction createTiddlyError(place,title,text)\n{\n\tvar btn = createTiddlyButton(place,title,null,onClickError,\"errorButton\");\n\tif(text) btn.setAttribute(\"errorText\",text);\n}\n//-\n//- Animation engine\n//-\n\nfunction Animator()\n{\n\tthis.running = 0; // Incremented at start of each animation, decremented afterwards. If zero, the interval timer is disabled\n\tthis.timerID = 0; // ID of the timer used for animating\n\tthis.animations = []; // List of animations in progress\n\treturn this;\n}\n\n// Start animation engine\nAnimator.prototype.startAnimating = function() //# Variable number of arguments\n{\n\tvar t;\n\tfor(t=0; t<arguments.length; t++)\n\t\tthis.animations.push(arguments[t]);\n\tif(this.running == 0) {\n\t\tvar me = this;\n\t\tthis.timerID = window.setInterval(function() {me.doAnimate(me);},10);\n\t}\n\tthis.running += arguments.length;\n};\n\n// Perform an animation engine tick, calling each of the known animation modules\nAnimator.prototype.doAnimate = function(me)\n{\n\tvar a = 0;\n\twhile(a < me.animations.length) {\n\t\tvar animation = me.animations[a];\n\t\tif(animation.tick()) {\n\t\t\ta++;\n\t\t} else {\n\t\t\tme.animations.splice(a,1);\n\t\t\tif(--me.running == 0)\n\t\t\t\twindow.clearInterval(me.timerID);\n\t\t}\n\t}\n};\n\nAnimator.slowInSlowOut = function(progress)\n{\n\treturn(1-((Math.cos(progress * Math.PI)+1)/2));\n};\n\n//--\n//-- Morpher animation\n//--\n\n// Animate a set of properties of an element\nfunction Morpher(element,duration,properties,callback)\n{\n\tthis.element = element;\n\tthis.duration = duration;\n\tthis.properties = properties;\n\tthis.startTime = new Date();\n\tthis.endTime = Number(this.startTime) + duration;\n\tthis.callback = callback;\n\tthis.tick();\n\treturn this;\n}\n\nMorpher.prototype.assignStyle = function(element,style,value)\n{\n\tswitch(style) {\n\tcase \"-tw-vertScroll\":\n\t\twindow.scrollTo(findScrollX(),value);\n\t\tbreak;\n\tcase \"-tw-horizScroll\":\n\t\twindow.scrollTo(value,findScrollY());\n\t\tbreak;\n\tdefault:\n\t\telement.style[style] = value;\n\t\tbreak;\n\t}\n};\n\nMorpher.prototype.stop = function()\n{\n\tvar t;\n\tfor(t=0; t<this.properties.length; t++) {\n\t\tvar p = this.properties[t];\n\t\tif(p.atEnd !== undefined) {\n\t\t\tthis.assignStyle(this.element,p.style,p.atEnd);\n\t\t}\n\t}\n\tif(this.callback)\n\t\tthis.callback(this.element,this.properties);\n};\n\nMorpher.prototype.tick = function()\n{\n\tvar currTime = Number(new Date());\n\tvar t,progress = Animator.slowInSlowOut(Math.min(1,(currTime-this.startTime)/this.duration));\n\tfor(t=0; t<this.properties.length; t++) {\n\t\tvar p = this.properties[t];\n\t\tif(p.start !== undefined && p.end !== undefined) {\n\t\t\tvar template = p.template || \"%0\";\n\t\t\tswitch(p.format) {\n\t\t\tcase undefined:\n\t\t\tcase \"style\":\n\t\t\t\tvar v = p.start + (p.end-p.start) * progress;\n\t\t\t\tthis.assignStyle(this.element,p.style,template.format([v]));\n\t\t\t\tbreak;\n\t\t\tcase \"color\":\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tif(currTime >= this.endTime) {\n\t\tthis.stop();\n\t\treturn false;\n\t}\n\treturn true;\n};\n\n//--\n//-- Zoomer animation\n//--\n\nfunction Zoomer(text,startElement,targetElement,unused)\n{\n\tvar e = createTiddlyElement(document.body,\"div\",null,\"zoomer\");\n\tcreateTiddlyElement(e,\"div\",null,null,text);\n\tvar winWidth = findWindowWidth();\n\tvar winHeight = findWindowHeight();\n\tvar p = [\n\t\t{style: 'left', start: findPosX(startElement), end: findPosX(targetElement), template: '%0px'},\n\t\t{style: 'top', start: findPosY(startElement), end: findPosY(targetElement), template: '%0px'},\n\t\t{style: 'width', start: Math.min(startElement.scrollWidth,winWidth), end: Math.min(targetElement.scrollWidth,winWidth), template: '%0px', atEnd: 'auto'},\n\t\t{style: 'height', start: Math.min(startElement.scrollHeight,winHeight), end: Math.min(targetElement.scrollHeight,winHeight), template: '%0px', atEnd: 'auto'},\n\t\t{style: 'fontSize', start: 8, end: 24, template: '%0pt'}\n\t];\n\tvar c = function(element,properties) {jQuery(element).remove();};\n\treturn new Morpher(e,config.animDuration,p,c);\n}\n\n//--\n//-- Scroller animation\n//--\n\nfunction Scroller(targetElement)\n{\n\tvar p = [{style: '-tw-vertScroll', start: findScrollY(), end: ensureVisible(targetElement)}];\n\treturn new Morpher(targetElement,config.animDuration,p);\n}\n\n//--\n//-- Slider animation\n//--\n\n// deleteMode - \"none\", \"all\" [delete target element and it's children], [only] \"children\" [but not the target element]\nfunction Slider(element,opening,unused,deleteMode)\n{\n\telement.style.overflow = 'hidden';\n\tif(opening)\n\t\telement.style.height = '0px'; // Resolves a Firefox flashing bug\n\telement.style.display = 'block';\n\tvar height = element.scrollHeight;\n\tvar p = [];\n\tvar c = null;\n\tif(opening) {\n\t\tp.push({style: 'height', start: 0, end: height, template: '%0px', atEnd: 'auto'});\n\t\tp.push({style: 'opacity', start: 0, end: 1, template: '%0'});\n\t\tp.push({style: 'filter', start: 0, end: 100, template: 'alpha(opacity:%0)'});\n\t} else {\n\t\tp.push({style: 'height', start: height, end: 0, template: '%0px'});\n\t\tp.push({style: 'display', atEnd: 'none'});\n\t\tp.push({style: 'opacity', start: 1, end: 0, template: '%0'});\n\t\tp.push({style: 'filter', start: 100, end: 0, template: 'alpha(opacity:%0)'});\n\t\tswitch(deleteMode) {\n\t\tcase \"all\":\n\t\t\tc = function(element,properties) {jQuery(element).remove();};\n\t\t\tbreak;\n\t\tcase \"children\":\n\t\t\tc = function(element,properties) {jQuery(element).empty();};\n\t\t\tbreak;\n\t\t}\n\t}\n\treturn new Morpher(element,config.animDuration,p,c);\n}\n\n//--\n//-- Popup menu\n//--\n\nvar Popup = {\n\tstack: [] // Array of objects with members root: and popup:\n\t};\n\nPopup.create = function(root,elem,className)\n{\n\tvar stackPosition = this.find(root,\"popup\");\n\tPopup.remove(stackPosition+1);\n\tvar popup = createTiddlyElement(document.body,elem || \"ol\",\"popup\",className || \"popup\");\n\tpopup.stackPosition = stackPosition;\n\tPopup.stack.push({root: root, popup: popup});\n\treturn popup;\n};\n\nPopup.onDocumentClick = function(ev)\n{\n\tvar e = ev || window.event;\n\tif(e.eventPhase == undefined)\n\t\tPopup.remove();\n\telse if(e.eventPhase == Event.BUBBLING_PHASE || e.eventPhase == Event.AT_TARGET)\n\t\tPopup.remove();\n\treturn true;\n};\n\nPopup.show = function(valign,halign,offset)\n{\n\tvar curr = Popup.stack[Popup.stack.length-1];\n\tthis.place(curr.root,curr.popup,valign,halign,offset);\n\tjQuery(curr.root).addClass(\"highlight\");\n\tif(config.options.chkAnimate && anim && typeof Scroller == \"function\")\n\t\tanim.startAnimating(new Scroller(curr.popup));\n\telse\n\t\twindow.scrollTo(0,ensureVisible(curr.popup));\n};\n\nPopup.place = function(root,popup,valign,halign,offset)\n{\n\tif(!offset)\n\t\toffset = {x:0,y:0};\n\tif(popup.stackPosition >= 0 && !valign && !halign) {\n\t\toffset.x = offset.x + root.offsetWidth;\n\t} else {\n\t\toffset.x = (halign == \"right\") ? offset.x + root.offsetWidth : offset.x;\n\t\toffset.y = (valign == \"top\") ? offset.y : offset.y + root.offsetHeight;\n\t}\n\tvar rootLeft = findPosX(root);\n\tvar rootTop = findPosY(root);\n\tvar popupLeft = rootLeft + offset.x;\n\tvar popupTop = rootTop + offset.y;\n\tvar winWidth = findWindowWidth();\n\tif(popup.offsetWidth > winWidth*0.75)\n\t\tpopup.style.width = winWidth*0.75 + \"px\";\n\tvar popupWidth = popup.offsetWidth;\n\tvar scrollWidth = winWidth - document.body.offsetWidth;\n\tif(popupLeft + popupWidth > winWidth - scrollWidth - 1) {\n\t\tif(halign == \"right\")\n\t\t\tpopupLeft = popupLeft - root.offsetWidth - popupWidth;\n\t\telse\n\t\t\tpopupLeft = winWidth - popupWidth - scrollWidth - 1;\n\t}\n\tpopup.style.left = popupLeft + \"px\";\n\tpopup.style.top = popupTop + \"px\";\n\tpopup.style.display = \"block\";\n};\n\nPopup.find = function(e)\n{\n\tvar t,pos = -1;\n\tfor(t=this.stack.length-1; t>=0; t--) {\n\t\tif(isDescendant(e,this.stack[t].popup))\n\t\t\tpos = t;\n\t}\n\treturn pos;\n};\n\nPopup.remove = function(pos)\n{\n\tif(!pos) pos = 0;\n\tif(Popup.stack.length > pos) {\n\t\tPopup.removeFrom(pos);\n\t}\n};\n\nPopup.removeFrom = function(from)\n{\n\tvar t;\n\tfor(t=Popup.stack.length-1; t>=from; t--) {\n\t\tvar p = Popup.stack[t];\n\t\tjQuery(p.root).removeClass(\"highlight\");\n\t\tjQuery(p.popup).remove();\n\t}\n\tPopup.stack = Popup.stack.slice(0,from);\n};\n\n//--\n//-- Wizard support\n//--\n\nfunction Wizard(elem)\n{\n\tif(elem) {\n\t\tthis.formElem = findRelated(elem,\"wizard\",\"className\");\n\t\tthis.bodyElem = findRelated(this.formElem.firstChild,\"wizardBody\",\"className\",\"nextSibling\");\n\t\tthis.footElem = findRelated(this.formElem.firstChild,\"wizardFooter\",\"className\",\"nextSibling\");\n\t} else {\n\t\tthis.formElem = null;\n\t\tthis.bodyElem = null;\n\t\tthis.footElem = null;\n\t}\n}\n\nWizard.prototype.setValue = function(name,value)\n{\n\tjQuery(this.formElem).data(name, value);\n};\n\nWizard.prototype.getValue = function(name)\n{\n\treturn this.formElem ? jQuery(this.formElem).data(name) : null;\n};\n\nWizard.prototype.createWizard = function(place,title)\n{\n\tthis.formElem = createTiddlyElement(place,\"form\",null,\"wizard\");\n\tcreateTiddlyElement(this.formElem,\"h1\",null,null,title);\n\tthis.bodyElem = createTiddlyElement(this.formElem,\"div\",null,\"wizardBody\");\n\tthis.footElem = createTiddlyElement(this.formElem,\"div\",null,\"wizardFooter\");\n\treturn this.formElem;\n};\n\nWizard.prototype.clear = function()\n{\n\tjQuery(this.bodyElem).empty();\n};\n\nWizard.prototype.setButtons = function(buttonInfo,status)\n{\n\tjQuery(this.footElem).empty();\n\tvar t;\n\tfor(t=0; t<buttonInfo.length; t++) {\n\t\tcreateTiddlyButton(this.footElem,buttonInfo[t].caption,buttonInfo[t].tooltip,buttonInfo[t].onClick);\n\t\tinsertSpacer(this.footElem);\n\t\t}\n\tif(typeof status == \"string\") {\n\t\tcreateTiddlyElement(this.footElem,\"span\",null,\"status\",status);\n\t}\n};\n\nWizard.prototype.addStep = function(stepTitle,html)\n{\n\tjQuery(this.bodyElem).empty();\n\tvar w = createTiddlyElement(this.bodyElem,\"div\");\n\tcreateTiddlyElement(w,\"h2\",null,null,stepTitle);\n\tvar step = createTiddlyElement(w,\"div\",null,\"wizardStep\");\n\tstep.innerHTML = html;\n\tapplyHtmlMacros(step,tiddler);\n};\n\nWizard.prototype.getElement = function(name)\n{\n\treturn this.formElem.elements[name];\n};\n\n//--\n//-- ListView gadget\n//--\n\nvar ListView = {};\n\n// Create a listview\nListView.create = function(place,listObject,listTemplate,callback,className)\n{\n\tvar table = createTiddlyElement(place,\"table\",null,className || \"listView twtable\");\n\tvar thead = createTiddlyElement(table,\"thead\");\n\tvar t,r = createTiddlyElement(thead,\"tr\");\n\tfor(t=0; t<listTemplate.columns.length; t++) {\n\t\tvar columnTemplate = listTemplate.columns[t];\n\t\tvar c = createTiddlyElement(r,\"th\");\n\t\tvar colType = ListView.columnTypes[columnTemplate.type];\n\t\tif(colType && colType.createHeader) {\n\t\t\tcolType.createHeader(c,columnTemplate,t);\n\t\t\tif(columnTemplate.className)\n\t\t\t\tjQuery(c).addClass(columnTemplate.className);\n\t\t}\n\t}\n\tvar rc,tbody = createTiddlyElement(table,\"tbody\");\n\tfor(rc=0; rc<listObject.length; rc++) {\n\t\tvar rowObject = listObject[rc];\n\t\tr = createTiddlyElement(tbody,\"tr\");\n\t\tfor(c=0; c<listTemplate.rowClasses.length; c++) {\n\t\t\tif(rowObject[listTemplate.rowClasses[c].field])\n\t\t\t\tjQuery(r).addClass(listTemplate.rowClasses[c].className);\n\t\t}\n\t\trowObject.rowElement = r;\n\t\trowObject.colElements = {};\n\t\tvar cc;\n\t\tfor(cc=0; cc<listTemplate.columns.length; cc++) {\n\t\t\tc = createTiddlyElement(r,\"td\");\n\t\t\tcolumnTemplate = listTemplate.columns[cc];\n\t\t\tvar field = columnTemplate.field;\n\t\t\tcolType = ListView.columnTypes[columnTemplate.type];\n\t\t\tif(colType && colType.createItem) {\n\t\t\t\tcolType.createItem(c,rowObject,field,columnTemplate,cc,rc);\n\t\t\t\tif(columnTemplate.className)\n\t\t\t\t\tjQuery(c).addClass(columnTemplate.className);\n\t\t\t}\n\t\t\trowObject.colElements[field] = c;\n\t\t}\n\t}\n\tif(callback && listTemplate.actions)\n\t\tcreateTiddlyDropDown(place,ListView.getCommandHandler(callback),listTemplate.actions);\n\tif(callback && listTemplate.buttons) {\n\t\tfor(t=0; t<listTemplate.buttons.length; t++) {\n\t\t\tvar a = listTemplate.buttons[t];\n\t\t\tif(a && a.name != \"\")\n\t\t\t\tcreateTiddlyButton(place,a.caption,null,ListView.getCommandHandler(callback,a.name,a.allowEmptySelection));\n\t\t}\n\t}\n\treturn table;\n};\n\nListView.getCommandHandler = function(callback,name,allowEmptySelection)\n{\n\treturn function(e) {\n\t\tvar view = findRelated(this,\"TABLE\",null,\"previousSibling\");\n\t\tvar tiddlers = [];\n\t\tListView.forEachSelector(view,function(e,rowName) {\n\t\t\t\t\tif(e.checked)\n\t\t\t\t\t\ttiddlers.push(rowName);\n\t\t\t\t\t});\n\t\tif(tiddlers.length == 0 && !allowEmptySelection) {\n\t\t\talert(config.messages.nothingSelected);\n\t\t} else {\n\t\t\tif(this.nodeName.toLowerCase() == \"select\") {\n\t\t\t\tcallback(view,this.value,tiddlers);\n\t\t\t\tthis.selectedIndex = 0;\n\t\t\t} else {\n\t\t\t\tcallback(view,name,tiddlers);\n\t\t\t}\n\t\t}\n\t};\n};\n\n// Invoke a callback for each selector checkbox in the listview\nListView.forEachSelector = function(view,callback)\n{\n\tvar checkboxes = view.getElementsByTagName(\"input\");\n\tvar t,hadOne = false;\n\tfor(t=0; t<checkboxes.length; t++) {\n\t\tvar cb = checkboxes[t];\n\t\tif(cb.getAttribute(\"type\") == \"checkbox\") {\n\t\t\tvar rn = cb.getAttribute(\"rowName\");\n\t\t\tif(rn) {\n\t\t\t\tcallback(cb,rn);\n\t\t\t\thadOne = true;\n\t\t\t}\n\t\t}\n\t}\n\treturn hadOne;\n};\n\nListView.getSelectedRows = function(view)\n{\n\tvar rowNames = [];\n\tListView.forEachSelector(view,function(e,rowName) {\n\t\t\t\tif(e.checked)\n\t\t\t\t\trowNames.push(rowName);\n\t\t\t\t});\n\treturn rowNames;\n};\n\nListView.columnTypes = {};\n\nListView.columnTypes.String = {\n\tcreateHeader: function(place,columnTemplate,col)\n\t\t{\n\t\t\tcreateTiddlyText(place,columnTemplate.title);\n\t\t},\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined)\n\t\t\t\tcreateTiddlyText(place,v);\n\t\t}\n};\n\nListView.columnTypes.WikiText = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined)\n\t\t\t\twikify(v,place,null,null);\n\t\t}\n};\n\nListView.columnTypes.Tiddler = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined && v.title)\n\t\t\t\tcreateTiddlyPopup(place,v.title,config.messages.listView.tiddlerTooltip,v);\n\t\t}\n};\n\nListView.columnTypes.Size = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar msg = config.messages.sizeTemplates;\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined) {\n\t\t\t\tvar t = 0;\n\t\t\t\twhile(t<msg.length-1 && v<msg[t].unit)\n\t\t\t\t\tt++;\n\t\t\t\tcreateTiddlyText(place,msg[t].template.format([Math.round(v/msg[t].unit)]));\n\t\t\t}\n\t\t}\n};\n\nListView.columnTypes.Link = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tvar c = columnTemplate.text;\n\t\t\tif(v != undefined)\n\t\t\t\tcreateExternalLink(place,v,c || v);\n\t\t}\n};\n\nListView.columnTypes.Date = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined)\n\t\t\t\tcreateTiddlyText(place,v.formatString(columnTemplate.dateFormat));\n\t\t}\n};\n\nListView.columnTypes.StringList = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined) {\n\t\t\t\tvar t;\n\t\t\t\tfor(t=0; t<v.length; t++) {\n\t\t\t\t\tcreateTiddlyText(place,v[t]);\n\t\t\t\t\tcreateTiddlyElement(place,\"br\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\nListView.columnTypes.Selector = {\n\tcreateHeader: function(place,columnTemplate,col)\n\t\t{\n\t\t\tcreateTiddlyCheckbox(place,null,false,this.onHeaderChange);\n\t\t},\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar e = createTiddlyCheckbox(place,null,listObject[field],null);\n\t\t\te.setAttribute(\"rowName\",listObject[columnTemplate.rowName]);\n\t\t},\n\tonHeaderChange: function(e)\n\t\t{\n\t\t\tvar state = this.checked;\n\t\t\tvar view = findRelated(this,\"TABLE\");\n\t\t\tif(!view)\n\t\t\t\treturn;\n\t\t\tListView.forEachSelector(view,function(e,rowName) {\n\t\t\t\t\t\t\t\te.checked = state;\n\t\t\t\t\t\t\t});\n\t\t}\n};\n\nListView.columnTypes.Tags = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar tags = listObject[field];\n\t\t\tcreateTiddlyText(place,String.encodeTiddlyLinkList(tags));\n\t\t}\n};\n\nListView.columnTypes.Boolean = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tif(listObject[field] == true)\n\t\t\t\tcreateTiddlyText(place,columnTemplate.trueText);\n\t\t\tif(listObject[field] == false)\n\t\t\t\tcreateTiddlyText(place,columnTemplate.falseText);\n\t\t}\n};\n\nListView.columnTypes.TagCheckbox = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar e = createTiddlyCheckbox(place,null,listObject[field],this.onChange);\n\t\t\te.setAttribute(\"tiddler\",listObject.title);\n\t\t\te.setAttribute(\"tag\",columnTemplate.tag);\n\t\t},\n\tonChange : function(e)\n\t\t{\n\t\t\tvar tag = this.getAttribute(\"tag\");\n\t\t\tvar tiddler = this.getAttribute(\"tiddler\");\n\t\t\tstore.setTiddlerTag(tiddler,this.checked,tag);\n\t\t}\n};\n\nListView.columnTypes.TiddlerLink = {\n\tcreateHeader: ListView.columnTypes.String.createHeader,\n\tcreateItem: function(place,listObject,field,columnTemplate,col,row)\n\t\t{\n\t\t\tvar v = listObject[field];\n\t\t\tif(v != undefined) {\n\t\t\t\tvar link = createTiddlyLink(place,listObject[columnTemplate.tiddlerLink],false,null);\n\t\t\t\tcreateTiddlyText(link,listObject[field]);\n\t\t\t}\n\t\t}\n};\n\n//--\n//-- Augmented methods for the JavaScript Array() object\n//--\n\n// Add indexOf function if browser does not support it\nif(!Array.indexOf) {\nArray.prototype.indexOf = function(item,from)\n{\n\tif(!from)\n\t\tfrom = 0;\n\tvar i;\n\tfor(i=from; i<this.length; i++) {\n\t\tif(this[i] === item)\n\t\t\treturn i;\n\t}\n\treturn -1;\n};}\n\n// Find an entry in a given field of the members of an array\nArray.prototype.findByField = function(field,value)\n{\n\tvar t;\n\tfor(t=0; t<this.length; t++) {\n\t\tif(this[t][field] === value)\n\t\t\treturn t;\n\t}\n\treturn null;\n};\n\n// Return whether an entry exists in an array\nArray.prototype.contains = function(item)\n{\n\treturn this.indexOf(item) != -1;\n};\n\n// Adds, removes or toggles a particular value within an array\n//  value - value to add\n//  mode - +1 to add value, -1 to remove value, 0 to toggle it\nArray.prototype.setItem = function(value,mode)\n{\n\tvar p = this.indexOf(value);\n\tif(mode == 0)\n\t\tmode = (p == -1) ? +1 : -1;\n\tif(mode == +1) {\n\t\tif(p == -1)\n\t\t\tthis.push(value);\n\t} else if(mode == -1) {\n\t\tif(p != -1)\n\t\t\tthis.splice(p,1);\n\t}\n};\n\n// Return whether one of a list of values exists in an array\nArray.prototype.containsAny = function(items)\n{\n\tvar i;\n\tfor(i=0; i<items.length; i++) {\n\t\tif(this.indexOf(items[i]) != -1)\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\n// Return whether all of a list of values exists in an array\nArray.prototype.containsAll = function(items)\n{\n\tvar i;\n\tfor(i = 0; i<items.length; i++) {\n\t\tif(this.indexOf(items[i]) == -1)\n\t\t\treturn false;\n\t}\n\treturn true;\n};\n\n// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push\nArray.prototype.pushUnique = function(item,unique)\n{\n\tif(unique === false) {\n\t\tthis.push(item);\n\t} else {\n\t\tif(this.indexOf(item) == -1)\n\t\t\tthis.push(item);\n\t}\n};\n\nArray.prototype.remove = function(item)\n{\n\tvar p = this.indexOf(item);\n\tif(p != -1)\n\t\tthis.splice(p,1);\n};\n\nif(!Array.prototype.map) {\nArray.prototype.map = function(fn,thisObj)\n{\n\tvar scope = thisObj || window;\n\tvar i,j,a = [];\n\tfor(i=0, j=this.length; i < j; ++i) {\n\t\ta.push(fn.call(scope,this[i],i,this));\n\t}\n\treturn a;\n};}\n\n//--\n//-- Augmented methods for the JavaScript String() object\n//--\n\n// Get characters from the right end of a string\nString.prototype.right = function(n)\n{\n\treturn n < this.length ? this.slice(this.length-n) : this;\n};\n\n// Trim whitespace from both ends of a string\nString.prototype.trim = function()\n{\n\treturn this.replace(/^\\s*|\\s*$/g,\"\");\n};\n\n// Convert a string from a CSS style property name to a JavaScript style name (\"background-color\" -> \"backgroundColor\")\nString.prototype.unDash = function()\n{\n\tvar t,s = this.split(\"-\");\n\tif(s.length > 1) {\n\t\tfor(t=1; t<s.length; t++)\n\t\t\ts[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);\n\t}\n\treturn s.join(\"\");\n};\n\n// Substitute substrings from an array into a format string that includes '%1'-type specifiers\nString.prototype.format = function(s)\n{\n\tvar substrings = s && s.constructor == Array ? s : arguments;\n\tvar subRegExp = /(?:%(\\d+))/mg;\n\tvar currPos = 0;\n\tvar match,r = [];\n\tdo {\n\t\tmatch = subRegExp.exec(this);\n\t\tif(match && match[1]) {\n\t\t\tif(match.index > currPos)\n\t\t\t\tr.push(this.substring(currPos,match.index));\n\t\t\tr.push(substrings[parseInt(match[1],10)]);\n\t\t\tcurrPos = subRegExp.lastIndex;\n\t\t}\n\t} while(match);\n\tif(currPos < this.length)\n\t\tr.push(this.substring(currPos,this.length));\n\treturn r.join(\"\");\n};\n\n// Escape any special RegExp characters with that character preceded by a backslash\nString.prototype.escapeRegExp = function()\n{\n\tvar s = \"\\\\^$*+?()=!|,{}[].\";\n\tvar t,c = this;\n\tfor(t=0; t<s.length; t++)\n\t\tc = c.replace(new RegExp(\"\\\\\" + s.substr(t,1),\"g\"),\"\\\\\" + s.substr(t,1));\n\treturn c;\n};\n\n// Convert \"\\\" to \"\\s\", newlines to \"\\n\" (and remove carriage returns)\nString.prototype.escapeLineBreaks = function()\n{\n\treturn this.replace(/\\\\/mg,\"\\\\s\").replace(/\\n/mg,\"\\\\n\").replace(/\\r/mg,\"\");\n};\n\n// Convert \"\\n\" to newlines, \"\\b\" to \" \", \"\\s\" to \"\\\" (and remove carriage returns)\nString.prototype.unescapeLineBreaks = function()\n{\n\treturn this.replace(/\\\\n/mg,\"\\n\").replace(/\\\\b/mg,\" \").replace(/\\\\s/mg,\"\\\\\").replace(/\\r/mg,\"\");\n};\n\n// Convert & to \"&amp;\", < to \"&lt;\", > to \"&gt;\" and \" to \"&quot;\"\nString.prototype.htmlEncode = function()\n{\n\treturn this.replace(/&/mg,\"&amp;\").replace(/</mg,\"&lt;\").replace(/>/mg,\"&gt;\").replace(/\\\"/mg,\"&quot;\");\n};\n\n// Convert \"&amp;\" to &, \"&lt;\" to <, \"&gt;\" to > and \"&quot;\" to \"\nString.prototype.htmlDecode = function()\n{\n\treturn this.replace(/&lt;/mg,\"<\").replace(/&gt;/mg,\">\").replace(/&quot;/mg,\"\\\"\").replace(/&amp;/mg,\"&\");\n};\n\n// Parse a space-separated string of name:value parameters\n// The result is an array of objects:\n//   result[0] = object with a member for each parameter name, value of that member being an array of values\n//   result[1..n] = one object for each parameter, with 'name' and 'value' members\nString.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)\n{\n\tvar parseToken = function(match,p) {\n\t\tvar n;\n\t\tif(match[p]) // Double quoted\n\t\t\tn = match[p];\n\t\telse if(match[p+1]) // Single quoted\n\t\t\tn = match[p+1];\n\t\telse if(match[p+2]) // Double-square-bracket quoted\n\t\t\tn = match[p+2];\n\t\telse if(match[p+3]) // Double-brace quoted\n\t\t\ttry {\n\t\t\t\tn = match[p+3];\n\t\t\t\tif(allowEval && config.evaluateMacroParameters != \"none\") {\n\t\t\t\t\tif(config.evaluateMacroParameters == \"restricted\") {\n\t\t\t\t\t\tif(window.restrictedEval) {\n\t\t\t\t\t\t\tn = window.restrictedEval(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tn = window.eval(n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(ex) {\n\t\t\t\tthrow \"Unable to evaluate {{\" + match[p+3] + \"}}: \" + exceptionText(ex);\n\t\t\t}\n\t\telse if(match[p+4]) // Unquoted\n\t\t\tn = match[p+4];\n\t\telse if(match[p+5]) // empty quote\n\t\t\tn = \"\";\n\t\treturn n;\n\t};\n\tvar r = [{}];\n\tvar dblQuote = \"(?:\\\"((?:(?:\\\\\\\\\\\")|[^\\\"])+)\\\")\";\n\tvar sngQuote = \"(?:'((?:(?:\\\\\\\\\\')|[^'])+)')\";\n\tvar dblSquare = \"(?:\\\\[\\\\[((?:\\\\s|\\\\S)*?)\\\\]\\\\])\";\n\tvar dblBrace = \"(?:\\\\{\\\\{((?:\\\\s|\\\\S)*?)\\\\}\\\\})\";\n\tvar unQuoted = noNames ? \"([^\\\"'\\\\s]\\\\S*)\" : \"([^\\\"':\\\\s][^\\\\s:]*)\";\n\tvar emptyQuote = \"((?:\\\"\\\")|(?:''))\";\n\tvar skipSpace = \"(?:\\\\s*)\";\n\tvar token = \"(?:\" + dblQuote + \"|\" + sngQuote + \"|\" + dblSquare + \"|\" + dblBrace + \"|\" + unQuoted + \"|\" + emptyQuote + \")\";\n\tvar re = noNames ? new RegExp(token,\"mg\") : new RegExp(skipSpace + token + skipSpace + \"(?:(\\\\:)\" + skipSpace + token + \")?\",\"mg\");\n\tvar match;\n\tdo {\n\t\tmatch = re.exec(this);\n\t\tif(match) {\n\t\t\tvar n = parseToken(match,1);\n\t\t\tif(noNames) {\n\t\t\t\tr.push({name:\"\",value:n});\n\t\t\t} else {\n\t\t\t\tvar v = parseToken(match,8);\n\t\t\t\tif(v == null && defaultName) {\n\t\t\t\t\tv = n;\n\t\t\t\t\tn = defaultName;\n\t\t\t\t} else if(v == null && defaultValue) {\n\t\t\t\t\tv = defaultValue;\n\t\t\t\t}\n\t\t\t\tr.push({name:n,value:v});\n\t\t\t\tif(cascadeDefaults) {\n\t\t\t\t\tdefaultName = n;\n\t\t\t\t\tdefaultValue = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} while(match);\n\t// Summarise parameters into first element\n\tvar t;\n\tfor(t=1; t<r.length; t++) {\n\t\tif(r[0][r[t].name])\n\t\t\tr[0][r[t].name].push(r[t].value);\n\t\telse\n\t\t\tr[0][r[t].name] = [r[t].value];\n\t}\n\treturn r;\n};\n\n// Process a string list of macro parameters into an array. Parameters can be quoted with \"\", '',\n// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in\n// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.\nString.prototype.readMacroParams = function(notAllowEval)\n{\n\tvar p = this.parseParams(\"list\",null,!notAllowEval,true);\n\tvar t,n = [];\n\tfor(t=1; t<p.length; t++)\n\t\tn.push(p[t].value);\n\treturn n;\n};\n\n// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]\nString.prototype.readBracketedList = function(unique)\n{\n\tvar p = this.parseParams(\"list\",null,false,true);\n\tvar t,n = [];\n\tfor(t=1; t<p.length; t++) {\n\t\tif(p[t].value)\n\t\t\tn.pushUnique(p[t].value,unique);\n\t}\n\treturn n;\n};\n\n// Returns array with start and end index of chunk between given start and end marker, or undefined.\nString.prototype.getChunkRange = function(start,end)\n{\n\tvar s = this.indexOf(start);\n\tif(s != -1) {\n\t\ts += start.length;\n\t\tvar e = this.indexOf(end,s);\n\t\tif(e != -1)\n\t\t\treturn [s,e];\n\t}\n};\n\n// Replace a chunk of a string given start and end markers\nString.prototype.replaceChunk = function(start,end,sub)\n{\n\tvar r = this.getChunkRange(start,end);\n\treturn r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;\n};\n\n// Returns a chunk of a string between start and end markers, or undefined\nString.prototype.getChunk = function(start,end)\n{\n\tvar r = this.getChunkRange(start,end);\n\tif(r)\n\t\treturn this.substring(r[0],r[1]);\n};\n\n\n// Static method to bracket a string with double square brackets if it contains a space\nString.encodeTiddlyLink = function(title)\n{\n\treturn title.indexOf(\" \") == -1 ? title : \"[[\" + title + \"]]\";\n};\n\n// Static method to encodeTiddlyLink for every item in an array and join them with spaces\nString.encodeTiddlyLinkList = function(list)\n{\n\tif(list) {\n\t\tvar t,results = [];\n\t\tfor(t=0; t<list.length; t++)\n\t\t\tresults.push(String.encodeTiddlyLink(list[t]));\n\t\treturn results.join(\" \");\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n// Convert a string as a sequence of name:\"value\" pairs into a hashmap\nString.prototype.decodeHashMap = function()\n{\n\tvar fields = this.parseParams(\"anon\",\"\",false);\n\tvar t,r = {};\n\tfor(t=1; t<fields.length; t++)\n\t\tr[fields[t].name] = fields[t].value;\n\treturn r;\n};\n\n// Static method to encode a hashmap into a name:\"value\"... string\nString.encodeHashMap = function(hashmap)\n{\n\tvar t,r = [];\n\tfor(t in hashmap)\n\t\tr.push(t + ':\"' + hashmap[t] + '\"');\n\treturn r.join(\" \");\n};\n\n// Static method to left-pad a string with 0s to a certain width\nString.zeroPad = function(n,d)\n{\n\tvar s = n.toString();\n\tif(s.length < d)\n\t\ts = \"000000000000000000000000000\".substr(0,d-s.length) + s;\n\treturn s;\n};\n\nString.prototype.startsWith = function(prefix)\n{\n\treturn !prefix || this.substring(0,prefix.length) == prefix;\n};\n\n// Returns the first value of the given named parameter.\nfunction getParam(params,name,defaultValue)\n{\n\tif(!params)\n\t\treturn defaultValue;\n\tvar p = params[0][name];\n\treturn p ? p[0] : defaultValue;\n}\n\n// Returns the first value of the given boolean named parameter.\nfunction getFlag(params,name,defaultValue)\n{\n\treturn !!getParam(params,name,defaultValue);\n}\n\n//--\n//-- Augmented methods for the JavaScript Date() object\n//--\n\n// Substitute date components into a string\nDate.prototype.formatString = function(template)\n{\n\tvar t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));\n\tt = t.replace(/hh12/g,this.getHours12());\n\tt = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));\n\tt = t.replace(/hh/g,this.getHours());\n\tt = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);\n\tt = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));\n\tt = t.replace(/mm/g,this.getMinutes());\n\tt = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));\n\tt = t.replace(/ss/g,this.getSeconds());\n\tt = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());\n\tt = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());\n\tt = t.replace(/wYYYY/g,this.getYearForWeekNo());\n\tt = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));\n\tt = t.replace(/YYYY/g,this.getFullYear());\n\tt = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));\n\tt = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);\n\tt = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));\n\tt = t.replace(/MM/g,this.getMonth()+1);\n\tt = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));\n\tt = t.replace(/WW/g,this.getWeek());\n\tt = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);\n\tt = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);\n\tt = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));\n\tt = t.replace(/DDth/g,this.getDate()+this.daySuffix());\n\tt = t.replace(/DD/g,this.getDate());\n\tvar tz = this.getTimezoneOffset();\n\tvar atz = Math.abs(tz);\n\tt = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));\n\tt = t.replace(/\\\\/g,\"\");\n\treturn t;\n};\n\nDate.prototype.getWeek = function()\n{\n\tvar dt = new Date(this.getTime());\n\tvar d = dt.getDay();\n\tif(d==0) d=7;// JavaScript Sun=0, ISO Sun=7\n\tdt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo\n\tvar n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);\n\treturn Math.floor(n/7)+1;\n};\n\nDate.prototype.getYearForWeekNo = function()\n{\n\tvar dt = new Date(this.getTime());\n\tvar d = dt.getDay();\n\tif(d==0) d=7;// JavaScript Sun=0, ISO Sun=7\n\tdt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week\n\treturn dt.getFullYear();\n};\n\nDate.prototype.getHours12 = function()\n{\n\tvar h = this.getHours();\n\treturn h > 12 ? h-12 : ( h > 0 ? h : 12 );\n};\n\nDate.prototype.getAmPm = function()\n{\n\treturn this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;\n};\n\nDate.prototype.daySuffix = function()\n{\n\treturn config.messages.dates.daySuffixes[this.getDate()-1];\n};\n\n// Convert a date to local YYYYMMDDHHMM string format\nDate.prototype.convertToLocalYYYYMMDDHHMM = function()\n{\n\treturn this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);\n};\n\n// Convert a date to UTC YYYYMMDDHHMM string format\nDate.prototype.convertToYYYYMMDDHHMM = function()\n{\n\treturn this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);\n};\n\n// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format\nDate.prototype.convertToYYYYMMDDHHMMSSMMM = function()\n{\n\treturn this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + \".\" + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +\"0\";\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMM format string\nDate.convertFromYYYYMMDDHHMM = function(d)\n{\n\td = d?d.replace(/[^0-9]/g, \"\"):\"\";\n\treturn Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMMSS format string\nDate.convertFromYYYYMMDDHHMMSS = function(d)\n{\n\td = d?d.replace(/[^0-9]/g, \"\"):\"\";\n\treturn Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string\nDate.convertFromYYYYMMDDHHMMSSMMM = function(d)\n{\n\td = d ? d.replace(/[^0-9]/g, \"\") : \"\";\n\treturn new Date(Date.UTC(parseInt(d.substr(0,4),10),\n\t\t\tparseInt(d.substr(4,2),10)-1,\n\t\t\tparseInt(d.substr(6,2),10),\n\t\t\tparseInt(d.substr(8,2)||\"00\",10),\n\t\t\tparseInt(d.substr(10,2)||\"00\",10),\n\t\t\tparseInt(d.substr(12,2)||\"00\",10),\n\t\t\tparseInt(d.substr(14,3)||\"000\",10)));\n};\n\n//--\n//-- RGB colour object\n//--\n\n// Construct an RGB colour object from a '#rrggbb', '#rgb' or 'rgb(n,n,n)' string or from separate r,g,b values\nfunction RGB(r,g,b)\n{\n\tthis.r = 0;\n\tthis.g = 0;\n\tthis.b = 0;\n\tif(typeof r == \"string\") {\n\t\tif(r.substr(0,1) == \"#\") {\n\t\t\tif(r.length == 7) {\n\t\t\t\tthis.r = parseInt(r.substr(1,2),16)/255;\n\t\t\t\tthis.g = parseInt(r.substr(3,2),16)/255;\n\t\t\t\tthis.b = parseInt(r.substr(5,2),16)/255;\n\t\t\t} else {\n\t\t\t\tthis.r = parseInt(r.substr(1,1),16)/15;\n\t\t\t\tthis.g = parseInt(r.substr(2,1),16)/15;\n\t\t\t\tthis.b = parseInt(r.substr(3,1),16)/15;\n\t\t\t}\n\t\t} else {\n\t\t\tvar rgbPattern = /rgb\\s*\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)/;\n\t\t\tvar c = r.match(rgbPattern);\n\t\t\tif(c) {\n\t\t\t\tthis.r = parseInt(c[1],10)/255;\n\t\t\t\tthis.g = parseInt(c[2],10)/255;\n\t\t\t\tthis.b = parseInt(c[3],10)/255;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\t}\n\treturn this;\n}\n\n// Mixes this colour with another in a specified proportion\n// c = other colour to mix\n// f = 0..1 where 0 is this colour and 1 is the new colour\n// Returns an RGB object\nRGB.prototype.mix = function(c,f)\n{\n\treturn new RGB(this.r + (c.r-this.r) * f,this.g + (c.g-this.g) * f,this.b + (c.b-this.b) * f);\n};\n\n// Return an rgb colour as a #rrggbb format hex string\nRGB.prototype.toString = function()\n{\n\tvar clamp = function(x,min,max) {\n\t\treturn x < min ? min : (x > max ? max : x);\n\t};\n\treturn \"#\" +\n\t\t\t(\"0\" + Math.floor(clamp(this.r,0,1) * 255).toString(16)).right(2) +\n\t\t\t(\"0\" + Math.floor(clamp(this.g,0,1) * 255).toString(16)).right(2) +\n\t\t\t(\"0\" + Math.floor(clamp(this.b,0,1) * 255).toString(16)).right(2);\n};\n\n//--\n//-- DOM utilities - many derived from www.quirksmode.org\n//--\n\nfunction drawGradient(place,horiz,locolors,hicolors)\n{\n\tif(!hicolors)\n\t\thicolors = locolors;\n\tvar t;\n\tfor(t=0; t<= 100; t+=2) {\n\t\tvar bar = document.createElement(\"div\");\n\t\tplace.appendChild(bar);\n\t\tbar.style.position = \"absolute\";\n\t\tbar.style.left = horiz ? t + \"%\" : 0;\n\t\tbar.style.top = horiz ? 0 : t + \"%\";\n\t\tbar.style.width = horiz ? (101-t) + \"%\" : \"100%\";\n\t\tbar.style.height = horiz ? \"100%\" : (101-t) + \"%\";\n\t\tbar.style.zIndex = -1;\n\t\tvar p = t/100*(locolors.length-1);\n\t\tvar hc = hicolors[Math.floor(p)];\n\t\tif(typeof hc == \"string\")\n\t\t\thc = new RGB(hc);\n\t\tvar lc = locolors[Math.ceil(p)];\n\t\tif(typeof lc == \"string\")\n\t\t\tlc = new RGB(lc);\n\t\tbar.style.backgroundColor = hc.mix(lc,p-Math.floor(p)).toString();\n\t}\n}\n\nfunction addEvent(obj,type,fn)\n{\n\tif(obj.attachEvent) {\n\t\tobj[\"e\"+type+fn] = fn;\n\t\tobj[type+fn] = function(){obj[\"e\"+type+fn](window.event);};\n\t\tobj.attachEvent(\"on\"+type,obj[type+fn]);\n\t} else {\n\t\tobj.addEventListener(type,fn,false);\n\t}\n}\n\nfunction removeEvent(obj,type,fn)\n{\n\tif(obj.detachEvent) {\n\t\tobj.detachEvent(\"on\"+type,obj[type+fn]);\n\t\tobj[type+fn] = null;\n\t} else {\n\t\tobj.removeEventListener(type,fn,false);\n\t}\n}\n\n// Find the closest relative with a given property value (property defaults to tagName, relative defaults to parentNode)\nfunction findRelated(e,value,name,relative)\n{\n\tname = name || \"tagName\";\n\trelative = relative || \"parentNode\";\n\tif(name == \"className\") {\n\t\twhile(e && !jQuery(e).hasClass(value)) {\n\t\t\te = e[relative];\n\t\t}\n\t} else {\n\t\twhile(e && e[name] != value) {\n\t\t\te = e[relative];\n\t\t}\n\t}\n\treturn e;\n}\n\n// Get the scroll position for window.scrollTo necessary to scroll a given element into view\nfunction ensureVisible(e)\n{\n\tvar posTop = findPosY(e);\n\tvar posBot = posTop + e.offsetHeight;\n\tvar winTop = findScrollY();\n\tvar winHeight = findWindowHeight();\n\tvar winBot = winTop + winHeight;\n\tif(posTop < winTop) {\n\t\treturn posTop;\n\t} else if(posBot > winBot) {\n\t\tif(e.offsetHeight < winHeight)\n\t\t\treturn posTop - (winHeight - e.offsetHeight);\n\t\telse\n\t\t\treturn posTop;\n\t} else {\n\t\treturn winTop;\n\t}\n}\n\n// Get the current width of the display window\nfunction findWindowWidth()\n{\n\treturn window.innerWidth || document.documentElement.clientWidth;\n}\n\n// Get the current height of the display window\nfunction findWindowHeight()\n{\n\treturn window.innerHeight || document.documentElement.clientHeight;\n}\n\n// Get the current height of the document\nfunction findDocHeight() {\n    var D = document;\n    return Math.max(\n        Math.max(D.body.scrollHeight, D.documentElement.scrollHeight),\n        Math.max(D.body.offsetHeight, D.documentElement.offsetHeight),\n        Math.max(D.body.clientHeight, D.documentElement.clientHeight)\n    );\n}\n\n// Get the current horizontal page scroll position\nfunction findScrollX()\n{\n\treturn window.scrollX || document.documentElement.scrollLeft;\n}\n\n// Get the current vertical page scroll position\nfunction findScrollY()\n{\n\treturn window.scrollY || document.documentElement.scrollTop;\n}\n\nfunction findPosX(obj)\n{\n\tvar curleft = 0;\n\twhile(obj.offsetParent) {\n\t\tcurleft += obj.offsetLeft;\n\t\tobj = obj.offsetParent;\n\t}\n\treturn curleft;\n}\n\nfunction findPosY(obj)\n{\n\tvar curtop = 0;\n\twhile(obj.offsetParent) {\n\t\tcurtop += obj.offsetTop;\n\t\tobj = obj.offsetParent;\n\t}\n\treturn curtop;\n}\n\n// Blur a particular element\nfunction blurElement(e)\n{\n\tif(e && e.focus && e.blur) {\n\t\te.focus();\n\t\te.blur();\n\t}\n}\n\n// Create a non-breaking space\nfunction insertSpacer(place)\n{\n\tvar e = document.createTextNode(String.fromCharCode(160));\n\tif(place)\n\t\tplace.appendChild(e);\n\treturn e;\n}\n\n// Replace the current selection of a textarea or text input and scroll it into view\nfunction replaceSelection(e,text)\n{\n\tif(e.setSelectionRange) {\n\t\tvar oldpos = e.selectionStart;\n\t\tvar isRange = e.selectionEnd > e.selectionStart;\n\t\te.value = e.value.substr(0,e.selectionStart) + text + e.value.substr(e.selectionEnd);\n\t\te.setSelectionRange(isRange ? oldpos : oldpos + text.length,oldpos + text.length);\n\t\tvar linecount = e.value.split(\"\\n\").length;\n\t\tvar thisline = e.value.substr(0,e.selectionStart).split(\"\\n\").length-1;\n\t\te.scrollTop = Math.floor((thisline - e.rows / 2) * e.scrollHeight / linecount);\n\t} else if(document.selection) {\n\t\tvar range = document.selection.createRange();\n\t\tif(range.parentElement() == e) {\n\t\t\tvar isCollapsed = range.text == \"\";\n\t\t\trange.text = text;\n\t\t\tif(!isCollapsed) {\n\t\t\t\trange.moveStart(\"character\", -text.length);\n\t\t\t\trange.select();\n\t\t\t}\n\t\t}\n\t}\n}\n\n// Set the caret position in a text area\nfunction setCaretPosition(e,pos)\n{\n\tif(e.selectionStart || e.selectionStart == '0') {\n\t\te.selectionStart = pos;\n\t\te.selectionEnd = pos;\n\t\te.focus();\n\t} else if(document.selection) {\n\t\t// IE support\n\t\te.focus ();\n\t\tvar sel = document.selection.createRange();\n\t\tsel.moveStart('character', -e.value.length);\n\t\tsel.moveStart('character',pos);\n\t\tsel.moveEnd('character',0);\n\t\tsel.select();\n\t}\n}\n\n// Returns the text of the given (text) node, possibly merging subsequent text nodes\nfunction getNodeText(e)\n{\n\tvar t = \"\";\n\twhile(e && e.nodeName == \"#text\") {\n\t\tt += e.nodeValue;\n\t\te = e.nextSibling;\n\t}\n\treturn t;\n}\n\n// Returns true if the element e has a given ancestor element\nfunction isDescendant(e,ancestor)\n{\n\twhile(e) {\n\t\tif(e === ancestor)\n\t\t\treturn true;\n\t\te = e.parentNode;\n\t}\n\treturn false;\n}\n\n\n// deprecate the following...\n\n// Prevent an event from bubbling\nfunction stopEvent(e)\n{\n\tvar ev = e || window.event;\n\tev.cancelBubble = true;\n\tif(ev.stopPropagation) ev.stopPropagation();\n\treturn false;\n}\n\n// Remove any event handlers or non-primitve custom attributes\nfunction scrubNode(e)\n{\n\tif(!config.browser.isIE)\n\t\treturn;\n\tvar att = e.attributes;\n\tif(att) {\n\t\tvar t;\n\t\tfor(t=0; t<att.length; t++) {\n\t\t\tvar n = att[t].name;\n\t\t\tif(n !== \"style\" && (typeof e[n] === \"function\" || (typeof e[n] === \"object\" && e[n] != null))) {\n\t\t\t\ttry {\n\t\t\t\t\te[n] = null;\n\t\t\t\t} catch(ex) {\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tvar c = e.firstChild;\n\twhile(c) {\n\t\tscrubNode(c);\n\t\tc = c.nextSibling;\n\t}\n}\n\nfunction setStylesheet(s,id,doc)\n{\n\tjQuery.twStylesheet(s,{id:id,doc:doc});\n}\n\nfunction removeStyleSheet(id)\n{\n\tjQuery.twStylesheet.remove({id:id});\n}\n\n//--\n//-- LoaderBase and SaverBase\n//--\n\nfunction LoaderBase() {}\n\nLoaderBase.prototype.loadTiddler = function(store,node,tiddlers)\n{\n\tvar title = this.getTitle(store,node);\n\tif(safeMode && store.isShadowTiddler(title))\n\t\treturn;\n\tif(title) {\n\t\tvar tiddler = store.createTiddler(title);\n\t\tthis.internalizeTiddler(store,tiddler,title,node);\n\t\ttiddlers.push(tiddler);\n\t}\n};\n\nLoaderBase.prototype.loadTiddlers = function(store,nodes)\n{\n\tvar t,tiddlers = [];\n\tfor(t = 0; t < nodes.length; t++) {\n\t\ttry {\n\t\t\tthis.loadTiddler(store,nodes[t],tiddlers);\n\t\t} catch(ex) {\n\t\t\tshowException(ex,config.messages.tiddlerLoadError.format([this.getTitle(store,nodes[t])]));\n\t\t}\n\t}\n\treturn tiddlers;\n};\n\nfunction SaverBase() {}\n\nSaverBase.prototype.externalize = function(store)\n{\n\tvar results = [];\n\tvar t,tiddlers = store.getTiddlers(\"title\");\n\tfor(t = 0; t < tiddlers.length; t++) {\n\t\tif(!tiddlers[t].doNotSave())\n\t\t\tresults.push(this.externalizeTiddler(store, tiddlers[t]));\n\t}\n\treturn results.join(\"\\n\");\n};\n\n//--\n//-- TW21Loader (inherits from LoaderBase)\n//--\n\nfunction TW21Loader() {}\n\nTW21Loader.prototype = new LoaderBase();\n\nTW21Loader.prototype.getTitle = function(store,node)\n{\n\tvar title = null;\n\tif(node.getAttribute) {\n\t\ttitle = node.getAttribute(\"title\");\n\t\tif(!title)\n\t\t\ttitle = node.getAttribute(\"tiddler\");\n\t}\n\tif(!title && node.id) {\n\t\tvar lenPrefix = store.idPrefix.length;\n\t\tif(node.id.substr(0,lenPrefix) == store.idPrefix)\n\t\t\ttitle = node.id.substr(lenPrefix);\n\t}\n\treturn title;\n};\n\nTW21Loader.prototype.internalizeTiddler = function(store,tiddler,title,node)\n{\n\tvar e = node.firstChild;\n\tvar text = null;\n\tif(node.getAttribute(\"tiddler\")) {\n\t\ttext = getNodeText(e).unescapeLineBreaks();\n\t} else {\n\t\twhile(e.nodeName!=\"PRE\" && e.nodeName!=\"pre\") {\n\t\t\te = e.nextSibling;\n\t\t}\n\t\ttext = e.innerHTML.replace(/\\r/mg,\"\").htmlDecode();\n\t}\n\tvar creator = node.getAttribute(\"creator\");\n\tvar modifier = node.getAttribute(\"modifier\");\n\tvar c = node.getAttribute(\"created\");\n\tvar m = node.getAttribute(\"modified\");\n\tvar created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;\n\tvar modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;\n\tvar tags = node.getAttribute(\"tags\");\n\tvar fields = {};\n\tvar i,attrs = node.attributes;\n\tfor(i = attrs.length-1; i >= 0; i--) {\n\t\tvar name = attrs[i].name;\n\t\tif(attrs[i].specified && !TiddlyWiki.isStandardField(name)) {\n\t\t\tfields[name] = attrs[i].value.unescapeLineBreaks();\n\t\t}\n\t}\n\ttiddler.assign(title,text,modifier,modified,tags,created,fields,creator);\n\treturn tiddler;\n};\n\n//--\n//-- TW21Saver (inherits from SaverBase)\n//--\n\nfunction TW21Saver() {}\n\nTW21Saver.prototype = new SaverBase();\n\nTW21Saver.prototype.externalizeTiddler = function(store,tiddler)\n{\n\ttry {\n\t\tvar extendedAttributes = \"\";\n\t\tvar usePre = config.options.chkUsePreForStorage;\n\t\tstore.forEachField(tiddler,\n\t\t\tfunction(tiddler,fieldName,value) {\n\t\t\t\t// don't store stuff from the temp namespace\n\t\t\t\tif(typeof value != \"string\")\n\t\t\t\t\tvalue = \"\";\n\t\t\t\tif(!fieldName.match(/^temp\\./))\n\t\t\t\t\textendedAttributes += ' %0=\"%1\"'.format([fieldName,value.escapeLineBreaks().htmlEncode()]);\n\t\t\t},true);\n\t\tvar created = tiddler.created;\n\t\tvar modified = tiddler.modified;\n\t\tvar attributes = tiddler.creator ? ' creator=\"' + tiddler.creator.htmlEncode() + '\"' : \"\";\n\t\tattributes += tiddler.modifier ? ' modifier=\"' + tiddler.modifier.htmlEncode() + '\"' : \"\";\n\t\tattributes += (usePre && created == version.date) ? \"\" :' created=\"' + created.convertToYYYYMMDDHHMM() + '\"';\n\t\tattributes += (usePre && modified == created) ? \"\" : ' modified=\"' + modified.convertToYYYYMMDDHHMM() +'\"';\n\t\tvar tags = tiddler.getTags();\n\t\tif(!usePre || tags)\n\t\t\tattributes += ' tags=\"' + tags.htmlEncode() + '\"';\n\t\treturn ('<div %0=\"%1\"%2%3>%4</'+'div>').format([\n\t\t\t\tusePre ? \"title\" : \"tiddler\",\n\t\t\t\ttiddler.title.htmlEncode(),\n\t\t\t\tattributes,\n\t\t\t\textendedAttributes,\n\t\t\t\tusePre ? \"\\n<pre>\" + tiddler.text.htmlEncode() + \"</pre>\\n\" : tiddler.text.escapeLineBreaks().htmlEncode()\n\t\t\t]);\n\t} catch (ex) {\n\t\tthrow exceptionText(ex,config.messages.tiddlerSaveError.format([tiddler.title]));\n\t}\n};\n\n/***\n|''Name''|TiddlyWebAdaptor|\n|''Description''|adaptor for interacting with TiddlyWeb|\n|''Author:''|FND|\n|''Contributors''|Chris Dent, Martin Budden|\n|''Version''|1.4.10|\n|''Status''|stable|\n|''Source''|http://svn.tiddlywiki.org/Trunk/association/adaptors/TiddlyWebAdaptor.js|\n|''CodeRepository''|http://svn.tiddlywiki.org/Trunk/association/|\n|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|\n|''CoreVersion''|2.5|\n|''Keywords''|serverSide TiddlyWeb|\n!Notes\nThis plugin includes [[jQuery JSON|http://code.google.com/p/jquery-json/]].\n!To Do\n* createWorkspace\n* document custom/optional context attributes (e.g. filters, query, revision) and tiddler fields (e.g. server.title, origin)\n!Code\n***/\n//{{{\n(function($) {\n\nvar adaptor = config.adaptors.tiddlyweb = function() {};\n\nadaptor.prototype = new AdaptorBase();\nadaptor.serverType = \"tiddlyweb\";\nadaptor.serverLabel = \"TiddlyWeb\";\nadaptor.mimeType = \"application/json\";\n\nadaptor.parsingErrorMessage = \"Error parsing result from server\";\nadaptor.noBagErrorMessage = \"no bag specified for tiddler\";\nadaptor.locationIDErrorMessage = \"no bag or recipe specified for tiddler\"; // TODO: rename\n\n// retrieve current status (requires TiddlyWeb status plugin)\nadaptor.prototype.getStatus = function(context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tvar uriTemplate = \"%0/status\";\n\tvar uri = uriTemplate.format([context.host]);\n\tvar req = httpReq(\"GET\", uri, adaptor.getStatusCallback, context,\n\t\tnull, null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getStatusCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = responseText ? status : false;\n\ttry {\n\t\tcontext.statusText = xhr.statusText;\n\t} catch(exc) { // offline (Firefox)\n\t\tcontext.status = false;\n\t\tcontext.statusText = null;\n\t}\n\tcontext.httpStatus = xhr.status;\n\tif(context.status) {\n\t\tcontext.serverStatus = $.evalJSON(responseText); // XXX: error handling!?\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// retrieve a list of workspaces\nadaptor.prototype.getWorkspaceList = function(context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.workspaces = [];\n\tvar uriTemplate = \"%0/recipes\"; // XXX: bags?\n\tvar uri = uriTemplate.format([context.host]);\n\tvar req = httpReq(\"GET\", uri, adaptor.getWorkspaceListCallback,\n\t\tcontext, { accept: adaptor.mimeType }, null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getWorkspaceListCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = status;\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(status) {\n\t\ttry {\n\t\t\tvar workspaces = $.evalJSON(responseText);\n\t\t} catch(ex) {\n\t\t\tcontext.status = false; // XXX: correct?\n\t\t\tcontext.statusText = exceptionText(ex, adaptor.parsingErrorMessage);\n\t\t\tif(context.callback) {\n\t\t\t\tcontext.callback(context, context.userParams);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tcontext.workspaces = workspaces.map(function(itm) { return { title: itm }; });\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// retrieve a list of tiddlers\nadaptor.prototype.getTiddlerList = function(context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tvar uriTemplate = \"%0/%1/%2/tiddlers%3\";\n\tvar params = context.filters ? \"?\" + context.filters : \"\";\n\tif(context.format) {\n\t\tparams = context.format + params;\n\t}\n\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\tvar uri = uriTemplate.format([context.host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name), params]);\n\tvar req = httpReq(\"GET\", uri, adaptor.getTiddlerListCallback,\n\t\tcontext, merge({ accept: adaptor.mimeType }, context.headers), null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getTiddlerListCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = status;\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(status) {\n\t\tcontext.tiddlers = [];\n\t\ttry {\n\t\t\tvar tiddlers = $.evalJSON(responseText); //# NB: not actual tiddler instances\n\t\t} catch(ex) {\n\t\t\tcontext.status = false; // XXX: correct?\n\t\t\tcontext.statusText = exceptionText(ex, adaptor.parsingErrorMessage);\n\t\t\tif(context.callback) {\n\t\t\t\tcontext.callback(context, context.userParams);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\tvar tiddler = adaptor.toTiddler(tiddlers[i], context.host);\n\t\t\tcontext.tiddlers.push(tiddler);\n\t\t}\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// perform global search\nadaptor.prototype.getSearchResults = function(context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tvar uriTemplate = \"%0/search?q=%1%2\";\n\tvar filterString = context.filters ? \";\" + context.filters : \"\";\n\tvar uri = uriTemplate.format([context.host, context.query, filterString]); // XXX: parameters need escaping?\n\tvar req = httpReq(\"GET\", uri, adaptor.getSearchResultsCallback,\n\t\tcontext, { accept: adaptor.mimeType }, null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getSearchResultsCallback = function(status, context, responseText, uri, xhr) {\n\tadaptor.getTiddlerListCallback(status, context, responseText, uri, xhr); // XXX: use apply?\n};\n\n// retrieve a particular tiddler's revisions\nadaptor.prototype.getTiddlerRevisionList = function(title, limit, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tvar uriTemplate = \"%0/%1/%2/tiddlers/%3/revisions\";\n\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\tvar uri = uriTemplate.format([context.host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name), adaptor.normalizeTitle(title)]);\n\tvar req = httpReq(\"GET\", uri, adaptor.getTiddlerRevisionListCallback,\n\t\tcontext, merge({ accept: adaptor.mimeType }, context.headers), null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getTiddlerRevisionListCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = status;\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(status) {\n\t\tcontext.revisions = [];\n\t\ttry {\n\t\t\tvar tiddlers = $.evalJSON(responseText); //# NB: not actual tiddler instances\n\t\t} catch(ex) {\n\t\t\tcontext.status = false; // XXX: correct?\n\t\t\tcontext.statusText = exceptionText(ex, adaptor.parsingErrorMessage);\n\t\t\tif(context.callback) {\n\t\t\t\tcontext.callback(context, context.userParams);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\tvar tiddler = adaptor.toTiddler(tiddlers[i], context.host);\n\t\t\tcontext.revisions.push(tiddler);\n\t\t}\n\t\tvar sortField = \"server.page.revision\";\n\t\tcontext.revisions.sort(function(a, b) {\n\t\t\treturn a.fields[sortField] < b.fields[sortField] ? 1 :\n\t\t\t\t(a.fields[sortField] == b.fields[sortField] ? 0 : -1);\n\t\t});\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// retrieve an individual tiddler revision -- XXX: breaks with standard arguments list -- XXX: convenience function; simply use getTiddler?\nadaptor.prototype.getTiddlerRevision = function(title, revision, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.revision = revision;\n\treturn this.getTiddler(title, context, userParams, callback);\n};\n\n// retrieve an individual tiddler\nadaptor.prototype.getTiddler = function(title, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.title = title;\n\tif(context.revision) {\n\t\tvar uriTemplate = \"%0/%1/%2/tiddlers/%3/revisions/%4\";\n\t} else {\n\t\turiTemplate = \"%0/%1/%2/tiddlers/%3\";\n\t}\n\tif(!context.tiddler) {\n\t\tcontext.tiddler = new Tiddler(title);\n\t}\n\tcontext.tiddler.fields[\"server.type\"] = adaptor.serverType;\n\tcontext.tiddler.fields[\"server.host\"] = AdaptorBase.minHostName(context.host);\n\tcontext.tiddler.fields[\"server.workspace\"] = context.workspace;\n\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\tvar uri = uriTemplate.format([context.host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name), adaptor.normalizeTitle(title),\n\t\tcontext.revision]);\n\tvar req = httpReq(\"GET\", uri, adaptor.getTiddlerCallback, context,\n\t\tmerge({ accept: adaptor.mimeType }, context.headers), null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getTiddlerCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = status;\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(status) {\n\t\ttry {\n\t\t\tvar tid = $.evalJSON(responseText);\n\t\t} catch(ex) {\n\t\t\tcontext.status = false;\n\t\t\tcontext.statusText = exceptionText(ex, adaptor.parsingErrorMessage);\n\t\t\tif(context.callback) {\n\t\t\t\tcontext.callback(context, context.userParams);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tvar tiddler = adaptor.toTiddler(tid, context.host);\n\t\ttiddler.title = context.tiddler.title;\n\t\ttiddler.fields[\"server.etag\"] = xhr.getResponseHeader(\"Etag\");\n\t\t// normally we'd assign context.tiddler = tiddler here - but we can't do\n\t\t// that because of IE, which triggers getTiddler in putTiddlerCallback,\n\t\t// and since ServerSideSavingPlugin foolishly relies on persistent\n\t\t// object references, we need to merge the data into the existing object\n\t\t$.extend(context.tiddler, tiddler);\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// retrieve tiddler chronicle (all revisions)\nadaptor.prototype.getTiddlerChronicle = function(title, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.title = title;\n\tvar uriTemplate = \"%0/%1/%2/tiddlers/%3/revisions?fat=1\";\n\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\tvar uri = uriTemplate.format([context.host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name), adaptor.normalizeTitle(title)]);\n\tvar req = httpReq(\"GET\", uri, adaptor.getTiddlerChronicleCallback,\n\t\tcontext, { accept: adaptor.mimeType }, null, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getTiddlerChronicleCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = status;\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(status) {\n\t\tcontext.responseText = responseText;\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// store an individual tiddler\nadaptor.prototype.putTiddler = function(tiddler, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.title = tiddler.title;\n\tcontext.tiddler = tiddler;\n\tcontext.host = context.host || this.fullHostName(tiddler.fields[\"server.host\"]);\n\tvar uriTemplate = \"%0/%1/%2/tiddlers/%3\";\n\ttry {\n\t\tcontext.workspace = context.workspace || tiddler.fields[\"server.workspace\"];\n\t\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\t} catch(ex) {\n\t\treturn adaptor.locationIDErrorMessage;\n\t}\n\tvar uri = uriTemplate.format([context.host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name),\n\t\tadaptor.normalizeTitle(tiddler.title)]);\n\tvar etag = adaptor.generateETag(workspace, tiddler);\n\tvar headers = etag ? { \"If-Match\": etag } : null;\n\tvar payload = {\n\t\ttype: tiddler.fields[\"server.content-type\"] || null,\n\t\ttext: tiddler.text,\n\t\ttags: tiddler.tags,\n\t\tfields: $.extend({}, tiddler.fields)\n\t};\n\tdelete payload.fields.changecount;\n\t$.each(payload.fields, function(key, value) {\n\t\tif(key.indexOf(\"server.\") == 0) {\n\t\t\tdelete payload.fields[key];\n\t\t}\n\t});\n\tpayload = $.toJSON(payload);\n\tvar req = httpReq(\"PUT\", uri, adaptor.putTiddlerCallback,\n\t\tcontext, headers, payload, adaptor.mimeType, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.putTiddlerCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = [204, 1223].contains(xhr.status);\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(context.status) {\n\t\tvar loc = xhr.getResponseHeader(\"Location\");\n\t\tvar etag = xhr.getResponseHeader(\"Etag\");\n\t\tif(loc && etag) {\n\t\t\tvar bag = loc.split(\"/bags/\").pop().split(\"/\")[0];\n\t\t\tcontext.tiddler.fields[\"server.bag\"] = bag;\n\t\t\tcontext.tiddler.fields[\"server.workspace\"] = \"bags/\" + bag;\n\t\t\tvar rev = etag.split(\"/\").pop().split(/;|:/)[0];\n\t\t\tcontext.tiddler.fields[\"server.page.revision\"] = rev;\n\t\t\tcontext.tiddler.fields[\"server.etag\"] = etag;\n\t\t\tif(context.callback) {\n\t\t\t\tcontext.callback(context, context.userParams);\n\t\t\t}\n\t\t} else { // IE\n\t\t\tcontext.adaptor.getTiddler(context.tiddler.title, context,\n\t\t\t\tcontext.userParams, context.callback);\n\t\t}\n\t} else if(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// store a tiddler chronicle\nadaptor.prototype.putTiddlerChronicle = function(revisions, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.title = revisions[0].title;\n\tvar headers = null;\n\tvar uriTemplate = \"%0/%1/%2/tiddlers/%3/revisions\";\n\tvar host = context.host || this.fullHostName(tiddler.fields[\"server.host\"]);\n\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\tvar uri = uriTemplate.format([host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name),\n\t\tadaptor.normalizeTitle(context.title)]);\n\tif(workspace.type == \"bag\") { // generate ETag\n\t\tvar etag = [adaptor.normalizeTitle(workspace.name),\n\t\t\tadaptor.normalizeTitle(context.title), 0].join(\"/\"); //# zero-revision prevents overwriting existing contents\n\t\theaders = { \"If-Match\": '\"' + etag + '\"' };\n\t}\n\tvar payload = $.toJSON(revisions);\n\tvar req = httpReq(\"POST\", uri, adaptor.putTiddlerChronicleCallback,\n\t\tcontext, headers, payload, adaptor.mimeType, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.putTiddlerChronicleCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = [204, 1223].contains(xhr.status);\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// store a collection of tiddlers (import TiddlyWiki HTML store)\nadaptor.prototype.putTiddlerStore = function(store, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tvar uriTemplate = \"%0/%1/%2/tiddlers\";\n\tvar host = context.host;\n\tvar workspace = adaptor.resolveWorkspace(context.workspace);\n\tvar uri = uriTemplate.format([host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name)]);\n\tvar req = httpReq(\"POST\", uri, adaptor.putTiddlerStoreCallback,\n\t\tcontext, null, store, \"text/x-tiddlywiki\", null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.putTiddlerStoreCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = [204, 1223].contains(xhr.status);\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// rename an individual tiddler or move it to a different workspace -- TODO: make {from|to}.title optional\nadaptor.prototype.moveTiddler = function(from, to, context, userParams, callback) { // XXX: rename parameters (old/new)?\n\tvar self = this;\n\tvar newTiddler = store.getTiddler(from.title) || store.getTiddler(to.title); //# local rename might already have occurred\n\tvar oldTiddler = $.extend(true, {}, newTiddler); //# required for eventual deletion\n\toldTiddler.title = from.title; //# required for original tiddler's ETag\n\tvar _getTiddlerChronicle = function(title, context, userParams, callback) {\n\t\treturn self.getTiddlerChronicle(title, context, userParams, callback);\n\t};\n\tvar _putTiddlerChronicle = function(context, userParams) {\n\t\tif(!context.status) {\n\t\t\treturn callback(context, userParams);\n\t\t}\n\t\tvar revisions = $.evalJSON(context.responseText); // XXX: error handling?\n\t\t// change current title while retaining previous location\n\t\tfor(var i = 0; i < revisions.length; i++) {\n\t\t\tdelete revisions[i].revision;\n\t\t\tif(!revisions[i].fields.origin) { // NB: origin = \"<workspace>/<title>\"\n\t\t\t\trevisions[i].fields.origin = [\"bags\", revisions[i].bag, revisions[i].title].join(\"/\");\n\t\t\t}\n\t\t\trevisions[i].title = to.title;\n\t\t}\n\t\t// add new revision\n\t\tvar rev = $.extend({}, revisions[0]);\n\t\t$.each(newTiddler, function(i, item) {\n\t\t\tif(!$.isFunction(item)) {\n\t\t\t\trev[i] = item;\n\t\t\t}\n\t\t});\n\t\trev.title = to.title;\n\t\trev.created = rev.created.convertToYYYYMMDDHHMM();\n\t\trev.modified = new Date().convertToYYYYMMDDHHMM();\n\t\tdelete rev.fields.changecount;\n\t\trevisions.unshift(rev);\n\t\tif(to.workspace) {\n\t\t\tcontext.workspace = to.workspace;\n\t\t} else if(context.workspace.substring(0, 4) != \"bags\") { // NB: target workspace must be a bag\n\t\t\tcontext.workspace = \"bags/\" + rev.bag;\n\t\t}\n\t\tvar subCallback = function(context, userParams) {\n\t\t\tif(!context.status) {\n\t\t\t\treturn callback(context, userParams);\n\t\t\t}\n\t\t\tcontext.adaptor.getTiddler(newTiddler.title, context, userParams, _deleteTiddler);\n\t\t};\n\t\treturn self.putTiddlerChronicle(revisions, context, context.userParams, subCallback);\n\t};\n\tvar _deleteTiddler = function(context, userParams) {\n\t\tif(!context.status) {\n\t\t\treturn callback(context, userParams);\n\t\t}\n\t\t$.extend(true, newTiddler, context.tiddler);\n\t\tcontext.callback = null;\n\t\treturn self.deleteTiddler(oldTiddler, context, context.userParams, callback);\n\t};\n\tcallback = callback || function() {};\n\tcontext = this.setContext(context, userParams);\n\tcontext.host = context.host || oldTiddler.fields[\"server.host\"];\n\tcontext.workspace = from.workspace || oldTiddler.fields[\"server.workspace\"];\n\treturn _getTiddlerChronicle(from.title, context, userParams, _putTiddlerChronicle);\n};\n\n// delete an individual tiddler\nadaptor.prototype.deleteTiddler = function(tiddler, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.title = tiddler.title; // XXX: not required!?\n\tvar uriTemplate = \"%0/bags/%1/tiddlers/%2\";\n\tvar host = context.host || this.fullHostName(tiddler.fields[\"server.host\"]);\n\tvar bag = tiddler.fields[\"server.bag\"];\n\tif(!bag) {\n\t\treturn adaptor.noBagErrorMessage;\n\t}\n\tvar uri = uriTemplate.format([host, adaptor.normalizeTitle(bag),\n\t\tadaptor.normalizeTitle(tiddler.title)]);\n\tvar etag = adaptor.generateETag({ type: \"bag\", name: bag }, tiddler);\n\tvar headers = etag ? { \"If-Match\": etag } : null;\n\tvar req = httpReq(\"DELETE\", uri, adaptor.deleteTiddlerCallback, context, headers,\n\t\tnull, null, null, null, true);\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.deleteTiddlerCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = [204, 1223].contains(xhr.status);\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// compare two revisions of a tiddler (requires TiddlyWeb differ plugin)\nadaptor.prototype.getTiddlerDiff = function(title, context, userParams, callback) {\n\tcontext = this.setContext(context, userParams, callback);\n\tcontext.title = title;\n\n\tvar tiddler = store.getTiddler(title);\n\ttry {\n\t\tvar workspace = adaptor.resolveWorkspace(tiddler.fields[\"server.workspace\"]);\n\t} catch(ex) {\n\t\treturn adaptor.locationIDErrorMessage;\n\t}\n\tvar tiddlerRef = [workspace.type + \"s\", workspace.name, tiddler.title].join(\"/\");\n\n\tvar rev1 = context.rev1 ? [tiddlerRef, context.rev1].join(\"/\") : tiddlerRef;\n\tvar rev2 = context.rev2 ? [tiddlerRef, context.rev2].join(\"/\") : null;\n\n\tvar uriTemplate = \"%0/diff?rev1=%1\";\n\tif(rev2) {\n\t\turiTemplate += \"&rev2=%2\";\n\t}\n\tif(context.format) {\n\t\turiTemplate += \"&format=%3\";\n\t}\n\tvar host = context.host || this.fullHostName(tiddler.fields[\"server.host\"]);\n\tvar uri = uriTemplate.format([host, adaptor.normalizeTitle(rev1),\n\t\tadaptor.normalizeTitle(rev2), context.format]);\n\n\tif(rev2) {\n\t\tvar req = httpReq(\"GET\", uri, adaptor.getTiddlerDiffCallback, context, null,\n\t\t\tnull, null, null, null, true);\n\t} else {\n\t\tvar payload = {\n\t\t\ttitle: tiddler.title,\n\t\t\ttext: tiddler.text,\n\t\t\tmodifier: tiddler.modifier,\n\t\t\ttags: tiddler.tags,\n\t\t\tfields: $.extend({}, tiddler.fields)\n\t\t}; // XXX: missing attributes!?\n\t\tpayload = $.toJSON(payload);\n\t\treq = httpReq(\"POST\", uri, adaptor.getTiddlerDiffCallback, context,\n\t\t\tnull, payload, adaptor.mimeType, null, null, true);\n\t}\n\treturn typeof req == \"string\" ? req : true;\n};\n\nadaptor.getTiddlerDiffCallback = function(status, context, responseText, uri, xhr) {\n\tcontext.status = status;\n\tcontext.statusText = xhr.statusText;\n\tcontext.httpStatus = xhr.status;\n\tcontext.uri = uri;\n\tif(status) {\n\t\tcontext.diff = responseText;\n\t}\n\tif(context.callback) {\n\t\tcontext.callback(context, context.userParams);\n\t}\n};\n\n// generate tiddler information\nadaptor.prototype.generateTiddlerInfo = function(tiddler) {\n\tvar info = {};\n\tvar uriTemplate = \"%0/%1/%2/tiddlers/%3\";\n\tvar host = this.host || tiddler.fields[\"server.host\"]; // XXX: this.host obsolete?\n\thost = this.fullHostName(host);\n\tvar workspace = adaptor.resolveWorkspace(tiddler.fields[\"server.workspace\"]);\n\tinfo.uri = uriTemplate.format([host, workspace.type + \"s\",\n\t\tadaptor.normalizeTitle(workspace.name),\n\t\tadaptor.normalizeTitle(tiddler.title)]);\n\treturn info;\n};\n\n// create Tiddler instance from TiddlyWeb tiddler JSON\nadaptor.toTiddler = function(json, host) {\n\tvar created = Date.convertFromYYYYMMDDHHMM(json.created);\n\tvar modified = Date.convertFromYYYYMMDDHHMM(json.modified);\n\tvar fields = json.fields;\n\tfields[\"server.type\"] = adaptor.serverType;\n\tfields[\"server.host\"] = AdaptorBase.minHostName(host);\n\tfields[\"server.bag\"] = json.bag;\n\tfields[\"server.title\"] = json.title;\n\tif(json.recipe) {\n\t\tfields[\"server.recipe\"] = json.recipe;\n\t}\n\tif(json.type && json.type != \"None\") {\n\t\tfields[\"server.content-type\"] = json.type;\n\t}\n\tfields[\"server.permissions\"] = json.permissions.join(\", \");\n\tfields[\"server.page.revision\"] = json.revision;\n\tfields[\"server.workspace\"] = \"bags/\" + json.bag;\n\tvar tiddler = new Tiddler(json.title);\n\ttiddler.assign(tiddler.title, json.text, json.modifier, modified, json.tags,\n\t\tcreated, json.fields, json.creator);\n\treturn tiddler;\n};\n\nadaptor.resolveWorkspace = function(workspace) {\n\tvar components = workspace.split(\"/\");\n\treturn {\n\t\ttype: components[0] == \"bags\" ? \"bag\" : \"recipe\",\n\t\tname: components[1] || components[0]\n\t};\n};\n\nadaptor.generateETag = function(workspace, tiddler) {\n\tvar revision = tiddler.fields[\"server.page.revision\"];\n\tvar etag = revision == \"false\" ? null : tiddler.fields[\"server.etag\"];\n\tif(!etag && workspace.type == \"bag\") {\n\t\tif(typeof revision == \"undefined\") {\n\t\t\trevision = \"0\";\n\t\t} else if(revision == \"false\") {\n\t\t\treturn null;\n\t\t}\n\t\tetag = [adaptor.normalizeTitle(workspace.name),\n\t\t\tadaptor.normalizeTitle(tiddler.title), revision].join(\"/\");\n\t\tetag = '\"' + etag + '\"';\n\t}\n\treturn etag;\n};\n\nadaptor.normalizeTitle = function(title) {\n\treturn encodeURIComponent(title);\n};\n\n})(jQuery);\n\n\n/*\n * jQuery JSON Plugin\n * version: 1.3\n * source: http://code.google.com/p/jquery-json/\n * license: MIT (http://www.opensource.org/licenses/mit-license.php)\n */\n(function($){function toIntegersAtLease(n)\n{return n<10?'0'+n:n;}\nDate.prototype.toJSON=function(date)\n{return this.getUTCFullYear()+'-'+\ntoIntegersAtLease(this.getUTCMonth())+'-'+\ntoIntegersAtLease(this.getUTCDate());};var escapeable=/[\"\\\\\\x00-\\x1f\\x7f-\\x9f]/g;var meta={'\\b':'\\\\b','\\t':'\\\\t','\\n':'\\\\n','\\f':'\\\\f','\\r':'\\\\r','\"':'\\\\\"','\\\\':'\\\\\\\\'};$.quoteString=function(string)\n{if(escapeable.test(string))\n{return'\"'+string.replace(escapeable,function(a)\n{var c=meta[a];if(typeof c==='string'){return c;}\nc=a.charCodeAt();return'\\\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16);})+'\"';}\nreturn'\"'+string+'\"';};$.toJSON=function(o,compact)\n{var type=typeof(o);if(type==\"undefined\")\nreturn\"undefined\";else if(type==\"number\"||type==\"boolean\")\nreturn o+\"\";else if(o===null)\nreturn\"null\";if(type==\"string\")\n{return $.quoteString(o);}\nif(type==\"object\"&&typeof o.toJSON==\"function\")\nreturn o.toJSON(compact);if(type!=\"function\"&&typeof(o.length)==\"number\")\n{var ret=[];for(var i=0;i<o.length;i++){ret.push($.toJSON(o[i],compact));}\nif(compact)\nreturn\"[\"+ret.join(\",\")+\"]\";else\nreturn\"[\"+ret.join(\", \")+\"]\";}\nif(type==\"function\"){throw new TypeError(\"Unable to convert object of type 'function' to json.\");}\nvar ret=[];for(var k in o){var name;type=typeof(k);if(type==\"number\")\nname='\"'+k+'\"';else if(type==\"string\")\nname=$.quoteString(k);else\ncontinue;var val=$.toJSON(o[k],compact);if(typeof(val)!=\"string\"){continue;}\nif(compact)\nret.push(name+\":\"+val);else\nret.push(name+\": \"+val);}\nreturn\"{\"+ret.join(\", \")+\"}\";};$.compactJSON=function(o)\n{return $.toJSON(o,true);};$.evalJSON=function(src)\n{return eval(\"(\"+src+\")\");};$.secureEvalJSON=function(src)\n{var filtered=src;filtered=filtered.replace(/\\\\[\"\\\\\\/bfnrtu]/g,'@');filtered=filtered.replace(/\"[^\"\\\\\\n\\r]*\"|true|false|null|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\\s*\\[)+/g,'');if(/^[\\],:{}\\s]*$/.test(filtered))\nreturn eval(\"(\"+src+\")\");else\nthrow new SyntaxError(\"Error parsing JSON, source is not valid.\");};})(jQuery);\n//}}}\n/***\n|''Name''|ServerSideSavingPlugin|\n|''Description''|server-side saving|\n|''Author''|FND|\n|''Version''|0.6.5|\n|''Status''|stable|\n|''Source''|http://svn.tiddlywiki.org/Trunk/association/plugins/ServerSideSavingPlugin.js|\n|''License''|[[BSD|http://www.opensource.org/licenses/bsd-license.php]]|\n|''CoreVersion''|2.5.3|\n|''Keywords''|serverSide|\n!Notes\nThis plugin relies on a dedicated adaptor to be present.\nThe specific nature of this plugin depends on the respective server.\n!Revision History\n!!v0.1 (2008-11-24)\n* initial release\n!!v0.2 (2008-12-01)\n* added support for local saving\n!!v0.3 (2008-12-03)\n* added Save to Web macro for manual synchronization\n!!v0.4 (2009-01-15)\n* removed ServerConfig dependency by detecting server type from the respective tiddlers\n!!v0.5 (2009-08-25)\n* raised CoreVersion to 2.5.3 to take advantage of core fixes\n!!v0.6 (2010-04-21)\n* added notification about cross-domain restrictions to ImportTiddlers\n!To Do\n* conflict detection/resolution\n* rename to ServerLinkPlugin?\n* document deletion/renaming convention\n!Code\n***/\n//{{{\n(function($) {\n\nreadOnly = false; //# enable editing over HTTP\n\nvar plugin = config.extensions.ServerSideSavingPlugin = {};\n\nplugin.locale = {\n\tsaved: \"%0 saved successfully\",\n\tsaveError: \"Error saving %0: %1\",\n\tsaveConflict: \"Error saving %0: edit conflict\",\n\tdeleted: \"Removed %0\",\n\tdeleteError: \"Error removing %0: %1\",\n\tdeleteLocalError: \"Error removing %0 locally\",\n\tremovedNotice: \"This tiddler has been deleted.\",\n\tconnectionError: \"connection could not be established\",\n\thostError: \"Unable to import from this location due to cross-domain restrictions.\"\n};\n\nplugin.sync = function(tiddlers) {\n\ttiddlers = tiddlers && tiddlers[0] ? tiddlers : store.getTiddlers();\n\t$.each(tiddlers, function(i, tiddler) {\n\t\tvar changecount = parseInt(tiddler.fields.changecount, 10);\n\t\tif(tiddler.fields.deleted === \"true\" && changecount === 1) {\n\t\t\tplugin.removeTiddler(tiddler);\n\t\t} else if(tiddler.isTouched() && !tiddler.doNotSave() &&\n\t\t\t\ttiddler.getServerType() && tiddler.fields[\"server.host\"]) { // XXX: server.host could be empty string\n\t\t\tdelete tiddler.fields.deleted;\n\t\t\tplugin.saveTiddler(tiddler);\n\t\t}\n\t});\n};\n\nplugin.saveTiddler = function(tiddler) {\n\ttry {\n\t\tvar adaptor = this.getTiddlerServerAdaptor(tiddler);\n\t} catch(ex) {\n\t\treturn false;\n\t}\n\tvar context = {\n\t\ttiddler: tiddler,\n\t\tchangecount: tiddler.fields.changecount,\n\t\tworkspace: tiddler.fields[\"server.workspace\"]\n\t};\n\tvar serverTitle = tiddler.fields[\"server.title\"]; // indicates renames\n\tif(!serverTitle) {\n\t\ttiddler.fields[\"server.title\"] = tiddler.title;\n\t} else if(tiddler.title != serverTitle) {\n\t\treturn adaptor.moveTiddler({ title: serverTitle },\n\t\t\t{ title: tiddler.title }, context, null, this.saveTiddlerCallback);\n\t}\n\tvar req = adaptor.putTiddler(tiddler, context, {}, this.saveTiddlerCallback);\n\treturn req ? tiddler : false;\n};\n\nplugin.saveTiddlerCallback = function(context, userParams) {\n\tvar tiddler = context.tiddler;\n\tif(context.status) {\n\t\tif(tiddler.fields.changecount == context.changecount) { //# check for changes since save was triggered\n\t\t\ttiddler.clearChangeCount();\n\t\t} else if(tiddler.fields.changecount > 0) {\n\t\t\ttiddler.fields.changecount -= context.changecount;\n\t\t}\n\t\tplugin.reportSuccess(\"saved\", tiddler);\n\t\tstore.setDirty(false);\n\t} else {\n\t\tif(context.httpStatus == 412) {\n\t\t\tplugin.reportFailure(\"saveConflict\", tiddler);\n\t\t} else {\n\t\t\tplugin.reportFailure(\"saveError\", tiddler, context);\n\t\t}\n\t}\n};\n\nplugin.removeTiddler = function(tiddler) {\n\ttry {\n\t\tvar adaptor = this.getTiddlerServerAdaptor(tiddler);\n\t} catch(ex) {\n\t\treturn false;\n\t}\n\tvar context = {\n\t\thost: tiddler.fields[\"server.host\"],\n\t\tworkspace: tiddler.fields[\"server.workspace\"],\n\t\ttiddler: tiddler\n\t};\n\tvar req = adaptor.deleteTiddler(tiddler, context, {}, this.removeTiddlerCallback);\n\treturn req ? tiddler : false;\n};\n\nplugin.removeTiddlerCallback = function(context, userParams) {\n\tvar tiddler = context.tiddler;\n\tif(context.status) {\n\t\tif(tiddler.fields.deleted === \"true\") {\n\t\t\tstore.deleteTiddler(tiddler.title);\n\t\t} else {\n\t\t\tplugin.reportFailure(\"deleteLocalError\", tiddler);\n\t\t}\n\t\tplugin.reportSuccess(\"deleted\", tiddler);\n\t\tstore.setDirty(false);\n\t} else {\n\t\tplugin.reportFailure(\"deleteError\", tiddler, context);\n\t}\n};\n\nplugin.getTiddlerServerAdaptor = function(tiddler) { // XXX: rename?\n\tvar type = tiddler.fields[\"server.type\"] || config.defaultCustomFields[\"server.type\"];\n\treturn new config.adaptors[type]();\n};\n\nplugin.reportSuccess = function(msg, tiddler) {\n\tdisplayMessage(plugin.locale[msg].format([tiddler.title]));\n};\n\nplugin.reportFailure = function(msg, tiddler, context) {\n\tvar desc = (context && context.httpStatus) ? context.statusText :\n\t\tplugin.locale.connectionError;\n\tdisplayMessage(plugin.locale[msg].format([tiddler.title, desc]));\n};\n\nconfig.macros.saveToWeb = { // XXX: hijack existing sync macro?\n\tlocale: { // TODO: merge with plugin.locale?\n\t\tbtnLabel: \"save to web\",\n\t\tbtnTooltip: \"synchronize changes\",\n\t\tbtnAccessKey: null\n\t},\n\n\thandler: function(place, macroName, params, wikifier, paramString, tiddler) {\n\t\tcreateTiddlyButton(place, this.locale.btnLabel, this.locale.btnTooltip,\n\t\t\tplugin.sync, null, null, this.locale.btnAccessKey);\n\t}\n};\n\nwindow.saveChanges = function(onlyIfDirty, tiddlers) {\n\tplugin.sync(tiddlers);\n};\n\n// override removeTiddler to flag tiddler as deleted -- XXX: use hijack to preserve compatibility?\nTiddlyWiki.prototype.removeTiddler = function(title) { // XXX: should override deleteTiddler instance method?\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\ttiddler.tags = [\"excludeLists\", \"excludeSearch\", \"excludeMissing\"];\n\t\ttiddler.text = plugin.locale.removedNotice;\n\t\ttiddler.fields.deleted = \"true\"; // XXX: rename to removed/tiddlerRemoved?\n\t\ttiddler.fields.changecount = \"1\";\n\t\tthis.notify(title, true);\n\t\tthis.setDirty(true);\n\t}\n};\n\n// hijack ImportTiddlers wizard to handle cross-domain restrictions\nvar _onOpen = config.macros.importTiddlers.onOpen;\nconfig.macros.importTiddlers.onOpen = function(ev) {\n\tvar btn = $(resolveTarget(ev));\n\tvar url = btn.closest(\".wizard\").find(\"input[name=txtPath]\").val();\n\tif(window.location.protocol != \"file:\" && url.indexOf(\"://\") != -1) {\n\t\tvar host = url.split(\"/\")[2];\n\t\tvar macro = config.macros.importTiddlers;\n\t\tif(host != window.location.host) {\n\t\t\tbtn.text(macro.cancelLabel).attr(\"title\", macro.cancelPrompt);\n\t\t\tbtn[0].onclick = macro.onCancel;\n\t\t\t$('<span class=\"status\" />').text(plugin.locale.hostError).insertAfter(btn);\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn _onOpen.apply(this, arguments);\n};\n\n})(jQuery);\n//}}}\n//--\n//-- Backstage\n//--\n// Backstage tasks\nconfig.tasks.save.action = saveChanges;\n\nvar backstage = {\n\tarea: null,\n\ttoolbar: null,\n\tbutton: null,\n\tshowButton: null,\n\thideButton: null,\n\tcloak: null,\n\tpanel: null,\n\tpanelBody: null,\n\tpanelFooter: null,\n\tcurrTabName: null,\n\tcurrTabElem: null,\n\tcontent: null,\n\n\tinit: function() {\n\t\tvar cmb = config.messages.backstage;\n\t\tthis.area = document.getElementById(\"backstageArea\");\n\t\tthis.toolbar = jQuery(\"#backstageToolbar\").empty()[0];\n\t\tthis.button = jQuery(\"#backstageButton\").empty()[0];\n\t\tthis.button.style.display = \"block\";\n\t\tvar t = cmb.open.text + \" \" + glyph(\"bentArrowLeft\");\n\t\tthis.showButton = createTiddlyButton(this.button,t,cmb.open.tooltip,\n\t\t\t\t\t\tfunction(e) {backstage.show(); return false;},null,\"backstageShow\");\n\t\tt = glyph(\"bentArrowRight\") + \" \" + cmb.close.text;\n\t\tthis.hideButton = createTiddlyButton(this.button,t,cmb.close.tooltip,\n\t\t\t\t\t\tfunction(e) {backstage.hide(); return false;},null,\"backstageHide\");\n\t\tthis.cloak = document.getElementById(\"backstageCloak\");\n\t\tthis.panel = document.getElementById(\"backstagePanel\");\n\t\tthis.panelFooter = createTiddlyElement(this.panel,\"div\",null,\"backstagePanelFooter\");\n\t\tthis.panelBody = createTiddlyElement(this.panel,\"div\",null,\"backstagePanelBody\");\n\t\tthis.cloak.onmousedown = function(e) {backstage.switchTab(null);};\n\t\tcreateTiddlyText(this.toolbar,cmb.prompt);\n\t\tfor(t=0; t<config.backstageTasks.length; t++) {\n\t\t\tvar taskName = config.backstageTasks[t];\n\t\t\tvar task = config.tasks[taskName];\n\t\t\tvar handler = task.action ? this.onClickCommand : this.onClickTab;\n\t\t\tvar text = task.text + (task.action ? \"\" : glyph(\"downTriangle\"));\n\t\t\tvar btn = createTiddlyButton(this.toolbar,text,task.tooltip,handler,\"backstageTab\");\n\t\t\tjQuery(btn).addClass(task.action ? \"backstageAction\" : \"backstageTask\");\n\t\t\tbtn.setAttribute(\"task\", taskName);\n\t\t\t}\n\t\tthis.content = document.getElementById(\"contentWrapper\");\n\t\tif(config.options.chkBackstage)\n\t\t\tthis.show();\n\t\telse\n\t\t\tthis.hide();\n\t},\n\n\tisVisible: function() {\n\t\treturn this.area ? this.area.style.display == \"block\" : false;\n\t},\n\n\tshow: function() {\n\t\tthis.area.style.display = \"block\";\n\t\tif(anim && config.options.chkAnimate) {\n\t\t\tbackstage.toolbar.style.left = findWindowWidth() + \"px\";\n\t\t\tvar p = [{style: \"left\", start: findWindowWidth(), end: 0, template: \"%0px\"}];\n\t\t\tanim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p));\n\t\t} else {\n\t\t\tbackstage.area.style.left = \"0px\";\n\t\t}\n\t\tjQuery(this.showButton).hide();\n\t\tjQuery(this.hideButton).show();\n\t\tconfig.options.chkBackstage = true;\n\t\tsaveOption(\"chkBackstage\");\n\t\tjQuery(this.content).addClass(\"backstageVisible\");\n\t},\n\n\thide: function() {\n\t\tif(this.currTabElem) {\n\t\t\tthis.switchTab(null);\n\t\t} else {\n\t\t\tbackstage.toolbar.style.left = \"0px\";\n\t\t\tif(anim && config.options.chkAnimate) {\n\t\t\t\tvar p = [{style: \"left\", start: 0, end: findWindowWidth(), template: \"%0px\"}];\n\t\t\t\tvar c = function(element,properties) {backstage.area.style.display = \"none\";};\n\t\t\t\tanim.startAnimating(new Morpher(backstage.toolbar,config.animDuration,p,c));\n\t\t\t} else {\n\t\t\t\tthis.area.style.display = \"none\";\n\t\t\t}\n\t\t\tthis.showButton.style.display = \"block\";\n\t\t\tthis.hideButton.style.display = \"none\";\n\t\t\tconfig.options.chkBackstage = false;\n\t\t\tsaveOption(\"chkBackstage\");\n\t\t\tjQuery(this.content).removeClass(\"backstageVisible\");\n\t\t}\n\t},\n\n\tonClickCommand: function(e) {\n\t\tvar task = config.tasks[this.getAttribute(\"task\")];\n\t\tif(task.action) {\n\t\t\tbackstage.switchTab(null);\n\t\t\ttask.action();\n\t\t}\n\t\treturn false;\n\t},\n\n\tonClickTab: function(e) {\n\t\tbackstage.switchTab(this.getAttribute(\"task\"));\n\t\treturn false;\n\t},\n\n\t// Switch to a given tab, or none if null is passed\n\tswitchTab: function(tabName) {\n\t\tvar tabElem = null;\n\t\tvar e = this.toolbar.firstChild;\n\t\twhile(e) {\n\t\t\tif(e.getAttribute && e.getAttribute(\"task\") == tabName)\n\t\t\t\ttabElem = e;\n\t\t\te = e.nextSibling;\n\t\t}\n\t\tif(tabName == backstage.currTabName) {\n\t\t\tbackstage.hidePanel();\n\t\t\treturn;\n\t\t}\n\t\tif(backstage.currTabElem) {\n\t\t\tjQuery(this.currTabElem).removeClass(\"backstageSelTab\");\n\t\t}\n\t\tif(tabElem && tabName) {\n\t\t\tbackstage.preparePanel();\n\t\t\tjQuery(tabElem).addClass(\"backstageSelTab\");\n\t\t\tvar task = config.tasks[tabName];\n\t\t\twikify(task.content,backstage.panelBody,null,null);\n\t\t\tbackstage.showPanel();\n\t\t} else if(backstage.currTabElem) {\n\t\t\tbackstage.hidePanel();\n\t\t}\n\t\tbackstage.currTabName = tabName;\n\t\tbackstage.currTabElem = tabElem;\n\t},\n\n\tisPanelVisible: function() {\n\t\treturn backstage.panel ? backstage.panel.style.display == \"block\" : false;\n\t},\n\n\tpreparePanel: function() {\n\t\tbackstage.cloak.style.height = findDocHeight() + \"px\";\n\t\tbackstage.cloak.style.display = \"block\";\n\t\tjQuery(backstage.panelBody).empty();\n\t\treturn backstage.panelBody;\n\t},\n\n\tshowPanel: function() {\n\t\tbackstage.panel.style.display = \"block\";\n\t\tif(anim && config.options.chkAnimate) {\n\t\t\tbackstage.panel.style.top = (-backstage.panel.offsetHeight) + \"px\";\n\t\t\tvar p = [{style: \"top\", start: -backstage.panel.offsetHeight, end: 0, template: \"%0px\"}];\n\t\t\tanim.startAnimating(new Morpher(backstage.panel,config.animDuration,p),new Scroller(backstage.panel,false));\n\t\t} else {\n\t\t\tbackstage.panel.style.top = \"0px\";\n\t\t}\n\t\treturn backstage.panelBody;\n\t},\n\n\thidePanel: function() {\n\t\tif(backstage.currTabElem)\n\t\t\tjQuery(backstage.currTabElem).removeClass(\"backstageSelTab\");\n\t\tbackstage.currTabElem = null;\n\t\tbackstage.currTabName = null;\n\t\tif(anim && config.options.chkAnimate) {\n\t\t\tvar p = [\n\t\t\t\t{style: \"top\", start: 0, end: -(backstage.panel.offsetHeight), template: \"%0px\"},\n\t\t\t\t{style: \"display\", atEnd: \"none\"}\n\t\t\t];\n\t\t\tvar c = function(element,properties) {backstage.cloak.style.display = \"none\";};\n\t\t\tanim.startAnimating(new Morpher(backstage.panel,config.animDuration,p,c));\n\t\t} else {\n\t\t\tjQuery([backstage.panel,backstage.cloak]).hide();\n\t\t}\n\t}\n};\n\nconfig.macros.backstage = {};\n\nconfig.macros.backstage.handler = function(place,macroName,params)\n{\n\tvar backstageTask = config.tasks[params[0]];\n\tif(backstageTask)\n\t\tcreateTiddlyButton(place,backstageTask.text,backstageTask.tooltip,function(e) {backstage.switchTab(params[0]); return false;});\n};\n\n//--\n//-- Main\n//--\n\nvar params = null; // Command line parameters\nvar store = null; // TiddlyWiki storage\nvar story = null; // Main story\nvar formatter = null; // Default formatters for the wikifier\nvar anim = typeof Animator == \"function\" ? new Animator() : null; // Animation engine\nvar readOnly = false; // Whether we're in readonly mode\nvar highlightHack = null; // Embarrassing hack department...\nvar hadConfirmExit = false; // Don't warn more than once\nvar safeMode = false; // Disable all plugins and cookies\nvar showBackstage; // Whether to include the backstage area\nvar installedPlugins = []; // Information filled in when plugins are executed\nvar startingUp = false; // Whether we're in the process of starting up\nvar pluginInfo,tiddler; // Used to pass information to plugins in loadPlugins()\n\njQuery(document).ready(function() {\n\njQuery(\"#contentWrapper\").addClass(\"loading\").text(\"Loading Space...\");\n\nvar total_tiddlers = -1;\najaxReq({ dataType: \"text\", url: \"/tiddlers\", success: function(text) {\n\ttotal_tiddlers = text.split(\"\\n\").length;\n}\n});\n\najaxReq({ dataType: \"json\", url: \"/status\", success: function(status) {\n\tvar host = window.location.protocol + \"//\" + window.location.hostname;\n\tvar workspace = \"recipes/\" + status[\"space\"][\"recipe\"];\n\tconfig.defaultCustomFields = {\n\t\t\"server.workspace\": workspace,\n\t\t\"server.type\": \"tiddlyweb\",\n\t\t\"server.host\": host\n\t};\n\tvar defaults = config.defaultCustomFields;\n\tvar filter = \"?mselect=tag:systemConfig,tag:excludeLists&type:!text/css&select=type:!text/html&select=type:!image/png&select=type:!image/jpg&select=type:!image/gif&select=type:!image/jpeg\";\n\tvar time = 0, start = 0, total = 50;\n\tvar lazy_load_content = function(title) {\n\t\twindow.setTimeout(function() {\n\t\t\tif(time < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tajaxReq({\n\t\t\t\tdataType: \"json\",\n\t\t\t\tdata: {\n\t\t\t\t\t\"fat\": \"1\"\n\t\t\t\t},\n\t\t\t\turl: host + \"/tiddlers?sort=-modified&limit=\" + start + \",\" + total,\n\t\t\t\tsuccess: function(tids) {\n\t\t\t\t\tfor(var i = 0; i < tids.length; i++) {\n\t\t\t\t\t\tvar tid = config.adaptors.tiddlyweb.toTiddler(tids[i], host);\n\t\t\t\t\t\tstore.addTiddler(tid);\n\t\t\t\t\t\tstore.notify(tid.title);\n\t\t\t\t\t\tstory.refreshTiddler(tid.title, null, true);\n\t\t\t\t\t}\n\t\t\t\t\tif(tids.length === 0) {\n\t\t\t\t\t\ttime = -1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif(total_tiddlers > -1) {\n\t\t\t\t\t\t\tvar pc = 100 - Math.floor(((total_tiddlers - store.getTiddlers().length) / total_tiddlers) * 100);\n\t\t\t\t\t\t\tdisplayMessage(pc + \"% of document loaded.\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstart += total;\n\t\t\t\t\t\ttime += 100;\n\t\t\t\t\t\tlazy_load_content(title);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}, time);\n\t}\n\tvar success = function(json) {\n\t\tstore = new TiddlyWiki({config:config});\n\t\tinvokeParamifier(params,\"oninit\");\n\t\tstory = new Story(\"tiddlerDisplay\",\"tiddler\");\n\t\tjQuery(\"#contentWrapper\").removeClass(\"loading\");\n\t\tfor(var i = 0; i < json.length; i++) {\n\t\t\tvar title = json[i].title;\n\t\t\tif([\"ServerSideSavingPlugin\",\n\t\t\t\t\"TiddlySpaceInit\", \"TiddlyWebAdaptor\", \"LoadMissingTiddlersPlugin\"].indexOf(title) === -1) {\n\t\t\t\tvar tid = config.adaptors.tiddlyweb.toTiddler(json[i], host);\n\t\t\t\tstore.addTiddler(tid);\n\t\t\t}\n\t\t}\n\t\tlazy_load_content();\n\t\tmain();\n\t};\n\tajaxReq({\n\t\tdataType: \"json\",\n\t\tdata: {\n\t\t\t\"fat\": \"1\"\n\t\t},\n\t\turl: host + \"/\" + workspace + \"/tiddlers\" + filter,\n\t\tsuccess: function(tiddlers) {\n\t\t\tsuccess(tiddlers);\n\t\t},\n\t\terror: function() {\n\t\t\tjQuery(\"#contentWrapper\").addClass(\"error\").text(\"Error occurred loading your tiddlers\");\n\t\t}\n\t});\n}});\n});\n\n// Starting up\nfunction main()\n{\n\tvar t10,t9,t8,t7,t6,t5,t4,t3,t2,t1,t0 = new Date();\n\tstartingUp = true;\n\tvar doc = jQuery(document);\n\tjQuery.noConflict();\n\twindow.onbeforeunload = function(e) {if(window.confirmExit) return confirmExit();};\n\tparams = getParameters();\n\tif(params)\n\t\tparams = params.parseParams(\"open\",null,false);\n\taddEvent(document,\"click\",Popup.onDocumentClick);\n\tvar s;\n\tfor(s=0; s<config.notifyTiddlers.length; s++)\n\t\tstore.addNotification(config.notifyTiddlers[s].name,config.notifyTiddlers[s].notify);\n\tt1 = new Date();\n\tloadShadowTiddlers();\n\tdoc.trigger(\"loadShadows\");\n\tt2 = new Date();\n\tstore.loadFromDiv(\"storeArea\",\"store\",true);\n\tdoc.trigger(\"loadTiddlers\");\n\tloadOptions();\n\tt3 = new Date();\n\tinvokeParamifier(params,\"onload\");\n\tt4 = new Date();\n\treadOnly = (window.location.protocol == \"file:\") ? false : config.options.chkHttpReadOnly;\n\tvar pluginProblem = loadPlugins(\"systemConfig\");\n\tdoc.trigger(\"loadPlugins\");\n\tt5 = new Date();\n\tformatter = new Formatter(config.formatters);\n\tinvokeParamifier(params,\"onconfig\");\n\tstory.switchTheme(config.options.txtTheme);\n\tshowBackstage = showBackstage !== undefined ? showBackstage : !readOnly;\n\tt6 = new Date();\n\tvar m;\n\tfor(m in config.macros) {\n\t\tif(config.macros[m].init)\n\t\t\tconfig.macros[m].init();\n\t}\n\tt7 = new Date();\n\tstore.notifyAll();\n\tt8 = new Date();\n\trestart();\n\trefreshDisplay();\n\tt9 = new Date();\n\tif(pluginProblem) {\n\t\tstory.displayTiddler(null,\"PluginManager\");\n\t\tdisplayMessage(config.messages.customConfigError);\n\t}\n\tif(showBackstage)\n\t\tbackstage.init();\n\tt10 = new Date();\n\tif(config.options.chkDisplayInstrumentation) {\n\t\tdisplayMessage(\"LoadShadows \" + (t2-t1) + \" ms\");\n\t\tdisplayMessage(\"LoadFromDiv \" + (t3-t2) + \" ms\");\n\t\tdisplayMessage(\"LoadPlugins \" + (t5-t4) + \" ms\");\n\t\tdisplayMessage(\"Macro init \" + (t7-t6) + \" ms\");\n\t\tdisplayMessage(\"Notify \" + (t8-t7) + \" ms\");\n\t\tdisplayMessage(\"Restart \" + (t9-t8) + \" ms\");\n\t\tdisplayMessage(\"Total: \" + (t10-t0) + \" ms\");\n\t}\n\tstartingUp = false;\n\tdoc.trigger(\"startup\");\n}\n\n// Called on unload. All functions called conditionally since they themselves may have been unloaded.\nfunction unload()\n{\n\tif(window.checkUnsavedChanges)\n\t\tcheckUnsavedChanges();\n\tif(window.scrubNodes)\n\t\tscrubNodes(document.body);\n}\n\n// Restarting\nfunction restart()\n{\n\tinvokeParamifier(params,\"onstart\");\n\tif(story.isEmpty()) {\n\t\tstory.displayDefaultTiddlers();\n\t}\n\twindow.scrollTo(0,0);\n}\n\nfunction loadShadowTiddlers()\n{\n\tvar shadows = new TiddlyWiki();\n\tshadows.loadFromDiv(\"shadowArea\",\"shadows\",true);\n\tshadows.forEachTiddler(function(title,tiddler){config.shadowTiddlers[title] = tiddler.text;});\n}\n\nfunction loadPlugins(tag)\n{\n\tif(safeMode)\n\t\treturn false;\n\tvar tiddlers = store.getTaggedTiddlers(tag);\n\ttiddlers.sort(function(a,b) {return a.title < b.title ? -1 : (a.title == b.title ? 0 : 1);});\n\tvar toLoad = [];\n\tvar nLoaded = 0;\n\tvar map = {};\n\tvar nPlugins = tiddlers.length;\n\tinstalledPlugins = [];\n\tvar i;\n\tfor(i=0; i<nPlugins; i++) {\n\t\tvar p = getPluginInfo(tiddlers[i]);\n\t\tinstalledPlugins[i] = p;\n\t\tvar n = p.Name || p.title;\n\t\tif(n)\n\t\t\tmap[n] = p;\n\t\tn = p.Source;\n\t\tif(n)\n\t\t\tmap[n] = p;\n\t}\n\tvar visit = function(p) {\n\t\tif(!p || p.done)\n\t\t\treturn;\n\t\tp.done = 1;\n\t\tvar reqs = p.Requires;\n\t\tif(reqs) {\n\t\t\treqs = reqs.readBracketedList();\n\t\t\tvar i;\n\t\t\tfor(i=0; i<reqs.length; i++)\n\t\t\t\tvisit(map[reqs[i]]);\n\t\t}\n\t\ttoLoad.push(p);\n\t};\n\tfor(i=0; i<nPlugins; i++)\n\t\tvisit(installedPlugins[i]);\n\tfor(i=0; i<toLoad.length; i++) {\n\t\tp = toLoad[i];\n\t\tpluginInfo = p;\n\t\ttiddler = p.tiddler;\n\t\tif(isPluginExecutable(p)) {\n\t\t\tif(isPluginEnabled(p)) {\n\t\t\t\tp.executed = true;\n\t\t\t\tvar startTime = new Date();\n\t\t\t\ttry {\n\t\t\t\t\tif(tiddler.text)\n\t\t\t\t\t\twindow.eval(tiddler.text);\n\t\t\t\t\tnLoaded++;\n\t\t\t\t} catch(ex) {\n\t\t\t\t\tp.log.push(config.messages.pluginError.format([exceptionText(ex)]));\n\t\t\t\t\tp.error = true;\n\t\t\t\t\tif(!console.tiddlywiki) {\n\t\t\t\t\t\tconsole.log(\"error evaluating \" + tiddler.title, ex);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tpluginInfo.startupTime = String((new Date()) - startTime) + \"ms\";\n\t\t\t} else {\n\t\t\t\tnPlugins--;\n\t\t\t}\n\t\t} else {\n\t\t\tp.warning = true;\n\t\t}\n\t}\n\treturn nLoaded != nPlugins;\n}\n\nfunction getPluginInfo(tiddler)\n{\n\tvar p = store.getTiddlerSlices(tiddler.title,[\"Name\",\"Description\",\"Version\",\"Requires\",\"CoreVersion\",\"Date\",\"Source\",\"Author\",\"License\",\"Browsers\"]);\n\tp.tiddler = tiddler;\n\tp.title = tiddler.title;\n\tp.log = [];\n\treturn p;\n}\n\n// Check that a particular plugin is valid for execution\nfunction isPluginExecutable(plugin)\n{\n\tif(plugin.tiddler.isTagged(\"systemConfigForce\")) {\n\t\tplugin.log.push(config.messages.pluginForced);\n\t\treturn true;\n\t}\n\tif(plugin[\"CoreVersion\"]) {\n\t\tvar coreVersion = plugin[\"CoreVersion\"].split(\".\");\n\t\tvar w = parseInt(coreVersion[0],10) - version.major;\n\t\tif(w == 0 && coreVersion[1])\n\t\t\tw = parseInt(coreVersion[1],10) - version.minor;\n\t\tif(w == 0 && coreVersion[2])\n\t\t\tw = parseInt(coreVersion[2],10) - version.revision;\n\t\tif(w > 0) {\n\t\t\tplugin.log.push(config.messages.pluginVersionError);\n\t\t\treturn false;\n\t\t}\n\t}\n\treturn true;\n}\n\nfunction isPluginEnabled(plugin)\n{\n\tif(plugin.tiddler.isTagged(\"systemConfigDisable\")) {\n\t\tplugin.log.push(config.messages.pluginDisabled);\n\t\treturn false;\n\t}\n\treturn true;\n}\n", "title": "_tiddlywiki-app.js", "permissions": ["read", "write", "create", "delete"], "modifier": "cdent", "type": "text/javascript", "tags": [], "revision": 455134}, {"creator": "jon", "fields": {"_hash": "e00f4225ab340fb931c4ec58f1c2fb303160fe49"}, "created": "20111028142231", "recipe": "gadabout_private", "modified": "20120320112519", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_tiddlywiki", "bag": "apps_public", "text": "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Strict//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd\">\n<html xmlns=\"http://www.w3.org/1999/xhtml\" xml:lang=\"en\" lang=\"en\">\n<head>\n<script id=\"versionArea\" type=\"text/javascript\">\n//<![CDATA[\nvar version = {title: \"TiddlyWiki\", major: 2, minor: 6, revision: 5, date: new Date(\"October 6, 2011\"), extensions: {}};\n//]]>\n</script>\n<meta http-equiv=\"Content-Type\" content=\"text/html;charset=utf-8\" />\n<meta name=\"copyright\" content=\"\nTiddlyWiki created by Jeremy Ruston, (jeremy [at] osmosoft [dot] com)\n\nCopyright (c) Jeremy Ruston 2004-2007\nCopyright (c) UnaMesa Association 2007-2011\n\nRedistribution and use in source and binary forms, with or without modification,\nare permitted provided that the following conditions are met:\n\nRedistributions of source code must retain the above copyright notice, this\nlist of conditions and the following disclaimer.\n\nRedistributions in binary form must reproduce the above copyright notice, this\nlist of conditions and the following disclaimer in the documentation and/or other\nmaterials provided with the distribution.\n\nNeither the name of the UnaMesa Association nor the names of its contributors may be\nused to endorse or promote products derived from this software without specific\nprior written permission.\n\nTHIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS 'AS IS' AND ANY\nEXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\nOF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT\nSHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,\nINCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\nTO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR\nBUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN\nCONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN\nANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH\nDAMAGE.\n\" />\n<!--PRE-HEAD-START-->\n<!--{{{-->\n<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' />\n<!--}}}-->\n<!--PRE-HEAD-END-->\n<title>\n\n</title>\n<style id=\"styleArea\" type=\"text/css\">\n#saveTest {display:none;}\n#messageArea {display:none;}\n#copyright {display:none;}\n#storeArea {display:none;}\n#storeArea div {padding:0.5em; margin:1em 0em 0em 0em; border-color:#fff #666 #444 #ddd; border-style:solid; border-width:2px; overflow:auto;}\n#shadowArea {display:none;}\n#javascriptWarning {width:100%; text-align:center; font-weight:bold; background-color:#dd1100; color:#fff; padding:1em 0em;}\n#contentWrapper.loading {\n\tbackground-image: url(/SiteIcon);\n\tbackground-repeat: no-repeat;\n\tbackground-size: 48px 48px;\n\tpadding: 20px;\n\tmargin: auto;\n\twidth: 50%;\n\tborder: solid 1px black;\n\tpadding: 20px;\n\tpadding-left: 60px;\n\tmargin-top: 10px;\n}</style>\n<!--POST-HEAD-START-->\n<!--POST-HEAD-END-->\n</head>\n<body onunload=\"if(window.unload) unload();\">\n<!--PRE-BODY-START-->\n<!--PRE-BODY-END-->\n<div id=\"copyright\">\nWelcome to TiddlyWiki created by Jeremy Ruston; Copyright &copy; 2004-2007 Jeremy Ruston, Copyright &copy; 2007-2011 UnaMesa Association\n</div>\n<noscript>\n<div id=\"javascriptWarning\">\nThis page requires JavaScript to function properly.<br /><br />If you are using Microsoft Internet Explorer you may need to click on the yellow bar above and select 'Allow Blocked Content'. You must then click 'Yes' on the following security warning.\n</div>\n</noscript>\n<div id=\"saveTest\"></div>\n<div id=\"backstageCloak\"></div>\n<div id=\"backstageButton\"></div>\n<div id=\"backstageArea\"><div id=\"backstageToolbar\"></div></div>\n<div id=\"backstage\">\n\t<div id=\"backstagePanel\"></div>\n</div>\n<div id=\"contentWrapper\"></div>\n<div id=\"contentStash\"></div>\n<div id=\"shadowArea\">\n<div title=\"MarkupPreHead\">\n<pre>&lt;!--{{{--&gt;\n&lt;link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml' /&gt;\n&lt;!--}}}--&gt;\n</pre>\n</div>\n<div title=\"ColorPalette\">\n<pre>Background: #fff\nForeground: #000\nPrimaryPale: #8cf\nPrimaryLight: #18f\nPrimaryMid: #04b\nPrimaryDark: #014\nSecondaryPale: #ffc\nSecondaryLight: #fe8\nSecondaryMid: #db4\nSecondaryDark: #841\nTertiaryPale: #eee\nTertiaryLight: #ccc\nTertiaryMid: #999\nTertiaryDark: #666\nError: #f88\n</pre>\n</div>\n<div title=\"StyleSheetColors\">\n<pre>/*{{{*/\nbody {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}\n\na {color:[[ColorPalette::PrimaryMid]];}\na:hover {background-color:[[ColorPalette::PrimaryMid]]; color:[[ColorPalette::Background]];}\na img {border:0;}\n\nh1,h2,h3,h4,h5,h6 {color:[[ColorPalette::SecondaryDark]]; background:transparent;}\nh1 {border-bottom:2px solid [[ColorPalette::TertiaryLight]];}\nh2,h3 {border-bottom:1px solid [[ColorPalette::TertiaryLight]];}\n\n.button {color:[[ColorPalette::PrimaryDark]]; border:1px solid [[ColorPalette::Background]];}\n.button:hover {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::SecondaryLight]]; border-color:[[ColorPalette::SecondaryMid]];}\n.button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::SecondaryDark]];}\n\n.header {background:[[ColorPalette::PrimaryMid]];}\n.headerShadow {color:[[ColorPalette::Foreground]];}\n.headerShadow a {font-weight:normal; color:[[ColorPalette::Foreground]];}\n.headerForeground {color:[[ColorPalette::Background]];}\n.headerForeground a {font-weight:normal; color:[[ColorPalette::PrimaryPale]];}\n\n.tabSelected {color:[[ColorPalette::PrimaryDark]];\n\tbackground:[[ColorPalette::TertiaryPale]];\n\tborder-left:1px solid [[ColorPalette::TertiaryLight]];\n\tborder-top:1px solid [[ColorPalette::TertiaryLight]];\n\tborder-right:1px solid [[ColorPalette::TertiaryLight]];\n}\n.tabUnselected {color:[[ColorPalette::Background]]; background:[[ColorPalette::TertiaryMid]];}\n.tabContents {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::TertiaryPale]]; border:1px solid [[ColorPalette::TertiaryLight]];}\n.tabContents .button {border:0;}\n\n#sidebar {}\n#sidebarOptions input {border:1px solid [[ColorPalette::PrimaryMid]];}\n#sidebarOptions .sliderPanel {background:[[ColorPalette::PrimaryPale]];}\n#sidebarOptions .sliderPanel a {border:none;color:[[ColorPalette::PrimaryMid]];}\n#sidebarOptions .sliderPanel a:hover {color:[[ColorPalette::Background]]; background:[[ColorPalette::PrimaryMid]];}\n#sidebarOptions .sliderPanel a:active {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::Background]];}\n\n.wizard {background:[[ColorPalette::PrimaryPale]]; border:1px solid [[ColorPalette::PrimaryMid]];}\n.wizard h1 {color:[[ColorPalette::PrimaryDark]]; border:none;}\n.wizard h2 {color:[[ColorPalette::Foreground]]; border:none;}\n.wizardStep {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];\n\tborder:1px solid [[ColorPalette::PrimaryMid]];}\n.wizardStep.wizardStepDone {background:[[ColorPalette::TertiaryLight]];}\n.wizardFooter {background:[[ColorPalette::PrimaryPale]];}\n.wizardFooter .status {background:[[ColorPalette::PrimaryDark]]; color:[[ColorPalette::Background]];}\n.wizard .button {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryLight]]; border: 1px solid;\n\tborder-color:[[ColorPalette::SecondaryPale]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryDark]] [[ColorPalette::SecondaryPale]];}\n.wizard .button:hover {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Background]];}\n.wizard .button:active {color:[[ColorPalette::Background]]; background:[[ColorPalette::Foreground]]; border: 1px solid;\n\tborder-color:[[ColorPalette::PrimaryDark]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryPale]] [[ColorPalette::PrimaryDark]];}\n\n.wizard .notChanged {background:transparent;}\n.wizard .changedLocally {background:#80ff80;}\n.wizard .changedServer {background:#8080ff;}\n.wizard .changedBoth {background:#ff8080;}\n.wizard .notFound {background:#ffff80;}\n.wizard .putToServer {background:#ff80ff;}\n.wizard .gotFromServer {background:#80ffff;}\n\n#messageArea {border:1px solid [[ColorPalette::SecondaryMid]]; background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]];}\n#messageArea .button {color:[[ColorPalette::PrimaryMid]]; background:[[ColorPalette::SecondaryPale]]; border:none;}\n\n.popupTiddler {background:[[ColorPalette::TertiaryPale]]; border:2px solid [[ColorPalette::TertiaryMid]];}\n\n.popup {background:[[ColorPalette::TertiaryPale]]; color:[[ColorPalette::TertiaryDark]]; border-left:1px solid [[ColorPalette::TertiaryMid]]; border-top:1px solid [[ColorPalette::TertiaryMid]]; border-right:2px solid [[ColorPalette::TertiaryDark]]; border-bottom:2px solid [[ColorPalette::TertiaryDark]];}\n.popup hr {color:[[ColorPalette::PrimaryDark]]; background:[[ColorPalette::PrimaryDark]]; border-bottom:1px;}\n.popup li.disabled {color:[[ColorPalette::TertiaryMid]];}\n.popup li a, .popup li a:visited {color:[[ColorPalette::Foreground]]; border: none;}\n.popup li a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border: none;}\n.popup li a:active {background:[[ColorPalette::SecondaryPale]]; color:[[ColorPalette::Foreground]]; border: none;}\n.popupHighlight {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}\n.listBreak div {border-bottom:1px solid [[ColorPalette::TertiaryDark]];}\n\n.tiddler .defaultCommand {font-weight:bold;}\n\n.shadow .title {color:[[ColorPalette::TertiaryDark]];}\n\n.title {color:[[ColorPalette::SecondaryDark]];}\n.subtitle {color:[[ColorPalette::TertiaryDark]];}\n\n.toolbar {color:[[ColorPalette::PrimaryMid]];}\n.toolbar a {color:[[ColorPalette::TertiaryLight]];}\n.selected .toolbar a {color:[[ColorPalette::TertiaryMid]];}\n.selected .toolbar a:hover {color:[[ColorPalette::Foreground]];}\n\n.tagging, .tagged {border:1px solid [[ColorPalette::TertiaryPale]]; background-color:[[ColorPalette::TertiaryPale]];}\n.selected .tagging, .selected .tagged {background-color:[[ColorPalette::TertiaryLight]]; border:1px solid [[ColorPalette::TertiaryMid]];}\n.tagging .listTitle, .tagged .listTitle {color:[[ColorPalette::PrimaryDark]];}\n.tagging .button, .tagged .button {border:none;}\n\n.footer {color:[[ColorPalette::TertiaryLight]];}\n.selected .footer {color:[[ColorPalette::TertiaryMid]];}\n\n.error, .errorButton {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::Error]];}\n.warning {color:[[ColorPalette::Foreground]]; background:[[ColorPalette::SecondaryPale]];}\n.lowlight {background:[[ColorPalette::TertiaryLight]];}\n\n.zoomer {background:none; color:[[ColorPalette::TertiaryMid]]; border:3px solid [[ColorPalette::TertiaryMid]];}\n\n.imageLink, #displayArea .imageLink {background:transparent;}\n\n.annotation {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; border:2px solid [[ColorPalette::SecondaryMid]];}\n\n.viewer .listTitle {list-style-type:none; margin-left:-2em;}\n.viewer .button {border:1px solid [[ColorPalette::SecondaryMid]];}\n.viewer blockquote {border-left:3px solid [[ColorPalette::TertiaryDark]];}\n\n.viewer table, table.twtable {border:2px solid [[ColorPalette::TertiaryDark]];}\n.viewer th, .viewer thead td, .twtable th, .twtable thead td {background:[[ColorPalette::SecondaryMid]]; border:1px solid [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::Background]];}\n.viewer td, .viewer tr, .twtable td, .twtable tr {border:1px solid [[ColorPalette::TertiaryDark]];}\n\n.viewer pre {border:1px solid [[ColorPalette::SecondaryLight]]; background:[[ColorPalette::SecondaryPale]];}\n.viewer code {color:[[ColorPalette::SecondaryDark]];}\n.viewer hr {border:0; border-top:dashed 1px [[ColorPalette::TertiaryDark]]; color:[[ColorPalette::TertiaryDark]];}\n\n.highlight, .marked {background:[[ColorPalette::SecondaryLight]];}\n\n.editor input {border:1px solid [[ColorPalette::PrimaryMid]];}\n.editor textarea {border:1px solid [[ColorPalette::PrimaryMid]]; width:100%;}\n.editorFooter {color:[[ColorPalette::TertiaryMid]];}\n.readOnly {background:[[ColorPalette::TertiaryPale]];}\n\n#backstageArea {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::TertiaryMid]];}\n#backstageArea a {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}\n#backstageArea a:hover {background:[[ColorPalette::SecondaryLight]]; color:[[ColorPalette::Foreground]]; }\n#backstageArea a.backstageSelTab {background:[[ColorPalette::Background]]; color:[[ColorPalette::Foreground]];}\n#backstageButton a {background:none; color:[[ColorPalette::Background]]; border:none;}\n#backstageButton a:hover {background:[[ColorPalette::Foreground]]; color:[[ColorPalette::Background]]; border:none;}\n#backstagePanel {background:[[ColorPalette::Background]]; border-color: [[ColorPalette::Background]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]] [[ColorPalette::TertiaryDark]];}\n.backstagePanelFooter .button {border:none; color:[[ColorPalette::Background]];}\n.backstagePanelFooter .button:hover {color:[[ColorPalette::Foreground]];}\n#backstageCloak {background:[[ColorPalette::Foreground]]; opacity:0.6; filter:alpha(opacity=60);}\n/*}}}*/</pre>\n</div>\n<div title=\"StyleSheetLayout\">\n<pre>/*{{{*/\n* html .tiddler {height:1%;}\n\nbody {font-size:.75em; font-family:arial,helvetica; margin:0; padding:0;}\n\nh1,h2,h3,h4,h5,h6 {font-weight:bold; text-decoration:none;}\nh1,h2,h3 {padding-bottom:1px; margin-top:1.2em;margin-bottom:0.3em;}\nh4,h5,h6 {margin-top:1em;}\nh1 {font-size:1.35em;}\nh2 {font-size:1.25em;}\nh3 {font-size:1.1em;}\nh4 {font-size:1em;}\nh5 {font-size:.9em;}\n\nhr {height:1px;}\n\na {text-decoration:none;}\n\ndt {font-weight:bold;}\n\nol {list-style-type:decimal;}\nol ol {list-style-type:lower-alpha;}\nol ol ol {list-style-type:lower-roman;}\nol ol ol ol {list-style-type:decimal;}\nol ol ol ol ol {list-style-type:lower-alpha;}\nol ol ol ol ol ol {list-style-type:lower-roman;}\nol ol ol ol ol ol ol {list-style-type:decimal;}\n\n.txtOptionInput {width:11em;}\n\n#contentWrapper .chkOptionInput {border:0;}\n\n.externalLink {text-decoration:underline;}\n\n.indent {margin-left:3em;}\n.outdent {margin-left:3em; text-indent:-3em;}\ncode.escaped {white-space:nowrap;}\n\n.tiddlyLinkExisting {font-weight:bold;}\n.tiddlyLinkNonExisting {font-style:italic;}\n\n/* the 'a' is required for IE, otherwise it renders the whole tiddler in bold */\na.tiddlyLinkNonExisting.shadow {font-weight:bold;}\n\n#mainMenu .tiddlyLinkExisting,\n\t#mainMenu .tiddlyLinkNonExisting,\n\t#sidebarTabs .tiddlyLinkNonExisting {font-weight:normal; font-style:normal;}\n#sidebarTabs .tiddlyLinkExisting {font-weight:bold; font-style:normal;}\n\n.header {position:relative;}\n.header a:hover {background:transparent;}\n.headerShadow {position:relative; padding:4.5em 0 1em 1em; left:-1px; top:-1px;}\n.headerForeground {position:absolute; padding:4.5em 0 1em 1em; left:0; top:0;}\n\n.siteTitle {font-size:3em;}\n.siteSubtitle {font-size:1.2em;}\n\n#mainMenu {position:absolute; left:0; width:10em; text-align:right; line-height:1.6em; padding:1.5em 0.5em 0.5em 0.5em; font-size:1.1em;}\n\n#sidebar {position:absolute; right:3px; width:16em; font-size:.9em;}\n#sidebarOptions {padding-top:0.3em;}\n#sidebarOptions a {margin:0 0.2em; padding:0.2em 0.3em; display:block;}\n#sidebarOptions input {margin:0.4em 0.5em;}\n#sidebarOptions .sliderPanel {margin-left:1em; padding:0.5em; font-size:.85em;}\n#sidebarOptions .sliderPanel a {font-weight:bold; display:inline; padding:0;}\n#sidebarOptions .sliderPanel input {margin:0 0 0.3em 0;}\n#sidebarTabs .tabContents {width:15em; overflow:hidden;}\n\n.wizard {padding:0.1em 1em 0 2em;}\n.wizard h1 {font-size:2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}\n.wizard h2 {font-size:1.2em; font-weight:bold; background:none; padding:0; margin:0.4em 0 0.2em;}\n.wizardStep {padding:1em 1em 1em 1em;}\n.wizard .button {margin:0.5em 0 0; font-size:1.2em;}\n.wizardFooter {padding:0.8em 0.4em 0.8em 0;}\n.wizardFooter .status {padding:0 0.4em; margin-left:1em;}\n.wizard .button {padding:0.1em 0.2em;}\n\n#messageArea {position:fixed; top:2em; right:0; margin:0.5em; padding:0.5em; z-index:2000; _position:absolute;}\n.messageToolbar {display:block; text-align:right; padding:0.2em;}\n#messageArea a {text-decoration:underline;}\n\n.tiddlerPopupButton {padding:0.2em;}\n.popupTiddler {position: absolute; z-index:300; padding:1em; margin:0;}\n\n.popup {position:absolute; z-index:300; font-size:.9em; padding:0; list-style:none; margin:0;}\n.popup .popupMessage {padding:0.4em;}\n.popup hr {display:block; height:1px; width:auto; padding:0; margin:0.2em 0;}\n.popup li.disabled {padding:0.4em;}\n.popup li a {display:block; padding:0.4em; font-weight:normal; cursor:pointer;}\n.listBreak {font-size:1px; line-height:1px;}\n.listBreak div {margin:2px 0;}\n\n.tabset {padding:1em 0 0 0.5em;}\n.tab {margin:0 0 0 0.25em; padding:2px;}\n.tabContents {padding:0.5em;}\n.tabContents ul, .tabContents ol {margin:0; padding:0;}\n.txtMainTab .tabContents li {list-style:none;}\n.tabContents li.listLink { margin-left:.75em;}\n\n#contentWrapper {display:block;}\n#splashScreen {display:none;}\n\n#displayArea {margin:1em 17em 0 14em;}\n\n.toolbar {text-align:right; font-size:.9em;}\n\n.tiddler {padding:1em 1em 0;}\n\n.missing .viewer,.missing .title {font-style:italic;}\n\n.title {font-size:1.6em; font-weight:bold;}\n\n.missing .subtitle {display:none;}\n.subtitle {font-size:1.1em;}\n\n.tiddler .button {padding:0.2em 0.4em;}\n\n.tagging {margin:0.5em 0.5em 0.5em 0; float:left; display:none;}\n.isTag .tagging {display:block;}\n.tagged {margin:0.5em; float:right;}\n.tagging, .tagged {font-size:0.9em; padding:0.25em;}\n.tagging ul, .tagged ul {list-style:none; margin:0.25em; padding:0;}\n.tagClear {clear:both;}\n\n.footer {font-size:.9em;}\n.footer li {display:inline;}\n\n.annotation {padding:0.5em; margin:0.5em;}\n\n* html .viewer pre {width:99%; padding:0 0 1em 0;}\n.viewer {line-height:1.4em; padding-top:0.5em;}\n.viewer .button {margin:0 0.25em; padding:0 0.25em;}\n.viewer blockquote {line-height:1.5em; padding-left:0.8em;margin-left:2.5em;}\n.viewer ul, .viewer ol {margin-left:0.5em; padding-left:1.5em;}\n\n.viewer table, table.twtable {border-collapse:collapse; margin:0.8em 1.0em;}\n.viewer th, .viewer td, .viewer tr,.viewer caption,.twtable th, .twtable td, .twtable tr,.twtable caption {padding:3px;}\ntable.listView {font-size:0.85em; margin:0.8em 1.0em;}\ntable.listView th, table.listView td, table.listView tr {padding:0 3px 0 3px;}\n\n.viewer pre {padding:0.5em; margin-left:0.5em; font-size:1.2em; line-height:1.4em; overflow:auto;}\n.viewer code {font-size:1.2em; line-height:1.4em;}\n\n.editor {font-size:1.1em;}\n.editor input, .editor textarea {display:block; width:100%; font:inherit;}\n.editorFooter {padding:0.25em 0; font-size:.9em;}\n.editorFooter .button {padding-top:0; padding-bottom:0;}\n\n.fieldsetFix {border:0; padding:0; margin:1px 0px;}\n\n.zoomer {font-size:1.1em; position:absolute; overflow:hidden;}\n.zoomer div {padding:1em;}\n\n* html #backstage {width:99%;}\n* html #backstageArea {width:99%;}\n#backstageArea {display:none; position:relative; overflow: hidden; z-index:150; padding:0.3em 0.5em;}\n#backstageToolbar {position:relative;}\n#backstageArea a {font-weight:bold; margin-left:0.5em; padding:0.3em 0.5em;}\n#backstageButton {display:none; position:absolute; z-index:175; top:0; right:0;}\n#backstageButton a {padding:0.1em 0.4em; margin:0.1em;}\n#backstage {position:relative; width:100%; z-index:50;}\n#backstagePanel {display:none; z-index:100; position:absolute; width:90%; margin-left:3em; padding:1em;}\n.backstagePanelFooter {padding-top:0.2em; float:right;}\n.backstagePanelFooter a {padding:0.2em 0.4em;}\n#backstageCloak {display:none; z-index:20; position:absolute; width:100%; height:100px;}\n\n.whenBackstage {display:none;}\n.backstageVisible .whenBackstage {display:block;}\n/*}}}*/\n</pre>\n</div>\n<div title=\"StyleSheetLocale\">\n<pre>/***\nStyleSheet for use when a translation requires any css style changes.\nThis StyleSheet can be used directly by languages such as Chinese, Japanese and Korean which need larger font sizes.\n***/\n/*{{{*/\nbody {font-size:0.8em;}\n#sidebarOptions {font-size:1.05em;}\n#sidebarOptions a {font-style:normal;}\n#sidebarOptions .sliderPanel {font-size:0.95em;}\n.subtitle {font-size:0.8em;}\n.viewer table.listView {font-size:0.95em;}\n/*}}}*/</pre>\n</div>\n<div title=\"StyleSheetPrint\">\n<pre>/*{{{*/\n@media print {\n#mainMenu, #sidebar, #messageArea, .toolbar, #backstageButton, #backstageArea {display: none !important;}\n#displayArea {margin: 1em 1em 0em;}\nnoscript {display:none;} /* Fixes a feature in Firefox 1.5.0.2 where print preview displays the noscript content */\n}\n/*}}}*/</pre>\n</div>\n<div title=\"PageTemplate\">\n<pre>&lt;!--{{{--&gt;\n&lt;div class='header' macro='gradient vert [[ColorPalette::PrimaryLight]] [[ColorPalette::PrimaryMid]]'&gt;\n&lt;div class='headerShadow'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;div class='headerForeground'&gt;\n&lt;span class='siteTitle' refresh='content' tiddler='SiteTitle'&gt;&lt;/span&gt;&amp;nbsp;\n&lt;span class='siteSubtitle' refresh='content' tiddler='SiteSubtitle'&gt;&lt;/span&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='mainMenu' refresh='content' tiddler='MainMenu'&gt;&lt;/div&gt;\n&lt;div id='sidebar'&gt;\n&lt;div id='sidebarOptions' refresh='content' tiddler='SideBarOptions'&gt;&lt;/div&gt;\n&lt;div id='sidebarTabs' refresh='content' force='true' tiddler='SideBarTabs'&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div id='displayArea'&gt;\n&lt;div id='messageArea'&gt;&lt;/div&gt;\n&lt;div id='tiddlerDisplay'&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;!--}}}--&gt;</pre>\n</div>\n<div title=\"ViewTemplate\">\n<pre>&lt;!--{{{--&gt;\n&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::ViewToolbar]]'&gt;&lt;/div&gt;\n&lt;div class='title' macro='view title'&gt;&lt;/div&gt;\n&lt;div class='subtitle'&gt;&lt;span macro='view modifier link'&gt;&lt;/span&gt;, &lt;span macro='view modified date'&gt;&lt;/span&gt; (&lt;span macro='message views.wikified.createdPrompt'&gt;&lt;/span&gt; &lt;span macro='view created date'&gt;&lt;/span&gt;)&lt;/div&gt;\n&lt;div class='tagging' macro='tagging'&gt;&lt;/div&gt;\n&lt;div class='tagged' macro='tags'&gt;&lt;/div&gt;\n&lt;div class='viewer' macro='view text wikified'&gt;&lt;/div&gt;\n&lt;div class='tagClear'&gt;&lt;/div&gt;\n&lt;!--}}}--&gt;</pre>\n</div>\n<div title=\"EditTemplate\">\n<pre>&lt;!--{{{--&gt;\n&lt;div class='toolbar' macro='toolbar [[ToolbarCommands::EditToolbar]]'&gt;&lt;/div&gt;\n&lt;div class='title' macro='view title'&gt;&lt;/div&gt;\n&lt;div class='editor' macro='edit title'&gt;&lt;/div&gt;\n&lt;div macro='annotations'&gt;&lt;/div&gt;\n&lt;div class='editor' macro='edit text'&gt;&lt;/div&gt;\n&lt;div class='editor' macro='edit tags'&gt;&lt;/div&gt;&lt;div class='editorFooter'&gt;&lt;span macro='message views.editor.tagPrompt'&gt;&lt;/span&gt;&lt;span macro='tagChooser excludeLists'&gt;&lt;/span&gt;&lt;/div&gt;\n&lt;!--}}}--&gt;</pre>\n</div>\n<div title=\"GettingStarted\">\n<pre>To get started with this blank [[TiddlyWiki]], you'll need to modify the following tiddlers:\n* [[SiteTitle]] &amp; [[SiteSubtitle]]: The title and subtitle of the site, as shown above (after saving, they will also appear in the browser title bar)\n* [[MainMenu]]: The menu (usually on the left)\n* [[DefaultTiddlers]]: Contains the names of the tiddlers that you want to appear when the TiddlyWiki is opened\nYou'll also need to enter your username for signing your edits: &lt;&lt;option txtUserName&gt;&gt;</pre>\n</div>\n<div title=\"OptionsPanel\">\n<pre>These [[InterfaceOptions]] for customising [[TiddlyWiki]] are saved in your browser\n\nYour username for signing your edits. Write it as a [[WikiWord]] (eg [[JoeBloggs]])\n\n&lt;&lt;option txtUserName&gt;&gt;\n&lt;&lt;option chkSaveBackups&gt;&gt; [[SaveBackups]]\n&lt;&lt;option chkAutoSave&gt;&gt; [[AutoSave]]\n&lt;&lt;option chkRegExpSearch&gt;&gt; [[RegExpSearch]]\n&lt;&lt;option chkCaseSensitiveSearch&gt;&gt; [[CaseSensitiveSearch]]\n&lt;&lt;option chkAnimate&gt;&gt; [[EnableAnimations]]\n\n----\nAlso see [[AdvancedOptions]]</pre>\n</div>\n</div>\n<!--POST-SHADOWAREA-->\n<div id=\"storeArea\">\n</div>\n<!--POST-STOREAREA-->\n<!--POST-BODY-START-->\n<!--POST-BODY-END-->\n<script id=\"jsArea\" type=\"text/javascript\">\n//<![CDATA[\n//]]>\n</script>\n<script id=\"jsdeprecatedArea\" type=\"text/javascript\">\n//<![CDATA[\n//]]>\n</script>\n<script id=\"jslibArea\" type=\"text/javascript\">\n//<![CDATA[\n\n//]]>\n</script>\n<script id=\"jqueryArea\" type=\"text/javascript\">\n//<![CDATA[\n//]]>\n</script>\n<script type=\"text/javascript\" src=\"/bags/common/tiddlers/jquery.js\"></script>\n<script type=\"text/javascript\" src=\"/bags/common/tiddlers/alpha_jQuery.twStylesheet.js\"></script>\n<script type=\"text/javascript\" src=\"/_tiddlywiki-app.js\"></script>\n<script type=\"text/javascript\" src=\"/bags/common/tiddlers/backstage.js\"></script>\n<!--POST-SCRIPT-START-->\n<!--POST-SCRIPT-END-->\n</body>\n</html>\n", "title": "_tiddlywiki", "permissions": ["read", "write", "create", "delete"], "modifier": "cdent", "type": "text/html", "tags": [], "revision": 455014}, {"creator": "jon", "fields": {"_hash": "c819ea22369c655cd673c128a04891a7b8977c64", "summary": ""}, "created": "20110916154054", "recipe": "gadabout_private", "modified": "20120126175741", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_nearby", "bag": "apps_public", "text": "<html>\n<head>\n  <title>nearby tiddlers</title>\n  <link href=\"/bags/common/tiddlers/profile.css\" type='text/css' rel='stylesheet' >\n  <link href=\"/jquery-ui.css\" type='text/css' rel='stylesheet' >\n</style>\n\t<script type=\"text/javascript\" src=\"/bags/common/tiddlers/backstage.js\"></script>\n</head>\n<body>\n<div id=\"container\">\n<div id=\"header\">\n<h1>nearby tiddlers</h1>\n</div>\n<h2>Tiddlers recently created near you</h2>\nTiddlers that are geotagged and near your current location (within <span id=\"radius\">1</span>km <button id=\"radius-increase\">+</button>, <button id=\"radius-decrease\">-</button>) are listed below.\n<ul id=\"near\"></ul>\n</div>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery.js'></script>\n<script type='text/javascript' src='http://htmljs.tiddlyspace.com/htmljs-prettydates'></script>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery-json.js'></script>\n<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs'></script>\n<script type=\"text/javascript\">\n$(\"#radius-increase\").click(function(ev) {\n\t$(\"#radius\").text(parseInt($(\"#radius\").text(), 10) + 1);\n\tcheck();\n});\n$(\"#radius-decrease\").click(function(ev) {\n\tvar newRadius = parseInt($(\"#radius\").text(), 10) - 1;\n\tif(newRadius === 0) {\n\t\tnewRadius = 1;\n\t}\n\t$(\"#radius\").text(newRadius);\n\tcheck();\n})\n$.ajaxSetup({\n\tbeforeSend: function(xhr) {\n\t\txhr.setRequestHeader(\"X-ControlView\", \"false\");\n\t}\n});\nvar host = \"http://tiddlyspace.com\";\n// TODO: what about running from homepage?\nvar list = $(\"#near\");\nfunction check() {\n\tnavigator.geolocation.getCurrentPosition(function(a) {\n\t\tlist.empty();\n\t\tvar coords = a.coords;\n\t\tvar lat = coords.latitude;\n\t\tvar lng = coords.longitude;\n\t\tvar radius = parseInt($(\"#radius\").text(), 10) * 1000;\n\t\tvar search = new tiddlyweb.Search(\"near:\" + lat + \",\" + lng + \",\" + radius, \"/\");\n\t\tsearch.get(function(tiddlers) {\n\t\t\ttiddlers.sort(function(a, b) {\n\t\t\t\treturn a.modified < b.modified ? 1 : -1;\n\t\t\t});\n\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\tvar tiddler = tiddlers[i];\n\t\t\t\tvar item = $(\"<li />\").appendTo(list);\n\t\t\t\t$(\"<a />\").attr(\"href\",\n\t\t\t\t\thost + \"/bags/\" + encodeURIComponent(tiddler.bag.name) + \"/tiddlers/\" + encodeURIComponent(tiddler.title)).text(tiddler.title).appendTo(item);\n\t\t\t\t$(\"<span />\").text(\" \" + simpleDate(tiddler.modified)).appendTo(item);\n\t\t\t\t$(\"<span />\").text(\" from \").appendTo(item);\n\t\t\t\t// TODO: hacky\n\t\t\t\t$(\"<a />\").attr(\"href\", \"http://\" + tiddler.modifier + \".tiddlyspace.com\").appendTo(item).text(tiddler.modifier);\n\t\t\t}\n\t\t\tif(tiddlers.length === 0) {\n\t\t\t\t$(\"<li />\").appendTo(list).text(\"no tiddlers nearby\");\n\t\t\t}\n\t\t}, function() {\n\t\t\t$(\"<li />\").text(\"Unable to retrieve tiddlers nearby\").appendTo(list);\n\t\t});\n\t}, function() {\n\t\t$(\"<li />\").text(\"Unable to get your current location\").appendTo(list);\n\t});\n}\ncheck();\n</script>\n</body>\n</html>\n", "title": "_nearby", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists", "excludeSearch"], "revision": 454894}, {"creator": "jon", "fields": {"_hash": "9f09d612cd11ebd08d3850f5acedc2b7743d7cb5", "summary": ""}, "created": "20110916093040", "recipe": "gadabout_private", "modified": "20111109160228", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/%40", "bag": "apps_public", "text": "<html>\n<head>\n  <title>@s</title>\n  <link href=\"/bags/common/tiddlers/profile.css\" type='text/css' rel='stylesheet' >\n  <link href=\"/jquery-ui.css\" type='text/css' rel='stylesheet' >\n</style>\n\t<script type=\"text/javascript\" src=\"/bags/common/tiddlers/backstage.js\"></script>\n</head>\n<body>\n<div id=\"container\">\n<div id=\"header\">\n<h1>@s</h1>\n</div>\n<h2>Tiddlers that are @ing this space</h2>\nTiddlers that are tagged with <span class='magicTag'>@<spacename></span> are listed below.\n<ul id=\"ats\">\n</ul>\n</div>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery.js'></script>\n<script type='text/javascript' src='http://htmljs.tiddlyspace.com/htmljs-prettydates'></script>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery-json.js'></script>\n<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs'></script>\n<script type=\"text/javascript\">\n$.ajaxSetup({\n\tbeforeSend: function(xhr) {\n\t\txhr.setRequestHeader(\"X-ControlView\", \"false\");\n\t}\n});\nvar host = \"http://tiddlyspace.com\";\n// TODO: what about running from homepage?\nvar magicTag = \"@\" + document.location.hostname.split(\".\")[0];\n$(\".magicTag\").text(magicTag);\nvar search = new tiddlyweb.Search(\"tag:\" + magicTag, \"/\");\nvar list = $(\"#ats\");\nsearch.get(function(tiddlers) {\n\ttiddlers.sort(function(a, b) {\n\t\treturn a.modified < b.modified ? 1 : -1;\n\t});\n\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\tvar tiddler = tiddlers[i];\n\t\tvar item = $(\"<li />\").appendTo(list);\n\t\t$(\"<a />\").attr(\"href\",\n\t\t\thost + \"/bags/\" + encodeURIComponent(tiddler.bag.name) + \"/tiddlers/\" + encodeURIComponent(tiddler.title)).text(tiddler.title).appendTo(item);\n\t\t$(\"<span />\").text(\" \" + simpleDate(tiddler.modified)).appendTo(item);\n\t\t$(\"<span />\").text(\" from \").appendTo(item);\n\t\t// TODO: hacky\n\t\t$(\"<a />\").attr(\"href\", \"http://\" + tiddler.modifier + \".tiddlyspace.com\").text(tiddler.modifier).appendTo(item);\n\t}\n\tif(tiddlers.length === 0) {\n\t\t$(\"<li />\").text(\"no tiddlers tagged \" + magicTag).appendTo(list);\n\t}\n}, function() {\n\t$(\"<li />\").text(\"Unable to retrieve tiddlers tagged \" + magicTag).appendTo(list);\n});\n</script>\n</body>\n</html>\n", "title": "@", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists", "excludeSearch"], "revision": 454841}, {"creator": "jon", "fields": {"_hash": "d98fe24974d9e328014f8af3475a75682233e3e8", "summary": ""}, "created": "20110916111101", "recipe": "gadabout_private", "modified": "20111109160004", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/signup", "bag": "apps_public", "text": "<html>\n<head>\n  <title>Sign up</title>\n<script type='text/javascript' src='/backstage.js'></script>\n<link href=\"/bags/common/tiddlers/profile.css\" type='text/css' rel='stylesheet' >\n</head>\n<body>\n<div id=\"container\">\n<div id=\"header\">\n<h1>Sign up to TiddlySpace</h1>\n</div>\n<div class=\"main section\">\n<h2>Get Your Own TiddlySpace!</h2>\n <form class=\"ts-registration\" action=\"\" autocomplete=\"off\"> \n\t<div>\n\t\t<input type=\"text\" name=\"username\" placeholder=\"username\" />.tiddlyspace.com\n\t</div>\n\t<div>\n\t\t<input name=\"password\" placeholder=\"password\" /> \n\t\t<input name=\"password_confirm\" placeholder=\"and again\" />\n\t</div>\n\t<div>\n\t\t<input type=\"submit\" value=\"SIGN ME UP!\" />\n\t</div> \n</form>\n</div>\n</div>\n</div>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery.js'></script>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery-json.js'></script>\n<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs'></script>\n<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs.space'></script>\n<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs.users'></script>\n<script src=\"/bags/common/tiddlers/ts.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type=\"text/javascript\">\nts.init(function() {});\n</body>\n</html>", "title": "signup", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists", "excludeSearch"], "revision": 455192}, {"creator": "jon", "fields": {"_hash": "28b09bc37208311b5788a3ddab3ba3953b232de1", "summary": ""}, "created": "20111109132731", "recipe": "gadabout_private", "modified": "20111109155943", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/Date.js", "bag": "apps_public", "text": "// Substitute date components into a string\nDate.prototype.formatString = function(template)\n{\n\tvar t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));\n\tt = t.replace(/hh12/g,this.getHours12());\n\tt = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));\n\tt = t.replace(/hh/g,this.getHours());\n\tt = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);\n\tt = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));\n\tt = t.replace(/mm/g,this.getMinutes());\n\tt = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));\n\tt = t.replace(/ss/g,this.getSeconds());\n\tt = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());\n\tt = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());\n\tt = t.replace(/wYYYY/g,this.getYearForWeekNo());\n\tt = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));\n\tt = t.replace(/YYYY/g,this.getFullYear());\n\tt = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));\n\tt = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);\n\tt = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));\n\tt = t.replace(/MM/g,this.getMonth()+1);\n\tt = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));\n\tt = t.replace(/WW/g,this.getWeek());\n\tt = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);\n\tt = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);\n\tt = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));\n\tt = t.replace(/DDth/g,this.getDate()+this.daySuffix());\n\tt = t.replace(/DD/g,this.getDate());\n\tvar tz = this.getTimezoneOffset();\n\tvar atz = Math.abs(tz);\n\tt = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));\n\tt = t.replace(/\\\\/g,\"\");\n\treturn t;\n};\n\nDate.prototype.getWeek = function()\n{\n\tvar dt = new Date(this.getTime());\n\tvar d = dt.getDay();\n\tif(d==0) d=7;// JavaScript Sun=0, ISO Sun=7\n\tdt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo\n\tvar n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);\n\treturn Math.floor(n/7)+1;\n};\n\nDate.prototype.getYearForWeekNo = function()\n{\n\tvar dt = new Date(this.getTime());\n\tvar d = dt.getDay();\n\tif(d==0) d=7;// JavaScript Sun=0, ISO Sun=7\n\tdt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week\n\treturn dt.getFullYear();\n};\n\nDate.prototype.getHours12 = function()\n{\n\tvar h = this.getHours();\n\treturn h > 12 ? h-12 : ( h > 0 ? h : 12 );\n};\n\nDate.prototype.getAmPm = function()\n{\n\treturn this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;\n};\n\nDate.prototype.daySuffix = function()\n{\n\treturn config.messages.dates.daySuffixes[this.getDate()-1];\n};\n\n// Convert a date to local YYYYMMDDHHMM string format\nDate.prototype.convertToLocalYYYYMMDDHHMM = function()\n{\n\treturn this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);\n};\n\n// Convert a date to UTC YYYYMMDDHHMM string format\nDate.prototype.convertToYYYYMMDDHHMM = function()\n{\n\treturn this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);\n};\n\n// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format\nDate.prototype.convertToYYYYMMDDHHMMSSMMM = function()\n{\n\treturn this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + \".\" + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +\"0\";\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMM format string\nDate.convertFromYYYYMMDDHHMM = function(d)\n{\n\td = d?d.replace(/[^0-9]/g, \"\"):\"\";\n\treturn Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMMSS format string\nDate.convertFromYYYYMMDDHHMMSS = function(d)\n{\n\td = d?d.replace(/[^0-9]/g, \"\"):\"\";\n\treturn Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string\nDate.convertFromYYYYMMDDHHMMSSMMM = function(d)\n{\n\td = d ? d.replace(/[^0-9]/g, \"\") : \"\";\n\treturn new Date(Date.UTC(parseInt(d.substr(0,4),10),\n\t\t\tparseInt(d.substr(4,2),10)-1,\n\t\t\tparseInt(d.substr(6,2),10),\n\t\t\tparseInt(d.substr(8,2)||\"00\",10),\n\t\t\tparseInt(d.substr(10,2)||\"00\",10),\n\t\t\tparseInt(d.substr(12,2)||\"00\",10),\n\t\t\tparseInt(d.substr(14,3)||\"000\",10)));\n};\n", "title": "Date.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists", "excludeSearch"], "revision": 454870}, {"creator": "jon", "fields": {"_hash": "01076c6b4494d622a577688f295559cdce51171c", "summary": ""}, "created": "20111109133127", "recipe": "gadabout_private", "modified": "20111109155940", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/Strings.js", "bag": "apps_public", "text": "// Get characters from the right end of a string\nString.prototype.right = function(n)\n{\n\treturn n < this.length ? this.slice(this.length-n) : this;\n};\n\n// Trim whitespace from both ends of a string\nString.prototype.trim = function()\n{\n\treturn this.replace(/^\\s*|\\s*$/g,\"\");\n};\n\n// Convert a string from a CSS style property name to a JavaScript style name (\"background-color\" -> \"backgroundColor\")\nString.prototype.unDash = function()\n{\n\tvar s = this.split(\"-\");\n\tif(s.length > 1) {\n\t\tfor(var t=1; t<s.length; t++)\n\t\t\ts[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);\n\t}\n\treturn s.join(\"\");\n};\n\n// Substitute substrings from an array into a format string that includes '%1'-type specifiers\nString.prototype.format = function(s)\n{\n\tvar substrings = s && s.constructor == Array ? s : arguments;\n\tvar subRegExp = /(?:%(\\d+))/mg;\n\tvar currPos = 0;\n\tvar r = [];\n\tdo {\n\t\tvar match = subRegExp.exec(this);\n\t\tif(match && match[1]) {\n\t\t\tif(match.index > currPos)\n\t\t\t\tr.push(this.substring(currPos,match.index));\n\t\t\tr.push(substrings[parseInt(match[1])]);\n\t\t\tcurrPos = subRegExp.lastIndex;\n\t\t}\n\t} while(match);\n\tif(currPos < this.length)\n\t\tr.push(this.substring(currPos,this.length));\n\treturn r.join(\"\");\n};\n\n// Escape any special RegExp characters with that character preceded by a backslash\nString.prototype.escapeRegExp = function()\n{\n\tvar s = \"\\\\^$*+?()=!|,{}[].\";\n\tvar c = this;\n\tfor(var t=0; t<s.length; t++)\n\t\tc = c.replace(new RegExp(\"\\\\\" + s.substr(t,1),\"g\"),\"\\\\\" + s.substr(t,1));\n\treturn c;\n};\n\n// Convert \"\\\" to \"\\s\", newlines to \"\\n\" (and remove carriage returns)\nString.prototype.escapeLineBreaks = function()\n{\n\treturn this.replace(/\\\\/mg,\"\\\\s\").replace(/\\n/mg,\"\\\\n\").replace(/\\r/mg,\"\");\n};\n\n// Convert \"\\n\" to newlines, \"\\b\" to \" \", \"\\s\" to \"\\\" (and remove carriage returns)\nString.prototype.unescapeLineBreaks = function()\n{\n\treturn this.replace(/\\\\n/mg,\"\\n\").replace(/\\\\b/mg,\" \").replace(/\\\\s/mg,\"\\\\\").replace(/\\r/mg,\"\");\n};\n\n// Convert & to \"&amp;\", < to \"&lt;\", > to \"&gt;\" and \" to \"&quot;\"\nString.prototype.htmlEncode = function()\n{\n\treturn this.replace(/&/mg,\"&amp;\").replace(/</mg,\"&lt;\").replace(/>/mg,\"&gt;\").replace(/\\\"/mg,\"&quot;\");\n};\n\n// Convert \"&amp;\" to &, \"&lt;\" to <, \"&gt;\" to > and \"&quot;\" to \"\nString.prototype.htmlDecode = function()\n{\n\treturn this.replace(/&lt;/mg,\"<\").replace(/&gt;/mg,\">\").replace(/&quot;/mg,\"\\\"\").replace(/&amp;/mg,\"&\");\n};\n\n// Parse a space-separated string of name:value parameters\n//# where:\n//#   - the name or the value can be optional (in which case separate defaults are used instead)\n//#     - in case of ambiguity, a lone word is taken to be a value\n//#     - if 'cascadeDefaults' is set to true, then the defaults are modified by updated by each specified name or value\n//#     - name prefixes are not allowed if the 'noNames' parameter is true\n//#   - if both the name and value are present they must be separated by a colon\n//#   - the name and the value may both be quoted with single- or double-quotes, double-square brackets\n//#   - names or values quoted with {{double-curly braces}} are evaluated as a JavaScript expression\n//#     - as long as the 'allowEval' parameter is true\n// The result is an array of objects:\n//   result[0] = object with a member for each parameter name, value of that member being an array of values\n//   result[1..n] = one object for each parameter, with 'name' and 'value' members\nString.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)\n{\n\tvar parseToken = function(match,p) {\n\t\tvar n;\n\t\tif(match[p]) // Double quoted\n\t\t\tn = match[p];\n\t\telse if(match[p+1]) // Single quoted\n\t\t\tn = match[p+1];\n\t\telse if(match[p+2]) // Double-square-bracket quoted\n\t\t\tn = match[p+2];\n\t\telse if(match[p+3]) // Double-brace quoted\n\t\t\ttry {\n\t\t\t\tn = match[p+3];\n\t\t\t\tif(allowEval && config.evaluateMacroParameters != \"none\") {\n\t\t\t\t\tif(config.evaluateMacroParameters == \"restricted\") {\n\t\t\t\t\t\tif(window.restrictedEval) {\n\t\t\t\t\t\t\tn = window.restrictedEval(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tn = window.eval(n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(ex) {\n\t\t\t\tthrow \"Unable to evaluate {{\" + match[p+3] + \"}}: \" + exceptionText(ex);\n\t\t\t}\n\t\telse if(match[p+4]) // Unquoted\n\t\t\tn = match[p+4];\n\t\telse if(match[p+5]) // empty quote\n\t\t\tn = \"\";\n\t\treturn n;\n\t};\n\tvar r = [{}];\n\tvar dblQuote = \"(?:\\\"((?:(?:\\\\\\\\\\\")|[^\\\"])+)\\\")\";\n\tvar sngQuote = \"(?:'((?:(?:\\\\\\\\\\')|[^'])+)')\";\n\tvar dblSquare = \"(?:\\\\[\\\\[((?:\\\\s|\\\\S)*?)\\\\]\\\\])\";\n\tvar dblBrace = \"(?:\\\\{\\\\{((?:\\\\s|\\\\S)*?)\\\\}\\\\})\";\n\tvar unQuoted = noNames ? \"([^\\\"'\\\\s]\\\\S*)\" : \"([^\\\"':\\\\s][^\\\\s:]*)\";\n\tvar emptyQuote = \"((?:\\\"\\\")|(?:''))\";\n\tvar skipSpace = \"(?:\\\\s*)\";\n\tvar token = \"(?:\" + dblQuote + \"|\" + sngQuote + \"|\" + dblSquare + \"|\" + dblBrace + \"|\" + unQuoted + \"|\" + emptyQuote + \")\";\n\tvar re = noNames ? new RegExp(token,\"mg\") : new RegExp(skipSpace + token + skipSpace + \"(?:(\\\\:)\" + skipSpace + token + \")?\",\"mg\");\n\tvar params = [];\n\tdo {\n\t\tvar match = re.exec(this);\n\t\tif(match) {\n\t\t\tvar n = parseToken(match,1);\n\t\t\tif(noNames) {\n\t\t\t\tr.push({name:\"\",value:n});\n\t\t\t} else {\n\t\t\t\tvar v = parseToken(match,8);\n\t\t\t\tif(v == null && defaultName) {\n\t\t\t\t\tv = n;\n\t\t\t\t\tn = defaultName;\n\t\t\t\t} else if(v == null && defaultValue) {\n\t\t\t\t\tv = defaultValue;\n\t\t\t\t}\n\t\t\t\tr.push({name:n,value:v});\n\t\t\t\tif(cascadeDefaults) {\n\t\t\t\t\tdefaultName = n;\n\t\t\t\t\tdefaultValue = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} while(match);\n\t// Summarise parameters into first element\n\tfor(var t=1; t<r.length; t++) {\n\t\tif(r[0][r[t].name])\n\t\t\tr[0][r[t].name].push(r[t].value);\n\t\telse\n\t\t\tr[0][r[t].name] = [r[t].value];\n\t}\n\treturn r;\n};\n\n// Process a string list of macro parameters into an array. Parameters can be quoted with \"\", '',\n// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in\n// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.\nString.prototype.readMacroParams = function(notAllowEval)\n{\n\tvar p = this.parseParams(\"list\",null,!notAllowEval,true);\n\tvar n = [];\n\tfor(var t=1; t<p.length; t++)\n\t\tn.push(p[t].value);\n\treturn n;\n};\n\n// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]\nString.prototype.readBracketedList = function(unique)\n{\n\tvar p = this.parseParams(\"list\",null,false,true);\n\tvar n = [];\n\tfor(var t=1; t<p.length; t++) {\n\t\tif(p[t].value)\n\t\t\tn.pushUnique(p[t].value,unique);\n\t}\n\treturn n;\n};\n\n// Returns array with start and end index of chunk between given start and end marker, or undefined.\nString.prototype.getChunkRange = function(start,end)\n{\n\tvar s = this.indexOf(start);\n\tif(s != -1) {\n\t\ts += start.length;\n\t\tvar e = this.indexOf(end,s);\n\t\tif(e != -1)\n\t\t\treturn [s,e];\n\t}\n};\n\n// Replace a chunk of a string given start and end markers\nString.prototype.replaceChunk = function(start,end,sub)\n{\n\tvar r = this.getChunkRange(start,end);\n\treturn r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;\n};\n\n// Returns a chunk of a string between start and end markers, or undefined\nString.prototype.getChunk = function(start,end)\n{\n\tvar r = this.getChunkRange(start,end);\n\tif(r)\n\t\treturn this.substring(r[0],r[1]);\n};\n\n\n// Static method to bracket a string with double square brackets if it contains a space\nString.encodeTiddlyLink = function(title)\n{\n\treturn title.indexOf(\" \") == -1 ? title : \"[[\" + title + \"]]\";\n};\n\n// Static method to encodeTiddlyLink for every item in an array and join them with spaces\nString.encodeTiddlyLinkList = function(list)\n{\n\tif(list) {\n\t\tvar results = [];\n\t\tfor(var t=0; t<list.length; t++)\n\t\t\tresults.push(String.encodeTiddlyLink(list[t]));\n\t\treturn results.join(\" \");\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n// Convert a string as a sequence of name:\"value\" pairs into a hashmap\nString.prototype.decodeHashMap = function()\n{\n\tvar fields = this.parseParams(\"anon\",\"\",false);\n\tvar r = {};\n\tfor(var t=1; t<fields.length; t++)\n\t\tr[fields[t].name] = fields[t].value;\n\treturn r;\n};\n\n// Static method to encode a hashmap into a name:\"value\"... string\nString.encodeHashMap = function(hashmap)\n{\n\tvar r = [];\n\tfor(var t in hashmap)\n\t\tr.push(t + ':\"' + hashmap[t] + '\"');\n\treturn r.join(\" \");\n};\n\n// Static method to left-pad a string with 0s to a certain width\nString.zeroPad = function(n,d)\n{\n\tvar s = n.toString();\n\tif(s.length < d)\n\t\ts = \"000000000000000000000000000\".substr(0,d-s.length) + s;\n\treturn s;\n};\n\nString.prototype.startsWith = function(prefix)\n{\n\treturn !prefix || this.substring(0,prefix.length) == prefix;\n};\n\n// Returns the first value of the given named parameter.\n//#\n//# @param params\n//#         as returned by parseParams or null/undefined\n//# @return [may be null/undefined]\n//#\nfunction getParam(params,name,defaultValue)\n{\n\tif(!params)\n\t\treturn defaultValue;\n\tvar p = params[0][name];\n\treturn p ? p[0] : defaultValue;\n}\n\n// Returns the first value of the given boolean named parameter.\n//#\n//# @param params\n//#         as returned by parseParams or null/undefined\n//#\nfunction getFlag(params,name,defaultValue)\n{\n\treturn !!getParam(params,name,defaultValue);\n}\n", "title": "Strings.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists", "excludeSearch"], "revision": 454883}, {"creator": "jon", "fields": {"_hash": "cd09c2de1c07e4e5c41b64ec4fb6c0731938f4a9", "summary": ""}, "created": "20111109135242", "recipe": "gadabout_private", "modified": "20111109135355", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_import", "bag": "apps_public", "text": "<html>\n<head>\n<link rel=\"stylesheet\" href=\"/bags/common/tiddlers/profile.css\" type=\"text/css\">\n</head>\n<body>\n\t<div id=\"container\"></div>\n\t<script type=\"text/javascript\" src=\"bags/common/tiddlers/jquery.js\"></script>\n\t<script type=\"text/javascript\" src=\"Date.js\"></script>\n\t<script type=\"text/javascript\" src=\"Strings.js\"></script>\n\t<script type=\"text/javascript\" src=\"file_import.js\"></script>\n</body>\n</html>\n", "title": "_import", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists"], "revision": 454886}, {"creator": "jon", "fields": {"_hash": "94a40fd7aaad7f6031487a646887a9c29963556b", "summary": ""}, "created": "20111109135143", "recipe": "gadabout_private", "modified": "20111109135246", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/file_import.js", "bag": "apps_public", "text": "function nodeToJson(node)\n{\n\tvar text;\n\tif(node.getAttribute(\"tiddler\")) {\n\t\ttext = $(node).text().unescapeLineBreaks();\n\t}\n\tvar title = $(node).attr(\"title\");\n\tvar creator = node.getAttribute(\"creator\");\n\tvar modifier = node.getAttribute(\"modifier\");\n\tvar c = node.getAttribute(\"created\");\n\tvar m = node.getAttribute(\"modified\");\n\tvar created = c ? Date.convertFromYYYYMMDDHHMMSS(c) : version.date;\n\tvar modified = m ? Date.convertFromYYYYMMDDHHMMSS(m) : created;\n\tvar tags = node.getAttribute(\"tags\");\n\tvar fields = {};\n\tvar attrs = node.attributes;\n\tfor(var i = attrs.length-1; i >= 0; i--) {\n\t\tvar name = attrs[i].name;\n\t\tif([\"created\", \"modified\", \"title\", \"created\", \"tags\"].indexOf(name) === -1) {\n\t\t\tfields[name] = attrs[i].value.unescapeLineBreaks();\n\t\t}\n\t}\n\treturn { title: title, text: text, modifier: modifier,\n\t\tcreator: creator, tags: tags, fields: fields };\n\treturn tiddler;\n};\n\nfunction WizardMaker(place, wizard) {\n\tvar steps = wizard[0];\n\tvar options = wizard[1] || {};\n\t$(\"<h1 />\").text(options.heading || \"Wizard\").appendTo(place);\n\tvar wizard = this;\n\t$('<button>restart wizard</button>').click(function(ev) {\n\t\twizard.jumpTo(0);\n\t\t}).appendTo(place)[0];\n\tthis.currentStep = 0;\n\tthis.body = $('<div class=\"wizardBody\"/>').appendTo(place)[0];\n\tthis.steps = steps;\n\tthis.values = {};\n\tthis.createStep(0);\n}\nWizardMaker.prototype = {\n\t/*\n\tOPTIONS\n\tstep: [function, options]\n\t*/\n\tcreateStep: function(stepNumber) {\n\t\t$(this.body).empty();\n\t\tvar step = this.steps[stepNumber];\n\t\tif(!step) {\n\t\t\tthrow \"invalid step (\" + stepNumber + \")\"\n\t\t}\n\t\tvar options = step[1] || {};\n\t\tvar humanStep = stepNumber + 1;\n\t\tvar heading = \"Step \" + humanStep;\n\t\tif(options.heading) {\n\t\t\theading += \": \" + options.heading;\n\t\t}\n\t\t$(\"<h2 />\").text(heading).appendTo(this.body);\n\t\tvar container = $('<div class=\"wizardStep\" />').appendTo(this.body)[0];\n\t\tstep[0](container, this);\n\t},\n\tnext: function() {\n\t\tif(this.currentStep < this.steps.length - 1) {\n\t\t\tthis.currentStep += 1;\n\t\t}\n\t\tthis.createStep(this.currentStep);\n\t},\n\tjumpTo: function(step) {\n\t\tthis.currentStep = step;\n\t\tthis.createStep(step);\n\t},\n\tsetValue: function(name, val) {\n\t\tthis.values[name] = val;\n\t},\n\tgetValue: function(name) {\n\t\treturn this.values[name];\n\t}\n};\n\nif (window.File && window.FileReader && window.FileList && window.Blob) {\n\tfunction ImportWizard(proxy, saveFunction) {\n\t\treturn [\n\t\t\t[\n\t\t\t\t[function(body, wizard) {\n\t\t\t\t\t$(body).html('Where do you want to import from? <select><option value=\"1\">file</option><option value=\"2\">the web</option></select><button class=\"button\">ok</button>');\n\t\t\t\t\t$(\"button\", body).click(function(ev) {\n\t\t\t\t\t\tvar opt = $(\"select\", body).val();\n\t\t\t\t\t\tif(opt === \"1\") {\n\t\t\t\t\t\t\twizard.next();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\twizard.jumpTo(2);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t{ heading: \"File or Web?\" }],\n\t\t\t\t[function(body, wizard) {\n\t\t\t\t\t$(body).html('Browse for a file: <input type=\"file\" size=\"50\" name=\"txtBrowse\"><br><hr><div class=\"wizardFooter\"><div class=\"message\"></div></div>');\n\t\t\t\t\tfunction handleFileSelect(evt) {\n\t\t\t\t\t\treader = new FileReader();\n\t\t\t\t\t\treader.onerror = function(e, msg) {\n\t\t\t\t\t\t\talert(\"Error occurred\")\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.onabort = function(e) {\n\t\t\t\t\t\t\talert('File read cancelled');\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.onload = function(e) {\n\t\t\t\t\t\t\tvar html = reader.result;\n\t\t\t\t\t\t\twizard.setValue(\"html\", html);\n\t\t\t\t\t\t\twizard.jumpTo(3)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Read in the image file as a binary string.\n\t\t\t\t\t\twindow.reader = reader;\n\t\t\t\t\t\treader.readAsBinaryString(evt.target.files[0]);\n\t\t\t\t\t}\n\t\t\t\t\t$(\"[type=file]\", body)[0].addEventListener('change', handleFileSelect, false);\n\t\t\t\t}, { heading: \"Locate TiddlyWiki file\" }],\n\t\t\t\t[function(body, wizard) {\n\t\t\t\t\t$(body).html('Enter the URL or pathname here: <div class=\"message\"></div><input type=\"text\" size=\"50\" name=\"txtPath\"><button class=\"button\">open</button>');\n\n\t\t\t\t\t$(\"button\", body).click(function(ev) {\n\t\t\t\t\t\tvar url = proxy.replace(\"%0\", $(\"input\", body).val())\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\ttype: \"post\",\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tsuccess: function(html) {\n\t\t\t\t\t\t\t\twizard.setValue(\"html\", html);\n\t\t\t\t\t\t\t\twizard.jumpTo(3);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function() {\n\t\t\t\t\t\t\t\t$(\".message\").html(\"There is something wrong with that url please try another.\");\n\t\t\t\t\t\t\t\t$(\"input\", body).addClass(\"error\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\t{ heading: \"Import from Web\" }],\n\t\t\t\t[function(body, wizard) {\n\t\t\t\t\tvar html = wizard.getValue(\"html\");\n\t\t\t\t\tvar doc = $(html);\n\t\t\t\t\tvar store;\n\t\t\t\t\t$(html).each(function(i, el) {\n\t\t\t\t\t\tif(el.id === \"storeArea\") {\n\t\t\t\t\t\t\tstore = el;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tif(store) {\n\t\t\t\t\t\tvar tiddlers = [];\n\t\t\t\t\t\t$(store).children().each(function(i, el) {\n\t\t\t\t\t\t\tvar title = $(el).attr(\"title\");\n\t\t\t\t\t\t\ttiddlers.push(nodeToJson(el));\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$(\"<div />\").text(\"Choose tiddlers that you wish to import\");\n\t\t\t\t\t\tvar table = $(\"<table />\").appendTo(body)[0];\n\t\t\t\t\t\t$(\"<tr />\").html('<th><input type=\"checkbox\" checked/></th><th>title</th>').\n\t\t\t\t\t\t\tappendTo(table)\n\t\t\t\t\t\t$(\"input\", table).change(function(ev) {\n\t\t\t\t\t\t\tvar checked = $(ev.target).is(':checked');\n\t\t\t\t\t\t\t$(\"input[type=checkbox]\", body).attr(\"checked\", checked);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\t\t\t\tvar title = tiddlers[i].title;\n\t\t\t\t\t\t\tvar row = $(\"<tr />\").data(\"tiddler\", tiddlers[i]).appendTo(table)[0];\n\t\t\t\t\t\t\t$(\"<td />\").html('<input type=\"checkbox\" checked=\"checked\"/>').appendTo(row);\n\t\t\t\t\t\t\t$(\"<td />\").text(title).appendTo(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(\"<button>import</button>\").click(function(ev) {\n\t\t\t\t\t\t\tvar tids = [];\n\t\t\t\t\t\t\t$(\"input[type=checkbox]:checked\").each(function(i, chk) {\n\t\t\t\t\t\t\t\tvar tiddler = $(chk).parents(\"tr\").data(\"tiddler\");\n\t\t\t\t\t\t\t\tif(tiddler) {\n\t\t\t\t\t\t\t\t\ttids.push(tiddler);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\twizard.setValue(\"selected\", tids);\n\t\t\t\t\t\t\twizard.jumpTo(4)\n\t\t\t\t\t\t}).appendTo(body);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ heading: \"Choose tiddlers\" }],\n\t\t\t\t[function(body, wizard) {\n\t\t\t\t\tvar tids = wizard.getValue(\"selected\");\n\t\t\t\t\t$(body).text(\"Please wait\");\n\t\t\t\t\t// do import\n\t\t\t\t\tvar save = 0;\n\t\t\t\t\tvar complete = function() {\n\t\t\t\t\t\tsave += 1;\n\t\t\t\t\t\tif(save === tids.length) {\n\t\t\t\t\t\t\twizard.jumpTo(5);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\tfor(var i = 0; i < tids.length; i++) {\n\t\t\t\t\t\tvar tid = tids[i];\n\t\t\t\t\t\tsaveFunction(tid, complete);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ heading: \"Importing\" }],\n\t\t\t\t[function(body, wizard) {\n\t\t\t\t\t$(body).html(\"Good news! Everything is now imported.\");\n\t\t\t\t},\n\t\t\t\t{ heading: \"Finished!\" }]\n\t\t\t],\n\t\t\t{\n\t\t\t\theading: \"Import tiddlers from another file or server\"\n\t\t\t}\n\t\t];\n\t}\n\tvar bag = window.location.hostname.split(\".\")[0] + \"_public\";\n\tvar importer = ImportWizard(\"/reflector?uri=%0\", function(tid, callback) {\n\t\t$.ajax({\n\t\t\ttype: \"PUT\",\n\t\t\tcontentType: \"application/json\",\n\t\t\tdata: JSON.stringify(tid),\n\t\t\turl: \"/bags/\" + bag + \"/tiddlers/\" + encodeURIComponent(tid.title),\n\t\t\tsuccess: callback,\n\t\t\terror: callback\n\t\t});\n\t});\n\tvar wizard = new WizardMaker($(\"#container\")[0], importer);\n} else {\n  $(\"#container\").addClass(\"error\").text(\"Your browser is not modern enough to support this app.\");\n}\n", "title": "file_import.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 455158}, {"creator": "jon", "fields": {"_hash": "12533b1682493604b83d350afd41298d5eda13f3", "summary": ""}, "created": "20111108112037", "recipe": "gadabout_private", "modified": "20111108160732", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_stream.js", "bag": "apps_public", "text": "$.ajaxSetup({\n\tbeforeSend: function(xhr) {\n\t\txhr.setRequestHeader(\"X-ControlView\", \"false\");\n\t}\n});\n\nvar ELEMENT_SELECTOR = \"#app-desc,#social\";\nvar cache = {};\nvar host = \"http://tiddlyspace.com\";\nfunction renderTiddler(el, tiddler) {\n\tvar bag = tiddler.modifier + \"_public\";\n\tvar srcImage = host + \"/bags/\" + bag + \"/tiddlers/SiteIcon\";\n\tvar img;\n\tif(!cache[srcImage]) {\n\t\timg = new Image()\n\t\timg.width = 48;\n\t\timg.height = 48;\n\t\timg.src = srcImage;\n\t\tcache[srcImage] = img;\n\t\timg = $(\"<img />\").css(\"max-width\", 48).css(\"max-height\", 48).attr(\"src\", srcImage)[0];\n\t} else {\n\t\timg = cache[srcImage];\n\t}\n\t$(el).empty();\n\t$(img).attr(\"title\", \"@\" + tiddler.modifier).appendTo(el);\n\t$(\"<h2 />\").text(tiddler.title).appendTo(el);\n\tif(tiddler.render) {\n\t\tvar container = $(\"<div />\").html(tiddler.render).appendTo(el)[0];\n\t\t$(\"h1,h2,h3,h4,h5\", container).each(function(i, header) {\n\t\t\tvar nodeName = header.nodeName;\n\t\t\tvar number = parseInt(nodeName.substr(1, nodeName.length), 10) + 2;\n\t\t\t$(\"<h\" + number + \" />\").text($(header).text()).insertBefore(header);\n\t\t\t$(header).remove();\n\t\t});\n\t} else {\n\t\t$(\"<div />\").text(tiddler.text).appendTo(el);\n\t}\n}\n\nfunction removeFriend(friend) {\n\tvar tiddler = new tiddlyweb.Tiddler(\"@\" + friend, userbag);\n\tvar success = function() {\n\t\tprintMessage(\"User \" + friend + \" removed from friends\");\n\t\tvar newFriends = [];\n\t\tvar friends = app.friends;\n\t\tfor(var i = 0; i < friends.length; i++) {\n\t\t\tvar f = friends[i];\n\t\t\tif(f !== friend) {\n\t\t\t\tnewFriends.push(f);\n\t\t\t}\n\t\t}\n\t\tapp.friends = newFriends;\n\t\t$(\"#friend-\" + friend).hide(2000);\n\t};\n\ttiddler[\"delete\"](success, function() {\n\t\tvar old = new tiddlyweb.Tiddler(friend, userbag);\n\t\told[\"delete\"](success, function() {\n\t\t\tprintError(\"Unable to remove friend \" + friend);\n\t\t})\n\t})\n}\n\nfunction socialStream(subscriptions) {\n\tvar socialEl = $(ELEMENT_SELECTOR);\n\t$(socialEl).empty();\n\tvar list = $(\"<ul />\").appendTo(socialEl);\n\tvar args = [];\n\t$(\"<li />\").text(\"Loading...\").appendTo(list);\n\tfor(var i = 0; i < subscriptions.length; i++) {\n\t\targs.push(\"modifier:\" + subscriptions[i]);\n\t}\n\tvar qs = \"q=\" + args.join(\" OR \") + \" _limit:200&select=tag:!excludeLists&select=modified:>3d\";\n\t$.ajax({\n\t\tdata: {\n\t\t\tfat: \"y\",\n\t\t\trender: \"y\"\n\t\t},\n\t\turl: \"/search?\" + qs,\n\t\tdataType: \"json\",\n\t\tsuccess: function(tiddlers) {\n\t\t\t$(list).empty();\n\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\tvar item = $(\"<li />\").appendTo(list)[0];\n\t\t\t\trenderTiddler(item, tiddlers[i]);\n\t\t\t}\n\t\t}\n\t});\n}\n\nvar friends = [];\n$.ajax({\n\turl: \"/status\",\n\tdataType: \"json\",\n\tsuccess: function(status) {\n\t\tuser = status.username;\n\t\tuserbag = new tiddlyweb.Bag(user + \"_public\", \"/\");\n\t\tuserbag.tiddlers().get(function(tiddlers) {\n\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\tvar title = tiddlers[i].title;\n\t\t\t\tif(title.indexOf(\"@\") === 0) {\n\t\t\t\t\ttitle = title.substr(1, title.length);\n\t\t\t\t}\n\t\t\t\tfriends.push(title);\n\t\t\t}\n\t\t\tsocialStream(friends);\n\t\t}, function() {\n\t\t\t\n\t\t}, \"select=tag:follow\");\n\t}\n})\n\nvar simpleDate = (function() {\n\n\tvar measures = {\n\t\tsecond: 1,\n\t\tminute: 60,\n\t\thour: 3600,\n\t\tday: 86400,\n\t\tweek: 604800,\n\t\tmonth: 2592000,\n\t\tyear: 31536000\n\t};\n\n\tvar chkMultiple = function(amount, type) {\n\t\treturn (amount > 1) ? amount + \" \" + type + \"s\":\"a \" + type;\n\t};\n\n\treturn function(thedate) {\n\n\t\tvar dateStr, amount,\n\t\t\tcurrent = new Date().getTime(),\n\t\t\tdiff = (current - thedate.getTime()) / 1000; // work with seconds\n\n\t\tif(diff > measures.year) {\n\t\t\tamount = Math.round(diff/measures.year);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"year\") + \" ago\";\n\t\t} else if(diff > measures.month) {\n\t\t\tamount = Math.round(diff/measures.month);\n\t\t\t//if(typeof amount == \"\")\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"month\") + \" ago\";\n\t\t} else if(diff > measures.week) {\n\t\t\tamount = Math.round(diff/measures.week);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"week\") + \" ago\";\n\t\t} else if(diff > measures.day) {\n\t\t\tamount = Math.round(diff/measures.day);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"day\") + \" ago\";\n\t\t} else if(diff > measures.hour) {\n\t\t\tamount = Math.round(diff/measures.hour);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"hour\") + \" ago\";\n\t\t} else if(diff > measures.minute) {\n\t\t\tamount = Math.round(diff/measures.minute);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"minute\") + \" ago\";\n\t\t} else {\n\t\t\tdateStr = \"a few seconds ago\";\n\t\t}\n\n\t\treturn dateStr;\n\n\t};\n})();\n\nfunction prettyDate(t) {\n\tvar date = new Date(Date.UTC(\n\t\tparseInt(t.substr(0, 4), 10),\n\t\tparseInt(t.substr(4, 2), 10) - 1,\n\t\tparseInt(t.substr(6, 2), 10),\n\t\tparseInt(t.substr(8, 2), 10),\n\t\tparseInt(t.substr(10, 2), 10),\n\t\tparseInt(t.substr(12, 2) || \"0\", 10),\n\t\tparseInt(t.substr(14, 3) || \"0\", 10)\n\t));\n\treturn simpleDate(date);\n}", "title": "_stream.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 455003}, {"creator": "jon", "fields": {"_hash": "317ec48b91c28a7cd49afe5f3328f9d6e33c5dbd", "summary": ""}, "created": "20111108112031", "recipe": "gadabout_private", "modified": "20111108113739", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_stream", "bag": "apps_public", "text": "<html>\n<head><title>stream</title></head>\n<body>\n<h1>Stream</h1>\n<div id=\"social\"></div>\n<script type='text/javascript' src='/bags/common/tiddlers/jquery.js'></script> \n<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs'></script> \n<script type='text/javascript' src='/_stream.js'></script> \n</body>\n</html>", "title": "_stream", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists"], "revision": 454983}, {"creator": "jon", "fields": {"_hash": "7a91807500d2a0f4948c639c915e5a1e529ab715", "summary": ""}, "created": "20111024125053", "recipe": "gadabout_private", "modified": "20111104145949", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_offline.js", "bag": "apps_public", "text": "function printMessage(text) {\n\t$(\"#messageArea\").remove();\n\tvar msgArea = $(\"<div id='messageArea'/>\").addClass(\"error message\").\n\t\ttext(text).prependTo(document.body)[0];\n\t$(\"<button />\").click(function(ev) {\n\t\t$(msgArea).slideUp(1000);\n\t}).text(\"close\").appendTo(msgArea);\n}\n\nif(!applicationCache) {\n\tprintMessage(\"Your browser does not support offline mode.\");\n} else {\n\twindow.applicationCache.addEventListener(\"cached\", function() {\n\t\tprintMessage(\"This page has been downloaded and will now run without an internet connection.\");\n\t});\n\twindow.applicationCache.addEventListener(\"downloading\", function() {\n\t\tprintMessage(\"Downloading page for offline use.\");\n\t});\n\twindow.applicationCache.addEventListener(\"error\", function() {\n\t\tprintMessage(\"Error caching page. Please refresh and try again.\");\n\t});\n\tvar success = function() {\n\t\tprintMessage(\"This page can be used offline.\");\n\t};\n\twindow.applicationCache.addEventListener(\"noupdate\", success);\n\twindow.applicationCache.addEventListener(\"updateready\", success);\n}\n\nvar space = window.location.hostname.split(\".\")[0];\nvar Store = function(tiddlers) {\n\tvar tiddlers = tiddlers;\n\tvar map = {};\n\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\tvar tid = tiddlers[i];\n\t\tmap[tid.title] = tid;\n\t}\n\tfunction get(title) {\n\t\treturn map[title];\n\t}\n\tfunction add(tid) {\n\t\tif(!map[tid.title]) {\n\t\t\tmap[tid.title] = tid;\n\t\t\ttiddlers.push(tid);\n\t\t}\n\t}\n\tfunction list() {\n\t\treturn tiddlers;\n\t}\n\tfunction getText(title) {\n\t\tvar tid = get(title);\n\t\treturn tid ? tid.text : \"\";\n\t}\n\tfunction cache() {\n\t\tvar s = this;\n\t\twindow.setTimeout(function() {\n\t\t\tlocalStorage.setItem(\"tiddlers.json\", JSON.stringify(s.getTiddlers()));\n\t\t}, 0);\n\t}\n\treturn {\n\t\tcache: cache,\n\t\taddTiddler: add,\n\t\tgetTiddlerText: getText,\n\t\tgetTiddler: get,\n\t\tgetTiddlers: list,\n\t}\n};\n\nvar store, tiddlers, w;\n\nfunction activateSliders(el) {\n\tif(!el) {\n\t\tel = document.body;\n\t}\n\t$(\".sliderPanel\", el).each(function(i, el) {\n\t\t$(el).prev(\"a\").addClass(\"sliderButton\").click(function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tvar panel = $(ev.target).next(\".sliderPanel\")[0];\n\t\t\t\tloadTiddler($(panel).attr(\"tiddler\"), panel);\n\t\t\t\t$(panel).slideToggle(1000);\n\t\t\t});\n\t\t$(el).hide();\n\t});\n}\nfunction loadTiddler(title, place) {\n\tplace = place || $(\"#text-html\")[0];\n\twindow.location.hash = \"#\" + title;\n\tvar t = store.getTiddler(title);\n\t$(\"#header h1 a\").css(\"font-style\", \"auto\").empty();\n\t$(place).empty();\n\tif(t) {\n\t\tif(!t.type) {\n\t\t\tw[0](t.text, place);\n\t\t\tactivateSliders(place);\n\t\t\t$(\"a\", place).click(function(ev) {\n\t\t\t\tif(!$(ev.target).hasClass(\"sliderButton\")) {\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t\tloadTiddler($(ev.target).attr(\"href\"));\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\t$(place).text(\"File not available in offline mode.\");\n\t\t}\n\t\t$(\"#header h1 a\").text(t.title).attr(\"href\", t.uri);\n\t} else {\n\t\tif(title.indexOf(\"http\") === 0) {\n\t\t\t$(\"<a />\").text(title + \" (requires connection)\").attr(\"href\", title).appendTo(\"#text-html\");\n\t\t} else {\n\t\t\t$(\"#header h1 a\").empty().text(title).css({ \"font-style\": \"italic\" })\n\t\t}\n\t}\n\tactivateSliders();\n}\n\nfunction updateStore(title, success) {\n\t$.ajax({\n\t\turl: \"/\" + encodeURIComponent(title),\n\t\tdataType: \"json\",\n\t\tdata: {\n\t\t\trender: \"y\"\n\t\t},\n\t\tsuccess: function(tid) {\n\t\t\ttid.text = tid.render;\n\t\t\tstore.addTiddler(tid);\n\t\t\tstore.cache();\n\t\t\tsuccess(tid);\n\t\t}\n\t});\n}\n$(\"#mainMenu a\").live(\"click\", function(ev) {\n\tvar title = $(ev.target).attr(\"href\");\n\tvar tmp = title.split(\"/\");\n\ttitle = tmp[tmp.length - 1];\n\tif(title) {\n\t\tloadTiddler(title);\n\t}\n\tev.preventDefault();\n});\n\nfunction init() {\n\tvar mainmenu = store.getTiddlerText(\"MainMenu\");\n\tif(mainmenu) {\n\t\t$(\"#mainMenu\").empty().html(mainmenu);\n\t}\n\tupdateStore(\"MainMenu\", function(tid) {\n\t\t$(\"#mainMenu\").empty().html(tid.text);\n\t});\n\t$(\"#sidebar ul\").empty();\n\tvar tiddlers = store.getTiddlers();\n\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\tvar tid = tiddlers[i];\n\t\tvar link = $(\"<a />\").\n\t\t\tdata(\"title\", tid.title).\n\t\t\tattr(\"href\", tid.uri).\n\t\t\tclick(function(ev) {\n\t\t\t\tev.preventDefault();\n\t\t\t\tvar title = $(ev.target).data(\"title\");\n\t\t\t\tloadTiddler(title);\n\t\t\t}).text(tid.title)[0];\n\t\tvar item = $(\"<li />\").appendTo(\"#sidebar ul\")[0];\n\t\t$(item).append(link);\n\t}\n\tif(window.location.hash) {\n\t\tloadTiddler(window.location.hash.substr(1))\n\t}\n}\n\nwindow.setTimeout(function() {\n\tw = createWikifier(window, jQuery, { host: \"/\", container: \"recipes/\" + space + \"_public\" });\n\td1 = new Date();\n\ttiddlers = localStorage.getItem(\"tiddlers.json\") ? JSON.parse(localStorage.getItem(\"tiddlers.json\")) : null;\n\tstore = new Store(tiddlers || []);\n\td2 = new Date();\n\t$(\"#sidebar ul\").text(\"Loading...\");\n\tif(tiddlers) {\n\t\ttiddlers = [];\n\t\tinit();\n\t}\n\t// TODO: better filter then this please!\n\t\tvar filter = \"select=tag:!systemConfig&select=tag:!excludeLists&select=type:!image/svg+xml&select=type:!image/png&select=type:!image/jpeg&select=type:!image/gif&select=type:!image/jpg&select=type:!text/css&select=type:!text/plain&select=type:!text/javascript&select=type:!text/html&select=type:!text/cache-manifest\";\n\tjQuery.ajax({\n\t\turl: \"/recipes/\" + space + \"_public/tiddlers.json?\" + filter + \"&fat=y&sort=-modified\",\n\t\tdataType: \"json\",\n\t\tsuccess: function(tids) {\n\t\t\tstore = new Store(tids);\n\t\t\tstore.cache();\n\t\t\tinit();\n\t\t}\n\t});\n}, 0);\n", "title": "_offline.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 454956}, {"creator": "jon", "fields": {"_hash": "deaf5aa433728fd0de12b2e129bdcf2cc7b72434", "summary": ""}, "created": "20111017151258", "recipe": "gadabout_private", "modified": "20111104144814", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_offline", "bag": "apps_public", "text": "<html manifest=\"manifest_offline.appcache\">\n<head>\n\t<title>Offline Viewer</title>\n\t<script type='text/javascript' src='/bags/common/tiddlers/backstage.js'></script>\n\t<link href=\"/bags/common/tiddlers/profile.css\" type='text/css' rel='stylesheet' >\n\t<link href=\"/_offline.css\" type='text/css' rel='stylesheet' >\n</head>\n<body>\n\t<div id=\"container\">\n\t\t<h1 id=\"siteTitle\"></h1>\n\t\t<div id=\"mainMenu\"></div>\n\t\t<div id=\"header\">\n\t\t\t<h1>\n\t\t\t\t<a href=\"#\" id=\"title\">Offline Tiddlers</a>\n\t\t\t</h1>\n\t\t</div>\n\t\t<div id=\"text-html\" class=\"main section\">Select a tiddler from the right hand side of the screen. This allows you to view\n\t\t\tyour space without an internet connection. Kill your internet and try it out!</div>\n\t</div>\n\t<div id=\"sidebar\">\n\t\t<a class='button' href=\"/takenote\">take note</a>\n\t\t<ul></ul>\n\t</div>\n\t<script src=\"/bags/common/tiddlers/jquery.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t<script src=\"/twikifier.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t<script type=\"text/javascript\" src=\"/_offline.js\"></script>\n</body>\n</html>", "title": "_offline", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists"], "revision": 454913}, {"creator": "jon", "fields": {"_hash": "69b2a39c26a4825e042c8767d47253a20592ac67", "summary": ""}, "created": "20111017151255", "recipe": "gadabout_private", "modified": "20111104142125", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/manifest_offline.appcache", "bag": "apps_public", "text": "CACHE MANIFEST\n\nCACHE:\n/_offline\n/bags/common/tiddlers/profile.css\n/_offline.css\n/bags/common/tiddlers/jquery.js\n/twikifier.js\n/_offline.js\n\n# VERSION 0.2.5\n\nNETWORK:\n*\n", "title": "manifest_offline.appcache", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/cache-manifest", "tags": ["excludeLists"], "revision": 455183}, {"creator": "jon", "fields": {"summary": "A tool for managing friends in TiddlySpace. Follow users, unfollow users and see what those users are up to.", "tiddler.source": "following_public", "_hash": "990cef21c9ad69469d055d0301afcfe83b9778fe", "description": ""}, "created": "20111103152548", "recipe": "gadabout_private", "modified": "20111104131831", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_social", "bag": "apps_public", "text": "<html>\n<head>\n\t<title>Social</title>\n\t<style type='text/css'>\n\t\t.button, button {\n\t\t\ttext-decoration: underline;\n\t\t\tmargin-bottom: 1em;\n\t\t\tbackground: #FFFAE1;\n\t\t\tbackground: -webkit-gradient(linear, left top, left bottom, from(#FFFAE1), to(#E8E1FF));\n\t\t\tbackground: -moz-linear-gradient(top, #FFFFB8, yellow);\n\t\t\tfilter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFB8', endColorstr='yellow');\n\t\t\tborder: 1px solid #666;\n\t\t\tcolor: #888;\n\t\t\tcursor: pointer;\n\t\t\tfont-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n\t\t\tfont-size: 11px;\n\t\t\tfont-weight: bold;\n\t\t\theight: 30px;\n\t\t\tline-height: 30px;\n\t\t\tpadding: 0 10px;\n\t\t\ttext-align: center;\n\t\t\ttext-shadow: rgba(0, 0, 0, .1) 0 -1px 0;\n\t\t\ttext-transform: uppercase;\n\t\t\t-moz-border-radius: 5px;\n\t\t\t-webkit-border-radius: 5px;\n\t\t\tborder-radius: 5px;\n\t\t\tdisplay: inline-block;\n\t\t}\n\n\t\t.friend.active {\n\t\t\tleft: 40px;\n\t\t\t-webkit-box-shadow: 10px 10px 10px #555;\n\t\t}\n\t\t.friend:hover {\n\t\t\t-webkit-box-shadow: 5px 5px 5px #ccc;\n\t\t\tleft: 10px;\n\t\t}\n\t\t.friend a.tiddlers {\n\t\t\tdisplay: block;\n\t\t}\n\t\t.friend {\n\t\t\tborder-left: solid 1px #333;\n\t\t\tposition: relative;\n\t\t\t-webkit-transition-property:  max-height,left;\n\t\t\t-webkit-transition-duration: 0.6s, 0.6s;\n\t\t\t-webkit-transition-timing-function: ease-in-out;\n\t\t\ttransition-property:  max-height,left;\n\t\t\ttransition-duration: 0.6s, 0.6s;\n\t\t\ttransition-timing-function: ease-in-out;\n\t\t\t-ms-transition-property:  max-height,left;\n\t\t\t-ms-transition-duration: 0.6s, 0.6s;\n\t\t\t-ms-transition-timing-function: ease-in-out;\n\t\t\t-o-transition-property:  max-height,left;\n\t\t\t-o-transition-duration: 0.6s, 0.6s;\n\t\t\t-o-transition-timing-function: ease-in-out;\n\t\t\t-moz-transition-property:  max-height,left;\n\t\t\t-moz-transition-duration: 0.6s, 0.6s;\n\t\t\t-moz-transition-timing-function: ease-in-out;\n\t\t\tpadding: 10px;\n\t\t\tbackground-color: white;\n\t\t}\n\n\t\tul {\n\t\t\tlist-style: none;\n\t\t}\n\t\tul .friend {\n\t\t\tborder-bottom: solid 1px black;\n\t\t\tcursor: pointer;\n\t\t}\n\t\tul .friend .tiddler {\n\t\t\tmargin-left: 10px;\n\t\t\tmargin-bottom: 30px;\n\t\t\tpadding: 10px;\n\t\t\tborder: dotted 2px #CCC;\n\t\t\tcolor: #006100;\n\t\t}\n\t\ttextarea {\n\t\t\twidth: 100%;\n\t\t\theight: 150px;\n\t\t}\n\t\t.friend h2 {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\tbutton {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\t.friend.inactiveFriend {\n\t\t\tbackground-color: #ccc;\n\t\t\topacity: 0.1;\n\t\t\tborder-left: solid 5px red;\n\t\t}\n\t\t.friend {\n\t\t\tmax-height: 10px;\n\t\t\toverflow: hidden;\n\t\t\topacity: 0.9;\n\t\t\tborder-left: solid 5px green;\n\t\t}\n\t\t.friend:hover {\n\t\t\tmax-height: 200px;\n\t\t\topacity: 1;\n\t\t}\n\t\t#friends {\n\t\t\tposition: relative;\n\t\t\twidth: 20%;\n\t\t\tfloat: left;\n\t\t\tbackground-color: white;\n\t\t}\n\t\t#message {\n\t\t\tdisplay: block;\n\t\t\tpadding: 20px;\n\t\t\tbackground-color: white;\n\t\t\tmargin-bottom: 10px;\n\t\t\tborder-bottom: solid 3px #CCC;\n\t\t}\n\t\t#message.error {\n\t\t\tborder-bottom: solid 3px red;\n\t\t\tcolor: #900;\n\t\t\tfont-weight: bold;\n\t\t}\n\t\t.section .section {\n\t\t\tfont-size:0.7em;\n\t\t}\n\t</style>\n<link rel=\"stylesheet\" href=\"/bags/common/tiddlers/profile.css\" type=\"text/css\">\n</head>\n<body>\n<div id=\"message\"></div>\n<div id='friends' class=\"section\">loading...</div>\n<div id=\"container\">\n<div id=\"header\">\n<h1>social</h1>\n</div>\n<noscript>\n\tjavascript is required to see friend's activity\n</noscript>\n<div id=\"displayArea\" class=\"main section\"></div>\n</div>\n<script src=\"/bags/common/tiddlers/jquery.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script src=\"/bags/common/tiddlers/jquery-json.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script src=\"/bags/common/tiddlers/backstage.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type='text/javascript' src='/_socialjs'></script>\n</body>\n</html>", "title": "_social", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists", "excludeSearch"], "revision": 454969}, {"creator": "jon", "fields": {"tiddler.source": "following_public", "_hash": "c2ef4c57accb74397a013bae7a68860e89e238ba", "summary": ""}, "created": "20111103152709", "recipe": "gadabout_private", "modified": "20111104130500", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/_socialjs", "bag": "apps_public", "text": "var user, userbag;\nvar host = \"http://tiddlyspace.com\";\n\nvar app = {\n\tfriends: [],\n\ttiddlers: {}\n}\n$.ajaxSetup({\n\tbeforeSend: function(xhr) {\n\t\txhr.setRequestHeader(\"X-ControlView\", \"false\");\n\t}\n});\n\n$(\"#message\").hide();\nfunction printMessage(txt) {\n\t$(\"#message\").show().removeClass(\"error\").text(txt);\n}\n\nfunction printError(txt) {\n\t$(\"html,body\").animate({ scrollTop: $(item).offset().top },\n\t\t1000);\n\t$(\"#message\").show().addClass(\"error\").text(txt);\n}\n\nvar simpleDate = (function() {\n\n\tvar measures = {\n\t\tsecond: 1,\n\t\tminute: 60,\n\t\thour: 3600,\n\t\tday: 86400,\n\t\tweek: 604800,\n\t\tmonth: 2592000,\n\t\tyear: 31536000\n\t};\n\n\tvar chkMultiple = function(amount, type) {\n\t\treturn (amount > 1) ? amount + \" \" + type + \"s\":\"a \" + type;\n\t};\n\n\treturn function(thedate) {\n\n\t\tvar dateStr, amount,\n\t\t\tcurrent = new Date().getTime(),\n\t\t\tdiff = (current - thedate.getTime()) / 1000; // work with seconds\n\n\t\tif(diff > measures.year) {\n\t\t\tamount = Math.round(diff/measures.year);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"year\") + \" ago\";\n\t\t} else if(diff > measures.month) {\n\t\t\tamount = Math.round(diff/measures.month);\n\t\t\t//if(typeof amount == \"\")\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"month\") + \" ago\";\n\t\t} else if(diff > measures.week) {\n\t\t\tamount = Math.round(diff/measures.week);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"week\") + \" ago\";\n\t\t} else if(diff > measures.day) {\n\t\t\tamount = Math.round(diff/measures.day);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"day\") + \" ago\";\n\t\t} else if(diff > measures.hour) {\n\t\t\tamount = Math.round(diff/measures.hour);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"hour\") + \" ago\";\n\t\t} else if(diff > measures.minute) {\n\t\t\tamount = Math.round(diff/measures.minute);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"minute\") + \" ago\";\n\t\t} else {\n\t\t\tdateStr = \"a few seconds ago\";\n\t\t}\n\n\t\treturn dateStr;\n\n\t};\n})();\n\nfunction prettyDate(t) {\n\tvar date = new Date(Date.UTC(\n\t\tparseInt(t.substr(0, 4), 10),\n\t\tparseInt(t.substr(4, 2), 10) - 1,\n\t\tparseInt(t.substr(6, 2), 10),\n\t\tparseInt(t.substr(8, 2), 10),\n\t\tparseInt(t.substr(10, 2), 10),\n\t\tparseInt(t.substr(12, 2) || \"0\", 10),\n\t\tparseInt(t.substr(14, 3) || \"0\", 10)\n\t));\n\treturn simpleDate(date);\n}\n\nfunction endsWith(str, suffix) {\n\treturn str.indexOf(suffix) == str.length - suffix.length;\n}\n\nfunction isShadow(tid) {\n\tvar shadows = [\"MarkupPreHead\", \"DefaultTiddlers\", \"PageTemplate\", \"SideBarTabs\",\n\t\t\"GettingStarted\", \"MainMenu\", \"SiteTitle\", \"SiteSubtitle\", \"ColorPalette\",\n\t\t\"SiteIcon\", \"ViewTemplate\", \"EditTemplate\", \"ServerSettings\", \"MarkupPostHead\",\n\t\t\"MarkupPostBody\", \"MarkupPreBody\"];\n\treturn tid.title.indexOf(\"StyleSheet\") === 0 ||\n\t\ttid.title.indexOf(\"SideBar\") === 0 ||\n\t\tshadows.indexOf(tid.title) > -1 || endsWith(tid.title, \"SetupFlag\") ? true : false;\n}\n\nfunction isPlugin(tid) {\n\treturn tid.tags.indexOf(\"systemConfig\") > -1 ? true : false;\n}\n\nfunction isArtifact(tid) {\n\tvar follow = tid.tags.indexOf(\"follow\") > -1;\n\tvar type = tid.type;\n\tif(follow || type) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction chooseTiddlers(tiddlers) {\n\tvar _tiddlers = [];\n\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\tvar tid = tiddlers[i];\n\t\tif(!isPlugin(tid) && !isShadow(tid) && !isArtifact(tid)) {\n\t\t\t_tiddlers.push(tid);\n\t\t}\n\t}\n\treturn _tiddlers;\n}\n\nvar tiddlers = {};\nfunction collectTiddlers(friend) {\n\t$.ajax({ dataType: \"json\",\n\t\turl: \"/search?q=modifier:\" + friend + \"&select=modified:>3d&sort=-modified\",\n\t\terror: function() {\n\t\t\t$(container).addClass(\"errorFriend\");\n\t\t\toncompletion();\n\t\t},\n\t\tsuccess: function(tiddlers) {\n\t\t\tapp.tiddlers[friend] = tiddlers;\n\t\t\trenderFriends();\n\t\t}\n\t});\n}\n\nfunction removeFriend(friend) {\n\tvar tiddler = new tiddlyweb.Tiddler(\"@\" + friend, userbag);\n\tvar success = function() {\n\t\tprintMessage(\"User \" + friend + \" removed from friends\");\n\t\tvar newFriends = [];\n\t\tvar friends = app.friends;\n\t\tfor(var i = 0; i < friends.length; i++) {\n\t\t\tvar f = friends[i];\n\t\t\tif(f !== friend) {\n\t\t\t\tnewFriends.push(f);\n\t\t\t}\n\t\t}\n\t\tapp.friends = newFriends;\n\t\t$(\"#friend-\" + friend).hide(2000);\n\t};\n\ttiddler[\"delete\"](success, function() {\n\t\tvar old = new tiddlyweb.Tiddler(friend, userbag);\n\t\told[\"delete\"](success, function() {\n\t\t\tprintError(\"Unable to remove friend \" + friend);\n\t\t})\n\t})\n}\n\nfunction showTiddlers(friend) {\n\tvar tiddlers = app.tiddlers[friend];\n\tvar container = $(\"#displayArea\").empty()[0];\n\t$(\"<h3 />\").text(\"Tiddlers from @\" + friend).appendTo(container);\n\tif(!tiddlers) {\n\t\t$(\"<span />\").text(\"Tiddlers not yet loaded. Please try again later.\").appendTo(container);\n\t} else {\n\t\tvar tidList = $(\"<ul />\").appendTo(container)[0];\n\t\tif(tiddlers.length === 0) {\n\t\t\t$(\"<li />\").text(\"No recent tiddlers from this user\").appendTo(container);\n\t\t}\n\t\tfor(var i=0; i < tiddlers.length; i++) {\n\t\t\tvar tiddler = tiddlers[i];\n\t\t\tvar item = $(\"<li />\").appendTo(tidList)[0];\n\t\t\tvar win;\n\t\t\tvar space = tiddler.bag.split(\"_\")[0];\n\t\t\tvar spaceUrl = \"http://\" + space + \".tiddlyspace.com\";\n\t\t\tvar path = \"/bags/\" + tiddler.bag + \"/tiddlers/\" + encodeURIComponent(tiddler.title);\n\t\t\tvar link = $(\"<a />\").text(tiddler.title).\n\t\t\t\tattr(\"href\", spaceUrl + path).\n\t\t\t\tdata(\"path\", path).\n\t\t\t\tclick(function(ev) {\n\t\t\t\t\tvar win = $(ev.target).data(\"win\");\n\t\t\t\t\tif($(ev.target).hasClass(\"active\")) {\n\t\t\t\t\t\t$(win).toggle(1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(ev.target).addClass(\"active\");\n\t\t\t\t\t\t$(\".text\", win).text(\"loading...\");\n\t\t\t\t\t\t$(win).show();\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: $(ev.target).data(\"path\"),\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\trender: \"y\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\t\t\tsuccess: function(tiddler) {\n\t\t\t\t\t\t\t\tif(tiddler.render) {\n\t\t\t\t\t\t\t\t\t$(\".text\",win).html(tiddler.render);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\".text\",win).text(\"Cannot view tiddler here.\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$(win).show(1000);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function() {\n\t\t\t\t\t\t\t\t$(\".text\", win).text(\"error loading that tiddler\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}).\n\t\t\t\tappendTo(item)[0];\n\t\t\tvar space = tiddler.bag.split(\"_\")[0];\n\t\t\t$(\"<span />\").text(\" in \").appendTo(item);\n\t\t\t$(\"<a />\").attr(\"href\", spaceUrl).text(space).appendTo(item);\n\t\t\t$(\"<span />\").text(\" (\" + prettyDate(tiddler.modified) + \")\").appendTo(item);\n\t\t\twin = $(\"<div />\").addClass(\"tiddler section main\").appendTo(item)[0];\n\t\t\t$(\"<div />\").addClass(\"text\").appendTo(win);\n\t\t\tvar toolbar = $(\"<div />\").addClass(\"toolbar\").appendTo(win)[0];\n\t\t\tvar extra = $(\"<div />\").addClass(\"extra\").appendTo(win)[0];\n\t\t\t$(\"<button />\").data(\"bag\", tiddler.bag).data(\"title\", tiddler.title).text(\"give feedback\").\n\t\t\t\tdata(\"revision\", tiddler.revision).click(function(ev) {\n\t\t\t\tvar title = $(ev.target).data(\"title\");\n\t\t\t\tvar revision = $(ev.target).data(\"revision\");\n\t\t\t\tvar bag = $(ev.target).data(\"bag\");\n\t\t\t\tvar revisionURL = host + \"/bags/\" + bag + \"/tiddlers/\" + encodeURIComponent(title) + \"/revisions/\" + revision;\n\t\t\t\tvar space = bag.split(\"_\")[0];\n\t\t\t\tvar area = $(ev.target).parents(\".tiddler\").children(\".extra\")[0];\n\t\t\t\t$(area).hide();\n\t\t\t\t$(\"<textarea />\").appendTo(area);\n\t\t\t\t$(\"<button />\").text(\"save feedback\").click(function(ev) {\n\t\t\t\t\tvar tid = new tiddlyweb.Tiddler(\"Feedback for \" + title, userbag);\n\t\t\t\t\ttid.tags = [\"feedback\", \"@\" + space];\n\t\t\t\t\ttid.text = [\"In reply to [[\", title, \"]]@\", space,\n\t\t\t\t\t\t\" (revision [[\", revision, \"|\", revisionURL, \"]])\\n\\n\"].join(\"\") + $(\"textarea\", area).val();\n\t\t\t\t\ttid.put(function(tiddler) {\n\t\t\t\t\t\t$(area).empty();\n\t\t\t\t\t\t$(\"<span />\").text(\"your comment: \").appendTo(area);\n\t\t\t\t\t\t$(\"<a />\").attr(\"href\", \"/\" + encodeURIComponent(tiddler.title)).text(tiddler.title).appendTo(area);\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tprintError(\"error commenting!\");\n\t\t\t\t\t});\n\t\t\t\t}).appendTo(area);\n\t\t\t\t$(area).show(1000);\n\t\t\t\tev.preventDefault();\n\t\t\t\t$(ev.target).remove();\n\t\t\t\treturn false;\n\t\t\t}).appendTo(toolbar);\n\n\t\t\t$(win).hide();\n\t\t\t$(link).data(\"win\", win);\n\t\t}\n\t}\n}\n\nvar cache = {};\nfunction renderFriend(list, friend) {\n\tvar bag = friend + \"_public\";\n\tvar srcImage = host + \"/bags/\" + bag + \"/tiddlers/SiteIcon\";\n\tif(!cache[srcImage]) {\n\t\tvar img = new Image()\n\t\timg.src = srcImage;\n\t\tcache[srcImage] = img;\n\t}\n\tvar item = $(\"<li />\").addClass(\"friend\").attr(\"id\", \"friend-\" + friend).appendTo(list)[0];\n\t$(cache[srcImage]).attr(\"alt\", friend).attr(\"title\", friend).\n\t\tcss({ width: 48, height: 48 }).appendTo(item);\n\tvar heading = $(\"<h2>\").appendTo(item)[0];\n\t$(\"<a />\").attr(\"href\", \"#friend-\" + friend).attr(\"name\", \"friend-\" + friend).text(friend).appendTo(heading);\n\t$(\"<button />\").data(\"who\", friend).text(\"remove from friends\").\n\t\tclick(function(ev) {\n\t\t\tif(confirm(\"Are you sure you want to remove \" + friend + \" as a friend?\")) {\n\t\t\t\tremoveFriend($(ev.target).data(\"who\"));\n\t\t\t}\n\t\t}).appendTo(item)[0];\n\tvar tids = app.tiddlers[friend] ? app.tiddlers[friend] : false;\n\tif(tids !== false) {\n\t\tif(tids.length === 0) {\n\t\t\t$(item).addClass(\"inactiveFriend\");\n\t\t}\n\t\t$(\"<a href='#displayArea' class='tiddlers' />\").html(\"<span class='count'>\" + tids.length + \"</span> recent tiddlers.\").\n\t\t\tdata(\"who\", friend).\n\t\t\tappendTo(item)[0];\n\t\t$(item).mousedown(function(ev) {\n\t\t\t\tvar friendEl = $(ev.target).closest(\".friend\")[0];\n\t\t\t\tvar who = $(\".tiddlers\", friendEl)[0]\n\t\t\t\tif(who) {\n\t\t\t\t\twho = $(who).data(\"who\");\n\t\t\t\t\t$(\".friend\").removeClass(\"active\");\n\t\t\t\t\t$(ev.target).addClass(\"active\");\n\t\t\t\t\t$(ev.target).parents(\".friend\").addClass(\"active\");\n\t\t\t\t\tshowTiddlers(who);\n\t\t\t\t}\n\t\t\t});\n\t} else {\n\t\t$(item).addClass(\"inactiveFriend\");\n\t}\n\t$(item).mouseover(function(ev) {\n\t\tif($(ev.target).hasClass(\"friend\")) {\n\t\t\t$(ev.target).addClass(\"hover\");\n\t\t}\n\t}).mouseout(function(ev) {\n\t\tif($(ev.target).hasClass(\"friend\")) {\n\t\t\t$(ev.target).removeClass(\"hover\");\n\t\t}\n\t});\n\treturn item;\n}\n\nfunction renderFriends() {\n\t$(\"#friends ul\").remove();\n\tvar list = $(\"<ul />\").appendTo(\"#friends\")[0];\n\tvar friends = app.friends;\n\tif(friends.length === 0) {\n\t\t$(\"<li />\").text(\"No friends.\").appendTo(list);\n\t}\n\tfor(var i = 0; i < friends.length; i++) {\n\t\tvar friend = friends[i];\n\t\trenderFriend(list, friend);\n\t}\n}\n\nfunction followWidget() {\n\t$(\"#friends\").empty();\n\tvar container = $(\"<div />\").addClass(\"addfriends\").appendTo(\"#friends\")[0];\n\t$(\"<input />\").attr(\"name\", \"friend\").appendTo(container);\n\t$(\"<button />\").text(\"add friend\").click(function(ev) {\n\t\tvar friend = $(ev.target).parent().children(\"[name='friend']\").val();\n\t\tif(app.friends.indexOf(friend) > -1) {\n\t\t\treturn printError(\"You already follow \" + friend + \"!\");\n\t\t}\n\n\t\tvar title;\n\t\tif(friend.indexOf(\"@\") !== 0) {\n\t\t\ttitle = \"@\" + friend;\n\t\t} else {\n\t\t\ttitle = friend;\n\t\t}\n\n\t\t$.ajax({ dataType: \"text\", url: \"/users/\" + friend,\n\t\t\tsuccess: function() {\n\t\t\t\tvar tid = new tiddlyweb.Tiddler(title, userbag);\n\t\t\t\ttid.tags = [\"follow\", \"excludeLists\"];\n\t\t\t\ttid.put(function(tiddler) {\n\t\t\t\t\tprintMessage(\"Added friend \" + friend);\n\t\t\t\t\trenderFriend($(\"#friends ul\")[0], friend);\n\t\t\t\t\twindow.location.hash = \"#friend-\" + friend;\n\t\t\t\t}, function() {\n\t\t\t\t\tprintError(\"Failed to add friend \" + friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\tprintError(\"No one with name \" + friend + \" exists!\");\n\t\t\t}\n\t\t});\n\t}).appendTo(container);\n\tvar friends = app.friends;\n\tfor(var i = 0; i < friends.length; i++) {\n\t\tcollectTiddlers(friends[i]);\n\t}\n\twindow.setTimeout(function() {\n\t\trenderFriends();\n\t}, 1000);\n}\n\n// initialise by loading friends\n$.ajax({\n\turl: \"/status\",\n\tdataType: \"json\",\n\tsuccess: function(status) {\n\t\tuser = status.username;\n\t\tuserbag = new tiddlyweb.Bag(user + \"_public\", \"/\");\n\t\tuserbag.tiddlers().get(function(tiddlers) {\n\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\tvar title = tiddlers[i].title;\n\t\t\t\tif(title.indexOf(\"@\") === 0) {\n\t\t\t\t\ttitle = title.substr(1, title.length);\n\t\t\t\t}\n\t\t\t\tapp.friends.push(title);\n\t\t\t}\n\t\t\tapp.friends.sort();\n\t\t\tfollowWidget();\n\t\t}, function() {\n\t\t\t\n\t\t}, \"select=tag:follow\");\n\t}\n})", "title": "_socialjs", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 454978}, {"creator": "optimusprime", "fields": {"_hash": "3a981000c5c786441837054db1cae9c9ef9b7373"}, "created": "20110914135304", "recipe": "gadabout_private", "modified": "20111104123507", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/htmljs-takenoteedit.js", "bag": "takenote_public", "text": "/***\n!Description\nUpdates the html serialization in TiddlySpace to provide routes to the takenote tool\n***/\n$(document).ready(function() {\n\tvar place = $(\"#container\").length > 0 ? $(\"#container\")[0] : document.body;\n\tvar space = window.location.host.split(\".\")[0]\n\tvar bag = $(\".bag\").first().text() || space + \"_public\";\n\tvar title = $(\"#title\").text();\n\t// add edit link to notabene\n\t$.ajax({ url: \"/spaces/\" + space + \"/members\",\n\t\tsuccess: function(r) {\n\t\t\tvar isTiddler = $(\".tiddler\").length > 0;\n\t\t\tif(r) {\n\t\t\t\tif(bag == space + \"_public\") {\n\t\t\t\t\tif(isTiddler) {\n\t\t\t\t\t\t$(\"<a id='editLink' />\").attr(\"href\", \"/takenote#!/quickedit/tiddler/\" + encodeURIComponent(title)).\n\t\t\t\t\t\t\ttext(\"edit note\").prependTo(place);\n\t\t\t\t\t} else { // when viewing a collection add link to create new note in collection\n\t\t\t\t\t\t$(\"<a id='editLink' />\").attr(\"href\", \"/takenote\").\n\t\t\t\t\t\t\ttext(\"take note\").prependTo(place);\n\t\t\t\t\t}\n\t\t\t\t} else if(bag == space + \"_private\") {\n\t\t\t\t\tif(isTiddler) {\n\t\t\t\t\t\t$(\"<a id='editLink' />\").attr(\"href\", \"/takenote#!/quickedit/bags/\" + bag + \"/tiddler/\" + title).\n\t\t\t\t\t\t\ttext(\"edit note\").prependTo(place);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif($(\"#backstage\").length === 0) {\n\t\t\t\t\t$(['<ul id=\"backstage\">',\n\t\t\t\t\t\t'<li><a href=\"/dashboard\">dashboard</a></li><li><a href=\"/takenote\">takenote</a></li>',\n\t\t\t\t\t\t'</ul>'].join(\"\")).prependTo(document.body);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n});", "title": "htmljs-takenoteedit.js", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/javascript", "tags": ["excludeLists", "excludeSearch", "takenotepackage"], "revision": 402990}, {"creator": "jon", "fields": {"_hash": "31fdc37e675b27b02c04633f4fc21aab8e1b2c30"}, "created": "20110914182811", "recipe": "gadabout_private", "modified": "20111104123506", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/touchicon_takenote.png", "bag": "takenote_public", "text": "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", "title": "touchicon_takenote.png", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "image/png", "tags": ["excludeLists", "excludeSearch", "takenote"], "revision": 403238}, {"creator": "optimusprime", "fields": {"_hash": "6febb93b8c9672386fa5dcfcc09272d9e3e6486b"}, "created": "20110914135303", "recipe": "gadabout_private", "modified": "20111104123506", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/dashboard", "bag": "takenote_public", "text": "<!DOCTYPE html>\n<html manifest=\"/bags/common/tiddlers/takenote_manifest.appcache\">\n\t<head>\n\t\t<title>takenote</title>\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/bags/common/tiddlers/notabene.css\" />\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/bags/common/tiddlers/jquery-ui.custom.css\">\n\t\t<link rel=\"apple-touch-icon\" href=\"/bags/common/tiddlers/touchicon_takenote.png\"/>\n\t\t<link rel=\"apple-touch-icon-precomposed\" href=\"/bags/common/tiddlers/touchicon_takenote.png\"/>\n\t\t<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n\t\t<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=0,initial-scale=1.0\">\n\t</head>\n\t<body>\n\t\t<ul id=\"backstage\">\n\t\t\t<!-- no not add a newline between li elements or you will get a margin with inline blocks -->\n\t\t\t<li><a href=\"/dashboard\">dashboard</a></li><li><a href=\"/takenote\">takenote</a></li>\n\t\t\t<li><a class='connectionStatus'></a></li>\n\t\t</ul>\n\t\t<div class=\"takenotedashboard\">\n\t\t  <div class='messageArea' style=\"display: none;\"></div>\n\t\t\t<div class=\"header\">\n\t\t\t\t<div class='siteicon'></div>\n\t\t\t</div>\n\t\t\t<div class=\"toolpanel viewer\">\n\t\t\t\t<div class='section searchSection requiresConnection'>\n\t\t\t\t\t<h2>All Notes</h2>\n\t\t\t\t\t<input class=\"findnote\" type=\"search\" placeholder=\"type search term\" />\n\t\t\t\t\t<ul>\n\t\t\t\t\t\t<li>Access all your notes from <a href=\"/tiddlers?select=tag:!excludeLists\">tiddlers</a></li>\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"section incompleteSection\">\n\t\t\t\t\t<h2>New Notes</h2>\n\t\t\t\t\t<ul id=\"createNotes\"></ul>\n\t\t\t\t\t<h2>Recently Started Notes</h2>\n\t\t\t\t\t<ul id=\"incomplete\"></ul>\n\t\t\t\t\t<a class='syncButton' title=\"save all notes in the list to the web\">sync these notes</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"section recentSection\">\n\t\t\t\t\t<h2>Recently Created Notes</h2>\n\t\t\t\t\t<ul id=\"recentnotes\"></ul>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class='footer'>\n\t\t\t\t<span class='version'>v. 0.7.3</span>\n\t\t\t</div>\n\t\t</div>\n\t\t<noscript>\n\t\t\tTakenote requires javascript to work correctly. Sorry!\n\t\t</noscript>\n\t\t<script src=\"/bags/common/tiddlers/backstage.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/bookmark_bubble.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/jquery.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/jquery-ui.custom.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/chrjs-store.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/jquery-json.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/notabene.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script type=\"text/javascript\">\n\t\t\tdashboard($(\".takenotedashboard\")[0], {\n\t\t\t\thost: \"/\"\n\t\t\t});\n\t\t</script>\n\t</body>\n</html>", "title": "dashboard", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/html", "tags": ["app", "excludeLists", "excludeMissing", "excludeSearch", "takenotepackage"], "revision": 402943}, {"creator": "optimusprime", "fields": {"_hash": "73ed35ca2ffd917de62c2bfb127e0a468c3e31b6"}, "created": "20111010123614", "recipe": "gadabout_private", "modified": "20111104123506", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/takenote_manifest.appcache", "bag": "takenote_public", "text": "CACHE MANIFEST\n# version 0.7.3\n\nCACHE:\n/takenote\n/dashboard\n/bags/common/tiddlers/jquery-ui.custom.css\n/bags/common/tiddlers/jquery-ui.custom.js\n/bags/common/tiddlers/notabene.css\n/bags/common/tiddlers/notabene.js\n/bags/common/tiddlers/jquery-json.js\n/bags/common/tiddlers/jquery.js\n/bags/tiddlyspace/tiddlers/chrjs\n/bags/common/tiddlers/chrjs-store.js\n/bags/common/tiddlers/touchicon_takenote.png\n/bags/common/tiddlers/cancelTiddler.png\n/bags/common/tiddlers/saveTiddler.png\n/bags/common/tiddlers/deleteTiddler.png\n/bags/common/tiddlers/HtmlBackground\n/bags/common/tiddlers/icon-search.png\n/bags/common/tiddlers/icon-incomplete.png\n/bags/common/tiddlers/icon-recent.png\n/bags/common/tiddlers/bookmark_bubble.js\nNETWORK:\n*\n", "title": "takenote_manifest.appcache", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/cache-manifest", "tags": [], "revision": 403202}, {"creator": "optimusprime", "fields": {"_hash": "ccea6ec393359ec9fdc0a8e04812f2b3049508ee"}, "created": "20110914135303", "recipe": "gadabout_private", "modified": "20111104123505", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/takenote", "bag": "takenote_public", "text": "<!DOCTYPE html>\n<html manifest=\"/bags/common/tiddlers/takenote_manifest.appcache\">\n\t<head>\n\t\t<title>takenote</title>\n\t\t<link rel=\"stylesheet\" href=\"/bags/common/tiddlers/notabene.css\" />\n\t\t<link rel=\"apple-touch-icon\" href=\"/bags/common/tiddlers/touchicon_takenote.png\"/>\n\t\t<link rel=\"apple-touch-icon-precomposed\" href=\"/bags/common/tiddlers/touchicon_takenote.png\"/>\n\t\t<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=0,initial-scale=1.0\">\n\t\t<meta name=\"apple-mobile-web-app-capable\" content=\"yes\" />\n\t</head>\n\t<body>\n\t\t<ul id=\"backstage\">\n\t\t\t<!-- no not add a newline between li elements or you will get a margin with inline blocks -->\n\t\t\t<li><a href=\"/dashboard\">dashboard</a></li><li><a href=\"/takenote\">takenote</a></li>\n\t\t\t<li><a class='connectionStatus'></a></li>\n\t\t</ul>\n\t\t<div class=\"takenotecontainer\">\n\t\t\t<div class='messageArea'></div>\n\t\t\t<div id=\"note\">\n\t\t\t\t<div class=\"toolbar\">\n\t\t\t\t\t<a id=\"cancelnote\" title=\"cancel this note\">cancel</a>\n\t\t\t\t\t<a id=\"deletenote\" title=\"delete this note\">delete</a>\n\t\t\t\t\t<a id=\"newnote\" title=\"complete this note\">complete</a>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"note_title_container\">\n\t\t\t\t\t<textarea class=\"note_title\" placeholder=\"Note Title\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"notebody\">\n\t\t\t\t\t<span class=\"notedate\"></span> \n\t\t\t\t\t<textarea class=\"note_text\" placeholder=\"Write here...\"></textarea>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"tips\">\n\t\t\t\t<div>Tips for cleverer notes:\n\t\t\t\t''<span class=\"boldTip\">bold</span>'' //<span class=\"italicTip\">italic</span>// _<span class=\"underlineTip\">underline</span>_ #tag</div>\n\t\t\t\t<div>[[<a href=\"http://tiddlyspace.com\">Link Name</a>|http://tiddlyspace.com]]\n\t\t\t\t[[<a href=\"/Note title\">Note title</a>]] <span class=\"imageTip\">[img[/SiteIcon<img src=\"/SiteIcon\" />]]</span></div>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"notemeta\"></div>\n\t\t\t\t<div style=\"display:none\">\n\t\t\t\t  <a class=\"syncButton\"></a>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<noscript>\n\t\t\tTakenote requires javascript to work correctly. Sorry!\n\t\t</noscript>\n\t\t<script src=\"/bags/common/tiddlers/backstage.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/bookmark_bubble.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/jquery.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/chrjs-store.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/jquery-json.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/notabene.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script type=\"text/javascript\">\n\t\t\tvar takenote;\n\t\t\ttakenote = notes($(\".takenotecontainer\")[0], {\n\t\t\t\thost: \"/\"\n\t\t\t});\n\t\t</script>\n\t</body>\n</html>", "title": "takenote", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/html", "tags": ["app", "excludeLists", "excludeMissing", "excludeSearch", "takenotepackage"], "revision": 403172}, {"creator": "optimusprime", "fields": {"_hash": "778b2d92eb128302d6ee4ea42ad0b986b83c4161"}, "created": "20110914135303", "recipe": "gadabout_private", "modified": "20111104123505", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/notabene.css", "bag": "takenote_public", "text": "\nnoscript{border:5px solid red;display:block;margin:auto;padding:50px;text-align:center;width:300px}.syncButton{font-size:2em;border:solid 1px #CCC;padding:5px;border-radius:5px 5px 5px;-ms-border-radius:5px 5px 5px;-o-border-radius:5px 5px 5px;-moz-border-radius:5px 5px 5px;-webkit-border-radius:5px 5px 5px;width:48px;height:48px;background-image:url(/bags/common/tiddlers/icon-sync.png);background-repeat:no-repeat;background-position:center;text-indent:-999px;overflow:hidden;display:block;text-align:center;cursor:pointer;right:10px;top:20px;position:absolute}#note.active #deletenote{display:none}body{font:14px/1.4 \"Helvetica Neue\",\"Lucida Grande\",\"Arial\";margin:0}#backstage{width:100%;padding:0;background-color:black;margin:0;height:32px;text-align:center;background:-moz-linear-gradient(center bottom,#222 0,#333 50%,#555 100%);background:-webkit-gradient(linear,left bottom,left top,color-stop(0,#222),color-stop(0.5,#333),color-stop(1,#555));background:-moz-linear-gradient(center bottom,#222 0,#333 50%,#555 100%);filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=#F5555,endColorstr=#F2222);-ms-filter:\"progid:DXImageTransform.Microsoft.gradient(startColorstr=#F5555, endColorstr=#F2222)\"}#backstage a{color:white;padding:4px;display:block;text-decoration:none}#backstage li:first-child{border-right:solid 1px #777}#backstage li:nth-child(2){border-left:solid 1px #555}#backstage a:hover{background-color:#ffa500}#backstage li{display:inline-block;line-height:18px;margin-top:2px;padding:0 10px}#backstage .status{color:#CCC;float:right;font-size:.8em}#backstage .status.nonmember{color:#666;opacity:.5}h2,h3,h4,h5{margin-bottom:0}a{color:royalBlue}a:hover{color:#4169c8}.header{border-bottom:7px solid rgba(26,31,30,0.95);padding-bottom:20px;position:relative}.siteheading{position:relative}.header h1{color:#4c4a54;font-size:4em;line-height:48px;text-shadow:0 2px 2px white;padding-top:10px;margin-top:0;padding-left:72px}.toolpanel .info,.toolpanel input,.toolpanel h2,.toolpanel ul{margin-left:120px}.toolpanel h2{text-shadow:0 1px 1px white}.toolpanel .section{border-bottom:1px solid #dce7f1;border-top:1px solid #f8f8f8;padding:24px;position:relative;background-position:80px 15px;background-repeat:no-repeat}.section.searchSection{background-image:url(/bags/common/tiddlers/icon-search.png)}.section.recentSection{background-image:url(/bags/common/tiddlers/icon-recent.png)}.section.incompleteSection{background-image:url(/bags/common/tiddlers/icon-incomplete.png);min-height:100px}.toolpanel .section ul{list-style:none}.siteicon{background-color:#fff;background-position:top center;border:solid 1px #eee;background-image:url(/SiteIcon);height:56px;width:56px;background-repeat:no-repeat;-webkit-border-radius:10px;-moz-border-radius:10px;-o-border-radius:10px;-ms-border-radius:10px;border-radius:10px;background-size:100%;position:relative;left:6px;top:8px}.toolbar{position:absolute;top:-40px;width:100%}.takenotedashboard .footer{text-align:center;font-style:italic;font-size:.8em;color:gray;font-weight:bold;border-top:solid 1px #CCC}.takenotedashboard .footer,#note,.messageArea{width:500px}.note_title{font-family:Georgia;line-height:48px;color:#4c4a54;border:0;font-size:3em;outline:0;padding:0 16px;text-align:center;text-shadow:0 1px 1px white;background:0;width:90%;margin-left:5%}.takenotecontainer{width:540px;background:rgba(255,255,255,0.7)}.takenotedashboard{width:540px;background-color:#f0f4f8;padding-bottom:40px}.note_title_container{width:556px;margin-left:-28px;-webkit-box-shadow:0 1px 1px #606a73;-moz-box-shadow:0 1px 1px #606a73;-o-box-shadow:0 1px 1px #606a73;-ms-box-shadow:0 1px 1px #606a73;box-shadow:0 1px 1px #606a73;position:relative;background-color:#dce7f1}@media all and (min-width:500px){body{background-image:url(/bags/common/tiddlers/HtmlBackground)}.note_title_container:before{content:\"\";position:absolute;bottom:-8px;left:0;border-width:0 8px 8px 0;border-style:solid;border-color:rgba(0,0,0,0) #3a4955 rgba(0,0,0,0) #3a4955;background:rgba(0,0,0,0);display:block;width:0}.note_title_container:after{content:\"\";position:absolute;bottom:-8px;right:0;border-width:8px 8px 0 0;border-style:solid;border-color:#3a4955 rgba(0,0,0,0) rgba(0,0,0,0) #3a4955;background:rgba(0,0,0,0);display:block;width:0}}.takenotedashboard,.takenotecontainer{margin:auto;margin-top:20px;position:relative;display:none}.takenotedashboard,.takenotecontainer.ready{display:block}#note{position:relative}.takenotedashboard .footer,#note,.messageArea{margin:0 auto}.messageArea{position:relative;margin-bottom:20px;font-family:monospace;border:solid 1px #ccc;color:#333;padding:10px 0 20px 0;text-indent:4px;color:green;opacity:0}.messageArea.warning{color:#b38600}.messageArea.error{color:red}.messageArea.displayed{opacity:1;-webkit-transition:opacity .4s ease-in;-moz-transition:opacity .4s ease-in;-ms-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.takenotecontainer h1{font-size:3em}#notebody{position:relative;border:1px solid gray;background:rgba(255,255,255,0.7);margin-top:18px;padding:16px;box-shadow:1px 1px 2px rgba(0,0,0,0.5),-1px -1px 2px rgba(0,0,0,0.5)}#newnote{height:24px;width:30px;position:absolute;top:6px;right:4px;padding:5px;background-repeat:no-repeat;background-image:url(/bags/common/tiddlers/saveTiddler.png)}.notedate{float:right;color:rgba(0,0,0,0.5);margin-left:32px}#notebody .note_text{color:#1a1f1e;background:transparent;width:100%;border:0;outline:0;clear:both;font-family:Georgia;font-size:1.3em;line-height:1.3em}#tips{padding:8px;background-color:#DDD}.imageTip img{width:16px;height:16px}.boldTip,.underlineTip,.italicTip{margin-left:2px;margin-right:2px}.boldTip{font-weight:bold}.underlineTip{text-decoration:underline}.italicTip{font-style:italic}#metabutton{background:gray;width:32px;height:32px;background-repeat:no-repeat;background-position:center;opacity:.3;border-radius:0 0 5px 5px;padding:10px;position:absolute;bottom:-52px;left:224px;-webkit-transition:height .2s ease-in-out,bottom .2s ease-in-out,opacity .2s ease-in-out;-moz-transition:height .2s ease-in-out,bottom .2s ease-in-out,opacity .2s ease-in-out;-o-transition:height .2s ease-in-out,bottom .2s ease-in-out,opacity .2s ease-in-out;-ms-transition:height .2s ease-in-out,bottom .2s ease-in-out,opacity .2s ease-in-out;transition:height .2s ease-in-out,bottom .2s ease-in-out,opacity .2s ease-in-out}#metabutton:hover{opacity:.7;height:35px;bottom:-55px}#newnote:hover,#metabutton:hover{cursor:pointer}#notemeta .paddedbox{padding:10px}#notemeta ul{list-style:none}.removeTag{background-image:url(/bags/common/tiddlers/deleteTiddler.png);background-size:12px 16px;background-repeat:no-repeat;text-indent:-999px;overflow:hidden;width:12px;height:16px;display:inline-block;margin-left:8px;margin-right:8px;cursor:pointer}.note_title:focus{text-shadow:none}#deletenote{position:absolute;top:4px;left:4px;background-image:url(/bags/common/tiddlers/deleteTiddler.png);background-repeat:no-repeat;height:30px;width:20px}#cancelnote{position:absolute;top:4px;visibility:hidden;right:50%;margin-left:-15px;background-image:url(/bags/common/tiddlers/cancelTiddler.png);background-repeat:no-repeat;height:30px;width:30px}.validatedNote #cancelnote{visibility:visible}#cancelnote,#deletenote,#newnote{cursor:pointer;opacity:.3;overflow:hidden;text-indent:-9999px}#cancelnote:hover,#newnote:hover,#deletenote:hover{opacity:1}#backstage a.connectionStatus:hover,.connectionStatus{display:block;position:relative;-webkit-border-radius:5px;-moz-border-radius:5px;-o-border-radius:5px;-ms-border-radius:5px;border-radius:5px;background-color:red}.online #backstage a.connectionStatus:hover,.online .connectionStatus{display:block;background-color:green}.connectionStatus:after{content:\"offline\";position:absolute;top:-6px;left:15px;color:#ccc}.online .connectionStatus:after{content:\"online\";position:absolute;top:-6px;left:15px;color:#eee}.requiresConnection{display:none}.online .requiresConnection{display:block}@media screen and (max-width:500px){.note_title{padding:0}#backstage{font-size:.8em}.takenotedashboard,.takenotecontainer{width:100%;font-size:.7em;margin-top:0}.takenotecontainer{background:#d0d2d3}.header h1{font-size:2em}.takenotedashboard .footer,#note,.messageArea{width:93.75%}#cancelnote{right:45%}.note_title,.note_title_container{width:100%;margin:auto}.toolpanel .section{background-position:5% 25%;padding:24px 0}.toolpanel .info,.toolpanel input,.toolpanel h2,.toolpanel ul{margin-left:20%}}", "title": "notabene.css", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/css", "tags": ["excludeLists", "excludeSearch", "takenotepackage"], "revision": 403095}, {"creator": "optimusprime", "fields": {"_hash": "783fa4329eec5c8217d22437d4e333c1b11cce2d"}, "created": "20110915122529", "recipe": "gadabout_private", "modified": "20111104123504", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/notabene.js", "bag": "takenote_public", "text": "/*!\n|''Name''|notabene|\n|''Version''|0.7.3|\n|''License''|BSD (http://en.wikipedia.org/wiki/BSD_licenses)|\n|''Source''|https://github.com/jdlrobson/notabene/blob/master/src/notabene.js|\n!*/\nvar APP_PATH=\"/takenote\";var RESERVED_TITLES=[\"takenote\",\"dashboard\",\"takenote_manifest.appcache\",\"notabene.css\",\"jquery-ui.min.js\",\"jquery-json.min.js\"];var RECENT_STORAGE_ID=\"takenote-recent\";var config;var firstTime=true;if(window.navigator.standalone){$(\"#backstage a\").click(function(a){window.location.href=$(a.target).attr(\"href\");a.preventDefault();return false})}var notabene={defaultFields:{},loadConfig:function(){config=localStorage.getItem(\"_takeNoteConfig\")?JSON.parse(localStorage.getItem(\"_takeNoteConfig\")):{};if(config.noGeoTiddlers){if(new Date().getTime()-config.noGeoTiddlers>1000*60*60*24){notabene.saveConfig(\"noGeoTiddlers\",false)}}},saveConfig:function(a,b){if(typeof(a)!=\"undefined\"&&typeof(b)!=\"undefined\"){config[a]=b}localStorage.setItem(\"_takeNoteConfig\",JSON.stringify(config))},watchPosition:function(a){if(!!navigator.geolocation&&!config.noGeoTiddlers){navigator.geolocation.watchPosition(a,function(){notabene.saveConfig(\"noGeoTiddlers\",new Date().getTime())})}},supports_local_storage:function(){try{return\"localStorage\" in window&&window.localStorage!==null}catch(a){return false}},clearRecentChanges:function(){localStorage.removeItem(RECENT_STORAGE_ID)},getRecentChanges:function(){var a=localStorage.getItem(RECENT_STORAGE_ID);a=a?$.parseJSON(a):[];return a},addRecentChange:function(d,e){var c=notabene.getRecentChanges();var f=[];for(var b=0;b<c.length;b++){var a=c[b];a=typeof(a)===\"string\"?{title:a}:a;if(a.title!==e){f.push(a)}}f.push({title:e,bag:d});f=f.length>5?f.slice(f.length-5):f;localStorage.setItem(RECENT_STORAGE_ID,$.toJSON(f))}};notabene.loadConfig();function autoResize(c,b){b=b||{};var a=function(g){c=g.target;var k=$(\"<div />\").addClass($(c).attr(\"class\")).hide().css({\"word-wrap\":\"break-word\"}).insertBefore($(c)[0]);var j=$(c).val()||\"\";var d=j.split(\"\\n\");for(var e=0;e<d.length;e++){$(\"<span />\").text(d[e]).appendTo(k);$(\"<br />\").appendTo(k)}var f=$(k).height();if(b.minHeight&&f<b.minHeight){f=b.minHeight}if(b.buffer){f+=b.buffer}$(g.target).height(f);$(k).remove()};$(c).focus(a).keyup(a).blur(a);$(c).focus()}function setup_store(b){b=b||{};var e=b.bag;var d=b.host;var c=new tiddlyweb.Bag(e,d);var a=new tiddlyweb.Store();a.retrieveCached();return{store:a,bag:c,host:d}}function init(a,b,d){if(localStorage.getItem(\"DEFAULT_SPACE\")){b.space=localStorage.getItem(\"DEFAULT_SPACE\");b.bag=b.space+\"_public\";d(b)}else{if(!b.bag&&!b.space){var c=new tiddlyweb.Store();c.getDefaults(function(f){var e=f.pushTo.name;b.space=e&&e.split(\"_\").length==2?e.split(\"_\")[0]:\"frontpage\";b.bag=e;localStorage.setItem(\"DEFAULT_SPACE\",b.space);d(b)})}else{return d(b)}}}function notes(a,b,c){return init(a,b,function(i){if(c){c(i)}backstage();window.onbeforeunload=function(){if(!notabene.supports_local_storage()&&m().dirty().length){return[\"There are unsynced changes. Are you sure you want to leave?\\n\\n\",\"Please upgrade your browser if possible to make sure you never lose a note.\"].join(\"\")}};var B=setup_store(i);var m=B.store;var d=B.bag;var w=B.host;var D=m().sort(function(H,G){return H.fields._modified<G.fields._modified?1:-1});var e,k;function h(N){var G={_created:{label:\"created on\"},_modified:{label:\"last modified on\"}};$(\"#notemeta\").empty();var H=$('<div class=\"paddedbox\" />').appendTo(\"#notemeta\")[0];var M=$(\"<ul />\").appendTo(H)[0];for(var L in N.fields){if(L.indexOf(\"_\")!==0){var I=N.fields[L];if(I){var O=G[L]?G[L].label:L;$(\"<li />\").text(O+\": \"+I).appendTo(M)}}}var P=N.tags||[];if(P.length>0){var J=$(\"<li />\").appendTo(M);$(\"<span />\").text(\"tags : \").appendTo(J);for(var K=0;K<P.length;K++){$(\"<span />\").text(P[K]).appendTo(J);$('<a class=\"removeTag\">remove</a>').data(\"tag\",P[K]).click(function(R){var Q=$(R.target).data(\"tag\");F(Q);y();R.preventDefault()}).appendTo(J)}}}function j(){$(\".note_title\").val(\"\");$(\".note_text\").val(e.text);if(e.title!=k&&e.fields._title_set){$(\".note_title\").val(e.title).focus()}if(e.fields._title_validated){$(\".note_title\").blur().attr(\"disabled\",true);$(document.body).addClass(\"validatedNote\")}else{$(\".note_title\").attr(\"disabled\",false);$(document.body).removeClass(\"validatedNote\")}h(e);notabene.watchPosition(function(H){if(e.fields[\"geo.lat\"]&&e.fields[\"geo.long\"]){return}if(H){var G=H.coords;e.fields[\"geo.lat\"]=String(G.latitude);e.fields[\"geo.long\"]=String(G.longitude)}})}function s(){return\"untitled note \"+Math.random()}function v(){k=s();e=new tiddlyweb.Tiddler(k,d);e.fields={};e.tags=[];e.fields._created=new Date();j()}function C(G,H,J){var I=$(\".messageArea\",a);I=I.length>0?I:$(\"<div class='messageArea' />\").appendTo(a);I.attr(\"class\",\"messageArea displayed\").html(\"<div>\"+G+\"</div>\");$(\".messageArea div\").stop(false,false).show();if(J){$(\".messageArea div\").css({opacity:1}).fadeOut(5000)}if(H){$(I).addClass(H)}}function r(){var H=$(\".syncButton\");var G=m().dirty();$(H).text(G.length);renderIncomplete(m,d.name)}function A(G,H){e=new tiddlyweb.Tiddler(G);e.fields={};e.bag=new tiddlyweb.Bag(H||d.name,w);m.get(e,function(I,K,J){var L=J?J.status===404:false;if(I){delete I.fields.created;delete I.fields.modified;e=I}else{if(!L){f()}}if(m().title(e.title).bag(d.name).dirty().length===0){if(I){e.fields._title_validated=\"yes\"}}if(L||I){e.fields._title_set=\"yes\"}$(a).addClass(\"ready\");j()})}function z(){var H=$(\".syncButton\");H=H.length>0?H:$(\"<div class='syncButton' />\").prependTo(a);r();H.click(function(M){var K,O=0,N=[];var L=m().dirty();C(\"Syncing to server\");var I=function(P){if(P){notabene.addRecentChange(P.bag.name,P.title)}if(O===0){if(L.length>0){C(\"Finish your note '\"+e.title+\"' before syncing.\",\"warning\")}else{C(\"Nothing to sync.\",\"warning\")}}else{if(N.length>0){C(\"Sync failed. Please rename some of your notes.\",\"error\")}else{if(P&&!K){C(\"Sync completed.\",\"\",true)}else{K=true;C(\"Unable to fully sync at current time.\",\"warning\")}}}r()};var J=$(\".note_title\").val();L.each(function(P){if(P.title!==J){O+=1;l(P,function(Q,R){if(R){m.save(Q,I)}else{N.push(Q);I(false)}})}else{I(false)}})});function G(){var L=window.location.hash;var K=L.match(/tiddler\\/([^\\/]+)$/);var M=L.match(/tiddler\\/$/);if(K&&K[1]){var I=L.match(/bags\\/([^\\/]*)\\//);var J=I&&decodeURIComponent(I[1])?I[1]:undefined;if(L.indexOf(\"quickedit/\")>-1){$(\"#newnote,#cancelnote\").addClass(\"quickedit\")}A(decodeURIComponent(K[1]),J)}else{if(!M&&D[0]){e=D[0];j();if($(\".takenotedashboard\").length===0&&firstTime){setTimeout(function(){var N=[\"We've restored your last incomplete note for you to finish and save. \",\"<a href='/takenote#tiddler/'>Start a new note</a> if you prefer.\"].join(\"\");C(N,\"\",true)},500)}}else{v()}$(a).addClass(\"ready\")}if(i.space){$.ajax({url:\"/spaces/\"+i.space+\"/members\",error:function(){var N=[\"You are not a member of this space. \",\"Any notes you create will not be saved to the server. \"].join(\"\");C(N,\"error\",false)}})}firstTime=false}G();if(window.addEventListener){window.addEventListener(\"hashchange\",G,true)}}function u(H){var G=!H.text?true:false;var I=H.fields&&H.fields._title_set?false:true;return I&&G?true:false}function y(){e.fields._modified=new Date();if(!u(e)){m.add(e)}r()}function p(H){var G=e.title;if(H!==G&&!u(e)){e.title=H;m.add(e);m.remove(new tiddlyweb.Tiddler(G,d))}}function l(G,I){var H=new tiddlyweb.Tiddler(G.title,d);if(RESERVED_TITLES.indexOf(G.title)>-1){I(G,false,true)}else{if(G.fields._title_validated){I(G,true)}else{H.get(function(){I(G,false)},function(J){if(J.status==404){G.fields._title_validated=\"yes\";I(G,true)}else{I(G,null,null,J)}})}}}var n;function t(H,I){I=I||function(){};var G=function(){if(n){C(\"Note title set.\",\"\",true);n=false}$(\".note_title\").attr(\"disabled\",true)};l(e,function(K,L,J,N){if(L){G()}else{if(L===false){n=true;var M=J?\"This name is reserved and cannot be used. Please provide another.\":\"A note with this name already exists. Please provide another name.\";C(M,\"error\")}}I(L,N)})}$(document).ready(function(){autoResize($(\"textarea.note_title\")[0],{buffer:0,minHeight:60});autoResize($(\".note_text\")[0],{minHeight:250});$(\".note_title\").blur(function(G){var I=$(G.target).val();var H=$.trim(I);if(H.length>0){e.fields._title_set=\"yes\";p(H);y()}else{delete e.fields._title_set;p(s())}}).keydown(function(G){if(G.keyCode===13){G.preventDefault()}})});function F(G){var H=e.tags||[];var J=[];for(var I=0;I<H.length;I++){if(H[I]!==G){J.push(H[I])}}e.tags=J;h(e)}function o(G){var H=e.tags||[];G=[\"excludeLists\",\"excludeSearch\",\"systemConfig\",\"excludeMissing\"].indexOf(G)>-1?G:G.toLowerCase();if(H.indexOf(G)===-1){H.push(G)}e.tags=H;h(e)}function g(J){var H=J.text.match(/#([^ \\n#]+)/gi);var K=[];for(var I=0;I<H.length;I++){var G=H[I].substr(1);if(K.indexOf(G)===-1){K.push(G)}}return K}function q(){var H=g(e);for(var G=0;G<H.length;G++){o(H[G])}}var E=[];var x=function(G){if(G===8){E.pop()}else{if(G===32||G===13){if(E.length>1){q()}E=[]}else{if(G===35){if(E.length>1){q();E=[\"#\"]}else{E=[\"#\"]}}else{if(E.length>0){E.push(String.fromCharCode(G))}}}}};$(\".note_text\").keydown(function(G){e.text=$(G.target).val();if(G.keyCode===8){x(G.keyCode)}y()}).keypress(function(G){e.text=$(G.target).val();x(G.keyCode)}).keyup(function(G){e.text=$(G.target).val();y()}).blur(function(G){if(E.length>0){q()}E=[]}).click(function(G){E=[]}).focus(function(G){E=[]});function f(){$(\"#note\").removeClass(\"active\");$(\".note_title, .note_text\").val(\"\").attr(\"disabled\",false);window.location.hash=\"\";v();r()}$(\"#newnote\").click(function(H){C(\"Saving note...\");var G=$(H.target).hasClass(\"quickedit\");t(e.title,function(I,J){if(I){m.save(e,function(N,L){if(N){notabene.addRecentChange(N.bag.name,e.title);$(\"#note\").addClass(\"active\");var M=encodeURIComponent(e.title);if(G){window.location=document.referrer||\"/\"+M}else{var K=\"/bags/\"+N.bag.name+\"/tiddlers/\"+M;var O=$(\"<div />\").append($(\"<a />\").attr(\"href\",K).text(e.title)).html();C(\"Saved \"+O+\" successfully.\",null,true)}f()}else{if(J&&J.status===403){C(\"You are not logged into takenote.Please <a href='/challenge'>login</a> to post notes to the web.\",\"warning\")}else{C(\"Saved locally. Unable to post to web at current time.\",\"warning\")}f()}})}else{if(I==null){C(\"Saved locally. Unable to post to web at current time.\",\"warning\");f()}}})});$(\"#deletenote\").click(function(I){var H=confirm(\"Delete this note?\");if(!H){return}C(\"Deleting note...\");if(e){var G=e.fields._title_validated?true:false;m.remove({tiddler:e,server:G},function(J,L,K){r();if(K&&K.status===0){C(\"Could not delete from server at current time.\",\"warning\",true);y();f()}else{if(J){$(\"#note\").addClass(\"deleting\");C(\"Note deleted.\",null,true);$(\"#note\").removeClass(\"deleting\");$(\".note_title, .note_text\").val(\"\").attr(\"disabled\",false);f()}else{C(\"Error deleting note. Please try again.\",\"error\")}}})}});$(\"#cancelnote\").click(function(I){var H=confirm(\"Cancel editing this note and revert to previous online version?\");if(H){var G=$(I.target).hasClass(\"quickedit\");m.remove(e.title);f();if(G){window.location=document.referrer||\"/\"+encodeURIComponent(e.title)}}});z();return{init:z,resetNote:f,findTags:g,tagHandler:x,printMessage:C,newNote:v,loadNote:j,addTag:o,removeTag:F,store:m,printMetaData:h,validateCurrentNoteTitle:t,getNote:function(){return e},tempTitle:k,loadServerNote:A}})}function backstage(){var a,d,c;function b(){if(d){return}else{d=true;$.ajax({url:\"/status\",success:function(e){a=true;d=false;$(\"body\").addClass(\"online\");if(!c){c=true}},error:function(){a=false;d=false;$(\"body\").removeClass(\"online\")}})}}b();window.setInterval(b,60000)}function renderIncomplete(a,g){var e=a().dirty().sort(function(i,h){return i.title<h.title?-1:1});var c=$(\"#incomplete\").empty()[0];if(c){for(var b=0;b<e.length;b++){var d=$(\"<li />\").appendTo(c)[0];var f=e[b].title;$(\"<a />\").attr(\"href\",APP_PATH+\"#!/tiddler/\"+f).text(f).appendTo(d)}if(e.length===0){$(\"<li />\").text(\"None.\").appendTo(c)[0]}}}function dashboard(a,c){var e=$(\"#recentnotes\");if(e.length>0){var d=notabene.getRecentChanges();function b(k){$(e).empty();if(k.length===0){$(\"<li />\").text(\"No recently created notes.\").appendTo(e)[0]}for(var h=0;h<k.length;h++){var g=$(\"<li />\").appendTo(e)[0];var l=k[h];if(typeof(l)===\"string\"){l={title:l}}var j=l.bag||c.bag;$(\"<a />\").attr(\"href\",\"/bags/\"+j+\"/tiddlers/\"+encodeURIComponent(l.title)).text(l.title).appendTo(g)}}function f(){$.ajax({url:\"/tiddlers?select=tag:!excludeLists&sort=-created&limit=5\",dataType:\"json\",success:function(j){notabene.clearRecentChanges();for(var h=j.length-1;h>-1;h--){var g=j[h];notabene.addRecentChange(g.bag,g.title)}d=notabene.getRecentChanges();b(d.reverse())}})}f();b(d.reverse())}return notes(a,c,function(i){if(i.space){var l=i.space+\"_private\";$('<li><a href=\"/takenote#tiddler/New%20Public%20Note\" class=\"button\">take public note</a></li>').appendTo(\"#createNotes\");$('<li><a href=\"/takenote#/bags/'+l+'/tiddler/New%20Private%20Note\" class=\"button\">take private note</a></li>').appendTo(\"#createNotes\")}var n=500;var m=window.setInterval(function(){var o=$(\".searching\");if(o.length>0){var p=o.css(\"opacity\");p=p?parseFloat(p,10):1;if(p>0.7){o.animate({opacity:0.6},n)}else{o.animate({opacity:1},n)}}},n);var k={},j=[];$.ajax({dataType:\"text\",url:\"/bags/\"+i.bag+\"/tiddlers?select=tag:!excludeLists\",success:function(o){j=o.split(\"\\n\")}});function h(r,o){r=r.toLowerCase();var q=[];for(var p=0;p<j.length;p++){var s=j[p];if(s.toLowerCase().indexOf(r)>-1&&o.indexOf(s)===-1){q.push({value:s,label:s,bag:i.bag})}}return q}$(\".findnote\").autocomplete({source:function(r,o){var q=$(this.element);q.addClass(\"searching\");var p=r.term;if(k[p]){return o(k[p])}o(h(p,[]));$.ajax({url:\"/search?q=bag:\"+i.bag+' \"'+p+' \"&select=tag:!excludeLists',dataType:\"json\",success:function(t){q.removeClass(\"searching\").css({opacity:1});var w=[];var v=h(p,v);for(var x=0;x<t.length;x++){var A=t[x];var u=A.bag;var s=u.split(\"_\");var B=s[0];var y=s[1];var z=A.type;v.push(A.title);if(!z){w.push({value:A.title,label:A.title,bag:A.bag})}}if(w.length===0){w.push({label:\"No notes found\"})}k[p]=w;o(w)},error:function(){var s=[];s.concat(h(p,[]));if(s.length===0){s.push({label:\"Unable to search at current time\"})}q.removeClass(\"searching\").css({opacity:1});o(s)}})},select:function(o,p){if(p.item.value&&p.item.bag){window.location=\"/bags/\"+p.item.bag+\"/tiddlers/\"+encodeURIComponent(p.item.value)}}});var g=setup_store(i);renderIncomplete(g.store,g.bag.name)})}window.addEventListener(\"load\",function(){window.setTimeout(function(){var a=new google.bookmarkbubble.Bubble();var b=\"bubble\";a.setHashParameter=function(){localStorage.setItem(b,\"yes\")};a.hasHashParameter=function(){return localStorage.getItem(b)?true:false};a.getViewportHeight=function(){return window.innerHeight};a.getViewportScrollY=function(){return window.pageYOffset};a.registerScrollHandler=function(c){window.addEventListener(\"scroll\",c,false)};a.deregisterScrollHandler=function(c){window.removeEventListener(\"scroll\",c,false)};a.showIfAllowed()},1000)},false);addEventListener(\"load\",function(){setTimeout(hideURLbar,0)},false);function hideURLbar(){window.scrollTo(0,1)};", "title": "notabene.js", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/javascript", "tags": ["excludeLists", "excludeSearch", "takenotepackage"], "revision": 403126}, {"creator": "jon", "fields": {"tiddler.source": "following_public", "_hash": "6b5c4dd47403863de77ca3d8729c9022c7afaa76", "summary": ""}, "created": "20111103141831", "recipe": "gadabout_private", "modified": "20111103141831", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/friendjs", "bag": "apps_public", "text": "var user, userbag;\nvar host = \"http://tiddlyspace.com\";\n\nvar app = {\n\tfriends: [],\n\ttiddlers: {}\n}\n$.ajaxSetup({\n\tbeforeSend: function(xhr) {\n\t\txhr.setRequestHeader(\"X-ControlView\", \"false\");\n\t}\n});\n\n$(\"#message\").hide();\nfunction printMessage(txt) {\n\t$(\"#message\").show().removeClass(\"error\").text(txt);\n}\n\nfunction printError(txt) {\n\t$(\"#message\").show().addClass(\"error\").text(txt);\n}\n\nvar simpleDate = (function() {\n\n\tvar measures = {\n\t\tsecond: 1,\n\t\tminute: 60,\n\t\thour: 3600,\n\t\tday: 86400,\n\t\tweek: 604800,\n\t\tmonth: 2592000,\n\t\tyear: 31536000\n\t};\n\n\tvar chkMultiple = function(amount, type) {\n\t\treturn (amount > 1) ? amount + \" \" + type + \"s\":\"a \" + type;\n\t};\n\n\treturn function(thedate) {\n\n\t\tvar dateStr, amount,\n\t\t\tcurrent = new Date().getTime(),\n\t\t\tdiff = (current - thedate.getTime()) / 1000; // work with seconds\n\n\t\tif(diff > measures.year) {\n\t\t\tamount = Math.round(diff/measures.year);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"year\") + \" ago\";\n\t\t} else if(diff > measures.month) {\n\t\t\tamount = Math.round(diff/measures.month);\n\t\t\t//if(typeof amount == \"\")\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"month\") + \" ago\";\n\t\t} else if(diff > measures.week) {\n\t\t\tamount = Math.round(diff/measures.week);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"week\") + \" ago\";\n\t\t} else if(diff > measures.day) {\n\t\t\tamount = Math.round(diff/measures.day);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"day\") + \" ago\";\n\t\t} else if(diff > measures.hour) {\n\t\t\tamount = Math.round(diff/measures.hour);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"hour\") + \" ago\";\n\t\t} else if(diff > measures.minute) {\n\t\t\tamount = Math.round(diff/measures.minute);\n\t\t\tdateStr = \"about \" + chkMultiple(amount, \"minute\") + \" ago\";\n\t\t} else {\n\t\t\tdateStr = \"a few seconds ago\";\n\t\t}\n\n\t\treturn dateStr;\n\n\t};\n})();\n\nfunction prettyDate(t) {\n\tvar date = new Date(Date.UTC(\n\t\tparseInt(t.substr(0, 4), 10),\n\t\tparseInt(t.substr(4, 2), 10) - 1,\n\t\tparseInt(t.substr(6, 2), 10),\n\t\tparseInt(t.substr(8, 2), 10),\n\t\tparseInt(t.substr(10, 2), 10),\n\t\tparseInt(t.substr(12, 2) || \"0\", 10),\n\t\tparseInt(t.substr(14, 3) || \"0\", 10)\n\t));\n\treturn simpleDate(date);\n}\n\nfunction endsWith(str, suffix) {\n\treturn str.indexOf(suffix) == str.length - suffix.length;\n}\n\nfunction isShadow(tid) {\n\tvar shadows = [\"MarkupPreHead\", \"DefaultTiddlers\", \"PageTemplate\", \"SideBarTabs\",\n\t\t\"GettingStarted\", \"MainMenu\", \"SiteTitle\", \"SiteSubtitle\", \"ColorPalette\",\n\t\t\"SiteIcon\", \"ViewTemplate\", \"EditTemplate\", \"ServerSettings\", \"MarkupPostHead\",\n\t\t\"MarkupPostBody\", \"MarkupPreBody\"];\n\treturn tid.title.indexOf(\"StyleSheet\") === 0 ||\n\t\ttid.title.indexOf(\"SideBar\") === 0 ||\n\t\tshadows.indexOf(tid.title) > -1 || endsWith(tid.title, \"SetupFlag\") ? true : false;\n}\n\nfunction isPlugin(tid) {\n\treturn tid.tags.indexOf(\"systemConfig\") > -1 ? true : false;\n}\n\nfunction isArtifact(tid) {\n\tvar follow = tid.tags.indexOf(\"follow\") > -1;\n\tvar type = tid.type;\n\tif(follow || type) {\n\t\treturn true;\n\t} else {\n\t\treturn false;\n\t}\n}\n\nfunction chooseTiddlers(tiddlers) {\n\tvar _tiddlers = [];\n\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\tvar tid = tiddlers[i];\n\t\tif(!isPlugin(tid) && !isShadow(tid) && !isArtifact(tid)) {\n\t\t\t_tiddlers.push(tid);\n\t\t}\n\t}\n\treturn _tiddlers;\n}\n\nvar tiddlers = {};\nfunction collectTiddlers(friend) {\n\t$.ajax({ dataType: \"json\",\n\t\turl: \"/search?q=modifier:\" + friend + \"&select=modified:>3d&sort=-modified\",\n\t\terror: function() {\n\t\t\t$(container).addClass(\"errorFriend\");\n\t\t\toncompletion();\n\t\t},\n\t\tsuccess: function(tiddlers) {\n\t\t\tapp.tiddlers[friend] = tiddlers;\n\t\t\trenderFriends();\n\t\t}\n\t});\n}\n\nfunction removeFriend(friend) {\n\tvar tiddler = new tiddlyweb.Tiddler(\"@\" + friend, userbag);\n\tvar success = function() {\n\t\tprintMessage(\"User removed from friends\");\n\t\tvar newFriends = [];\n\t\tvar friends = app.friends;\n\t\tfor(var i = 0; i < friends.length; i++) {\n\t\t\tvar f = friends[i];\n\t\t\tif(f !== friend) {\n\t\t\t\tnewFriends.push(f);\n\t\t\t}\n\t\t}\n\t\tapp.friends = newFriends;\n\t\t$(\"#friend-\" + friend).hide(2000);\n\t};\n\ttiddler[\"delete\"](success, function() {\n\t\tvar old = new tiddlyweb.Tiddler(friend, userbag);\n\t\told[\"delete\"](success, function() {\n\t\t\tprintError(\"Unable to remove friend \" + friend);\n\t\t})\n\t})\n}\n\nfunction showTiddlers(friend) {\n\tvar tiddlers = app.tiddlers[friend];\n\tvar container = $(\"#displayArea\").empty()[0];\n\t$(\"<h3 />\").text(friend + \"'s Tiddlers\").appendTo(container);\n\tif(!tiddlers) {\n\t\t$(\"<span />\").text(\"Tiddlers not yet loaded. Please try again later.\").appendTo(container);\n\t} else {\n\t\tvar tidList = $(\"<ul />\").appendTo(container)[0];\n\t\tfor(var i=0; i < tiddlers.length; i++) {\n\t\t\tvar tiddler = tiddlers[i];\n\t\t\tvar item = $(\"<li />\").appendTo(tidList)[0];\n\t\t\tvar win;\n\t\t\tvar space = tiddler.bag.split(\"_\")[0];\n\t\t\tvar spaceUrl = \"http://\" + space + \".tiddlyspace.com\";\n\t\t\tvar path = \"/bags/\" + tiddler.bag + \"/tiddlers/\" + encodeURIComponent(tiddler.title);\n\t\t\tvar link = $(\"<a />\").text(tiddler.title).\n\t\t\t\tattr(\"href\", spaceUrl + path).\n\t\t\t\tdata(\"path\", path).\n\t\t\t\tclick(function(ev) {\n\t\t\t\t\tvar win = $(ev.target).data(\"win\");\n\t\t\t\t\tif($(ev.target).hasClass(\"active\")) {\n\t\t\t\t\t\t$(win).toggle(1000);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(ev.target).addClass(\"active\");\n\t\t\t\t\t\t$(\".text\", win).text(\"loading...\");\n\t\t\t\t\t\t$(win).show();\n\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\turl: $(ev.target).data(\"path\"),\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\trender: \"y\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tdataType: \"json\",\n\t\t\t\t\t\t\tsuccess: function(tiddler) {\n\t\t\t\t\t\t\t\tif(tiddler.render) {\n\t\t\t\t\t\t\t\t\t$(\".text\",win).html(tiddler.render);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t$(\".text\",win).text(\"Cannot view tiddler here.\");\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t$(win).show(1000);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\terror: function() {\n\t\t\t\t\t\t\t\t$(\".text\", win).text(\"error loading that tiddler\");\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tev.preventDefault();\n\t\t\t\t}).\n\t\t\t\tappendTo(item)[0];\n\t\t\tvar space = tiddler.bag.split(\"_\")[0];\n\t\t\t$(\"<span />\").text(\" in \").appendTo(item);\n\t\t\t$(\"<a />\").attr(\"href\", spaceUrl).text(space).appendTo(item);\n\t\t\t$(\"<span />\").text(\" (\" + prettyDate(tiddler.modified) + \")\").appendTo(item);\n\t\t\twin = $(\"<div />\").addClass(\"tiddler section main\").appendTo(item)[0];\n\t\t\t$(\"<div />\").addClass(\"text\").appendTo(win);\n\t\t\tvar toolbar = $(\"<div />\").addClass(\"toolbar\").appendTo(win)[0];\n\t\t\tvar extra = $(\"<div />\").addClass(\"extra\").appendTo(win)[0];\n\t\t\t$(\"<button />\").data(\"bag\", tiddler.bag).data(\"title\", tiddler.title).text(\"give feedback\").\n\t\t\t\tdata(\"revision\", tiddler.revision).click(function(ev) {\n\t\t\t\tvar title = $(ev.target).data(\"title\");\n\t\t\t\tvar revision = $(ev.target).data(\"revision\");\n\t\t\t\tvar bag = $(ev.target).data(\"bag\");\n\t\t\t\tvar revisionURL = host + \"/bags/\" + bag + \"/tiddlers/\" + encodeURIComponent(title) + \"/revisions/\" + revision;\n\t\t\t\tvar space = bag.split(\"_\")[0];\n\t\t\t\tvar area = $(ev.target).parents(\".tiddler\").children(\".extra\")[0];\n\t\t\t\t$(area).hide();\n\t\t\t\t$(\"<textarea />\").appendTo(area);\n\t\t\t\t$(\"<button />\").text(\"save feedback\").click(function(ev) {\n\t\t\t\t\tvar tid = new tiddlyweb.Tiddler(\"Feedback for \" + title, userbag);\n\t\t\t\t\ttid.tags = [\"feedback\", \"@\" + space];\n\t\t\t\t\ttid.text = [\"In reply to [[\", title, \"]]@\", space,\n\t\t\t\t\t\t\" (revision [[\", revision, \"|\", revisionURL, \"]])\\n\\n\"].join(\"\") + $(\"textarea\", area).val();\n\t\t\t\t\ttid.put(function(tiddler) {\n\t\t\t\t\t\t$(area).empty();\n\t\t\t\t\t\t$(\"<span />\").text(\"your comment: \").appendTo(area);\n\t\t\t\t\t\t$(\"<a />\").attr(\"href\", \"/\" + encodeURIComponent(tiddler.title)).text(tiddler.title).appendTo(area);\n\t\t\t\t\t}, function() {\n\t\t\t\t\t\tprintError(\"error commenting!\");\n\t\t\t\t\t});\n\t\t\t\t}).appendTo(area);\n\t\t\t\t$(area).show(1000);\n\t\t\t\tev.preventDefault();\n\t\t\t\t$(ev.target).remove();\n\t\t\t\treturn false;\n\t\t\t}).appendTo(toolbar);\n\n\t\t\t$(win).hide();\n\t\t\t$(link).data(\"win\", win);\n\t\t}\n\t}\n}\n\nvar cache = {};\nfunction renderFriend(list, friend) {\n\tvar bag = friend + \"_public\";\n\tvar srcImage = host + \"/bags/\" + bag + \"/tiddlers/SiteIcon\";\n\tif(!cache[srcImage]) {\n\t\tvar img = new Image()\n\t\timg.src = srcImage;\n\t\tcache[srcImage] = img;\n\t}\n\tvar item = $(\"<li />\").addClass(\"friend\").attr(\"id\", \"friend-\" + friend).appendTo(list)[0];\n\t$(cache[srcImage]).attr(\"alt\", friend).attr(\"title\", friend).\n\t\tcss({ width: 48, height: 48 }).appendTo(item);\n\tvar heading = $(\"<h2>\").appendTo(item)[0];\n\t$(\"<a />\").attr(\"href\", \"#friend-\" + friend).attr(\"name\", \"friend-\" + friend).text(friend).appendTo(heading);\n\t$(\"<button />\").data(\"who\", friend).text(\"remove from friends\").\n\t\tclick(function(ev) {\n\t\t\tif(confirm(\"Are you sure you want to remove \" + friend + \" as a friend?\")) {\n\t\t\t\tremoveFriend($(ev.target).data(\"who\"));\n\t\t\t}\n\t\t}).appendTo(item)[0];\n\tvar tids = app.tiddlers[friend] ? app.tiddlers[friend] : false;\n\tif(tids !== false) {\n\t\tif(tids.length === 0) {\n\t\t\t$(item).addClass(\"inactiveFriend\");\n\t\t}\n\t\t$(\"<a href='#displayArea' class='tiddlers' />\").html(\"<span class='count'>\" + tids.length + \"</span> recent tiddlers.\").\n\t\t\tdata(\"who\", friend).\n\t\t\tclick(function(ev) {\n\t\t\t\tconsole.log($(ev.target), $(ev.target).data(\"who\"))\n\t\t\t\t$(ev.target).parents(\".friend\").removeClass(\"active\");\n\t\t\t\t$(ev.target).addClass(\"active\");\n\t\t\t\tshowTiddlers($(ev.target).data(\"who\"));\n\t\t\t}).appendTo(item)[0];\n\t} else {\n\t\t$(item).addClass(\"inactiveFriend\");\n\t}\n\t$(item).mouseover(function(ev) {\n\t\tif($(ev.target).hasClass(\"friend\")) {\n\t\t\t$(ev.target).addClass(\"hover\");\n\t\t}\n\t}).mouseout(function(ev) {\n\t\tif($(ev.target).hasClass(\"friend\")) {\n\t\t\t$(ev.target).removeClass(\"hover\");\n\t\t}\n\t});\n\treturn item;\n}\n\nfunction renderFriends() {\n\t$(\"#friends ul\").remove();\n\tvar list = $(\"<ul />\").appendTo(\"#friends\")[0];\n\tvar friends = app.friends;\n\tif(friends.length === 0) {\n\t\t$(\"<li />\").text(\"No friends.\").appendTo(list);\n\t}\n\tfor(var i = 0; i < friends.length; i++) {\n\t\tvar friend = friends[i];\n\t\trenderFriend(list, friend);\n\t}\n}\n\nfunction followWidget() {\n\t$(\"#friends\").empty();\n\tvar container = $(\"<div />\").addClass(\"addfriends\").appendTo(\"#friends\")[0];\n\t$(\"<input />\").attr(\"name\", \"friend\").appendTo(container);\n\t$(\"<button />\").text(\"add friend\").click(function(ev) {\n\t\tvar friend = $(ev.target).parent().children(\"[name='friend']\").val();\n\t\tif(app.friends.indexOf(friend) > -1) {\n\t\t\treturn printError(\"You already follow \" + friend + \"!\");\n\t\t}\n\n\t\tvar title;\n\t\tif(friend.indexOf(\"@\") !== 0) {\n\t\t\ttitle = \"@\" + friend;\n\t\t} else {\n\t\t\ttitle = friend;\n\t\t}\n\n\t\t$.ajax({ dataType: \"text\", url: \"/users/\" + friend,\n\t\t\tsuccess: function() {\n\t\t\t\tvar tid = new tiddlyweb.Tiddler(title, userbag);\n\t\t\t\ttid.tags = [\"follow\", \"excludeLists\"];\n\t\t\t\ttid.put(function(tiddler) {\n\t\t\t\t\tprintMessage(\"Added friend \" + friend);\n\t\t\t\t\trenderFriend($(\"#friends ul\")[0], friend);\n\t\t\t\t\twindow.location.hash = \"#friend-\" + friend;\n\t\t\t\t}, function() {\n\t\t\t\t\tprintError(\"Failed to add friend \" + friend);\n\t\t\t\t})\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\tprintError(\"No one with name \" + friend + \" exists!\");\n\t\t\t}\n\t\t});\n\t}).appendTo(container);\n\tvar friends = app.friends;\n\tfor(var i = 0; i < friends.length; i++) {\n\t\tcollectTiddlers(friends[i]);\n\t}\n\twindow.setTimeout(function() {\n\t\trenderFriends();\n\t}, 1000);\n}\n\n// initialise by loading friends\n$.ajax({\n\turl: \"/status\",\n\tdataType: \"json\",\n\tsuccess: function(status) {\n\t\tuser = status.username;\n\t\tuserbag = new tiddlyweb.Bag(user + \"_public\", \"/\");\n\t\tuserbag.tiddlers().get(function(tiddlers) {\n\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\tvar title = tiddlers[i].title;\n\t\t\t\tif(title.indexOf(\"@\") === 0) {\n\t\t\t\t\ttitle = title.substr(1, title.length);\n\t\t\t\t}\n\t\t\t\tapp.friends.push(title);\n\t\t\t}\n\t\t\tapp.friends.sort();\n\t\t\tfollowWidget();\n\t\t}, function() {\n\t\t\t\n\t\t}, \"select=tag:follow\");\n\t}\n})", "title": "friendjs", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 455159}, {"creator": "jon", "fields": {"summary": "A tool for managing friends in TiddlySpace. Follow users, unfollow users and see what those users are up to.", "tiddler.source": "following_public", "_hash": "5cf21a6f8eee47374dd3a7a132a3d711ade07233", "description": ""}, "created": "20111103141817", "recipe": "gadabout_private", "modified": "20111103141817", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/friends", "bag": "apps_public", "text": "<html>\n<head>\n\t<title>Friends</title>\n\t<style type='text/css'>\n.friend.active {\nmargin-right: -40px;\n-webkit-box-shadow: 10px 10px 10px #555;\n}\n.friend:hover {\n-webkit-box-shadow: 5px 5px 5px #ccc;\nmargin-right: -10px;\n}\n.friend a.tiddlers {\ndisplay: block;\n}\n.friend {\n-webkit-transition: max-height,margin-right 0.2s ease-in;\npadding: 10px;\nbackground-color: white;\n}\n\n\t\tul {\n\t\t\tlist-style: none;\n\t\t}\n\t\tul .friend {\n\t\t\tborder-bottom: solid 1px black;\ncursor: pointer;\n\t\t}\n\t\tul .friend .tiddler {\n\t\t\tmargin-left: 10px;\n\t\t\tmargin-bottom: 30px;\n\t\t\tpadding: 10px;\n\t\t\tborder: dotted 2px #CCC;\n\t\t\tcolor: #006100;\n\t\t}\n\t\ttextarea {\n\t\t\twidth: 100%;\n\t\t\theight: 150px;\n\t\t}\n\t\t.friend h2 {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\tbutton {\n\t\t\tdisplay: inline-block;\n\t\t}\n\t\t.inactiveFriend {\n\t\t\tbackground-color: #ccc;\nmax-height: 10px;\noverflow: hidden;\n\t\t\topacity: 0.1;\n\t\t}\n.inactiveFriend:hover {\nmax-height: 200px;\nopacity: 1;\n}\n#friends {\nposition: relative;\nwidth: 20%;\nfloat: left;\nbackground-color: white;\n}\n#message {\ndisplay: block;\npadding: 20px;\nbackground-color: white;\nmargin-bottom: 10px;\nborder-bottom: solid 3px #CCC;\n}\n#message.error {\nborder-bottom: solid 3px red;\ncolor: #900;\nfont-weight: bold;\n}\n\n\t</style>\n<link rel=\"stylesheet\" href=\"/bags/common/tiddlers/profile.css\" type=\"text/css\">\n</head>\n<body>\n<div id=\"message\"></div>\n<div id='friends' class=\"section\">loading...</div>\n<div id=\"container\">\n<div id=\"header\">\n<h1>Your friends</h1>\n</div>\n<noscript>\n\tjavascript is required to see friend's activity\n</noscript>\n<div id=\"displayArea\" class=\"main section\"></div>\n</div>\n<script src=\"/bags/common/tiddlers/jquery.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script src=\"/bags/common/tiddlers/jquery-json.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n<script type='text/javascript' src='/friendjs'></script>\n</body>\n</html>", "title": "friends", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists", "excludeSearch"], "revision": 455160}, {"creator": "jon", "fields": {"_hash": "f55e02f7a40685a802b98a4247439a45cb556e2a", "summary": ""}, "created": "20111024115206", "recipe": "gadabout_private", "modified": "20111103112722", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/twikifier.js", "bag": "apps_public", "text": "// create a function scope (this is closed in another file)\nvar createWikifier = function(window, jQuery, passedServerOptions) {\n    var serverOptions = {\n        'host': 'http://tiddlyspace.com',\n        'container': null\n    };\n    if (typeof passedServerOptions === 'undefed') {\n        passedServerOptions = {};\n    }\n    jQuery.extend(serverOptions, passedServerOptions);\n\n/*** psuedo-globals required to get rolling ***/\n\n// XXX TiddlyWiki requires a document global, rather than\n// being passed that document in startup.\nvar document = window.document;\n\n// XXX TiddlyWiki requires a store global, rather than it\n// being passed where needed.\nvar store = new TiddlyWiki();\n\n// XXX The findContainingTiddler method on story is required for\n// invokeMacro to process, but we don't actually need it to really\n// do anything.\nvar story = {\n    findContainingTiddler: function(e) { return e; }\n};\n\n// XXX the highlightHack variable is used by the function \n// highlightify which is rather irrelevant in this context\n// annoyingly it is used in Story.js and Macros.js but defined in main.js\nvar highlightHack = null;\n\n// provide a stubbed alert in case something calls it\nfunction alert(e) {\n    console.log(e);\n}\n\n// config.browser (used in FormatterHelpers) requires navigator\nvar navigator = { userAgent: \"twikifier\" };  \n//--\n//-- Augmented methods for the JavaScript Array() object\n//--\n\n// Add indexOf function if browser does not support it\nif(!Array.indexOf) {\nArray.prototype.indexOf = function(item,from)\n{\n\tif(!from)\n\t\tfrom = 0;\n\tvar i;\n\tfor(i=from; i<this.length; i++) {\n\t\tif(this[i] === item)\n\t\t\treturn i;\n\t}\n\treturn -1;\n};}\n\n// Find an entry in a given field of the members of an array\nArray.prototype.findByField = function(field,value)\n{\n\tvar t;\n\tfor(t=0; t<this.length; t++) {\n\t\tif(this[t][field] === value)\n\t\t\treturn t;\n\t}\n\treturn null;\n};\n\n// Return whether an entry exists in an array\nArray.prototype.contains = function(item)\n{\n\treturn this.indexOf(item) != -1;\n};\n\n// Adds, removes or toggles a particular value within an array\n//  value - value to add\n//  mode - +1 to add value, -1 to remove value, 0 to toggle it\nArray.prototype.setItem = function(value,mode)\n{\n\tvar p = this.indexOf(value);\n\tif(mode == 0)\n\t\tmode = (p == -1) ? +1 : -1;\n\tif(mode == +1) {\n\t\tif(p == -1)\n\t\t\tthis.push(value);\n\t} else if(mode == -1) {\n\t\tif(p != -1)\n\t\t\tthis.splice(p,1);\n\t}\n};\n\n// Return whether one of a list of values exists in an array\nArray.prototype.containsAny = function(items)\n{\n\tvar i;\n\tfor(i=0; i<items.length; i++) {\n\t\tif(this.indexOf(items[i]) != -1)\n\t\t\treturn true;\n\t}\n\treturn false;\n};\n\n// Return whether all of a list of values exists in an array\nArray.prototype.containsAll = function(items)\n{\n\tvar i;\n\tfor(i = 0; i<items.length; i++) {\n\t\tif(this.indexOf(items[i]) == -1)\n\t\t\treturn false;\n\t}\n\treturn true;\n};\n\n// Push a new value into an array only if it is not already present in the array. If the optional unique parameter is false, it reverts to a normal push\nArray.prototype.pushUnique = function(item,unique)\n{\n\tif(unique === false) {\n\t\tthis.push(item);\n\t} else {\n\t\tif(this.indexOf(item) == -1)\n\t\t\tthis.push(item);\n\t}\n};\n\nArray.prototype.remove = function(item)\n{\n\tvar p = this.indexOf(item);\n\tif(p != -1)\n\t\tthis.splice(p,1);\n};\n\nif(!Array.prototype.map) {\nArray.prototype.map = function(fn,thisObj)\n{\n\tvar scope = thisObj || window;\n\tvar i,j,a = [];\n\tfor(i=0, j=this.length; i < j; ++i) {\n\t\ta.push(fn.call(scope,this[i],i,this));\n\t}\n\treturn a;\n};}\n\n//--\n//-- Augmented methods for the JavaScript String() object\n//--\n\n// Get characters from the right end of a string\nString.prototype.right = function(n)\n{\n\treturn n < this.length ? this.slice(this.length-n) : this;\n};\n\n// Trim whitespace from both ends of a string\nString.prototype.trim = function()\n{\n\treturn this.replace(/^\\s*|\\s*$/g,\"\");\n};\n\n// Convert a string from a CSS style property name to a JavaScript style name (\"background-color\" -> \"backgroundColor\")\nString.prototype.unDash = function()\n{\n\tvar t,s = this.split(\"-\");\n\tif(s.length > 1) {\n\t\tfor(t=1; t<s.length; t++)\n\t\t\ts[t] = s[t].substr(0,1).toUpperCase() + s[t].substr(1);\n\t}\n\treturn s.join(\"\");\n};\n\n// Substitute substrings from an array into a format string that includes '%1'-type specifiers\nString.prototype.format = function(s)\n{\n\tvar substrings = s && s.constructor == Array ? s : arguments;\n\tvar subRegExp = /(?:%(\\d+))/mg;\n\tvar currPos = 0;\n\tvar match,r = [];\n\tdo {\n\t\tmatch = subRegExp.exec(this);\n\t\tif(match && match[1]) {\n\t\t\tif(match.index > currPos)\n\t\t\t\tr.push(this.substring(currPos,match.index));\n\t\t\tr.push(substrings[parseInt(match[1],10)]);\n\t\t\tcurrPos = subRegExp.lastIndex;\n\t\t}\n\t} while(match);\n\tif(currPos < this.length)\n\t\tr.push(this.substring(currPos,this.length));\n\treturn r.join(\"\");\n};\n\n// Escape any special RegExp characters with that character preceded by a backslash\nString.prototype.escapeRegExp = function()\n{\n\tvar s = \"\\\\^$*+?()=!|,{}[].\";\n\tvar t,c = this;\n\tfor(t=0; t<s.length; t++)\n\t\tc = c.replace(new RegExp(\"\\\\\" + s.substr(t,1),\"g\"),\"\\\\\" + s.substr(t,1));\n\treturn c;\n};\n\n// Convert \"\\\" to \"\\s\", newlines to \"\\n\" (and remove carriage returns)\nString.prototype.escapeLineBreaks = function()\n{\n\treturn this.replace(/\\\\/mg,\"\\\\s\").replace(/\\n/mg,\"\\\\n\").replace(/\\r/mg,\"\");\n};\n\n// Convert \"\\n\" to newlines, \"\\b\" to \" \", \"\\s\" to \"\\\" (and remove carriage returns)\nString.prototype.unescapeLineBreaks = function()\n{\n\treturn this.replace(/\\\\n/mg,\"\\n\").replace(/\\\\b/mg,\" \").replace(/\\\\s/mg,\"\\\\\").replace(/\\r/mg,\"\");\n};\n\n// Convert & to \"&amp;\", < to \"&lt;\", > to \"&gt;\" and \" to \"&quot;\"\nString.prototype.htmlEncode = function()\n{\n\treturn this.replace(/&/mg,\"&amp;\").replace(/</mg,\"&lt;\").replace(/>/mg,\"&gt;\").replace(/\\\"/mg,\"&quot;\");\n};\n\n// Convert \"&amp;\" to &, \"&lt;\" to <, \"&gt;\" to > and \"&quot;\" to \"\nString.prototype.htmlDecode = function()\n{\n\treturn this.replace(/&lt;/mg,\"<\").replace(/&gt;/mg,\">\").replace(/&quot;/mg,\"\\\"\").replace(/&amp;/mg,\"&\");\n};\n\n// Parse a space-separated string of name:value parameters\n//# where:\n//#   - the name or the value can be optional (in which case separate defaults are used instead)\n//#     - in case of ambiguity, a lone word is taken to be a value\n//#     - if 'cascadeDefaults' is set to true, then the defaults are modified by updated by each specified name or value\n//#     - name prefixes are not allowed if the 'noNames' parameter is true\n//#   - if both the name and value are present they must be separated by a colon\n//#   - the name and the value may both be quoted with single- or double-quotes, double-square brackets\n//#   - names or values quoted with {{double-curly braces}} are evaluated as a JavaScript expression\n//#     - as long as the 'allowEval' parameter is true\n// The result is an array of objects:\n//   result[0] = object with a member for each parameter name, value of that member being an array of values\n//   result[1..n] = one object for each parameter, with 'name' and 'value' members\nString.prototype.parseParams = function(defaultName,defaultValue,allowEval,noNames,cascadeDefaults)\n{\n\tvar parseToken = function(match,p) {\n\t\tvar n;\n\t\tif(match[p]) // Double quoted\n\t\t\tn = match[p];\n\t\telse if(match[p+1]) // Single quoted\n\t\t\tn = match[p+1];\n\t\telse if(match[p+2]) // Double-square-bracket quoted\n\t\t\tn = match[p+2];\n\t\telse if(match[p+3]) // Double-brace quoted\n\t\t\ttry {\n\t\t\t\tn = match[p+3];\n\t\t\t\tif(allowEval && config.evaluateMacroParameters != \"none\") {\n\t\t\t\t\tif(config.evaluateMacroParameters == \"restricted\") {\n\t\t\t\t\t\tif(window.restrictedEval) {\n\t\t\t\t\t\t\tn = window.restrictedEval(n);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tn = window.eval(n);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} catch(ex) {\n\t\t\t\tthrow \"Unable to evaluate {{\" + match[p+3] + \"}}: \" + exceptionText(ex);\n\t\t\t}\n\t\telse if(match[p+4]) // Unquoted\n\t\t\tn = match[p+4];\n\t\telse if(match[p+5]) // empty quote\n\t\t\tn = \"\";\n\t\treturn n;\n\t};\n\tvar r = [{}];\n\tvar dblQuote = \"(?:\\\"((?:(?:\\\\\\\\\\\")|[^\\\"])+)\\\")\";\n\tvar sngQuote = \"(?:'((?:(?:\\\\\\\\\\')|[^'])+)')\";\n\tvar dblSquare = \"(?:\\\\[\\\\[((?:\\\\s|\\\\S)*?)\\\\]\\\\])\";\n\tvar dblBrace = \"(?:\\\\{\\\\{((?:\\\\s|\\\\S)*?)\\\\}\\\\})\";\n\tvar unQuoted = noNames ? \"([^\\\"'\\\\s]\\\\S*)\" : \"([^\\\"':\\\\s][^\\\\s:]*)\";\n\tvar emptyQuote = \"((?:\\\"\\\")|(?:''))\";\n\tvar skipSpace = \"(?:\\\\s*)\";\n\tvar token = \"(?:\" + dblQuote + \"|\" + sngQuote + \"|\" + dblSquare + \"|\" + dblBrace + \"|\" + unQuoted + \"|\" + emptyQuote + \")\";\n\tvar re = noNames ? new RegExp(token,\"mg\") : new RegExp(skipSpace + token + skipSpace + \"(?:(\\\\:)\" + skipSpace + token + \")?\",\"mg\");\n\tvar match;\n\tdo {\n\t\tmatch = re.exec(this);\n\t\tif(match) {\n\t\t\tvar n = parseToken(match,1);\n\t\t\tif(noNames) {\n\t\t\t\tr.push({name:\"\",value:n});\n\t\t\t} else {\n\t\t\t\tvar v = parseToken(match,8);\n\t\t\t\tif(v == null && defaultName) {\n\t\t\t\t\tv = n;\n\t\t\t\t\tn = defaultName;\n\t\t\t\t} else if(v == null && defaultValue) {\n\t\t\t\t\tv = defaultValue;\n\t\t\t\t}\n\t\t\t\tr.push({name:n,value:v});\n\t\t\t\tif(cascadeDefaults) {\n\t\t\t\t\tdefaultName = n;\n\t\t\t\t\tdefaultValue = v;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} while(match);\n\t// Summarise parameters into first element\n\tvar t;\n\tfor(t=1; t<r.length; t++) {\n\t\tif(r[0][r[t].name])\n\t\t\tr[0][r[t].name].push(r[t].value);\n\t\telse\n\t\t\tr[0][r[t].name] = [r[t].value];\n\t}\n\treturn r;\n};\n\n// Process a string list of macro parameters into an array. Parameters can be quoted with \"\", '',\n// [[]], {{ }} or left unquoted (and therefore space-separated). Double-braces {{}} results in\n// an *evaluated* parameter: e.g. {{config.options.txtUserName}} results in the current user's name.\nString.prototype.readMacroParams = function(notAllowEval)\n{\n\tvar p = this.parseParams(\"list\",null,!notAllowEval,true);\n\tvar t,n = [];\n\tfor(t=1; t<p.length; t++)\n\t\tn.push(p[t].value);\n\treturn n;\n};\n\n// Process a string list of unique tiddler names into an array. Tiddler names that have spaces in them must be [[bracketed]]\nString.prototype.readBracketedList = function(unique)\n{\n\tvar p = this.parseParams(\"list\",null,false,true);\n\tvar t,n = [];\n\tfor(t=1; t<p.length; t++) {\n\t\tif(p[t].value)\n\t\t\tn.pushUnique(p[t].value,unique);\n\t}\n\treturn n;\n};\n\n// Returns array with start and end index of chunk between given start and end marker, or undefined.\nString.prototype.getChunkRange = function(start,end)\n{\n\tvar s = this.indexOf(start);\n\tif(s != -1) {\n\t\ts += start.length;\n\t\tvar e = this.indexOf(end,s);\n\t\tif(e != -1)\n\t\t\treturn [s,e];\n\t}\n};\n\n// Replace a chunk of a string given start and end markers\nString.prototype.replaceChunk = function(start,end,sub)\n{\n\tvar r = this.getChunkRange(start,end);\n\treturn r ? this.substring(0,r[0]) + sub + this.substring(r[1]) : this;\n};\n\n// Returns a chunk of a string between start and end markers, or undefined\nString.prototype.getChunk = function(start,end)\n{\n\tvar r = this.getChunkRange(start,end);\n\tif(r)\n\t\treturn this.substring(r[0],r[1]);\n};\n\n\n// Static method to bracket a string with double square brackets if it contains a space\nString.encodeTiddlyLink = function(title)\n{\n\treturn title.indexOf(\" \") == -1 ? title : \"[[\" + title + \"]]\";\n};\n\n// Static method to encodeTiddlyLink for every item in an array and join them with spaces\nString.encodeTiddlyLinkList = function(list)\n{\n\tif(list) {\n\t\tvar t,results = [];\n\t\tfor(t=0; t<list.length; t++)\n\t\t\tresults.push(String.encodeTiddlyLink(list[t]));\n\t\treturn results.join(\" \");\n\t} else {\n\t\treturn \"\";\n\t}\n};\n\n// Convert a string as a sequence of name:\"value\" pairs into a hashmap\nString.prototype.decodeHashMap = function()\n{\n\tvar fields = this.parseParams(\"anon\",\"\",false);\n\tvar t,r = {};\n\tfor(t=1; t<fields.length; t++)\n\t\tr[fields[t].name] = fields[t].value;\n\treturn r;\n};\n\n// Static method to encode a hashmap into a name:\"value\"... string\nString.encodeHashMap = function(hashmap)\n{\n\tvar t,r = [];\n\tfor(t in hashmap)\n\t\tr.push(t + ':\"' + hashmap[t] + '\"');\n\treturn r.join(\" \");\n};\n\n// Static method to left-pad a string with 0s to a certain width\nString.zeroPad = function(n,d)\n{\n\tvar s = n.toString();\n\tif(s.length < d)\n\t\ts = \"000000000000000000000000000\".substr(0,d-s.length) + s;\n\treturn s;\n};\n\nString.prototype.startsWith = function(prefix)\n{\n\treturn !prefix || this.substring(0,prefix.length) == prefix;\n};\n\n// Returns the first value of the given named parameter.\n//#\n//# @param params\n//#         as returned by parseParams or null/undefined\n//# @return [may be null/undefined]\n//#\nfunction getParam(params,name,defaultValue)\n{\n\tif(!params)\n\t\treturn defaultValue;\n\tvar p = params[0][name];\n\treturn p ? p[0] : defaultValue;\n}\n\n// Returns the first value of the given boolean named parameter.\n//#\n//# @param params\n//#         as returned by parseParams or null/undefined\n//#\nfunction getFlag(params,name,defaultValue)\n{\n\treturn !!getParam(params,name,defaultValue);\n}\n\n//--\n//-- Configuration repository\n//--\n\n// Miscellaneous options\nvar config = {\n\tnumRssItems: 20, // Number of items in the RSS feed\n\tanimDuration: 400, // Duration of UI animations in milliseconds\n\tcascadeFast: 20, // Speed for cascade animations (higher == slower)\n\tcascadeSlow: 60, // Speed for EasterEgg cascade animations\n\tcascadeDepth: 5, // Depth of cascade animation\n\tlocale: \"en\" // W3C language tag\n};\n\n// Hashmap of alternative parsers for the wikifier\nconfig.parsers = {};\n\n// Adaptors\nconfig.adaptors = {};\nconfig.defaultAdaptor = null;\n\n// Backstage tasks\nconfig.tasks = {};\n\n// Annotations\nconfig.annotations = {};\n\n// Custom fields to be automatically added to new tiddlers\nconfig.defaultCustomFields = {};\n\n// Messages\nconfig.messages = {\n\tmessageClose: {},\n\tdates: {},\n\ttiddlerPopup: {}\n};\n\n// Options that can be set in the options panel and/or cookies\nconfig.options = {\n\tchkRegExpSearch: false,\n\tchkCaseSensitiveSearch: false,\n\tchkIncrementalSearch: true,\n\tchkAnimate: true,\n\tchkSaveBackups: true,\n\tchkAutoSave: false,\n\tchkGenerateAnRssFeed: false,\n\tchkSaveEmptyTemplate: false,\n\tchkOpenInNewWindow: true,\n\tchkToggleLinks: false,\n\tchkHttpReadOnly: true,\n\tchkForceMinorUpdate: false,\n\tchkConfirmDelete: true,\n\tchkInsertTabs: false,\n\tchkUsePreForStorage: true, // Whether to use <pre> format for storage\n\tchkDisplayInstrumentation: false,\n\ttxtBackupFolder: \"\",\n\ttxtEditorFocus: \"text\",\n\ttxtMainTab: \"tabTimeline\",\n\ttxtMoreTab: \"moreTabAll\",\n\ttxtMaxEditRows: \"30\",\n\ttxtFileSystemCharSet: \"UTF-8\",\n\ttxtTheme: \"\"\n\t};\nconfig.optionsDesc = {};\n\n//# config.optionSource[\"chkAnimate\"] can be:\n//# \tcookie: the option gets stored in a cookie, with the default value coming from SystemSettings\n//#\t\tvolatile: the option isn't persisted at all, and reverts to the default specified in SystemSettings when the document is reloaded\n//#\t\tsetting: the option is stored in the SystemSettings tiddler\n//#\tThe default is \"setting\"\nconfig.optionsSource = {};\n\n// Default tiddler templates\nvar DEFAULT_VIEW_TEMPLATE = 1;\nvar DEFAULT_EDIT_TEMPLATE = 2;\nconfig.tiddlerTemplates = {\n\t1: \"ViewTemplate\",\n\t2: \"EditTemplate\"\n};\n\n// More messages (rather a legacy layout that should not really be like this)\nconfig.views = {\n\twikified: {\n\t\ttag: {}\n\t},\n\teditor: {\n\t\ttagChooser: {}\n\t}\n};\n\n// Backstage tasks\nconfig.backstageTasks = [\"save\",\"sync\",\"importTask\",\"tweak\",\"upgrade\",\"plugins\"];\n\n// Extensions\nconfig.extensions = {};\n\n// Macros; each has a 'handler' member that is inserted later\nconfig.macros = {\n\ttoday: {},\n\tversion: {},\n\tsearch: {sizeTextbox: 15},\n\ttiddler: {},\n\ttag: {},\n\ttags: {},\n\ttagging: {},\n\ttimeline: {},\n\tallTags: {},\n\tlist: {\n\t\tall: {},\n\t\tmissing: {},\n\t\torphans: {},\n\t\tshadowed: {},\n\t\ttouched: {},\n\t\tfilter: {}\n\t},\n\tcloseAll: {},\n\tpermaview: {},\n\tsaveChanges: {},\n\tslider: {},\n\toption: {},\n\toptions: {},\n\tnewTiddler: {},\n\tnewJournal: {},\n\ttabs: {},\n\tgradient: {},\n\tmessage: {},\n\tview: {defaultView: \"text\"},\n\tedit: {},\n\ttagChooser: {},\n\ttoolbar: {},\n\tplugins: {},\n\trefreshDisplay: {},\n\timportTiddlers: {},\n\tupgrade: {\n\t\tsource: \"http://tiddlywiki-releases.tiddlyspace.com/upgrade\",\n\t\tbackupExtension: \"pre.core.upgrade\"\n\t},\n\tsync: {},\n\tannotations: {}\n};\n\n// Commands supported by the toolbar macro\nconfig.commands = {\n\tcloseTiddler: {},\n\tcloseOthers: {},\n\teditTiddler: {},\n\tsaveTiddler: {hideReadOnly: true},\n\tcancelTiddler: {},\n\tdeleteTiddler: {hideReadOnly: true},\n\tpermalink: {},\n\treferences: {type: \"popup\"},\n\tjump: {type: \"popup\"},\n\tsyncing: {type: \"popup\"},\n\tfields: {type: \"popup\"}\n};\n\n// Control of macro parameter evaluation\nconfig.evaluateMacroParameters = \"all\";\n\n// Basic regular expressions\nconfig.textPrimitives = {\n\tupperLetter: \"[A-Z\\u00c0-\\u00de\\u0150\\u0170]\",\n\tlowerLetter: \"[a-z0-9_\\\\-\\u00df-\\u00ff\\u0151\\u0171]\",\n\tanyLetter:   \"[A-Za-z0-9_\\\\-\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171]\",\n\tanyLetterStrict: \"[A-Za-z0-9\\u00c0-\\u00de\\u00df-\\u00ff\\u0150\\u0170\\u0151\\u0171]\"\n};\nif(!((new RegExp(\"[\\u0150\\u0170]\",\"g\")).test(\"\\u0150\"))) {\n\tconfig.textPrimitives = {\n\t\tupperLetter: \"[A-Z\\u00c0-\\u00de]\",\n\t\tlowerLetter: \"[a-z0-9_\\\\-\\u00df-\\u00ff]\",\n\t\tanyLetter:   \"[A-Za-z0-9_\\\\-\\u00c0-\\u00de\\u00df-\\u00ff]\",\n\t\tanyLetterStrict: \"[A-Za-z0-9\\u00c0-\\u00de\\u00df-\\u00ff]\"\n\t};\n}\nconfig.textPrimitives.sliceSeparator = \"::\";\nconfig.textPrimitives.sectionSeparator = \"##\";\nconfig.textPrimitives.urlPattern = \"(?:file|http|https|mailto|ftp|irc|news|data):[^\\\\s'\\\"]+(?:/|\\\\b)\";\nconfig.textPrimitives.unWikiLink = \"~\";\nconfig.textPrimitives.wikiLink = \"(?:(?:\" + config.textPrimitives.upperLetter + \"+\" +\n\tconfig.textPrimitives.lowerLetter + \"+\" +\n\tconfig.textPrimitives.upperLetter +\n\tconfig.textPrimitives.anyLetter + \"*)|(?:\" +\n\tconfig.textPrimitives.upperLetter + \"{2,}\" +\n\tconfig.textPrimitives.lowerLetter + \"+))\";\n\nconfig.textPrimitives.cssLookahead = \"(?:(\" + config.textPrimitives.anyLetter + \"+)\\\\(([^\\\\)\\\\|\\\\n]+)(?:\\\\):))|(?:(\" + config.textPrimitives.anyLetter + \"+):([^;\\\\|\\\\n]+);)\";\nconfig.textPrimitives.cssLookaheadRegExp = new RegExp(config.textPrimitives.cssLookahead,\"mg\");\n\nconfig.textPrimitives.brackettedLink = \"\\\\[\\\\[([^\\\\]]+)\\\\]\\\\]\";\nconfig.textPrimitives.titledBrackettedLink = \"\\\\[\\\\[([^\\\\[\\\\]\\\\|]+)\\\\|([^\\\\[\\\\]\\\\|]+)\\\\]\\\\]\";\nconfig.textPrimitives.tiddlerForcedLinkRegExp = new RegExp(\"(?:\" + config.textPrimitives.titledBrackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.brackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.urlPattern + \")\",\"mg\");\nconfig.textPrimitives.tiddlerAnyLinkRegExp = new RegExp(\"(\"+ config.textPrimitives.wikiLink + \")|(?:\" +\n\tconfig.textPrimitives.titledBrackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.brackettedLink + \")|(?:\" +\n\tconfig.textPrimitives.urlPattern + \")\",\"mg\");\n\nconfig.glyphs = {\n\tcurrBrowser: null,\n\tbrowsers: [],\n\tcodes: {}\n};\n\n//--\n//-- Shadow tiddlers\n//--\n\nconfig.shadowTiddlers = {\n\tStyleSheet: \"\",\n\tMarkupPreHead: \"\",\n\tMarkupPostHead: \"\",\n\tMarkupPreBody: \"\",\n\tMarkupPostBody: \"\",\n\tTabTimeline: '<<timeline>>',\n\tTabAll: '<<list all>>',\n\tTabTags: '<<allTags excludeLists>>',\n\tTabMoreMissing: '<<list missing>>',\n\tTabMoreOrphans: '<<list orphans>>',\n\tTabMoreShadowed: '<<list shadowed>>',\n\tAdvancedOptions: '<<options>>',\n\tPluginManager: '<<plugins>>',\n\tSystemSettings: '',\n\tToolbarCommands: '|~ViewToolbar|closeTiddler closeOthers +editTiddler > fields syncing permalink references jump|\\n|~EditToolbar|+saveTiddler -cancelTiddler deleteTiddler|',\n\tWindowTitle: '<<tiddler SiteTitle>> - <<tiddler SiteSubtitle>>'\n};\n\n// Browser detection... In a very few places, there's nothing else for it but to know what browser we're using.\nconfig.userAgent = navigator.userAgent.toLowerCase();\nconfig.browser = {\n\tisIE: config.userAgent.indexOf(\"msie\") != -1 && config.userAgent.indexOf(\"opera\") == -1,\n\tisGecko: navigator.product == \"Gecko\" && config.userAgent.indexOf(\"WebKit\") == -1,\n\tieVersion: /MSIE (\\d.\\d)/i.exec(config.userAgent), // config.browser.ieVersion[1], if it exists, will be the IE version string, eg \"6.0\"\n\tisSafari: config.userAgent.indexOf(\"applewebkit\") != -1,\n\tisBadSafari: !((new RegExp(\"[\\u0150\\u0170]\",\"g\")).test(\"\\u0150\")),\n\tfirefoxDate: /gecko\\/(\\d{8})/i.exec(config.userAgent), // config.browser.firefoxDate[1], if it exists, will be Firefox release date as \"YYYYMMDD\"\n\tisOpera: config.userAgent.indexOf(\"opera\") != -1,\n\tisChrome: config.userAgent.indexOf('chrome') > -1,\n\tisLinux: config.userAgent.indexOf(\"linux\") != -1,\n\tisUnix: config.userAgent.indexOf(\"x11\") != -1,\n\tisMac: config.userAgent.indexOf(\"mac\") != -1,\n\tisWindows: config.userAgent.indexOf(\"win\") != -1\n};\n\nmerge(config.glyphs,{\n\tbrowsers: [\n\t\tfunction() {return config.browser.isIE;},\n\t\tfunction() {return true;}\n\t\t],\n\tcodes: {\n\t\tdownTriangle: [\"\\u25BC\",\"\\u25BE\"],\n\t\tdownArrow: [\"\\u2193\",\"\\u2193\"],\n\t\tbentArrowLeft: [\"\\u2190\",\"\\u21A9\"],\n\t\tbentArrowRight: [\"\\u2192\",\"\\u21AA\"]\n\t}\n});\n\n//--\n//-- Filter a list of tiddlers\n//--\n\n//# Extensible filter functions\nconfig.filters = {\n\ttiddler: function(results,match) {\n\t\tvar title = match[1]||match[4];\n\t\tvar tiddler = this.fetchTiddler(title);\n\t\tif(tiddler) {\n\t\t\tresults.pushUnique(tiddler);\n\t\t} else if(this.isShadowTiddler(title)) {\n\t\t\ttiddler = new Tiddler();\n\t\t\ttiddler.set(title,this.getTiddlerText(title));\n\t\t\tresults.pushUnique(tiddler);\n\t\t} else {\n\t\t\tresults.pushUnique(new Tiddler(title));\n\t\t}\n\t\treturn results;\n\t},\n\ttag: function(results,match) {\n\t\tvar m,matched = this.getTaggedTiddlers(match[3]);\n\t\tfor(m=0; m<matched.length; m++) {\n\t\t\tresults.pushUnique(matched[m]);\n\t\t}\n\t\treturn results;\n\t},\n\tsort: function(results,match) {\n\t\treturn this.sortTiddlers(results,match[3]);\n\t},\n\tlimit: function(results,match) {\n\t\treturn results.slice(0,parseInt(match[3],10));\n\t},\n\tfield: function(results,match) {\n\t\tvar m,matched = this.getValueTiddlers(match[2],match[3]);\n\t\tfor (m = 0; m < matched.length; m++) {\n\t\t\tresults.pushUnique(matched[m]);\n\t\t}\n\t\treturn results;\n\t}\n};\n\n// Filter a list of tiddlers\n//#   filter - filter expression (eg \"tidlertitle [[multi word tiddler title]] [tag[systemConfig]]\")\n//# Returns an array of Tiddler() objects that match the filter expression\nTiddlyWiki.prototype.filterTiddlers = function(filter)\n{\n\t//# text or [[tiddler title]] or [foo[bar]]\n\tvar re = /([^\\s\\[\\]]+)|(?:\\[([ \\w\\.\\-]+)\\[([^\\]]+)\\]\\])|(?:\\[\\[([^\\]]+)\\]\\])/mg;\n\n\tvar results = [];\n\tif(filter) {\n\t\tvar match = re.exec(filter);\n\t\twhile(match) {\n\t\t\tvar handler = (match[1]||match[4])?'tiddler':config.filters[match[2]]?match[2]:'field';\n\t\t\tresults = config.filters[handler].call(this,results,match);\n\t\t\tmatch = re.exec(filter);\n\t\t}\n\t}\n\treturn results;\n};\n//--\n//-- Formatter helpers\n//--\n\nfunction Formatter(formatters)\n{\n\tvar n;\n\tthis.formatters = [];\n\tvar pattern = [];\n\tfor(n=0; n<formatters.length; n++) {\n\t\tpattern.push(\"(\" + formatters[n].match + \")\");\n\t\tthis.formatters.push(formatters[n]);\n\t}\n\tthis.formatterRegExp = new RegExp(pattern.join(\"|\"),\"mg\");\n}\n\nconfig.formatterHelpers = {\n\n\tcreateElementAndWikify: function(w)\n\t{\n\t\tw.subWikifyTerm(createTiddlyElement(w.output,this.element),this.termRegExp);\n\t},\n\n\tinlineCssHelper: function(w)\n\t{\n\t\tvar styles = [];\n\t\tconfig.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;\n\t\tvar lookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);\n\t\twhile(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {\n\t\t\tvar s,v;\n\t\t\tif(lookaheadMatch[1]) {\n\t\t\t\ts = lookaheadMatch[1].unDash();\n\t\t\t\tv = lookaheadMatch[2];\n\t\t\t} else {\n\t\t\t\ts = lookaheadMatch[3].unDash();\n\t\t\t\tv = lookaheadMatch[4];\n\t\t\t}\n\t\t\tif(s==\"bgcolor\")\n\t\t\t\ts = \"backgroundColor\";\n\t\t\tif(s==\"float\")\n\t\t\t\ts = \"cssFloat\";\n\t\t\tstyles.push({style: s, value: v});\n\t\t\tw.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;\n\t\t\tconfig.textPrimitives.cssLookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tlookaheadMatch = config.textPrimitives.cssLookaheadRegExp.exec(w.source);\n\t\t}\n\t\treturn styles;\n\t},\n\n\tapplyCssHelper: function(e,styles)\n\t{\n\t\tvar t;\n\t\tfor(t=0; t< styles.length; t++) {\n\t\t\ttry {\n\t\t\t\te.style[styles[t].style] = styles[t].value;\n\t\t\t} catch (ex) {\n\t\t\t}\n\t\t}\n\t},\n\n\tenclosedTextHelper: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tvar text = lookaheadMatch[1];\n\t\t\tif(config.browser.isIE)\n\t\t\t\ttext = text.replace(/\\n/g,\"\\r\");\n\t\t\tcreateTiddlyElement(w.output,this.element,null,null,text);\n\t\t\tw.nextMatch = lookaheadMatch.index + lookaheadMatch[0].length;\n\t\t}\n\t},\n\n\tisExternalLink: function(link)\n\t{\n\t\tif(store.tiddlerExists(link) || store.isShadowTiddler(link)) {\n\t\t\t//# Definitely not an external link\n\t\t\treturn false;\n\t\t}\n\t\tvar urlRegExp = new RegExp(config.textPrimitives.urlPattern,\"mg\");\n\t\tif(urlRegExp.exec(link)) {\n\t\t\t//# Definitely an external link\n\t\t\treturn true;\n\t\t}\n\t\tif(link.indexOf(\".\")!=-1 || link.indexOf(\"\\\\\")!=-1 || link.indexOf(\"/\")!=-1 || link.indexOf(\"#\")!=-1) {\n\t\t\t//# Link contains . / \\ or # so is probably an external link\n\t\t\treturn true;\n\t\t}\n\t\t//# Otherwise assume it is not an external link\n\t\treturn false;\n\t}\n\n};\n\n//--\n//-- Standard formatters\n//--\n\nconfig.formatters = [\n{\n\tname: \"table\",\n\tmatch: \"^\\\\|(?:[^\\\\n]*)\\\\|(?:[fhck]?)$\",\n\tlookaheadRegExp: /^\\|([^\\n]*)\\|([fhck]?)$/mg,\n\trowTermRegExp: /(\\|(?:[fhck]?)$\\n?)/mg,\n\tcellRegExp: /(?:\\|([^\\n\\|]*)\\|)|(\\|[fhck]?$\\n?)/mg,\n\tcellTermRegExp: /((?:\\x20*)\\|)/mg,\n\trowTypes: {\"c\":\"caption\", \"h\":\"thead\", \"\":\"tbody\", \"f\":\"tfoot\"},\n\thandler: function(w)\n\t{\n\t\tvar table = createTiddlyElement(w.output,\"table\",null,\"twtable\");\n\t\tvar prevColumns = [];\n\t\tvar currRowType = null;\n\t\tvar rowContainer;\n\t\tvar rowCount = 0;\n\t\tvar onmouseover = function() {jQuery(this).addClass(\"hoverRow\");};\n\t\tvar onmouseout = function() {jQuery(this).removeClass(\"hoverRow\");};\n\t\tw.nextMatch = w.matchStart;\n\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\twhile(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {\n\t\t\tvar nextRowType = lookaheadMatch[2];\n\t\t\tif(nextRowType == \"k\") {\n\t\t\t\ttable.className = lookaheadMatch[1];\n\t\t\t\tw.nextMatch += lookaheadMatch[0].length+1;\n\t\t\t} else {\n\t\t\t\tif(nextRowType != currRowType) {\n\t\t\t\t\trowContainer = createTiddlyElement(table,this.rowTypes[nextRowType]);\n\t\t\t\t\tcurrRowType = nextRowType;\n\t\t\t\t}\n\t\t\t\tif(currRowType == \"c\") {\n\t\t\t\t\t// Caption\n\t\t\t\t\tw.nextMatch++;\n\t\t\t\t\tif(rowContainer != table.firstChild)\n\t\t\t\t\t\ttable.insertBefore(rowContainer,table.firstChild);\n\t\t\t\t\trowContainer.setAttribute(\"align\",rowCount == 0?\"top\":\"bottom\");\n\t\t\t\t\tw.subWikifyTerm(rowContainer,this.rowTermRegExp);\n\t\t\t\t} else {\n\t\t\t\t\tvar theRow = createTiddlyElement(rowContainer,\"tr\",null,rowCount%2?\"oddRow\":\"evenRow\");\n\t\t\t\t\ttheRow.onmouseover = onmouseover;\n\t\t\t\t\ttheRow.onmouseout = onmouseout;\n\t\t\t\t\tthis.rowHandler(w,theRow,prevColumns);\n\t\t\t\t\trowCount++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tlookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t}\n\t},\n\trowHandler: function(w,e,prevColumns)\n\t{\n\t\tvar col = 0;\n\t\tvar colSpanCount = 1;\n\t\tvar prevCell = null;\n\t\tthis.cellRegExp.lastIndex = w.nextMatch;\n\t\tvar cellMatch = this.cellRegExp.exec(w.source);\n\t\twhile(cellMatch && cellMatch.index == w.nextMatch) {\n\t\t\tif(cellMatch[1] == \"~\") {\n\t\t\t\t// Rowspan\n\t\t\t\tvar last = prevColumns[col];\n\t\t\t\tif(last) {\n\t\t\t\t\tlast.rowSpanCount++;\n\t\t\t\t\tlast.element.setAttribute(\"rowspan\",last.rowSpanCount);\n\t\t\t\t\tlast.element.setAttribute(\"rowSpan\",last.rowSpanCount); // Needed for IE\n\t\t\t\t\tlast.element.valign = \"center\";\n\t\t\t\t\tif(colSpanCount > 1) {\n\t\t\t\t\t\tlast.element.setAttribute(\"colspan\",colSpanCount);\n\t\t\t\t\t\tlast.element.setAttribute(\"colSpan\",colSpanCount); // Needed for IE\n\t\t\t\t\t\tcolSpanCount = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tw.nextMatch = this.cellRegExp.lastIndex-1;\n\t\t\t} else if(cellMatch[1] == \">\") {\n\t\t\t\t// Colspan\n\t\t\t\tcolSpanCount++;\n\t\t\t\tw.nextMatch = this.cellRegExp.lastIndex-1;\n\t\t\t} else if(cellMatch[2]) {\n\t\t\t\t// End of row\n\t\t\t\tif(prevCell && colSpanCount > 1) {\n\t\t\t\t\tprevCell.setAttribute(\"colspan\",colSpanCount);\n\t\t\t\t\tprevCell.setAttribute(\"colSpan\",colSpanCount); // Needed for IE\n\t\t\t\t}\n\t\t\t\tw.nextMatch = this.cellRegExp.lastIndex;\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\t// Cell\n\t\t\t\tw.nextMatch++;\n\t\t\t\tvar styles = config.formatterHelpers.inlineCssHelper(w);\n\t\t\t\tvar spaceLeft = false;\n\t\t\t\tvar chr = w.source.substr(w.nextMatch,1);\n\t\t\t\twhile(chr == \" \") {\n\t\t\t\t\tspaceLeft = true;\n\t\t\t\t\tw.nextMatch++;\n\t\t\t\t\tchr = w.source.substr(w.nextMatch,1);\n\t\t\t\t}\n\t\t\t\tvar cell;\n\t\t\t\tif(chr == \"!\") {\n\t\t\t\t\tcell = createTiddlyElement(e,\"th\");\n\t\t\t\t\tw.nextMatch++;\n\t\t\t\t} else {\n\t\t\t\t\tcell = createTiddlyElement(e,\"td\");\n\t\t\t\t}\n\t\t\t\tprevCell = cell;\n\t\t\t\tprevColumns[col] = {rowSpanCount:1,element:cell};\n\t\t\t\tif(colSpanCount > 1) {\n\t\t\t\t\tcell.setAttribute(\"colspan\",colSpanCount);\n\t\t\t\t\tcell.setAttribute(\"colSpan\",colSpanCount); // Needed for IE\n\t\t\t\t\tcolSpanCount = 1;\n\t\t\t\t}\n\t\t\t\tconfig.formatterHelpers.applyCssHelper(cell,styles);\n\t\t\t\tw.subWikifyTerm(cell,this.cellTermRegExp);\n\t\t\t\tif(w.matchText.substr(w.matchText.length-2,1) == \" \") // spaceRight\n\t\t\t\t\tcell.align = spaceLeft ? \"center\" : \"left\";\n\t\t\t\telse if(spaceLeft)\n\t\t\t\t\tcell.align = \"right\";\n\t\t\t\tw.nextMatch--;\n\t\t\t}\n\t\t\tcol++;\n\t\t\tthis.cellRegExp.lastIndex = w.nextMatch;\n\t\t\tcellMatch = this.cellRegExp.exec(w.source);\n\t\t}\n\t}\n},\n\n{\n\tname: \"heading\",\n\tmatch: \"^!{1,6}\",\n\ttermRegExp: /(\\n)/mg,\n\thandler: function(w)\n\t{\n\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"h\" + w.matchLength),this.termRegExp);\n\t}\n},\n\n{\n\tname: \"list\",\n\tmatch: \"^(?:[\\\\*#;:]+)\",\n\tlookaheadRegExp: /^(?:(?:(\\*)|(#)|(;)|(:))+)/mg,\n\ttermRegExp: /(\\n)/mg,\n\thandler: function(w)\n\t{\n\t\tvar stack = [w.output];\n\t\tvar currLevel = 0, currType = null;\n\t\tvar listLevel, listType, itemType, baseType;\n\t\tw.nextMatch = w.matchStart;\n\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\twhile(lookaheadMatch && lookaheadMatch.index == w.nextMatch) {\n\t\t\tif(lookaheadMatch[1]) {\n\t\t\t\tlistType = \"ul\";\n\t\t\t\titemType = \"li\";\n\t\t\t} else if(lookaheadMatch[2]) {\n\t\t\t\tlistType = \"ol\";\n\t\t\t\titemType = \"li\";\n\t\t\t} else if(lookaheadMatch[3]) {\n\t\t\t\tlistType = \"dl\";\n\t\t\t\titemType = \"dt\";\n\t\t\t} else if(lookaheadMatch[4]) {\n\t\t\t\tlistType = \"dl\";\n\t\t\t\titemType = \"dd\";\n\t\t\t}\n\t\t\tif(!baseType)\n\t\t\t\tbaseType = listType;\n\t\t\tlistLevel = lookaheadMatch[0].length;\n\t\t\tw.nextMatch += lookaheadMatch[0].length;\n\t\t\tvar t;\n\t\t\tif(listLevel > currLevel) {\n\t\t\t\tfor(t=currLevel; t<listLevel; t++) {\n\t\t\t\t\tvar target = (currLevel == 0) ? stack[stack.length-1] : stack[stack.length-1].lastChild;\n\t\t\t\t\tstack.push(createTiddlyElement(target,listType));\n\t\t\t\t}\n\t\t\t} else if(listType!=baseType && listLevel==1) {\n\t\t\t\tw.nextMatch -= lookaheadMatch[0].length;\n\t\t\t\treturn;\n\t\t\t} else if(listLevel < currLevel) {\n\t\t\t\tfor(t=currLevel; t>listLevel; t--)\n\t\t\t\t\tstack.pop();\n\t\t\t} else if(listLevel == currLevel && listType != currType) {\n\t\t\t\tstack.pop();\n\t\t\t\tstack.push(createTiddlyElement(stack[stack.length-1].lastChild,listType));\n\t\t\t}\n\t\t\tcurrLevel = listLevel;\n\t\t\tcurrType = listType;\n\t\t\tvar e = createTiddlyElement(stack[stack.length-1],itemType);\n\t\t\tw.subWikifyTerm(e,this.termRegExp);\n\t\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tlookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t}\n\t}\n},\n\n{\n\tname: \"quoteByBlock\",\n\tmatch: \"^<<<\\\\n\",\n\ttermRegExp: /(^<<<(\\n|$))/mg,\n\telement: \"blockquote\",\n\thandler: config.formatterHelpers.createElementAndWikify\n},\n\n{\n\tname: \"quoteByLine\",\n\tmatch: \"^>+\",\n\tlookaheadRegExp: /^>+/mg,\n\ttermRegExp: /(\\n)/mg,\n\telement: \"blockquote\",\n\thandler: function(w)\n\t{\n\t\tvar stack = [w.output];\n\t\tvar currLevel = 0;\n\t\tvar newLevel = w.matchLength;\n\t\tvar t,matched;\n\t\tdo {\n\t\t\tif(newLevel > currLevel) {\n\t\t\t\tfor(t=currLevel; t<newLevel; t++)\n\t\t\t\t\tstack.push(createTiddlyElement(stack[stack.length-1],this.element));\n\t\t\t} else if(newLevel < currLevel) {\n\t\t\t\tfor(t=currLevel; t>newLevel; t--)\n\t\t\t\t\tstack.pop();\n\t\t\t}\n\t\t\tcurrLevel = newLevel;\n\t\t\tw.subWikifyTerm(stack[stack.length-1],this.termRegExp);\n\t\t\tcreateTiddlyElement(stack[stack.length-1],\"br\");\n\t\t\tthis.lookaheadRegExp.lastIndex = w.nextMatch;\n\t\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t\tmatched = lookaheadMatch && lookaheadMatch.index == w.nextMatch;\n\t\t\tif(matched) {\n\t\t\t\tnewLevel = lookaheadMatch[0].length;\n\t\t\t\tw.nextMatch += lookaheadMatch[0].length;\n\t\t\t}\n\t\t} while(matched);\n\t}\n},\n\n{\n\tname: \"rule\",\n\tmatch: \"^----+$\\\\n?|<hr ?/?>\\\\n?\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"hr\");\n\t}\n},\n\n{\n\tname: \"monospacedByLine\",\n\tmatch: \"^(?:/\\\\*\\\\{\\\\{\\\\{\\\\*/|\\\\{\\\\{\\\\{|//\\\\{\\\\{\\\\{|<!--\\\\{\\\\{\\\\{-->)\\\\n\",\n\telement: \"pre\",\n\thandler: function(w)\n\t{\n\t\tswitch(w.matchText) {\n\t\tcase \"/*{{{*/\\n\": // CSS\n\t\t\tthis.lookaheadRegExp = /\\/\\*\\{\\{\\{\\*\\/\\n*((?:^[^\\n]*\\n)+?)(\\n*^\\f*\\/\\*\\}\\}\\}\\*\\/$\\n?)/mg;\n\t\t\tbreak;\n\t\tcase \"{{{\\n\": // monospaced block\n\t\t\tthis.lookaheadRegExp = /^\\{\\{\\{\\n((?:^[^\\n]*\\n)+?)(^\\f*\\}\\}\\}$\\n?)/mg;\n\t\t\tbreak;\n\t\tcase \"//{{{\\n\": // plugin\n\t\t\tthis.lookaheadRegExp = /^\\/\\/\\{\\{\\{\\n\\n*((?:^[^\\n]*\\n)+?)(\\n*^\\f*\\/\\/\\}\\}\\}$\\n?)/mg;\n\t\t\tbreak;\n\t\tcase \"<!--{{{-->\\n\": //template\n\t\t\tthis.lookaheadRegExp = /<!--\\{\\{\\{-->\\n*((?:^[^\\n]*\\n)+?)(\\n*^\\f*<!--\\}\\}\\}-->$\\n?)/mg;\n\t\t\tbreak;\n\t\tdefault:\n\t\t\tbreak;\n\t\t}\n\t\tconfig.formatterHelpers.enclosedTextHelper.call(this,w);\n\t}\n},\n\n{\n\tname: \"wikifyComment\",\n\tmatch: \"^(?:/\\\\*\\\\*\\\\*|<!---)\\\\n\",\n\thandler: function(w)\n\t{\n\t\tvar termRegExp = (w.matchText == \"/***\\n\") ? (/(^\\*\\*\\*\\/\\n)/mg) : (/(^--->\\n)/mg);\n\t\tw.subWikifyTerm(w.output,termRegExp);\n\t}\n},\n\n{\n\tname: \"macro\",\n\tmatch: \"<<\",\n\tlookaheadRegExp: /<<([^>\\s]+)(?:\\s*)((?:[^>]|(?:>(?!>)))*)>>/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart && lookaheadMatch[1]) {\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t\tinvokeMacro(w.output,lookaheadMatch[1],lookaheadMatch[2],w,w.tiddler);\n\t\t}\n\t}\n},\n\n{\n\tname: \"prettyLink\",\n\tmatch: \"\\\\[\\\\[\",\n\tlookaheadRegExp: /\\[\\[(.*?)(?:\\|(~)?(.*?))?\\]\\]/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tvar e;\n\t\t\tvar text = lookaheadMatch[1];\n\t\t\tif(lookaheadMatch[3]) {\n\t\t\t\t// Pretty bracketted link\n\t\t\t\tvar link = lookaheadMatch[3];\n\t\t\t\te = (!lookaheadMatch[2] && config.formatterHelpers.isExternalLink(link)) ?\n\t\t\t\t\t\tcreateExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);\n\t\t\t} else {\n\t\t\t\t// Simple bracketted link\n\t\t\t\te = createTiddlyLink(w.output,text,false,null,w.isStatic,w.tiddler);\n\t\t\t}\n\t\t\tcreateTiddlyText(e,text);\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"wikiLink\",\n\tmatch: config.textPrimitives.unWikiLink+\"?\"+config.textPrimitives.wikiLink,\n\thandler: function(w)\n\t{\n\t\tif(w.matchText.substr(0,1) == config.textPrimitives.unWikiLink) {\n\t\t\tw.outputText(w.output,w.matchStart+1,w.nextMatch);\n\t\t\treturn;\n\t\t}\n\t\tif(w.matchStart > 0) {\n\t\t\tvar preRegExp = new RegExp(config.textPrimitives.anyLetterStrict,\"mg\");\n\t\t\tpreRegExp.lastIndex = w.matchStart-1;\n\t\t\tvar preMatch = preRegExp.exec(w.source);\n\t\t\tif(preMatch.index == w.matchStart-1) {\n\t\t\t\tw.outputText(w.output,w.matchStart,w.nextMatch);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif(w.autoLinkWikiWords || store.isShadowTiddler(w.matchText)) {\n\t\t\tvar link = createTiddlyLink(w.output,w.matchText,false,null,w.isStatic,w.tiddler);\n\t\t\tw.outputText(link,w.matchStart,w.nextMatch);\n\t\t} else {\n\t\t\tw.outputText(w.output,w.matchStart,w.nextMatch);\n\t\t}\n\t}\n},\n\n{\n\tname: \"urlLink\",\n\tmatch: config.textPrimitives.urlPattern,\n\thandler: function(w)\n\t{\n\t\tw.outputText(createExternalLink(w.output,w.matchText),w.matchStart,w.nextMatch);\n\t}\n},\n\n{\n\tname: \"image\",\n\tmatch: \"\\\\[[<>]?[Ii][Mm][Gg]\\\\[\",\n\t//# [<] sequence below is to avoid lessThan-questionMark sequence so TiddlyWikis can be included in PHP files\n\tlookaheadRegExp: /\\[([<]?)(>?)[Ii][Mm][Gg]\\[(?:([^\\|\\]]+)\\|)?([^\\[\\]\\|]+)\\](?:\\[([^\\]]*)\\])?\\]/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tvar e = w.output;\n\t\t\tif(lookaheadMatch[5]) {\n\t\t\t\tvar link = lookaheadMatch[5];\n\t\t\t\te = config.formatterHelpers.isExternalLink(link) ? createExternalLink(w.output,link) : createTiddlyLink(w.output,link,false,null,w.isStatic,w.tiddler);\n\t\t\t\tjQuery(e).addClass(\"imageLink\");\n\t\t\t}\n\t\t\tvar img = createTiddlyElement(e,\"img\");\n\t\t\tif(lookaheadMatch[1])\n\t\t\t\timg.align = \"left\";\n\t\t\telse if(lookaheadMatch[2])\n\t\t\t\timg.align = \"right\";\n\t\t\tif(lookaheadMatch[3]) {\n\t\t\t\timg.title = lookaheadMatch[3];\n\t\t\t\timg.setAttribute(\"alt\",lookaheadMatch[3]);\n\t\t\t}\n\t\t\timg.src = lookaheadMatch[4];\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"html\",\n\tmatch: \"<[Hh][Tt][Mm][Ll]>\",\n\tlookaheadRegExp: /<[Hh][Tt][Mm][Ll]>((?:.|\\n)*?)<\\/[Hh][Tt][Mm][Ll]>/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tcreateTiddlyElement(w.output,\"span\").innerHTML = lookaheadMatch[1];\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"commentByBlock\",\n\tmatch: \"/%\",\n\tlookaheadRegExp: /\\/%((?:.|\\n)*?)%\\//mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart)\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t}\n},\n\n{\n\tname: \"characterFormat\",\n\tmatch: \"''|//|__|\\\\^\\\\^|~~|--(?!\\\\s|$)|\\\\{\\\\{\\\\{\",\n\thandler: function(w)\n\t{\n\t\tswitch(w.matchText) {\n\t\tcase \"''\":\n\t\t\tw.subWikifyTerm(w.output.appendChild(document.createElement(\"strong\")),/('')/mg);\n\t\t\tbreak;\n\t\tcase \"//\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"em\"),/(\\/\\/)/mg);\n\t\t\tbreak;\n\t\tcase \"__\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"u\"),/(__)/mg);\n\t\t\tbreak;\n\t\tcase \"^^\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"sup\"),/(\\^\\^)/mg);\n\t\t\tbreak;\n\t\tcase \"~~\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"sub\"),/(~~)/mg);\n\t\t\tbreak;\n\t\tcase \"--\":\n\t\t\tw.subWikifyTerm(createTiddlyElement(w.output,\"strike\"),/(--)/mg);\n\t\t\tbreak;\n\t\tcase \"{{{\":\n\t\t\tvar lookaheadRegExp = /\\{\\{\\{((?:.|\\n)*?)\\}\\}\\}/mg;\n\t\t\tlookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = lookaheadRegExp.exec(w.source);\n\t\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\t\tcreateTiddlyElement(w.output,\"code\",null,null,lookaheadMatch[1]);\n\t\t\t\tw.nextMatch = lookaheadRegExp.lastIndex;\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n},\n\n{\n\tname: \"customFormat\",\n\tmatch: \"@@|\\\\{\\\\{\",\n\thandler: function(w)\n\t{\n\t\tswitch(w.matchText) {\n\t\tcase \"@@\":\n\t\t\tvar e = createTiddlyElement(w.output,\"span\");\n\t\t\tvar styles = config.formatterHelpers.inlineCssHelper(w);\n\t\t\tif(styles.length == 0)\n\t\t\t\te.className = \"marked\";\n\t\t\telse\n\t\t\t\tconfig.formatterHelpers.applyCssHelper(e,styles);\n\t\t\tw.subWikifyTerm(e,/(@@)/mg);\n\t\t\tbreak;\n\t\tcase \"{{\":\n\t\t\tvar lookaheadRegExp = /\\{\\{[\\s]*([\\w]+[\\s\\w]*)[\\s]*\\{(\\n?)/mg;\n\t\t\tlookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = lookaheadRegExp.exec(w.source);\n\t\t\tif(lookaheadMatch) {\n\t\t\t\tw.nextMatch = lookaheadRegExp.lastIndex;\n\t\t\t\te = createTiddlyElement(w.output,lookaheadMatch[2] == \"\\n\" ? \"div\" : \"span\",null,lookaheadMatch[1]);\n\t\t\t\tw.subWikifyTerm(e,/(\\}\\}\\})/mg);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n},\n\n{\n\tname: \"mdash\",\n\tmatch: \"--\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"span\").innerHTML = \"&mdash;\";\n\t}\n},\n\n{\n\tname: \"lineBreak\",\n\tmatch: \"\\\\n|<br ?/?>\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"br\");\n\t}\n},\n\n{\n\tname: \"rawText\",\n\tmatch: \"\\\"{3}|<nowiki>\",\n\tlookaheadRegExp: /(?:\\\"{3}|<nowiki>)((?:.|\\n)*?)(?:\\\"{3}|<\\/nowiki>)/mg,\n\thandler: function(w)\n\t{\n\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\tif(lookaheadMatch && lookaheadMatch.index == w.matchStart) {\n\t\t\tcreateTiddlyElement(w.output,\"span\",null,null,lookaheadMatch[1]);\n\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t}\n\t}\n},\n\n{\n\tname: \"htmlEntitiesEncoding\",\n\tmatch: \"(?:(?:&#?[a-zA-Z0-9]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9a-fA-F]|1D[c-fC-F][0-9a-fA-F]|20[d-fD-F][0-9a-fA-F]|FE2[0-9a-fA-F])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[a-zA-Z0-9]{2,8};)\",\n\thandler: function(w)\n\t{\n\t\tcreateTiddlyElement(w.output,\"span\").innerHTML = w.matchText;\n\t}\n}\n\n];\n\n//--\n//-- Tiddler() object\n//--\n\nfunction Tiddler(title)\n{\n\tthis.title = title;\n\tthis.text = \"\";\n\tthis.creator = null;\n\tthis.modifier = null;\n\tthis.created = new Date();\n\tthis.modified = this.created;\n\tthis.links = [];\n\tthis.linksUpdated = false;\n\tthis.tags = [];\n\tthis.fields = {};\n\treturn this;\n}\n\nTiddler.prototype.getLinks = function()\n{\n\tif(this.linksUpdated==false)\n\t\tthis.changed();\n\treturn this.links;\n};\n\n// Returns the fields that are inherited in string field:\"value\" field2:\"value2\" format\nTiddler.prototype.getInheritedFields = function()\n{\n\tvar f = {};\n\tvar i;\n\tfor(i in this.fields) {\n\t\tif(i==\"server.host\" || i==\"server.workspace\" || i==\"wikiformat\"|| i==\"server.type\") {\n\t\t\tf[i] = this.fields[i];\n\t\t}\n\t}\n\treturn String.encodeHashMap(f);\n};\n\n// Increment the changeCount of a tiddler\nTiddler.prototype.incChangeCount = function()\n{\n\tvar c = this.fields['changecount'];\n\tc = c ? parseInt(c,10) : 0;\n\tthis.fields['changecount'] = String(c+1);\n};\n\n// Clear the changeCount of a tiddler\nTiddler.prototype.clearChangeCount = function()\n{\n\tif(this.fields['changecount']) {\n\t\tdelete this.fields['changecount'];\n\t}\n};\n\n//# returns true when this tiddler has the field 'temporary', meaning it is a temporary tiddler (i.e. must not be saved).\nTiddler.prototype.doNotSave = function()\n{\n\treturn this.fields['doNotSave'];\n};\n\n// Returns true if the tiddler has been updated since the tiddler was created or downloaded\nTiddler.prototype.isTouched = function()\n{\n\tvar changecount = this.fields.changecount || 0;\n\treturn changecount > 0;\n};\n\n// Change the text and other attributes of a tiddler\nTiddler.prototype.set = function(title,text,modifier,modified,tags,created,fields,creator)\n{\n\tthis.assign(title,text,modifier,modified,tags,created,fields,creator);\n\tthis.changed();\n\treturn this;\n};\n\n// Change the text and other attributes of a tiddler without triggered a tiddler.changed() call\nTiddler.prototype.assign = function(title,text,modifier,modified,tags,created,fields,creator)\n{\n\tif(title != undefined)\n\t\tthis.title = title;\n\tif(text != undefined)\n\t\tthis.text = text;\n\tif(modifier != undefined)\n\t\tthis.modifier = modifier;\n\tif(modified != undefined)\n\t\tthis.modified = modified;\n\tif(creator != undefined)\n\t\tthis.creator = creator;\n\tif(created != undefined)\n\t\tthis.created = created;\n\tif(fields != undefined)\n\t\tthis.fields = fields;\n\tif(tags != undefined)\n\t\tthis.tags = (typeof tags == \"string\") ? tags.readBracketedList() : tags;\n\telse if(this.tags == undefined)\n\t\tthis.tags = [];\n\treturn this;\n};\n\n// Get the tags for a tiddler as a string (space delimited, using [[brackets]] for tags containing spaces)\nTiddler.prototype.getTags = function()\n{\n\treturn String.encodeTiddlyLinkList(this.tags);\n};\n\n// Test if a tiddler carries a tag\nTiddler.prototype.isTagged = function(tag)\n{\n\treturn this.tags.indexOf(tag) != -1;\n};\n\n// Static method to convert \"\\n\" to newlines, \"\\s\" to \"\\\"\nTiddler.unescapeLineBreaks = function(text)\n{\n\treturn text ? text.unescapeLineBreaks() : \"\";\n};\n\n// Convert newlines to \"\\n\", \"\\\" to \"\\s\"\nTiddler.prototype.escapeLineBreaks = function()\n{\n\treturn this.text.escapeLineBreaks();\n};\n\n// Updates the secondary information (like links[] array) after a change to a tiddler\nTiddler.prototype.changed = function()\n{\n\tthis.links = [];\n\tvar text = this.text;\n\t// remove 'quoted' text before scanning tiddler source\n\ttext = text.replace(/\\/%((?:.|\\n)*?)%\\//g,\"\").\n\t\treplace(/\\{{3}((?:.|\\n)*?)\\}{3}/g,\"\").\n\t\treplace(/\"\"\"((?:.|\\n)*?)\"\"\"/g,\"\").\n\t\treplace(/<nowiki\\>((?:.|\\n)*?)<\\/nowiki\\>/g,\"\").\n\t\treplace(/<html\\>((?:.|\\n)*?)<\\/html\\>/g,\"\").\n\t\treplace(/<script((?:.|\\n)*?)<\\/script\\>/g,\"\");\n\tvar t = this.autoLinkWikiWords() ? 0 : 1;\n\tvar tiddlerLinkRegExp = t==0 ? config.textPrimitives.tiddlerAnyLinkRegExp : config.textPrimitives.tiddlerForcedLinkRegExp;\n\ttiddlerLinkRegExp.lastIndex = 0;\n\tvar formatMatch = tiddlerLinkRegExp.exec(text);\n\twhile(formatMatch) {\n\t\tvar lastIndex = tiddlerLinkRegExp.lastIndex;\n\t\tif(t==0 && formatMatch[1] && formatMatch[1] != this.title) {\n\t\t\t// wikiWordLink\n\t\t\tif(formatMatch.index > 0) {\n\t\t\t\tvar preRegExp = new RegExp(config.textPrimitives.unWikiLink+\"|\"+config.textPrimitives.anyLetter,\"mg\");\n\t\t\t\tpreRegExp.lastIndex = formatMatch.index-1;\n\t\t\t\tvar preMatch = preRegExp.exec(text);\n\t\t\t\tif(preMatch.index != formatMatch.index-1)\n\t\t\t\t\tthis.links.pushUnique(formatMatch[1]);\n\t\t\t} else {\n\t\t\t\tthis.links.pushUnique(formatMatch[1]);\n\t\t\t}\n\t\t}\n\t\telse if(formatMatch[2-t] && !config.formatterHelpers.isExternalLink(formatMatch[3-t])) // titledBrackettedLink\n\t\t\tthis.links.pushUnique(formatMatch[3-t]);\n\t\telse if(formatMatch[4-t] && formatMatch[4-t] != this.title) // brackettedLink\n\t\t\tthis.links.pushUnique(formatMatch[4-t]);\n\t\t//# Do not add link if match urlPattern (formatMatch[5-t])\n\t\ttiddlerLinkRegExp.lastIndex = lastIndex;\n\t\tformatMatch = tiddlerLinkRegExp.exec(text);\n\t}\n\tthis.linksUpdated = true;\n};\n\nTiddler.prototype.getSubtitle = function()\n{\n\tvar modifier = this.modifier;\n\tif(!modifier)\n\t\tmodifier = config.messages.subtitleUnknown || \"\";\n\tvar modified = this.modified;\n\tif(modified)\n\t\tmodified = modified.toLocaleString();\n\telse\n\t\tmodified = config.messages.subtitleUnknown || \"\";\n\tvar f = config.messages.tiddlerLinkTooltip || \"%0 - %1, %2\";\n\treturn f.format([this.title,modifier,modified]);\n};\n\nTiddler.prototype.isReadOnly = function()\n{\n\treturn readOnly;\n};\n\nTiddler.prototype.autoLinkWikiWords = function()\n{\n\treturn !(this.isTagged(\"systemConfig\") || this.isTagged(\"excludeMissing\"));\n};\n\nTiddler.prototype.getServerType = function()\n{\n\tvar serverType = null;\n\tif(this.fields['server.type'])\n\t\tserverType = this.fields['server.type'];\n\tif(!serverType)\n\t\tserverType = this.fields['wikiformat'];\n\tif(serverType && !config.adaptors[serverType])\n\t\tserverType = null;\n\treturn serverType;\n};\n\nTiddler.prototype.getAdaptor = function()\n{\n\tvar serverType = this.getServerType();\n\treturn serverType ? new config.adaptors[serverType]() : null;\n};\n\n//--\n//-- TiddlyWiki instance contains TiddlerS\n//--\n\nfunction TiddlyWiki()\n{\n\tvar tiddlers = {}; // Hashmap by name of tiddlers\n\tthis.tiddlersUpdated = false;\n\tthis.namedNotifications = []; // Array of {name:,notify:} of notification functions\n\tthis.notificationLevel = 0;\n\tthis.slices = {}; // map tiddlerName->(map sliceName->sliceValue). Lazy.\n\tthis.clear = function() {\n\t\ttiddlers = {};\n\t\tthis.setDirty(false);\n\t};\n\tthis.fetchTiddler = function(title) {\n\t\tvar t = tiddlers[title];\n\t\treturn t instanceof Tiddler ? t : null;\n\t};\n\tthis.deleteTiddler = function(title) {\n\t\tdelete this.slices[title];\n\t\tdelete tiddlers[title];\n\t};\n\tthis.addTiddler = function(tiddler) {\n\t\tdelete this.slices[tiddler.title];\n\t\ttiddlers[tiddler.title] = tiddler;\n\t};\n\tthis.forEachTiddler = function(callback) {\n\t\tvar t;\n\t\tfor(t in tiddlers) {\n\t\t\tvar tiddler = tiddlers[t];\n\t\t\tif(tiddler instanceof Tiddler)\n\t\t\t\tcallback.call(this,t,tiddler);\n\t\t}\n\t};\n}\n\n//# Set the dirty flag\nTiddlyWiki.prototype.setDirty = function(dirty)\n{\n\tthis.dirty = dirty;\n};\n\nTiddlyWiki.prototype.isDirty = function()\n{\n\treturn this.dirty;\n};\n\nTiddlyWiki.prototype.tiddlerExists = function(title)\n{\n\tvar t = this.fetchTiddler(title);\n\treturn t != undefined;\n};\n\nTiddlyWiki.prototype.isShadowTiddler = function(title)\n{\n\treturn config.shadowTiddlers[title] === undefined ? false : true;\n};\n\nTiddlyWiki.prototype.createTiddler = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(!tiddler) {\n\t\ttiddler = new Tiddler(title);\n\t\tthis.addTiddler(tiddler);\n\t\tthis.setDirty(true);\n\t}\n\treturn tiddler;\n};\n\nTiddlyWiki.prototype.getTiddler = function(title)\n{\n\tvar t = this.fetchTiddler(title);\n\tif(t != undefined)\n\t\treturn t;\n\telse\n\t\treturn null;\n};\n\nTiddlyWiki.prototype.getShadowTiddlerText = function(title)\n{\n\tif(typeof config.shadowTiddlers[title] == \"string\")\n\t\treturn config.shadowTiddlers[title];\n\telse\n\t\treturn \"\";\n};\n\n// Retrieve tiddler contents\n//# Supports tiddler slices or sections, encoded in {{{title}}} argument using\n//# the respective separator characters ({{{::}}} or {{{##}}}).\nTiddlyWiki.prototype.getTiddlerText = function(title,defaultText)\n{\n\tif(!title)\n\t\treturn defaultText;\n\tvar pos = title.indexOf(config.textPrimitives.sectionSeparator);\n\tvar section = null;\n\tif(pos != -1) {\n\t\tsection = title.substr(pos + config.textPrimitives.sectionSeparator.length);\n\t\ttitle = title.substr(0,pos);\n\t}\n\tpos = title.indexOf(config.textPrimitives.sliceSeparator);\n\tif(pos != -1) {\n\t\tvar slice = this.getTiddlerSlice(title.substr(0,pos),title.substr(pos + config.textPrimitives.sliceSeparator.length));\n\t\tif(slice)\n\t\t\treturn slice;\n\t}\n\tvar tiddler = this.fetchTiddler(title);\n\tvar text = tiddler ? tiddler.text : null;\n\tif(!tiddler && this.isShadowTiddler(title)) {\n\t\ttext = this.getShadowTiddlerText(title);\n\t}\n\tif(text) {\n\t\tif(!section)\n\t\t\treturn text;\n\t\tvar re = new RegExp(\"(^!{1,6}[ \\t]*\" + section.escapeRegExp() + \"[ \\t]*\\n)\",\"mg\");\n\t\tre.lastIndex = 0;\n\t\tvar match = re.exec(text);\n\t\tif(match) {\n\t\t\tvar t = text.substr(match.index+match[1].length);\n\t\t\tvar re2 = /^!/mg;\n\t\t\tre2.lastIndex = 0;\n\t\t\tmatch = re2.exec(t); //# search for the next heading\n\t\t\tif(match)\n\t\t\t\tt = t.substr(0,match.index-1);//# don't include final \\n\n\t\t\treturn t;\n\t\t}\n\t\treturn defaultText;\n\t}\n\tif(defaultText != undefined)\n\t\treturn defaultText;\n\treturn null;\n};\n\nTiddlyWiki.prototype.getRecursiveTiddlerText = function(title,defaultText,depth)\n{\n\tvar bracketRegExp = new RegExp(\"(?:\\\\[\\\\[([^\\\\]]+)\\\\]\\\\])\",\"mg\");\n\tvar text = this.getTiddlerText(title,null);\n\tif(text == null)\n\t\treturn defaultText;\n\tvar textOut = [];\n\tvar match,lastPos = 0;\n\tdo {\n\t\tmatch = bracketRegExp.exec(text);\n\t\tif(match) {\n\t\t\ttextOut.push(text.substr(lastPos,match.index-lastPos));\n\t\t\tif(match[1]) {\n\t\t\t\tif(depth <= 0)\n\t\t\t\t\ttextOut.push(match[1]);\n\t\t\t\telse\n\t\t\t\t\ttextOut.push(this.getRecursiveTiddlerText(match[1],\"\",depth-1));\n\t\t\t}\n\t\t\tlastPos = match.index + match[0].length;\n\t\t} else {\n\t\t\ttextOut.push(text.substr(lastPos));\n\t\t}\n\t} while(match);\n\treturn textOut.join(\"\");\n};\n\n//TiddlyWiki.prototype.slicesRE = /(?:^([\\'\\/]{0,2})~?([\\.\\w]+)\\:\\1[\\t\\x20]*([^\\n]+)[\\t\\x20]*$)|(?:^\\|([\\'\\/]{0,2})~?([\\.\\w]+)\\:?\\4\\|[\\t\\x20]*([^\\n]+)[\\t\\x20]*\\|$)/gm;\nTiddlyWiki.prototype.slicesRE = /(?:^([\\'\\/]{0,2})~?([\\.\\w]+)\\:\\1[\\t\\x20]*([^\\n]*)[\\t\\x20]*$)|(?:^\\|([\\'\\/]{0,2})~?([\\.\\w]+)\\:?\\4\\|[\\t\\x20]*([^\\|\\n]*)[\\t\\x20]*\\|$)/gm;\n// @internal\nTiddlyWiki.prototype.calcAllSlices = function(title)\n{\n\tvar slices = {};\n\tvar text = this.getTiddlerText(title,\"\");\n\tthis.slicesRE.lastIndex = 0;\n\tvar m = this.slicesRE.exec(text);\n\twhile(m) {\n\t\tif(m[2])\n\t\t\tslices[m[2]] = m[3];\n\t\telse\n\t\t\tslices[m[5]] = m[6];\n\t\tm = this.slicesRE.exec(text);\n\t}\n\treturn slices;\n};\n\n// Returns the slice of text of the given name\n//#\n//# A text slice is a substring in the tiddler's text that is defined\n//# either like this\n//#    aName:  textSlice\n//# or\n//#    |aName:| textSlice |\n//# or\n//#    |aName| textSlice |\n//#\n//# In the text the name (or name:) may be decorated with '' or //\n//# ie this would also a valid text slice:\n//#\n//#    |''aName:''| textSlice |\n//#\n//# @param name should only contain \"word characters\" (i.e. \"a-ZA-Z_0-9\")\n//# @return [may be undefined] the (trimmed) text of the specified slice.\nTiddlyWiki.prototype.getTiddlerSlice = function(title,sliceName)\n{\n\tvar slices = this.slices[title];\n\tif(!slices) {\n\t\tslices = this.calcAllSlices(title);\n\t\tthis.slices[title] = slices;\n\t}\n\treturn slices[sliceName];\n};\n\n// Build an hashmap of the specified named slices of a tiddler\nTiddlyWiki.prototype.getTiddlerSlices = function(title,sliceNames)\n{\n\tvar t,r = {};\n\tfor(t=0; t<sliceNames.length; t++) {\n\t\tvar slice = this.getTiddlerSlice(title,sliceNames[t]);\n\t\tif(slice)\n\t\t\tr[sliceNames[t]] = slice;\n\t}\n\treturn r;\n};\n\nTiddlyWiki.prototype.suspendNotifications = function()\n{\n\tthis.notificationLevel--;\n};\n\nTiddlyWiki.prototype.resumeNotifications = function()\n{\n\tthis.notificationLevel++;\n};\n\n// Invoke the notification handlers for a particular tiddler\nTiddlyWiki.prototype.notify = function(title,doBlanket)\n{\n\tif(!this.notificationLevel) {\n\t    var t;\n\t\tfor(t=0; t<this.namedNotifications.length; t++) {\n\t\t\tvar n = this.namedNotifications[t];\n\t\t\tif((n.name == null && doBlanket) || (n.name == title))\n\t\t\t\tn.notify(title);\n\t\t}\n\t}\n};\n\n// Invoke the notification handlers for all tiddlers\nTiddlyWiki.prototype.notifyAll = function()\n{\n\tif(!this.notificationLevel) {\n\t    var t;\n\t\tfor(t=0; t<this.namedNotifications.length; t++) {\n\t\t\tvar n = this.namedNotifications[t];\n\t\t\tif(n.name)\n\t\t\t\tn.notify(n.name);\n\t\t}\n\t}\n};\n\n// Add a notification handler to a tiddler\nTiddlyWiki.prototype.addNotification = function(title,fn)\n{\n\tvar i;\n\tfor(i=0; i<this.namedNotifications.length; i++) {\n\t\tif((this.namedNotifications[i].name == title) && (this.namedNotifications[i].notify == fn))\n\t\t\treturn this;\n\t}\n\tthis.namedNotifications.push({name: title, notify: fn});\n\treturn this;\n};\n\nTiddlyWiki.prototype.removeTiddler = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\tthis.deleteTiddler(title);\n\t\tthis.notify(title,true);\n\t\tthis.setDirty(true);\n\t}\n};\n\n// Reset the sync status of a freshly synced tiddler\nTiddlyWiki.prototype.resetTiddler = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\ttiddler.clearChangeCount();\n\t\tthis.notify(title,true);\n\t\tthis.setDirty(true);\n\t}\n};\n\nTiddlyWiki.prototype.setTiddlerTag = function(title,status,tag)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler) {\n\t\tvar t = tiddler.tags.indexOf(tag);\n\t\tif(t != -1)\n\t\t\ttiddler.tags.splice(t,1);\n\t\tif(status)\n\t\t\ttiddler.tags.push(tag);\n\t\ttiddler.changed();\n\t\ttiddler.incChangeCount();\n\t\tthis.notify(title,true);\n\t\tthis.setDirty(true);\n\t}\n};\n\nTiddlyWiki.prototype.addTiddlerFields = function(title,fields)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(!tiddler)\n\t\treturn;\n\tmerge(tiddler.fields,fields);\n\ttiddler.changed();\n\ttiddler.incChangeCount();\n\tthis.notify(title,true);\n\tthis.setDirty(true);\n};\n\n// Store tiddler in TiddlyWiki instance\n//#\n//# optionally accepts a Tiddler instance as first argument, rendering\n//# subsequent arguments obsolete\n//#\n//# existing tiddlers can be renamed using the newTitle argument\n//#\n//# created and modified arguments are Date objects,\n//# tags argument is an array of strings\n//#\n//# fields should retain existing tiddler's extended fields and use\n//# config.defaultCustomFields as fallback\n//#\n//# NB: Does not trigger autoSaveChanges.\nTiddlyWiki.prototype.saveTiddler = function(title,newTitle,newBody,modifier,modified,tags,fields,clearChangeCount,created,creator)\n{\n\tvar tiddler;\n\tif(title instanceof Tiddler) {\n\t\ttiddler = title;\n\t\ttitle = tiddler.title;\n\t\tnewTitle = title;\n\t} else {\n\t\ttiddler = this.fetchTiddler(title);\n\t\tif(tiddler) {\n\t\t\tcreated = created || tiddler.created; // Preserve created date\n\t\t\tcreator = creator || tiddler.creator;\n\t\t\tthis.deleteTiddler(title);\n\t\t} else {\n\t\t\tcreated = created || modified;\n\t\t\ttiddler = new Tiddler();\n\t\t}\n\t\tfields = merge({},fields);\n\t\ttiddler.set(newTitle,newBody,modifier,modified,tags,created,fields,creator);\n\t}\n\tthis.addTiddler(tiddler);\n\tif(clearChangeCount)\n\t\ttiddler.clearChangeCount();\n\telse\n\t\ttiddler.incChangeCount();\n\tif(title != newTitle)\n\t\tthis.notify(title,true);\n\tthis.notify(newTitle,true);\n\tif(window.location.protocol == \"file:\")\n\t\tthis.setDirty(true);\n\treturn tiddler;\n};\n\nTiddlyWiki.prototype.incChangeCount = function(title)\n{\n\tvar tiddler = this.fetchTiddler(title);\n\tif(tiddler)\n\t\ttiddler.incChangeCount();\n};\n\nTiddlyWiki.prototype.getLoader = function()\n{\n\tif(!this.loader)\n\t\tthis.loader = new TW21Loader();\n\treturn this.loader;\n};\n\nTiddlyWiki.prototype.getSaver = function()\n{\n\tif(!this.saver)\n\t\tthis.saver = new TW21Saver();\n\treturn this.saver;\n};\n\n// Return all tiddlers formatted as an HTML string\nTiddlyWiki.prototype.allTiddlersAsHtml = function()\n{\n\treturn this.getSaver().externalize(store);\n};\n\n// Load contents of a TiddlyWiki from an HTML DIV\nTiddlyWiki.prototype.loadFromDiv = function(src,idPrefix,noUpdate)\n{\n\tthis.idPrefix = idPrefix;\n\tvar storeElem = (typeof src == \"string\") ? document.getElementById(src) : src;\n\tif(!storeElem)\n\t\treturn;\n\tvar tiddlers = this.getLoader().loadTiddlers(this,storeElem.childNodes);\n\tthis.setDirty(false);\n\tif(!noUpdate) {\n\t\tvar i;\n\t\tfor(i = 0;i<tiddlers.length; i++)\n\t\t\ttiddlers[i].changed();\n\t}\n\tjQuery(document).trigger(\"loadTiddlers\");\n};\n\n// Load contents of a TiddlyWiki from a string\n// Returns null if there's an error\nTiddlyWiki.prototype.importTiddlyWiki = function(text)\n{\n\tvar posDiv = locateStoreArea(text);\n\tif(!posDiv)\n\t\treturn null;\n\tvar content = \"<\" + \"html><\" + \"body>\" + text.substring(posDiv[0],posDiv[1] + endSaveArea.length) + \"<\" + \"/body><\" + \"/html>\";\n\t// Create the iframe\n\tvar iframe = document.createElement(\"iframe\");\n\tiframe.style.display = \"none\";\n\tdocument.body.appendChild(iframe);\n\tvar doc = iframe.document;\n\tif(iframe.contentDocument)\n\t\tdoc = iframe.contentDocument; // For NS6\n\telse if(iframe.contentWindow)\n\t\tdoc = iframe.contentWindow.document; // For IE5.5 and IE6\n\t// Put the content in the iframe\n\tdoc.open();\n\tdoc.writeln(content);\n\tdoc.close();\n\t// Load the content into a TiddlyWiki() object\n\tvar storeArea = doc.getElementById(\"storeArea\");\n\tthis.loadFromDiv(storeArea,\"store\");\n\t// Get rid of the iframe\n\tiframe.parentNode.removeChild(iframe);\n\treturn this;\n};\n\nTiddlyWiki.prototype.updateTiddlers = function()\n{\n\tthis.tiddlersUpdated = true;\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\ttiddler.changed();\n\t});\n};\n\n// Return an array of tiddlers matching a search regular expression\nTiddlyWiki.prototype.search = function(searchRegExp,sortField,excludeTag,match)\n{\n\tvar candidates = this.reverseLookup(\"tags\",excludeTag,!!match);\n\tvar t,results = [];\n\tfor(t=0; t<candidates.length; t++) {\n\t\tif((candidates[t].title.search(searchRegExp) != -1) || (candidates[t].text.search(searchRegExp) != -1))\n\t\t\tresults.push(candidates[t]);\n\t}\n\tif(!sortField)\n\t\tsortField = \"title\";\n\tresults.sort(function(a,b) {return a[sortField] < b[sortField] ? -1 : (a[sortField] == b[sortField] ? 0 : +1);});\n\treturn results;\n};\n\n// Returns a list of all tags in use\n//   excludeTag - if present, excludes tags that are themselves tagged with excludeTag\n// Returns an array of arrays where [tag][0] is the name of the tag and [tag][1] is the number of occurances\nTiddlyWiki.prototype.getTags = function(excludeTag)\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t    var g,c;\n\t\tfor(g=0; g<tiddler.tags.length; g++) {\n\t\t\tvar tag = tiddler.tags[g];\n\t\t\tvar n = true;\n\t\t\tfor(c=0; c<results.length; c++) {\n\t\t\t\tif(results[c][0] == tag) {\n\t\t\t\t\tn = false;\n\t\t\t\t\tresults[c][1]++;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(n && excludeTag) {\n\t\t\t\tvar t = this.fetchTiddler(tag);\n\t\t\t\tif(t && t.isTagged(excludeTag))\n\t\t\t\t\tn = false;\n\t\t\t}\n\t\t\tif(n)\n\t\t\t\tresults.push([tag,1]);\n\t\t}\n\t});\n\tresults.sort(function(a,b) {return a[0].toLowerCase() < b[0].toLowerCase() ? -1 : (a[0].toLowerCase() == b[0].toLowerCase() ? 0 : +1);});\n\treturn results;\n};\n\n// Return an array of the tiddlers that are tagged with a given tag\nTiddlyWiki.prototype.getTaggedTiddlers = function(tag,sortField)\n{\n\treturn this.reverseLookup(\"tags\",tag,true,sortField);\n};\n\nTiddlyWiki.prototype.getValueTiddlers = function(field,value,sortField)\n{\n\treturn this.reverseLookup(field,value,true,sortField);\n};\n\n// Return an array of the tiddlers that link to a given tiddler\nTiddlyWiki.prototype.getReferringTiddlers = function(title,unusedParameter,sortField)\n{\n\tif(!this.tiddlersUpdated)\n\t\tthis.updateTiddlers();\n\treturn this.reverseLookup(\"links\",title,true,sortField);\n};\n\n// Return an array of the tiddlers that do or do not have a specified entry in the specified storage array (ie, \"links\" or \"tags\")\n// lookupMatch == true to match tiddlers, false to exclude tiddlers\nTiddlyWiki.prototype.reverseLookup = function(lookupField,lookupValue,lookupMatch,sortField)\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tvar f = !lookupMatch;\n\t\tvar values;\n\t\tif([\"links\", \"tags\"].contains(lookupField)) {\n\t\t\tvalues = tiddler[lookupField];\n\t\t} else {\n\t\t\tvar accessor = TiddlyWiki.standardFieldAccess[lookupField];\n\t\t\tif(accessor) {\n\t\t\t\tvalues = [ accessor.get(tiddler) ];\n\t\t\t} else {\n\t\t\t\tvalues = tiddler.fields[lookupField] ? [tiddler.fields[lookupField]] : [];\n\t\t\t}\n\t\t}\n\t\tvar lookup;\n\t\tfor(lookup=0; lookup<values.length; lookup++) {\n\t\t\tif(values[lookup] == lookupValue)\n\t\t\t\tf = lookupMatch;\n\t\t}\n\t\tif(f)\n\t\t\tresults.push(tiddler);\n\t});\n\tif(!sortField)\n\t\tsortField = \"title\";\n\treturn this.sortTiddlers(results,sortField);\n};\n\n// Return the tiddlers as a sorted array\nTiddlyWiki.prototype.getTiddlers = function(field,excludeTag)\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tif(excludeTag == undefined || !tiddler.isTagged(excludeTag))\n\t\t\tresults.push(tiddler);\n\t});\n\tif(field)\n\t\tresults.sort(function(a,b) {return a[field] < b[field] ? -1 : (a[field] == b[field] ? 0 : +1);});\n\treturn results;\n};\n\n// Return array of names of tiddlers that are referred to but not defined\nTiddlyWiki.prototype.getMissingLinks = function()\n{\n\tif(!this.tiddlersUpdated)\n\t\tthis.updateTiddlers();\n\tvar results = [];\n\tthis.forEachTiddler(function (title,tiddler) {\n\t\tif(tiddler.isTagged(\"excludeMissing\") || tiddler.isTagged(\"systemConfig\"))\n\t\t\treturn;\n\t\tvar n;\n\t\tfor(n=0; n<tiddler.links.length;n++) {\n\t\t\tvar link = tiddler.links[n];\n\t\t\tif(this.getTiddlerText(link,null) == null && !this.isShadowTiddler(link) && !config.macros[link])\n\t\t\t\tresults.pushUnique(link);\n\t\t}\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n// Return an array of names of tiddlers that are defined but not referred to\nTiddlyWiki.prototype.getOrphans = function()\n{\n\tvar results = [];\n\tthis.forEachTiddler(function (title,tiddler) {\n\t\tif(this.getReferringTiddlers(title).length == 0 && !tiddler.isTagged(\"excludeLists\"))\n\t\t\tresults.push(title);\n\t});\n\tresults.sort();\n\treturn results;\n};\n\n// Return an array of names of all the shadow tiddlers\nTiddlyWiki.prototype.getShadowed = function()\n{\n\tvar t,results = [];\n\tfor(t in config.shadowTiddlers) {\n\t\tif(this.isShadowTiddler(t))\n\t\t\tresults.push(t);\n\t}\n\tresults.sort();\n\treturn results;\n};\n\n// Return an array of tiddlers that have been touched since they were downloaded or created\nTiddlyWiki.prototype.getTouched = function()\n{\n\tvar results = [];\n\tthis.forEachTiddler(function(title,tiddler) {\n\t\tif(tiddler.isTouched())\n\t\t\tresults.push(tiddler);\n\t\t});\n\tresults.sort();\n\treturn results;\n};\n\n// Resolves a Tiddler reference or tiddler title into a Tiddler object, or null if it doesn't exist\nTiddlyWiki.prototype.resolveTiddler = function(tiddler)\n{\n\tvar t = (typeof tiddler == \"string\") ? this.getTiddler(tiddler) : tiddler;\n\treturn t instanceof Tiddler ? t : null;\n};\n\n// Sort a list of tiddlers\n//# tiddlers - array of Tiddler() objects to be sorted\n//# field - name of field (or extended field) to sort by;\n//#         precede with \"+\" for ascending sort (the default)\n//#\t\t\tor \"-\" for descending sort\nTiddlyWiki.prototype.sortTiddlers = function(tiddlers,field)\n{\n\tvar asc = +1;\n\tswitch(field.substr(0,1)) {\n\tcase \"-\":\n\t\tasc = -1;\n\t\tfield = field.substr(1);\n\t\tbreak;\n\tcase \"+\":\n\t\tfield = field.substr(1);\n\t\tbreak;\n\t}\n\tif(TiddlyWiki.standardFieldAccess[field]) {\n\t\tif(field==\"title\") {\n\t\t\ttiddlers.sort(function(a,b) {return a[field].toLowerCase() < b[field].toLowerCase() ? -asc : (a[field].toLowerCase() == b[field].toLowerCase() ? 0 : asc);});\n\t\t} else {\n\t\t\ttiddlers.sort(function(a,b) {return a[field] < b[field] ? -asc : (a[field] == b[field] ? 0 : asc);});\n\t\t}\n\t} else {\n\t\ttiddlers.sort(function(a,b) {return a.fields[field] < b.fields[field] ? -asc : (a.fields[field] == b.fields[field] ? 0 : +asc);});\n\t}\n\treturn tiddlers;\n};\n\n//--\n//-- TiddlyWiki-specific utility functions\n//--\n\n// Returns TiddlyWiki version string\nfunction formatVersion(v)\n{\n\tv = v || version;\n\treturn v.major + \".\" + v.minor + \".\" + v.revision +\n\t\t(v.alpha ? \" (alpha \" + v.alpha + \")\" : \"\") +\n\t\t(v.beta ? \" (beta \" + v.beta + \")\" : \"\");\n}\n\n//# Compares two TiddlyWiki version objects\n//# Returns +1 if v2 is later than v1\n//#          0 if v2 is the same as v1\n//#         -1 if v2 is earlier than v1\n//# version without a beta number is later than a version with a beta number\nfunction compareVersions(v1,v2)\n{\n\tvar x1,x2,i,a = [\"major\",\"minor\",\"revision\"];\n\tfor(i = 0; i<a.length; i++) {\n\t\tx1 = v1[a[i]] || 0;\n\t\tx2 = v2[a[i]] || 0;\n\t\tif(x1<x2)\n\t\t\treturn 1;\n\t\tif(x1>x2)\n\t\t\treturn -1;\n\t}\n\tx1 = v1.beta || 9999;\n\tx2 = v2.beta || 9999;\n\tif(x1<x2)\n\t\treturn 1;\n\treturn x1 > x2 ? -1 : 0;\n}\n\nfunction merge(dst,src,preserveExisting)\n{\n\tvar i;\n\tfor(i in src) {\n\t\tif(!preserveExisting || dst[i] === undefined)\n\t\t\tdst[i] = src[i];\n\t}\n\treturn dst;\n}\n\n// Resolve the target object of an event\nfunction resolveTarget(e)\n{\n\tvar obj;\n\tif(e.target)\n\t\tobj = e.target;\n\telse if(e.srcElement)\n\t\tobj = e.srcElement;\n\tif(obj.nodeType == 3) // defeat Safari bug\n\t\tobj = obj.parentNode;\n\treturn obj;\n}\n\n// Returns a string containing the description of an exception, optionally prepended by a message\nfunction exceptionText(e,message)\n{\n\tvar s = e.description || e.toString();\n\treturn message ? \"%0:\\n%1\".format([message,s]) : s;\n}\n\n// Displays an alert of an exception description with optional message\nfunction showException(e,message)\n{\n\talert(exceptionText(e,message));\n}\n\nfunction alertAndThrow(m)\n{\n\talert(m);\n\tthrow(m);\n}\n\nfunction glyph(name)\n{\n\tvar g = config.glyphs;\n\tvar b = g.currBrowser;\n\tif(b == null) {\n\t\tb = 0;\n\t\twhile(b < g.browsers.length-1 && !g.browsers[b]())\n\t\t\tb++;\n\t\tg.currBrowser = b;\n\t}\n\tif(!g.codes[name])\n\t\treturn \"\";\n\treturn g.codes[name][b];\n}\n\nfunction createTiddlyText(parent,text)\n{\n\treturn parent.appendChild(document.createTextNode(text));\n}\n\nfunction createTiddlyCheckbox(parent,caption,checked,onChange)\n{\n\tvar cb = document.createElement(\"input\");\n\tcb.setAttribute(\"type\",\"checkbox\");\n\tcb.onclick = onChange;\n\tparent.appendChild(cb);\n\tcb.checked = checked;\n\tcb.className = \"chkOptionInput\";\n\tif(caption)\n\t\twikify(caption,parent);\n\treturn cb;\n}\n\nfunction createTiddlyElement(parent,element,id,className,text,attribs)\n{\n\tvar n,e = document.createElement(element);\n\tif(className != null)\n\t\te.className = className;\n\tif(id != null)\n\t\te.setAttribute(\"id\",id);\n\tif(text != null)\n\t\te.appendChild(document.createTextNode(text));\n\tif(attribs) {\n\t\tfor(n in attribs) {\n\t\t\te.setAttribute(n,attribs[n]);\n\t\t}\n\t}\n\tif(parent != null)\n\t\tparent.appendChild(e);\n\treturn e;\n}\n\nfunction createTiddlyButton(parent,text,tooltip,action,className,id,accessKey,attribs)\n{\n\tvar i,btn = document.createElement(\"a\");\n\tbtn.setAttribute(\"href\",\"javascript:;\");\n\tif(action) {\n\t\tbtn.onclick = action;\n\t}\n\tif(tooltip)\n\t\tbtn.setAttribute(\"title\",tooltip);\n\tif(text)\n\t\tbtn.appendChild(document.createTextNode(text));\n\tbtn.className = className || \"button\";\n\tif(id)\n\t\tbtn.id = id;\n\tif(attribs) {\n\t\tfor(i in attribs) {\n\t\t\tbtn.setAttribute(i,attribs[i]);\n\t\t}\n\t}\n\tif(parent)\n\t\tparent.appendChild(btn);\n\tif(accessKey)\n\t\tbtn.setAttribute(\"accessKey\",accessKey);\n\treturn btn;\n}\n\n//# Create a link to an external resource\n//#   place - element where the link should be created\n//#   url - link target\n//#   label - link text (optional)\nfunction createExternalLink(place,url,label)\n{\n\tvar link = document.createElement(\"a\");\n\tlink.className = \"externalLink\";\n\tlink.href = url;\n\tvar f = config.messages.externalLinkTooltip;\n\tlink.title = f ? f.format([url]) : url;\n\tif(config.options.chkOpenInNewWindow)\n\t\tlink.target = \"_blank\";\n\tplace.appendChild(link);\n\tif(label)\n\t\tcreateTiddlyText(link, label);\n\treturn link;\n}\n\nfunction getTiddlyLinkInfo(title,currClasses)\n{\n\tvar classes = currClasses ? currClasses.split(\" \") : [];\n\tclasses.pushUnique(\"tiddlyLink\");\n\tvar tiddler = store.fetchTiddler(title);\n\tvar subTitle;\n\tif(tiddler) {\n\t\tsubTitle = tiddler.getSubtitle();\n\t\tclasses.pushUnique(\"tiddlyLinkExisting\");\n\t\tclasses.remove(\"tiddlyLinkNonExisting\");\n\t\tclasses.remove(\"shadow\");\n\t} else {\n\t    var f;\n\t\tclasses.remove(\"tiddlyLinkExisting\");\n\t\tclasses.pushUnique(\"tiddlyLinkNonExisting\");\n\t\tif(store.isShadowTiddler(title)) {\n\t\t\tf = config.messages.shadowedTiddlerToolTip;\n\t\t\tclasses.pushUnique(\"shadow\");\n\t\t} else {\n\t\t\tf = config.messages.undefinedTiddlerToolTip;\n\t\t\tclasses.remove(\"shadow\");\n\t\t}\n\t\tsubTitle = f ? f.format([title]) : \"\";\n\t}\n\tif(typeof config.annotations[title]==\"string\")\n\t\tsubTitle = config.annotations[title];\n\treturn {classes: classes.join(\" \"),subTitle: subTitle};\n}\n\n// Event handler for clicking on a tiddly link\nfunction onClickTiddlerLink(ev)\n{\n\tvar e = ev || window.event;\n\tvar target = resolveTarget(e);\n\tvar link = target;\n\tvar title = null;\n\tvar fields = null;\n\tvar noToggle = null;\n\tdo {\n\t\ttitle = link.getAttribute(\"tiddlyLink\");\n\t\tfields = link.getAttribute(\"tiddlyFields\");\n\t\tnoToggle = link.getAttribute(\"noToggle\");\n\t\tlink = link.parentNode;\n\t} while(title == null && link != null);\n\tif(!store.isShadowTiddler(title)) {\n\t\tvar f = fields ? fields.decodeHashMap() : {};\n\t\tfields = String.encodeHashMap(merge(f,config.defaultCustomFields,true));\n\t}\n\tif(title) {\n\t\tvar toggling = e.metaKey || e.ctrlKey;\n\t\tif(config.options.chkToggleLinks)\n\t\t\ttoggling = !toggling;\n\t\tif(noToggle)\n\t\t\ttoggling = false;\n\t\tif(store.getTiddler(title))\n\t\t\tfields = null;\n\t\tstory.displayTiddler(target,title,null,true,null,fields,toggling);\n\t}\n\tclearMessage();\n\treturn false;\n}\n\n//# Create a link to a particular tiddler\n//#   place - element where the link should be created\n//#   title - title of target tiddler\n//#   includeText - flag for whether to include the title as the text of the link\n//#   className - custom CSS class for the link\n//#   linkedFromTiddler - tiddler from which to inherit extended fields\n//#   noToggle - flag to force the link to open the target, even if chkToggleLinks is on\nfunction createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)\n{\n\tvar title = jQuery.trim(title);\n\tvar text = includeText ? title : null;\n\tvar i = getTiddlyLinkInfo(title,className);\n\tvar btn = isStatic ? createExternalLink(place,store.getTiddlerText(\"SiteUrl\",null) + \"#\" + title) : createTiddlyButton(place,text,i.subTitle,onClickTiddlerLink,i.classes);\n\tif(isStatic)\n\t\tbtn.className += ' ' + className;\n\tbtn.setAttribute(\"refresh\",\"link\");\n\tbtn.setAttribute(\"tiddlyLink\",title);\n\tif(noToggle)\n\t\tbtn.setAttribute(\"noToggle\",\"true\");\n\tif(linkedFromTiddler) {\n\t\tvar fields = linkedFromTiddler.getInheritedFields();\n\t\tif(fields)\n\t\t\tbtn.setAttribute(\"tiddlyFields\",fields);\n\t}\n\treturn btn;\n}\n\nfunction refreshTiddlyLink(e,title)\n{\n\tvar i = getTiddlyLinkInfo(title,e.className);\n\te.className = i.classes;\n\te.title = i.subTitle;\n}\n\nfunction createTiddlyDropDown(place,onchange,options,defaultValue)\n{\n\tvar sel = createTiddlyElement(place,\"select\");\n\tsel.onchange = onchange;\n\tvar t;\n\tfor(t=0; t<options.length; t++) {\n\t\tvar e = createTiddlyElement(sel,\"option\",null,null,options[t].caption);\n\t\te.value = options[t].name;\n\t\tif(options[t].name == defaultValue)\n\t\t\te.selected = true;\n\t}\n\treturn sel;\n}\n\n// Returns true if path is a valid field name (path),\n// i.e. a sequence of identifiers, separated by \".\"\nTiddlyWiki.isValidFieldName = function(name)\n{\n\tvar match = /[a-zA-Z_]\\w*(\\.[a-zA-Z_]\\w*)*/.exec(name);\n\treturn match && (match[0] == name);\n};\n\n// Throws an exception when name is not a valid field name.\nTiddlyWiki.checkFieldName = function(name)\n{\n\tif(!TiddlyWiki.isValidFieldName(name))\n\t\tthrow config.messages.invalidFieldName.format([name]);\n};\n\nfunction StringFieldAccess(n,readOnly)\n{\n\tthis.set = readOnly ?\n\t\t\tfunction(t,v) {if(v != t[n]) throw config.messages.fieldCannotBeChanged.format([n]);} :\n\t\t\tfunction(t,v) {if(v != t[n]) {t[n] = v; return true;}};\n\tthis.get = function(t) {return t[n];};\n}\n\nfunction DateFieldAccess(n)\n{\n\tthis.set = function(t,v) {\n\t\tvar d = v instanceof Date ? v : Date.convertFromYYYYMMDDHHMM(v);\n\t\tif(d != t[n]) {\n\t\t\tt[n] = d; return true;\n\t\t}\n\t};\n\tthis.get = function(t) {return t[n].convertToYYYYMMDDHHMM();};\n}\n\nfunction LinksFieldAccess(n)\n{\n\tthis.set = function(t,v) {\n\t\tvar s = (typeof v == \"string\") ? v.readBracketedList() : v;\n\t\tif(s.toString() != t[n].toString()) {\n\t\t\tt[n] = s; return true;\n\t\t}\n\t};\n\tthis.get = function(t) {return String.encodeTiddlyLinkList(t[n]);};\n}\n\nTiddlyWiki.standardFieldAccess = {\n\t// The set functions return true when setting the data has changed the value.\n\t\"title\":    new StringFieldAccess(\"title\",true),\n\t// Handle the \"tiddler\" field name as the title\n\t\"tiddler\":  new StringFieldAccess(\"title\",true),\n\t\"text\":     new StringFieldAccess(\"text\"),\n\t\"modifier\": new StringFieldAccess(\"modifier\"),\n\t\"modified\": new DateFieldAccess(\"modified\"),\n\t\"creator\":  new StringFieldAccess(\"creator\"),\n\t\"created\":  new DateFieldAccess(\"created\"),\n\t\"tags\":     new LinksFieldAccess(\"tags\")\n};\n\nTiddlyWiki.isStandardField = function(name)\n{\n\treturn TiddlyWiki.standardFieldAccess[name] != undefined;\n};\n\n// Sets the value of the given field of the tiddler to the value.\n// Setting an ExtendedField's value to null or undefined removes the field.\n// Setting a namespace to undefined removes all fields of that namespace.\n// The fieldName is case-insensitive.\n// All values will be converted to a string value.\nTiddlyWiki.prototype.setValue = function(tiddler,fieldName,value)\n{\n\tTiddlyWiki.checkFieldName(fieldName);\n\tvar t = this.resolveTiddler(tiddler);\n\tif(!t)\n\t\treturn;\n\tfieldName = fieldName.toLowerCase();\n\tvar isRemove = (value === undefined) || (value === null);\n\tvar accessor = TiddlyWiki.standardFieldAccess[fieldName];\n\tif(accessor) {\n\t\tif(isRemove)\n\t\t\t// don't remove StandardFields\n\t\t\treturn;\n\t\tvar h = TiddlyWiki.standardFieldAccess[fieldName];\n\t\tif(!h.set(t,value))\n\t\t\treturn;\n\t} else {\n\t\tvar oldValue = t.fields[fieldName];\n\t\tif(isRemove) {\n\t\t\tif(oldValue !== undefined) {\n\t\t\t\t// deletes a single field\n\t\t\t\tdelete t.fields[fieldName];\n\t\t\t} else {\n\t\t\t\t// no concrete value is defined for the fieldName\n\t\t\t\t// so we guess this is a namespace path.\n\t\t\t\t// delete all fields in a namespace\n\t\t\t\tvar re = new RegExp(\"^\"+fieldName+\"\\\\.\");\n\t\t\t\tvar dirty = false;\n\t\t\t\tvar n;\n\t\t\t\tfor(n in t.fields) {\n\t\t\t\t\tif(n.match(re)) {\n\t\t\t\t\t\tdelete t.fields[n];\n\t\t\t\t\t\tdirty = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif(!dirty)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\t// the \"normal\" set case. value is defined (not null/undefined)\n\t\t\t// For convenience provide a nicer conversion Date->String\n\t\t\tvalue = value instanceof Date ? value.convertToYYYYMMDDHHMMSSMMM() : String(value);\n\t\t\tif(oldValue == value)\n\t\t\t\treturn;\n\t\t\tt.fields[fieldName] = value;\n\t\t}\n\t}\n\t// When we are here the tiddler/store really was changed.\n\tthis.notify(t.title,true);\n\tif(!fieldName.match(/^temp\\./))\n\t\tthis.setDirty(true);\n};\n\n// Returns the value of the given field of the tiddler.\n// The fieldName is case-insensitive.\n// Will only return String values (or undefined).\nTiddlyWiki.prototype.getValue = function(tiddler,fieldName)\n{\n\tvar t = this.resolveTiddler(tiddler);\n\tif(!t)\n\t\treturn undefined;\n\tif(fieldName.indexOf(config.textPrimitives.sectionSeparator) === 0 || fieldName.indexOf(config.textPrimitives.sliceSeparator) === 0) {\n\t\tvar sliceType = fieldName.substr(0, 2);\n\t\tvar sliceName = fieldName.substring(2);\n\t\treturn store.getTiddlerText(\"%0%1%2\".format(t.title,sliceType,sliceName));\n\t} else {\n\t\tfieldName = fieldName.toLowerCase();\n\t\tvar accessor = TiddlyWiki.standardFieldAccess[fieldName];\n\t\tif(accessor) {\n\t\t\treturn accessor.get(t);\n\t\t}\n\t}\n\treturn t.fields[fieldName];\n};\n\n// Calls the callback function for every field in the tiddler.\n// When callback function returns a non-false value the iteration stops\n// and that value is returned.\n// The order of the fields is not defined.\n// @param callback a function(tiddler,fieldName,value).\nTiddlyWiki.prototype.forEachField = function(tiddler,callback,onlyExtendedFields)\n{\n\tvar t = this.resolveTiddler(tiddler);\n\tif(!t)\n\t\treturn undefined;\n\tvar n,result;\n\tfor(n in t.fields) {\n\t\tresult = callback(t,n,t.fields[n]);\n\t\tif(result)\n\t\t\treturn result;\n\t\t}\n\tif(onlyExtendedFields)\n\t\treturn undefined;\n\tfor(n in TiddlyWiki.standardFieldAccess) {\n\t\tif(n != \"tiddler\") {\n\t\t\t// even though the \"title\" field can also be referenced through the name \"tiddler\"\n\t\t\t// we only visit this field once.\n\t\t\tresult = callback(t,n,TiddlyWiki.standardFieldAccess[n].get(t));\n\t\t\tif(result)\n\t\t\t\treturn result;\n\t\t}\n\t}\n\treturn undefined;\n};\n\n//--\n//-- Wikifier\n//--\n\nfunction getParser(tiddler,format)\n{\n\tif(tiddler) {\n\t\tif(!format)\n\t\t\tformat = tiddler.fields[\"wikiformat\"];\n\t\tvar i;\n\t\tif(format) {\n\t\t\t//# format field takes precedence over format tag\n\t\t\tfor(i in config.parsers) {\n\t\t\t\tif(format == config.parsers[i].format)\n\t\t\t\t\treturn config.parsers[i];\n\t\t\t}\n\t\t} else {\n\t\t\tfor(i in config.parsers) {\n\t\t\t\tif(tiddler.isTagged(config.parsers[i].formatTag))\n\t\t\t\t\treturn config.parsers[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn formatter;\n}\n\n//# Construct a wikifier object\n//# source - source string that's going to be wikified\n//# formatter - Formatter() object containing the list of formatters to be used\n//# highlightRegExp - regular expression of the text string to highlight\n//# tiddler - reference to the tiddler that's taken to be the container for this wikification\nfunction Wikifier(source,formatter,highlightRegExp,tiddler)\n{\n\tthis.source = source;\n\tthis.output = null;\n\tthis.formatter = formatter;\n\tthis.nextMatch = 0;\n\tthis.autoLinkWikiWords = tiddler && tiddler.autoLinkWikiWords() == false ? false : true;\n\tthis.highlightRegExp = highlightRegExp;\n\tthis.highlightMatch = null;\n\tthis.isStatic = false;\n\tif(highlightRegExp) {\n\t\thighlightRegExp.lastIndex = 0;\n\t\tthis.highlightMatch = highlightRegExp.exec(source);\n\t}\n\tthis.tiddler = tiddler;\n}\n\nWikifier.prototype.wikifyPlain = function()\n{\n\tvar e = createTiddlyElement(document.body,\"div\");\n\te.style.display = \"none\";\n\tthis.subWikify(e);\n\tvar text = jQuery(e).text();\n\tjQuery(e).remove();\n\treturn text;\n};\n\nWikifier.prototype.subWikify = function(output,terminator)\n{\n\t//# Handle the terminated and unterminated cases separately, this speeds up wikifikation by about 30%\n\ttry {\n\t\tif(terminator)\n\t\t\tthis.subWikifyTerm(output,new RegExp(\"(\" + terminator + \")\",\"mg\"));\n\t\telse\n\t\t\tthis.subWikifyUnterm(output);\n\t} catch(ex) {\n\t\tshowException(ex);\n\t}\n};\n\nWikifier.prototype.subWikifyUnterm = function(output)\n{\n\t//# subWikify can be indirectly recursive, so we need to save the old output pointer\n\tvar oldOutput = this.output;\n\tthis.output = output;\n\t//# Get the first match\n\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\tvar formatterMatch = this.formatter.formatterRegExp.exec(this.source);\n\twhile(formatterMatch) {\n\t\t// Output any text before the match\n\t\tif(formatterMatch.index > this.nextMatch)\n\t\t\tthis.outputText(this.output,this.nextMatch,formatterMatch.index);\n\t\t// Set the match parameters for the handler\n\t\tthis.matchStart = formatterMatch.index;\n\t\tthis.matchLength = formatterMatch[0].length;\n\t\tthis.matchText = formatterMatch[0];\n\t\tthis.nextMatch = this.formatter.formatterRegExp.lastIndex;\n\t\t//# Figure out which formatter matched and call its handler\n\t\tvar t;\n\t\tfor(t=1; t<formatterMatch.length; t++) {\n\t\t\tif(formatterMatch[t]) {\n\t\t\t\tthis.formatter.formatters[t-1].handler(this);\n\t\t\t\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//# Get the next match\n\t\tformatterMatch = this.formatter.formatterRegExp.exec(this.source);\n\t}\n\t//# Output any text after the last match\n\tif(this.nextMatch < this.source.length) {\n\t\tthis.outputText(this.output,this.nextMatch,this.source.length);\n\t\tthis.nextMatch = this.source.length;\n\t}\n\t//# Restore the output pointer\n\tthis.output = oldOutput;\n};\n\nWikifier.prototype.subWikifyTerm = function(output,terminatorRegExp)\n{\n\t//# subWikify can be indirectly recursive, so we need to save the old output pointer\n\tvar oldOutput = this.output;\n\tthis.output = output;\n\t//# Get the first matches for the formatter and terminator RegExps\n\tterminatorRegExp.lastIndex = this.nextMatch;\n\tvar terminatorMatch = terminatorRegExp.exec(this.source);\n\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\tvar formatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);\n\twhile(terminatorMatch || formatterMatch) {\n\t\t//# Check for a terminator match before the next formatter match\n\t\tif(terminatorMatch && (!formatterMatch || terminatorMatch.index <= formatterMatch.index)) {\n\t\t\t//# Output any text before the match\n\t\t\tif(terminatorMatch.index > this.nextMatch)\n\t\t\t\tthis.outputText(this.output,this.nextMatch,terminatorMatch.index);\n\t\t\t//# Set the match parameters\n\t\t\tthis.matchText = terminatorMatch[1];\n\t\t\tthis.matchLength = terminatorMatch[1].length;\n\t\t\tthis.matchStart = terminatorMatch.index;\n\t\t\tthis.nextMatch = this.matchStart + this.matchLength;\n\t\t\t//# Restore the output pointer\n\t\t\tthis.output = oldOutput;\n\t\t\treturn;\n\t\t}\n\t\t//# It must be a formatter match; output any text before the match\n\t\tif(formatterMatch.index > this.nextMatch)\n\t\t\tthis.outputText(this.output,this.nextMatch,formatterMatch.index);\n\t\t//# Set the match parameters\n\t\tthis.matchStart = formatterMatch.index;\n\t\tthis.matchLength = formatterMatch[0].length;\n\t\tthis.matchText = formatterMatch[0];\n\t\tthis.nextMatch = this.formatter.formatterRegExp.lastIndex;\n\t\t//# Figure out which formatter matched and call its handler\n\t\tvar t;\n\t\tfor(t=1; t<formatterMatch.length; t++) {\n\t\t\tif(formatterMatch[t]) {\n\t\t\t\tthis.formatter.formatters[t-1].handler(this);\n\t\t\t\tthis.formatter.formatterRegExp.lastIndex = this.nextMatch;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t//# Get the next match\n\t\tterminatorRegExp.lastIndex = this.nextMatch;\n\t\tterminatorMatch = terminatorRegExp.exec(this.source);\n\t\tformatterMatch = this.formatter.formatterRegExp.exec(terminatorMatch ? this.source.substr(0,terminatorMatch.index) : this.source);\n\t}\n\t//# Output any text after the last match\n\tif(this.nextMatch < this.source.length) {\n\t\tthis.outputText(this.output,this.nextMatch,this.source.length);\n\t\tthis.nextMatch = this.source.length;\n\t}\n\t//# Restore the output pointer\n\tthis.output = oldOutput;\n};\n\nWikifier.prototype.outputText = function(place,startPos,endPos)\n{\n\t//# Check for highlights\n\twhile(this.highlightMatch && (this.highlightRegExp.lastIndex > startPos) && (this.highlightMatch.index < endPos) && (startPos < endPos)) {\n\t\t//# Deal with any plain text before the highlight\n\t\tif(this.highlightMatch.index > startPos) {\n\t\t\tcreateTiddlyText(place,this.source.substring(startPos,this.highlightMatch.index));\n\t\t\tstartPos = this.highlightMatch.index;\n\t\t}\n\t\t//# Deal with the highlight\n\t\tvar highlightEnd = Math.min(this.highlightRegExp.lastIndex,endPos);\n\t\tcreateTiddlyElement(place,\"span\",null,\"highlight\",this.source.substring(startPos,highlightEnd));\n\t\tstartPos = highlightEnd;\n\t\t//# Nudge along to the next highlight if we're done with this one\n\t\tif(startPos >= this.highlightRegExp.lastIndex)\n\t\t\tthis.highlightMatch = this.highlightRegExp.exec(this.source);\n\t}\n\t//# Do the unhighlighted text left over\n\tif(startPos < endPos) {\n\t\tcreateTiddlyText(place,this.source.substring(startPos,endPos));\n\t}\n};\n\nfunction wikify(source,output,highlightRegExp,tiddler)\n{\n\tif(source) {\n\t\tvar wikifier = new Wikifier(source,getParser(tiddler),highlightRegExp,tiddler);\n\t\tvar t0 = new Date();\n\t\twikifier.subWikify(output);\n\t\tif(tiddler && config.options.chkDisplayInstrumentation)\n\t\t\tdisplayMessage(\"wikify:\" +tiddler.title+ \" in \" + (new Date()-t0) + \" ms\");\n\t}\n}\n\nfunction wikifyStatic(source,highlightRegExp,tiddler,format)\n{\n\tvar e = createTiddlyElement(document.body,\"pre\");\n\te.style.display = \"none\";\n\tvar html = \"\";\n\tif(source && source != \"\") {\n\t\tif(!tiddler)\n\t\t\ttiddler = new Tiddler(\"temp\");\n\t\tvar wikifier = new Wikifier(source,getParser(tiddler,format),highlightRegExp,tiddler);\n\t\twikifier.isStatic = true;\n\t\twikifier.subWikify(e);\n\t\thtml = e.innerHTML;\n\t\tjQuery(e).remove();\n\t}\n\treturn html;\n}\n\n//# Wikify a string to plain text\n//#   text - text to wikify\n//#   limit - maximum number of characters to generate\n//#   tiddler - optional reference to the tiddler containing this text\nfunction wikifyPlainText(text,limit,tiddler)\n{\n\tif(limit > 0)\n\t\ttext = text.substr(0,limit);\n\tvar wikifier = new Wikifier(text,formatter,null,tiddler);\n\treturn wikifier.wikifyPlain();\n}\n\n//# Highlight plain text into an element\nfunction highlightify(source,output,highlightRegExp,tiddler)\n{\n\tif(source) {\n\t\tvar wikifier = new Wikifier(source,formatter,highlightRegExp,tiddler);\n\t\twikifier.outputText(output,0,source.length);\n\t}\n}\n\n//--\n//-- Macro definitions\n//--\n\nfunction invokeMacro(place,macro,params,wikifier,tiddler)\n{\n\ttry {\n\t\tvar m = config.macros[macro];\n\t\tif(m && m.handler) {\n\t\t\tvar tiddlerElem = story.findContainingTiddler(place);\n\t\t\t//# Provide context for evaluated macro parameters (eg <<myMacro {{tiddler.title}}>>)\n\t\t\twindow.tiddler = tiddlerElem ? store.getTiddler(tiddlerElem.getAttribute(\"tiddler\")) : null;\n\t\t\twindow.place = place;\n\t\t\tvar allowEval = true;\n\t\t\tif(config.evaluateMacroParameters==\"system\") {\n\t\t\t\tif(!tiddler || tiddler.tags.indexOf(\"systemAllowEval\") == -1) {\n\t\t\t\t\tallowEval = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tm.handler(place,macro,m.noPreParse?null:params.readMacroParams(!allowEval),wikifier,params,tiddler);\n\t\t} else {\n\t\t\tcreateTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,config.messages.missingMacro]));\n\t\t}\n\t} catch(ex) {\n\t\tcreateTiddlyError(place,config.messages.macroError.format([macro]),config.messages.macroErrorDetails.format([macro,ex.toString()]));\n\t}\n}\n\nconfig.macros.version.handler = function(place)\n{\n\tjQuery(\"<span/>\").text(formatVersion()).appendTo(place);\n};\n\nconfig.macros.today.handler = function(place,macroName,params)\n{\n\tvar now = new Date();\n\tvar text = params[0] ? now.formatString(params[0].trim()) : now.toLocaleString();\n\tjQuery(\"<span/>\").text(text).appendTo(place);\n};\n\nconfig.macros.list.template = \"<<view title link>>\";\nconfig.macros.list.handler = function(place,macroName,params,wikifier,paramString)\n{\n\tvar list = document.createElement(\"ul\");\n\tjQuery(list).attr({ refresh: \"macro\", macroName: macroName }).data(\"params\", paramString);\n\tplace.appendChild(list);\n\tthis.refresh(list);\n};\n\nconfig.macros.list.refresh = function(list) {\n\tvar paramString = jQuery(list).data(\"params\");\n\tvar params = paramString.readMacroParams();\n\tvar args = paramString.parseParams(\"anon\", null, null)[0];\n\tvar type = args.anon ? args.anon[0] : \"all\";\n\tjQuery(list).empty().addClass(\"list list-\" + type);\n\tvar template = args.template ? store.getTiddlerText(args.template[0]) : false;\n\tif(!template) {\n\t\ttemplate = config.macros.list.template;\n\t}\n\tif(this[type].prompt)\n\t\tcreateTiddlyElement(list,\"li\",null,\"listTitle\",this[type].prompt);\n\tvar results;\n\tif(this[type].handler)\n\t\tresults = this[type].handler(params);\n\tvar t;\n\tfor(t = 0; t < results.length; t++) {\n\t\tvar li = document.createElement(\"li\");\n\t\tlist.appendChild(li);\n\t\tvar tiddler = results[t];\n\t\tif(typeof(tiddler) == 'string') { // deal with missing etc..\n\t\t\t\ttiddler = store.getTiddler(tiddler) || new Tiddler(tiddler);\n\t\t}\n\t\twikify(template, li, null, tiddler);\n\t}\n\tif(results.length === 0 && args.emptyMessage) {\n\t\tjQuery(list).addClass(\"emptyList\");\n\t\tjQuery(\"<li />\").text(args.emptyMessage[0]).appendTo(list);\n\t}\n};\n\nconfig.macros.list.all.handler = function(params)\n{\n\treturn store.reverseLookup(\"tags\",\"excludeLists\",false,\"title\");\n};\n\nconfig.macros.list.missing.handler = function(params)\n{\n\treturn store.getMissingLinks();\n};\n\nconfig.macros.list.orphans.handler = function(params)\n{\n\treturn store.getOrphans();\n};\n\nconfig.macros.list.shadowed.handler = function(params)\n{\n\treturn store.getShadowed();\n};\n\nconfig.macros.list.touched.handler = function(params)\n{\n\treturn store.getTouched();\n};\n\nconfig.macros.list.filter.handler = function(params)\n{\n\tvar filter = params[1];\n\tvar results = [];\n\tif(filter) {\n\t\tvar tiddlers = store.filterTiddlers(filter);\n\t\tvar t;\n\t\tfor(t=0; t<tiddlers.length; t++)\n\t\t\tresults.push(tiddlers[t].title);\n\t}\n\treturn results;\n};\n\nconfig.macros.allTags.handler = function(place,macroName,params)\n{\n\tvar tags = store.getTags(params[0]);\n\tvar ul = createTiddlyElement(place,\"ul\");\n\tif(tags.length == 0)\n\t\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",this.noTags);\n\tvar t;\n\tfor(t=0; t<tags.length; t++) {\n\t\tvar title = tags[t][0];\n\t\tvar info = getTiddlyLinkInfo(title);\n\t\tvar li = createTiddlyElement(ul,\"li\");\n\t\tvar btn = createTiddlyButton(li,title + \" (\" + tags[t][1] + \")\",this.tooltip.format([title]),onClickTag,info.classes);\n\t\tbtn.setAttribute(\"tag\",title);\n\t\tbtn.setAttribute(\"refresh\",\"link\");\n\t\tbtn.setAttribute(\"tiddlyLink\",title);\n\t\tif(params[1]) {\n\t\t\tbtn.setAttribute(\"sortby\",params[1]);\n\t\t}\n\t}\n};\n\nvar macro = config.macros.timeline;\nmerge(macro, {\n\thandler: function(place,macroName,params, wikifier, paramString, tiddler) {\n\t\tvar container = jQuery(\"<div />\").attr(\"params\", paramString).\n\t\t\tattr(\"macroName\", macroName).appendTo(place)[0];\n\t\tmacro.refresh(container);\n\t},\n\trefresh: function(container) {\n\t\tjQuery(container).attr(\"refresh\", \"macro\").empty();\n\t\tvar paramString = jQuery(container).attr(\"params\");\n\t\tvar args = paramString.parseParams(\"anon\", null, null)[0];\n\t\tvar params = args.anon || [];\n\n\t\tvar field = params[0] || \"modified\";\n\t\tvar dateFormat = params[2] || this.dateFormat;\n\t\tvar groupTemplate = macro.groupTemplate.format(field, dateFormat);\n\t\tgroupTemplate = args.groupTemplate ? store.getTiddlerText(args.groupTemplate[0]) || groupTemplate :\n\t\t\tgroupTemplate;\n\n\t\tvar itemTemplate = macro.itemTemplate;\n\t\titemTemplate = args.template ? store.getTiddlerText(args.template[0]) || itemTemplate :\n\t\t\titemTemplate;\n\n\t\tvar tiddlers = args.filter ? store.sortTiddlers(store.filterTiddlers(args.filter[0]), field) :\n\t\t\tstore.reverseLookup(\"tags\", \"excludeLists\", false, field);\n\t\tvar lastGroup = \"\", ul;\n\t\tvar last = params[1] ? tiddlers.length-Math.min(tiddlers.length,parseInt(params[1],10)) : 0;\n\t\tvar t;\n\t\tfor(t=tiddlers.length-1; t>=last; t--) {\n\t\t\tvar tiddler = tiddlers[t];\n\t\t\tvar theGroup = wikifyPlainText(groupTemplate,0,tiddler);\n\t\t\tif(typeof(ul) == \"undefined\" || theGroup != lastGroup) {\n\t\t\t\tul = document.createElement(\"ul\");\n\t\t\t\tjQuery(ul).addClass(\"timeline\");\n\t\t\t\tcontainer.appendChild(ul);\n\t\t\t\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",theGroup);\n\t\t\t\tlastGroup = theGroup;\n\t\t\t}\n\t\t\tvar item = createTiddlyElement(ul,\"li\",null,\"listLink\");\n\t\t\twikify(itemTemplate,item,null,tiddler);\n\t\t}\n\t},\n\tgroupTemplate: \"<<view %0 date '%1'>>\", \n\titemTemplate: \"<<view title link>>\"\n});\n\nconfig.macros.tiddler.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar allowEval = true;\n\tvar stack = config.macros.tiddler.tiddlerStack;\n\tif(stack.length > 0 && config.evaluateMacroParameters == \"system\") {\n\t\t// included tiddler and \"system\" evaluation required, so check tiddler tagged appropriately\n\t\tvar title = stack[stack.length-1];\n\t\tvar pos = title.indexOf(config.textPrimitives.sectionSeparator);\n\t\tif(pos != -1) {\n\t\t\ttitle = title.substr(0,pos); // get the base tiddler title\n\t\t}\n\t\tvar t = store.getTiddler(title);\n\t\tif(!t || t.tags.indexOf(\"systemAllowEval\") == -1) {\n\t\t\tallowEval = false;\n\t\t}\n\t}\n\tparams = paramString.parseParams(\"name\",null,allowEval,false,true);\n\tvar names = params[0][\"name\"];\n\tvar tiddlerName = names[0];\n\tvar className = names[1] || null;\n\tvar args = params[0][\"with\"];\n\tvar wrapper = createTiddlyElement(place,\"span\",null,className,null,{\n\t\trefresh: \"content\", tiddler: tiddlerName\n\t});\n\tif(args!==undefined)\n\t\twrapper.setAttribute(\"args\",\"[[\"+args.join(\"]] [[\")+\"]]\");\n\tthis.transclude(wrapper,tiddlerName,args);\n};\n\nconfig.macros.tiddler.transclude = function(wrapper,tiddlerName,args)\n{\n\tvar text = store.getTiddlerText(tiddlerName);\n\tif(!text)\n\t\treturn;\n\tvar stack = config.macros.tiddler.tiddlerStack;\n\tif(stack.indexOf(tiddlerName) !== -1)\n\t\treturn;\n\tstack.push(tiddlerName);\n\ttry {\n\t\tif(typeof args == \"string\")\n\t\t\targs = args.readBracketedList();\n\t\tvar n = args ? Math.min(args.length,9) : 0;\n\t\tvar i;\n\t\tfor(i=0; i<n; i++) {\n\t\t\tvar placeholderRE = new RegExp(\"\\\\$\" + (i + 1),\"mg\");\n\t\t\ttext = text.replace(placeholderRE,args[i]);\n\t\t}\n\t\tconfig.macros.tiddler.renderText(wrapper,text,tiddlerName);\n\t} finally {\n\t\tstack.pop();\n\t}\n};\n\nconfig.macros.tiddler.renderText = function(place,text,tiddlerName)\n{\n\twikify(text,place,null,store.getTiddler(tiddlerName));\n};\n\nconfig.macros.tiddler.tiddlerStack = [];\n\n//# params[0] - tag\n//# params[1] - title (optional)\n//# params[2] - tooltip (optional)\n//# params[3] - sortby (optional)\nconfig.macros.tag.handler = function(place,macroName,params)\n{\n\tvar btn = createTagButton(place,params[0],null,params[1],params[2]);\n\tif(params[3]) {\n\t\tbtn.setAttribute('sortby',params[3]);\n\t}\n};\n\nconfig.macros.tags.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tparams = paramString.parseParams(\"anon\",null,true,false,false);\n\tvar ul = createTiddlyElement(place,\"ul\");\n\tvar title = getParam(params,\"anon\",\"\");\n\tif(title && store.tiddlerExists(title))\n\t\ttiddler = store.getTiddler(title);\n\tvar sep = getParam(params,\"sep\",\" \");\n\tvar lingo = config.views.wikified.tag;\n\tvar label = null;\n\tvar t;\n\tfor(t=0; t<tiddler.tags.length; t++) {\n\t\tvar tag = store.getTiddler(tiddler.tags[t]);\n\t\tif(!tag || !tag.tags.contains(\"excludeLists\")) {\n\t\t\tif(!label)\n\t\t\t\tlabel = createTiddlyElement(ul,\"li\",null,\"listTitle\",lingo.labelTags.format([tiddler.title]));\n\t\t\tcreateTagButton(createTiddlyElement(ul,\"li\"),tiddler.tags[t],tiddler.title);\n\t\t\tif(t<tiddler.tags.length-1)\n\t\t\t\tcreateTiddlyText(ul,sep);\n\t\t}\n\t}\n\tif(!label)\n\t\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",lingo.labelNoTags.format([tiddler.title]));\n};\n\nconfig.macros.tagging.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tparams = paramString.parseParams(\"anon\",null,true,false,false);\n\tvar ul = createTiddlyElement(place,\"ul\");\n\tvar title = getParam(params,\"anon\",\"\");\n\tif(title == \"\" && tiddler instanceof Tiddler)\n\t\ttitle = tiddler.title;\n\tvar sep = getParam(params,\"sep\",\" \");\n\tul.setAttribute(\"title\",this.tooltip.format([title]));\n\tvar sortby = getParam(params,\"sortBy\",false);\n\tvar tagged = store.getTaggedTiddlers(title,sortby);\n\tvar prompt = tagged.length == 0 ? this.labelNotTag : this.label;\n\tcreateTiddlyElement(ul,\"li\",null,\"listTitle\",prompt.format([title,tagged.length]));\n\tvar t;\n\tfor(t=0; t<tagged.length; t++) {\n\t\tcreateTiddlyLink(createTiddlyElement(ul,\"li\"),tagged[t].title,true);\n\t\tif(t<tagged.length-1)\n\t\t\tcreateTiddlyText(ul,sep);\n\t}\n};\n\nconfig.macros.closeAll.handler = function(place)\n{\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick);\n};\n\nconfig.macros.closeAll.onClick = function(e)\n{\n\tstory.closeAllTiddlers();\n\treturn false;\n};\n\nconfig.macros.permaview.handler = function(place)\n{\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick);\n};\n\nconfig.macros.permaview.onClick = function(e)\n{\n\tstory.permaView();\n\treturn false;\n};\n\nconfig.macros.saveChanges.handler = function(place,macroName,params)\n{\n\tif(!readOnly)\n\t\tcreateTiddlyButton(place,params[0] || this.label,params[1] || this.prompt,this.onClick,null,null,this.accessKey);\n};\n\nconfig.macros.saveChanges.onClick = function(e)\n{\n\tsaveChanges();\n\treturn false;\n};\n\nconfig.macros.slider.onClickSlider = function(ev)\n{\n\tvar n = this.nextSibling;\n\tvar cookie = n.getAttribute(\"cookie\");\n\tvar isOpen = n.style.display != \"none\";\n\tif(config.options.chkAnimate && anim && typeof Slider == \"function\")\n\t\tanim.startAnimating(new Slider(n,!isOpen,null,\"none\"));\n\telse\n\t\tn.style.display = isOpen ? \"none\" : \"block\";\n\tconfig.options[cookie] = !isOpen;\n\tsaveOption(cookie);\n\treturn false;\n};\n\nconfig.macros.slider.createSlider = function(place,cookie,title,tooltip)\n{\n\tvar c = cookie || \"\";\n\tcreateTiddlyButton(place,title,tooltip,this.onClickSlider);\n\tvar panel = createTiddlyElement(null,\"div\",null,\"sliderPanel\");\n\tpanel.setAttribute(\"cookie\",c);\n\tpanel.style.display = config.options[c] ? \"block\" : \"none\";\n\tplace.appendChild(panel);\n\treturn panel;\n};\n\nconfig.macros.slider.handler = function(place,macroName,params)\n{\n\tvar panel = this.createSlider(place,params[0],params[2],params[3]);\n\tvar text = store.getTiddlerText(params[1]);\n\tpanel.setAttribute(\"refresh\",\"content\");\n\tpanel.setAttribute(\"tiddler\",params[1]);\n\tif(text)\n\t\twikify(text,panel,null,store.getTiddler(params[1]));\n};\n\n// <<gradient [[tiddler name]] vert|horiz rgb rgb rgb rgb... >>\nconfig.macros.gradient.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar panel = wikifier ? createTiddlyElement(place,\"div\",null,\"gradient\") : place;\n\tpanel.style.position = \"relative\";\n\tpanel.style.overflow = \"hidden\";\n\tpanel.style.zIndex = \"0\";\n\tif(wikifier) {\n\t\tvar styles = config.formatterHelpers.inlineCssHelper(wikifier);\n\t\tconfig.formatterHelpers.applyCssHelper(panel,styles);\n\t}\n\tparams = paramString.parseParams(\"color\");\n\tvar locolors = [], hicolors = [];\n\tvar t;\n\tfor(t=2; t<params.length; t++) {\n\t\tvar c = params[t].value;\n\t\tif(params[t].name == \"snap\") {\n\t\t\thicolors[hicolors.length-1] = c;\n\t\t} else {\n\t\t\tlocolors.push(c);\n\t\t\thicolors.push(c);\n\t\t}\n\t}\n\tdrawGradient(panel,params[1].value != \"vert\",locolors,hicolors);\n\tif(wikifier)\n\t\twikifier.subWikify(panel,\">>\");\n\tif(document.all) {\n\t\tpanel.style.height = \"100%\";\n\t\tpanel.style.width = \"100%\";\n\t}\n};\n\nconfig.macros.message.handler = function(place,macroName,params)\n{\n\tif(params[0]) {\n\t\tvar names = params[0].split(\".\");\n\t\tvar lookupMessage = function(root,nameIndex) {\n\t\t\t\tif(root[names[nameIndex]]) {\n\t\t\t\t\tif(nameIndex < names.length-1)\n\t\t\t\t\t\treturn (lookupMessage(root[names[nameIndex]],nameIndex+1));\n\t\t\t\t\telse\n\t\t\t\t\t\treturn root[names[nameIndex]];\n\t\t\t\t} else\n\t\t\t\t\treturn null;\n\t\t\t};\n\t\tvar m = lookupMessage(config,0);\n\t\tif(m == null)\n\t\t\tm = lookupMessage(window,0);\n\t\tcreateTiddlyText(place,m.toString().format(params.splice(1)));\n\t}\n};\n\n\nconfig.macros.view.depth = 0;\nconfig.macros.view.values = [];\nconfig.macros.view.views = {\n\ttext: function(value,place,params,wikifier,paramString,tiddler) {\n\t\thighlightify(value,place,highlightHack,tiddler);\n\t},\n\tlink: function(value,place,params,wikifier,paramString,tiddler) {\n\t\tcreateTiddlyLink(place,value,true);\n\t},\n\twikified: function(value,place,params,wikifier,paramString,tiddler) {\n\t\tif(config.macros.view.depth>50)\n\t\t\treturn;\n\t\tif(config.macros.view.depth>0) {\n\t\t\tif (value==config.macros.view.values[config.macros.view.depth-1]) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tconfig.macros.view.values[config.macros.view.depth] = value;\n\t\tconfig.macros.view.depth++;\n\t\tif(params[2])\n\t\t\tvalue=params[2].unescapeLineBreaks().format([value]);\n\t\twikify(value,place,highlightHack,tiddler);\n\t\tconfig.macros.view.depth--;\n\t\tconfig.macros.view.values[config.macros.view.depth] = null;\n\t},\n\tdate: function(value,place,params,wikifier,paramString,tiddler) {\n\t\tvalue = Date.convertFromYYYYMMDDHHMM(value);\n\t\tcreateTiddlyText(place,value.formatString(params[2] || config.views.wikified.dateFormat));\n\t}\n};\n\nconfig.macros.view.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tif((tiddler instanceof Tiddler) && params[0]) {\n\t\tvar value = store.getValue(tiddler,params[0]);\n\t\tif(value) {\n\t\t\tvar type = params[1] || config.macros.view.defaultView;\n\t\t\tvar handler = config.macros.view.views[type];\n\t\t\tif(handler)\n\t\t\t\thandler(value,place,params,wikifier,paramString,tiddler);\n\t\t}\n\t}\n};\n\nconfig.macros.edit.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar field = params[0];\n\tvar rows = params[1] || 0;\n\tvar defVal = params[2] || '';\n\tif((tiddler instanceof Tiddler) && field) {\n\t\tstory.setDirty(tiddler.title,true);\n\t\tvar e,v;\n\t\tif(field != \"text\" && !rows) {\n\t\t\te = createTiddlyElement(null,\"input\",null,null,null,{\n\t\t\t\ttype: \"text\", edit: field, size: \"40\", autocomplete: \"off\"\n\t\t\t});\n\t\t\te.value = store.getValue(tiddler,field) || defVal;\n\t\t\tplace.appendChild(e);\n\t\t} else {\n\t\t\tvar wrapper1 = createTiddlyElement(null,\"fieldset\",null,\"fieldsetFix\");\n\t\t\tvar wrapper2 = createTiddlyElement(wrapper1,\"div\");\n\t\t\te = createTiddlyElement(wrapper2,\"textarea\");\n\t\t\te.value = v = store.getValue(tiddler,field) || defVal;\n\t\t\trows = rows || 10;\n\t\t\tvar lines = v.match(/\\n/mg);\n\t\t\tvar maxLines = Math.max(parseInt(config.options.txtMaxEditRows,10),5);\n\t\t\tif(lines != null && lines.length > rows)\n\t\t\t\trows = lines.length + 5;\n\t\t\trows = Math.min(rows,maxLines);\n\t\t\te.setAttribute(\"rows\",rows);\n\t\t\te.setAttribute(\"edit\",field);\n\t\t\tplace.appendChild(wrapper1);\n\t\t}\n\t\tif(tiddler.isReadOnly()) {\n\t\t\te.setAttribute(\"readOnly\",\"readOnly\");\n\t\t\tjQuery(e).addClass(\"readOnly\");\n\t\t}\n\t\treturn e;\n\t}\n};\n\nconfig.macros.tagChooser.onClick = function(ev)\n{\n\tvar e = ev || window.event;\n\tvar lingo = config.views.editor.tagChooser;\n\tvar popup = Popup.create(this);\n\tvar tags = store.getTags(this.getAttribute(\"tags\"));\n\tif(tags.length == 0)\n\t\tjQuery(\"<li/>\").text(lingo.popupNone).appendTo(popup);\n\tvar t;\n\tfor(t=0; t<tags.length; t++) {\n\t\tvar tag = createTiddlyButton(createTiddlyElement(popup,\"li\"),tags[t][0],lingo.tagTooltip.format([tags[t][0]]),config.macros.tagChooser.onTagClick);\n\t\ttag.setAttribute(\"tag\",tags[t][0]);\n\t\ttag.setAttribute(\"tiddler\",this.getAttribute(\"tiddler\"));\n\t}\n\tPopup.show();\n\te.cancelBubble = true;\n\tif(e.stopPropagation) e.stopPropagation();\n\treturn false;\n};\n\nconfig.macros.tagChooser.onTagClick = function(ev)\n{\n\tvar e = ev || window.event;\n\tif(e.metaKey || e.ctrlKey) stopEvent(e); //# keep popup open on CTRL-click\n\tvar tag = this.getAttribute(\"tag\");\n\tvar title = this.getAttribute(\"tiddler\");\n\tif(!readOnly)\n\t\tstory.setTiddlerTag(title,tag,0);\n\treturn false;\n};\n\nconfig.macros.tagChooser.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tif(tiddler instanceof Tiddler) {\n\t\tvar lingo = config.views.editor.tagChooser;\n\t\tvar btn = createTiddlyButton(place,lingo.text,lingo.tooltip,this.onClick);\n\t\tbtn.setAttribute(\"tiddler\",tiddler.title);\n\t\tbtn.setAttribute(\"tags\",params[0]);\n\t}\n};\n\nconfig.macros.refreshDisplay.handler = function(place)\n{\n\tcreateTiddlyButton(place,this.label,this.prompt,this.onClick);\n};\n\nconfig.macros.refreshDisplay.onClick = function(e)\n{\n\trefreshAll();\n\treturn false;\n};\n\nconfig.macros.annotations.handler = function(place,macroName,params,wikifier,paramString,tiddler)\n{\n\tvar title = tiddler ? tiddler.title : null;\n\tvar a = title ? config.annotations[title] : null;\n\tif(!tiddler || !title || !a)\n\t\treturn;\n\tvar text = a.format([title]);\n\twikify(text,createTiddlyElement(place,\"div\",null,\"annotation\"),null,tiddler);\n};\n//--\n//-- Augmented methods for the JavaScript Date() object\n//--\n\n// Substitute date components into a string\nDate.prototype.formatString = function(template)\n{\n\tvar t = template.replace(/0hh12/g,String.zeroPad(this.getHours12(),2));\n\tt = t.replace(/hh12/g,this.getHours12());\n\tt = t.replace(/0hh/g,String.zeroPad(this.getHours(),2));\n\tt = t.replace(/hh/g,this.getHours());\n\tt = t.replace(/mmm/g,config.messages.dates.shortMonths[this.getMonth()]);\n\tt = t.replace(/0mm/g,String.zeroPad(this.getMinutes(),2));\n\tt = t.replace(/mm/g,this.getMinutes());\n\tt = t.replace(/0ss/g,String.zeroPad(this.getSeconds(),2));\n\tt = t.replace(/ss/g,this.getSeconds());\n\tt = t.replace(/[ap]m/g,this.getAmPm().toLowerCase());\n\tt = t.replace(/[AP]M/g,this.getAmPm().toUpperCase());\n\tt = t.replace(/wYYYY/g,this.getYearForWeekNo());\n\tt = t.replace(/wYY/g,String.zeroPad(this.getYearForWeekNo()-2000,2));\n\tt = t.replace(/YYYY/g,this.getFullYear());\n\tt = t.replace(/YY/g,String.zeroPad(this.getFullYear()-2000,2));\n\tt = t.replace(/MMM/g,config.messages.dates.months[this.getMonth()]);\n\tt = t.replace(/0MM/g,String.zeroPad(this.getMonth()+1,2));\n\tt = t.replace(/MM/g,this.getMonth()+1);\n\tt = t.replace(/0WW/g,String.zeroPad(this.getWeek(),2));\n\tt = t.replace(/WW/g,this.getWeek());\n\tt = t.replace(/DDD/g,config.messages.dates.days[this.getDay()]);\n\tt = t.replace(/ddd/g,config.messages.dates.shortDays[this.getDay()]);\n\tt = t.replace(/0DD/g,String.zeroPad(this.getDate(),2));\n\tt = t.replace(/DDth/g,this.getDate()+this.daySuffix());\n\tt = t.replace(/DD/g,this.getDate());\n\tvar tz = this.getTimezoneOffset();\n\tvar atz = Math.abs(tz);\n\tt = t.replace(/TZD/g,(tz < 0 ? '+' : '-') + String.zeroPad(Math.floor(atz / 60),2) + ':' + String.zeroPad(atz % 60,2));\n\tt = t.replace(/\\\\/g,\"\");\n\treturn t;\n};\n\nDate.prototype.getWeek = function()\n{\n\tvar dt = new Date(this.getTime());\n\tvar d = dt.getDay();\n\tif(d==0) d=7;// JavaScript Sun=0, ISO Sun=7\n\tdt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week to calculate weekNo\n\tvar n = Math.floor((dt.getTime()-new Date(dt.getFullYear(),0,1)+3600000)/86400000);\n\treturn Math.floor(n/7)+1;\n};\n\nDate.prototype.getYearForWeekNo = function()\n{\n\tvar dt = new Date(this.getTime());\n\tvar d = dt.getDay();\n\tif(d==0) d=7;// JavaScript Sun=0, ISO Sun=7\n\tdt.setTime(dt.getTime()+(4-d)*86400000);// shift day to Thurs of same week\n\treturn dt.getFullYear();\n};\n\nDate.prototype.getHours12 = function()\n{\n\tvar h = this.getHours();\n\treturn h > 12 ? h-12 : ( h > 0 ? h : 12 );\n};\n\nDate.prototype.getAmPm = function()\n{\n\treturn this.getHours() >= 12 ? config.messages.dates.pm : config.messages.dates.am;\n};\n\nDate.prototype.daySuffix = function()\n{\n\treturn config.messages.dates.daySuffixes[this.getDate()-1];\n};\n\n// Convert a date to local YYYYMMDDHHMM string format\nDate.prototype.convertToLocalYYYYMMDDHHMM = function()\n{\n\treturn this.getFullYear() + String.zeroPad(this.getMonth()+1,2) + String.zeroPad(this.getDate(),2) + String.zeroPad(this.getHours(),2) + String.zeroPad(this.getMinutes(),2);\n};\n\n// Convert a date to UTC YYYYMMDDHHMM string format\nDate.prototype.convertToYYYYMMDDHHMM = function()\n{\n\treturn this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2);\n};\n\n// Convert a date to UTC YYYYMMDD.HHMMSSMMM string format\nDate.prototype.convertToYYYYMMDDHHMMSSMMM = function()\n{\n\treturn this.getUTCFullYear() + String.zeroPad(this.getUTCMonth()+1,2) + String.zeroPad(this.getUTCDate(),2) + \".\" + String.zeroPad(this.getUTCHours(),2) + String.zeroPad(this.getUTCMinutes(),2) + String.zeroPad(this.getUTCSeconds(),2) + String.zeroPad(this.getUTCMilliseconds(),3) +\"0\";\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMM format string\nDate.convertFromYYYYMMDDHHMM = function(d)\n{\n\td = d?d.replace(/[^0-9]/g, \"\"):\"\";\n\treturn Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,12));\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMMSS format string\nDate.convertFromYYYYMMDDHHMMSS = function(d)\n{\n\td = d?d.replace(/[^0-9]/g, \"\"):\"\";\n\treturn Date.convertFromYYYYMMDDHHMMSSMMM(d.substr(0,14));\n};\n\n// Static method to create a date from a UTC YYYYMMDDHHMMSSMMM format string\nDate.convertFromYYYYMMDDHHMMSSMMM = function(d)\n{\n\td = d ? d.replace(/[^0-9]/g, \"\") : \"\";\n\treturn new Date(Date.UTC(parseInt(d.substr(0,4),10),\n\t\t\tparseInt(d.substr(4,2),10)-1,\n\t\t\tparseInt(d.substr(6,2),10),\n\t\t\tparseInt(d.substr(8,2)||\"00\",10),\n\t\t\tparseInt(d.substr(10,2)||\"00\",10),\n\t\t\tparseInt(d.substr(12,2)||\"00\",10),\n\t\t\tparseInt(d.substr(14,3)||\"000\",10)));\n};\n\n//--\n//-- Translateable strings\n//--\n\n// Strings in \"double quotes\" should be translated; strings in 'single quotes' should be left alone\n\nmerge(config.options,{\n\ttxtUserName: \"YourName\"});\n\nmerge(config.tasks,{\n\tsave: {text: \"save\", tooltip: \"Save your changes to this TiddlyWiki\"},\n\tsync: {text: \"sync\", tooltip: \"Synchronise changes with other TiddlyWiki files and servers\", content: '<<sync>>'},\n\timportTask: {text: \"import\", tooltip: \"Import tiddlers and plugins from other TiddlyWiki files and servers\", content: '<<importTiddlers>>'},\n\ttweak: {text: \"tweak\", tooltip: \"Tweak the appearance and behaviour of TiddlyWiki\", content: '<<options>>'},\n\tupgrade: {text: \"upgrade\", tooltip: \"Upgrade TiddlyWiki core code\", content: '<<upgrade>>'},\n\tplugins: {text: \"plugins\", tooltip: \"Manage installed plugins\", content: '<<plugins>>'}\n});\n\n// Options that can be set in the options panel and/or cookies\nmerge(config.optionsDesc,{\n\ttxtUserName: \"Username for signing your edits\",\n\tchkRegExpSearch: \"Enable regular expressions for searches\",\n\tchkCaseSensitiveSearch: \"Case-sensitive searching\",\n\tchkIncrementalSearch: \"Incremental key-by-key searching\",\n\tchkAnimate: \"Enable animations\",\n\tchkSaveBackups: \"Keep backup file when saving changes\",\n\tchkAutoSave: \"Automatically save changes\",\n\tchkGenerateAnRssFeed: \"Generate an RSS feed when saving changes\",\n\tchkSaveEmptyTemplate: \"Generate an empty template when saving changes\",\n\tchkOpenInNewWindow: \"Open external links in a new window\",\n\tchkToggleLinks: \"Clicking on links to open tiddlers causes them to close\",\n\tchkHttpReadOnly: \"Hide editing features when viewed over HTTP\",\n\tchkForceMinorUpdate: \"Don't update modifier username and date when editing tiddlers\",\n\tchkConfirmDelete: \"Require confirmation before deleting tiddlers\",\n\tchkInsertTabs: \"Use the tab key to insert tab characters instead of moving between fields\",\n\ttxtBackupFolder: \"Name of folder to use for backups\",\n\ttxtMaxEditRows: \"Maximum number of rows in edit boxes\",\n\ttxtTheme: \"Name of the theme to use\",\n\ttxtFileSystemCharSet: \"Default character set for saving changes (Firefox/Mozilla only)\"});\n\nmerge(config.messages,{\n\tcustomConfigError: \"Problems were encountered loading plugins. See PluginManager for details\",\n\tpluginError: \"Error: %0\",\n\tpluginDisabled: \"Not executed because disabled via 'systemConfigDisable' tag\",\n\tpluginForced: \"Executed because forced via 'systemConfigForce' tag\",\n\tpluginVersionError: \"Not executed because this plugin needs a newer version of TiddlyWiki\",\n\tnothingSelected: \"Nothing is selected. You must select one or more items first\",\n\tsavedSnapshotError: \"It appears that this TiddlyWiki has been incorrectly saved. Please see http://www.tiddlywiki.com/#Download for details\",\n\tsubtitleUnknown: \"(unknown)\",\n\tundefinedTiddlerToolTip: \"The tiddler '%0' doesn't yet exist\",\n\tshadowedTiddlerToolTip: \"The tiddler '%0' doesn't yet exist, but has a pre-defined shadow value\",\n\ttiddlerLinkTooltip: \"%0 - %1, %2\",\n\texternalLinkTooltip: \"External link to %0\",\n\tnoTags: \"There are no tagged tiddlers\",\n\tnotFileUrlError: \"You need to save this TiddlyWiki to a file before you can save changes\",\n\tcantSaveError: \"It's not possible to save changes. Possible reasons include:\\n- your browser doesn't support saving (Firefox, Internet Explorer, Safari and Opera all work if properly configured)\\n- the pathname to your TiddlyWiki file contains illegal characters\\n- the TiddlyWiki HTML file has been moved or renamed\",\n\tinvalidFileError: \"The original file '%0' does not appear to be a valid TiddlyWiki\",\n\tbackupSaved: \"Backup saved\",\n\tbackupFailed: \"Failed to save backup file\",\n\trssSaved: \"RSS feed saved\",\n\trssFailed: \"Failed to save RSS feed file\",\n\temptySaved: \"Empty template saved\",\n\temptyFailed: \"Failed to save empty template file\",\n\tmainSaved: \"Main TiddlyWiki file saved\",\n\tmainFailed: \"Failed to save main TiddlyWiki file. Your changes have not been saved\",\n\tmacroError: \"Error in macro <<%0>>\",\n\tmacroErrorDetails: \"Error while executing macro <<%0>>:\\n%1\",\n\tmissingMacro: \"No such macro\",\n\toverwriteWarning: \"A tiddler named '%0' already exists. Choose OK to overwrite it\",\n\tunsavedChangesWarning: \"WARNING! There are unsaved changes in TiddlyWiki\\n\\nChoose OK to save\\nChoose CANCEL to discard\",\n\tconfirmExit: \"--------------------------------\\n\\nThere are unsaved changes in TiddlyWiki. If you continue you will lose those changes\\n\\n--------------------------------\",\n\tsaveInstructions: \"SaveChanges\",\n\tunsupportedTWFormat: \"Unsupported TiddlyWiki format '%0'\",\n\ttiddlerSaveError: \"Error when saving tiddler '%0'\",\n\ttiddlerLoadError: \"Error when loading tiddler '%0'\",\n\twrongSaveFormat: \"Cannot save with storage format '%0'. Using standard format for save.\",\n\tinvalidFieldName: \"Invalid field name %0\",\n\tfieldCannotBeChanged: \"Field '%0' cannot be changed\",\n\tloadingMissingTiddler: \"Attempting to retrieve the tiddler '%0' from the '%1' server at:\\n\\n'%2' in the workspace '%3'\",\n\tupgradeDone: \"The upgrade to version %0 is now complete\\n\\nClick 'OK' to reload the newly upgraded TiddlyWiki\",\n\tinvalidCookie: \"Invalid cookie '%0'\"});\n\nmerge(config.messages.messageClose,{\n\ttext: \"close\",\n\ttooltip: \"close this message area\"});\n\nconfig.messages.backstage = {\n\topen: {text: \"backstage\", tooltip: \"Open the backstage area to perform authoring and editing tasks\"},\n\tclose: {text: \"close\", tooltip: \"Close the backstage area\"},\n\tprompt: \"backstage: \",\n\tdecal: {\n\t\tedit: {text: \"edit\", tooltip: \"Edit the tiddler '%0'\"}\n\t}\n};\n\nconfig.messages.listView = {\n\ttiddlerTooltip: \"Click for the full text of this tiddler\",\n\tpreviewUnavailable: \"(preview not available)\"\n};\n\nconfig.messages.dates.months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\",\"December\"];\nconfig.messages.dates.days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\nconfig.messages.dates.shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nconfig.messages.dates.shortDays = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n// suffixes for dates, eg \"1st\",\"2nd\",\"3rd\"...\"30th\",\"31st\"\nconfig.messages.dates.daySuffixes = [\"st\",\"nd\",\"rd\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\n\t\t\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\n\t\t\"st\",\"nd\",\"rd\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\"th\",\n\t\t\"st\"];\nconfig.messages.dates.am = \"am\";\nconfig.messages.dates.pm = \"pm\";\n\nmerge(config.messages.tiddlerPopup,{\n\t});\n\nmerge(config.views.wikified.tag,{\n\tlabelNoTags: \"no tags\",\n\tlabelTags: \"tags: \",\n\topenTag: \"Open tag '%0'\",\n\ttooltip: \"Show tiddlers tagged with '%0'\",\n\topenAllText: \"Open all\",\n\topenAllTooltip: \"Open all of these tiddlers\",\n\tpopupNone: \"No other tiddlers tagged with '%0'\"});\n\nmerge(config.views.wikified,{\n\tdefaultText: \"The tiddler '%0' doesn't yet exist. Double-click to create it\",\n\tdefaultModifier: \"(missing)\",\n\tshadowModifier: \"(built-in shadow tiddler)\",\n\tdateFormat: \"DD MMM YYYY\",\n\tcreatedPrompt: \"created\"});\n\nmerge(config.views.editor,{\n\ttagPrompt: \"Type tags separated with spaces, [[use double square brackets]] if necessary, or add existing\",\n\tdefaultText: \"Type the text for '%0'\"});\n\nmerge(config.views.editor.tagChooser,{\n\ttext: \"tags\",\n\ttooltip: \"Choose existing tags to add to this tiddler\",\n\tpopupNone: \"There are no tags defined\",\n\ttagTooltip: \"Add the tag '%0'\"});\n\nmerge(config.messages,{\n\tsizeTemplates:\n\t\t[\n\t\t{unit: 1024*1024*1024, template: \"%0\\u00a0GB\"},\n\t\t{unit: 1024*1024, template: \"%0\\u00a0MB\"},\n\t\t{unit: 1024, template: \"%0\\u00a0KB\"},\n\t\t{unit: 1, template: \"%0\\u00a0B\"}\n\t\t]});\n\nmerge(config.macros.search,{\n\tlabel: \"search\",\n\tprompt: \"Search this TiddlyWiki\",\n\tplaceholder: \"\",\n\taccessKey: \"F\",\n\tsuccessMsg: \"%0 tiddlers found matching %1\",\n\tfailureMsg: \"No tiddlers found matching %0\"});\n\nmerge(config.macros.tagging,{\n\tlabel: \"tagging: \",\n\tlabelNotTag: \"not tagging\",\n\ttooltip: \"List of tiddlers tagged with '%0'\"});\n\nmerge(config.macros.timeline,{\n\tdateFormat: \"DD MMM YYYY\"});\n\nmerge(config.macros.allTags,{\n\ttooltip: \"Show tiddlers tagged with '%0'\",\n\tnoTags: \"There are no tagged tiddlers\"});\n\nconfig.macros.list.all.prompt = \"All tiddlers in alphabetical order\";\nconfig.macros.list.missing.prompt = \"Tiddlers that have links to them but are not defined\";\nconfig.macros.list.orphans.prompt = \"Tiddlers that are not linked to from any other tiddlers\";\nconfig.macros.list.shadowed.prompt = \"Tiddlers shadowed with default contents\";\nconfig.macros.list.touched.prompt = \"Tiddlers that have been modified locally\";\n\nmerge(config.macros.closeAll,{\n\tlabel: \"close all\",\n\tprompt: \"Close all displayed tiddlers (except any that are being edited)\"});\n\nmerge(config.macros.permaview,{\n\tlabel: \"permaview\",\n\tprompt: \"Link to an URL that retrieves all the currently displayed tiddlers\"});\n\nmerge(config.macros.saveChanges,{\n\tlabel: \"save changes\",\n\tprompt: \"Save all tiddlers to create a new TiddlyWiki\",\n\taccessKey: \"S\"});\n\nmerge(config.macros.newTiddler,{\n\tlabel: \"new tiddler\",\n\tprompt: \"Create a new tiddler\",\n\ttitle: \"New Tiddler\",\n\taccessKey: \"N\"});\n\nmerge(config.macros.newJournal,{\n\tlabel: \"new journal\",\n\tprompt: \"Create a new tiddler from the current date and time\",\n\taccessKey: \"J\"});\n\nmerge(config.macros.options,{\n\twizardTitle: \"Tweak advanced options\",\n\tstep1Title: \"These options are saved in cookies in your browser\",\n\tstep1Html: \"<input type='hidden' name='markList'></input><br><input type='checkbox' checked='false' name='chkUnknown'>Show unknown options</input>\",\n\tunknownDescription: \"//(unknown)//\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Option', field: 'option', title: \"Option\", type: 'String'},\n\t\t\t{name: 'Description', field: 'description', title: \"Description\", type: 'WikiText'},\n\t\t\t{name: 'Name', field: 'name', title: \"Name\", type: 'String'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t{className: 'lowlight', field: 'lowlight'}\n\t\t\t]}\n\t});\n\nmerge(config.macros.plugins,{\n\twizardTitle: \"Manage plugins\",\n\tstep1Title: \"Currently loaded plugins\",\n\tstep1Html: \"<input type='hidden' name='markList'></input>\", // DO NOT TRANSLATE\n\tskippedText: \"(This plugin has not been executed because it was added since startup)\",\n\tnoPluginText: \"There are no plugins installed\",\n\tconfirmDeleteText: \"Are you sure you want to delete these plugins:\\n\\n%0\",\n\tremoveLabel: \"remove systemConfig tag\",\n\tremovePrompt: \"Remove systemConfig tag\",\n\tdeleteLabel: \"delete\",\n\tdeletePrompt: \"Delete these tiddlers forever\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Description', field: 'Description', title: \"Description\", type: 'String'},\n\t\t\t{name: 'Version', field: 'Version', title: \"Version\", type: 'String'},\n\t\t\t{name: 'Size', field: 'size', tiddlerLink: 'size', title: \"Size\", type: 'Size'},\n\t\t\t{name: 'Forced', field: 'forced', title: \"Forced\", tag: 'systemConfigForce', type: 'TagCheckbox'},\n\t\t\t{name: 'Disabled', field: 'disabled', title: \"Disabled\", tag: 'systemConfigDisable', type: 'TagCheckbox'},\n\t\t\t{name: 'Executed', field: 'executed', title: \"Loaded\", type: 'Boolean', trueText: \"Yes\", falseText: \"No\"},\n\t\t\t{name: 'Startup Time', field: 'startupTime', title: \"Startup Time\", type: 'String'},\n\t\t\t{name: 'Error', field: 'error', title: \"Status\", type: 'Boolean', trueText: \"Error\", falseText: \"OK\"},\n\t\t\t{name: 'Log', field: 'log', title: \"Log\", type: 'StringList'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t{className: 'error', field: 'error'},\n\t\t\t{className: 'warning', field: 'warning'}\n\t\t\t]},\n\tlistViewTemplateReadOnly: {\n\t\tcolumns: [\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Description', field: 'Description', title: \"Description\", type: 'String'},\n\t\t\t{name: 'Version', field: 'Version', title: \"Version\", type: 'String'},\n\t\t\t{name: 'Size', field: 'size', tiddlerLink: 'size', title: \"Size\", type: 'Size'},\n\t\t\t{name: 'Executed', field: 'executed', title: \"Loaded\", type: 'Boolean', trueText: \"Yes\", falseText: \"No\"},\n\t\t\t{name: 'Startup Time', field: 'startupTime', title: \"Startup Time\", type: 'String'},\n\t\t\t{name: 'Error', field: 'error', title: \"Status\", type: 'Boolean', trueText: \"Error\", falseText: \"OK\"},\n\t\t\t{name: 'Log', field: 'log', title: \"Log\", type: 'StringList'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t{className: 'error', field: 'error'},\n\t\t\t{className: 'warning', field: 'warning'}\n\t\t\t]}\n\t});\n\nmerge(config.macros.toolbar,{\n\tmoreLabel: \"more\",\n\tmorePrompt: \"Show additional commands\",\n\tlessLabel: \"less\",\n\tlessPrompt: \"Hide additional commands\",\n\tseparator: \"|\"\n\t});\n\nmerge(config.macros.refreshDisplay,{\n\tlabel: \"refresh\",\n\tprompt: \"Redraw the entire TiddlyWiki display\"\n\t});\n\nmerge(config.macros.importTiddlers,{\n\treadOnlyWarning: \"You cannot import into a read-only TiddlyWiki file. Try opening it from a file:// URL\",\n\twizardTitle: \"Import tiddlers from another file or server\",\n\tstep1Title: \"Step 1: Locate the server or TiddlyWiki file\",\n\tstep1Html: \"Specify the type of the server: <select name='selTypes'><option value=''>Choose...</option></select><br>Enter the URL or pathname here: <input type='text' size=50 name='txtPath'><br>...or browse for a file: <input type='file' size=50 name='txtBrowse'><br><hr>...or select a pre-defined feed: <select name='selFeeds'><option value=''>Choose...</option></select>\",\n\topenLabel: \"open\",\n\topenPrompt: \"Open the connection to this file or server\",\n\tstatusOpenHost: \"Opening the host\",\n\tstatusGetWorkspaceList: \"Getting the list of available workspaces\",\n\tstep2Title: \"Step 2: Choose the workspace\",\n\tstep2Html: \"Enter a workspace name: <input type='text' size=50 name='txtWorkspace'><br>...or select a workspace: <select name='selWorkspace'><option value=''>Choose...</option></select>\",\n\tcancelLabel: \"cancel\",\n\tcancelPrompt: \"Cancel this import\",\n\tstatusOpenWorkspace: \"Opening the workspace\",\n\tstatusGetTiddlerList: \"Getting the list of available tiddlers\",\n\terrorGettingTiddlerList: \"Error getting list of tiddlers, click Cancel to try again\",\n\terrorGettingTiddlerListHttp404: \"Error retrieving tiddlers from url, please ensure the url exists. Click Cancel to try again.\",\n\terrorGettingTiddlerListHttp: \"Error retrieving tiddlers from url, please ensure this url exists and is <a href='http://enable-cors.org/'>CORS</a> enabled\",\n\terrorGettingTiddlerListFile: \"Error retrieving tiddlers from local file, please make sure the file is in the same directory as your TiddlyWiki. Click Cancel to try again.\",\n\tstep3Title: \"Step 3: Choose the tiddlers to import\",\n\tstep3Html: \"<input type='hidden' name='markList'></input><br><input type='checkbox' checked='true' name='chkSync'>Keep these tiddlers linked to this server so that you can synchronise subsequent changes</input><br><input type='checkbox' name='chkSave'>Save the details of this server in a 'systemServer' tiddler called:</input> <input type='text' size=25 name='txtSaveTiddler'>\",\n\timportLabel: \"import\",\n\timportPrompt: \"Import these tiddlers\",\n\tconfirmOverwriteText: \"Are you sure you want to overwrite these tiddlers:\\n\\n%0\",\n\tstep4Title: \"Step 4: Importing %0 tiddler(s)\",\n\tstep4Html: \"<input type='hidden' name='markReport'></input>\", // DO NOT TRANSLATE\n\tdoneLabel: \"done\",\n\tdonePrompt: \"Close this wizard\",\n\tstatusDoingImport: \"Importing tiddlers\",\n\tstatusDoneImport: \"All tiddlers imported\",\n\tsystemServerNamePattern: \"%2 on %1\",\n\tsystemServerNamePatternNoWorkspace: \"%1\",\n\tconfirmOverwriteSaveTiddler: \"The tiddler '%0' already exists. Click 'OK' to overwrite it with the details of this server, or 'Cancel' to leave it unchanged\",\n\tserverSaveTemplate: \"|''Type:''|%0|\\n|''URL:''|%1|\\n|''Workspace:''|%2|\\n\\nThis tiddler was automatically created to record the details of this server\",\n\tserverSaveModifier: \"(System)\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Selected', field: 'Selected', rowName: 'title', type: 'Selector'},\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Size', field: 'size', tiddlerLink: 'size', title: \"Size\", type: 'Size'},\n\t\t\t{name: 'Tags', field: 'tags', title: \"Tags\", type: 'Tags'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t]}\n\t});\n\nmerge(config.macros.upgrade,{\n\twizardTitle: \"Upgrade TiddlyWiki core code\",\n\tstep1Title: \"Update or repair this TiddlyWiki to the latest release\",\n\tstep1Html: \"You are about to upgrade to the latest release of the TiddlyWiki core code (from <a href='%0' class='externalLink' target='_blank'>%1</a>). Your content will be preserved across the upgrade.<br><br>Note that core upgrades have been known to interfere with older plugins. If you run into problems with the upgraded file, see <a href='http://www.tiddlywiki.org/wiki/CoreUpgrades' class='externalLink' target='_blank'>http://www.tiddlywiki.org/wiki/CoreUpgrades</a>\",\n\terrorCantUpgrade: \"Unable to upgrade this TiddlyWiki. You can only perform upgrades on TiddlyWiki files stored locally\",\n\terrorNotSaved: \"You must save changes before you can perform an upgrade\",\n\tstep2Title: \"Confirm the upgrade details\",\n\tstep2Html_downgrade: \"You are about to downgrade to TiddlyWiki version %0 from %1.<br><br>Downgrading to an earlier version of the core code is not recommended\",\n\tstep2Html_restore: \"This TiddlyWiki appears to be already using the latest version of the core code (%0).<br><br>You can continue to upgrade anyway to ensure that the core code hasn't been corrupted or damaged\",\n\tstep2Html_upgrade: \"You are about to upgrade to TiddlyWiki version %0 from %1\",\n\tupgradeLabel: \"upgrade\",\n\tupgradePrompt: \"Prepare for the upgrade process\",\n\tstatusPreparingBackup: \"Preparing backup\",\n\tstatusSavingBackup: \"Saving backup file\",\n\terrorSavingBackup: \"There was a problem saving the backup file\",\n\tstatusLoadingCore: \"Loading core code\",\n\terrorLoadingCore: \"Error loading the core code\",\n\terrorCoreFormat: \"Error with the new core code\",\n\tstatusSavingCore: \"Saving the new core code\",\n\tstatusReloadingCore: \"Reloading the new core code\",\n\tstartLabel: \"start\",\n\tstartPrompt: \"Start the upgrade process\",\n\tcancelLabel: \"cancel\",\n\tcancelPrompt: \"Cancel the upgrade process\",\n\tstep3Title: \"Upgrade cancelled\",\n\tstep3Html: \"You have cancelled the upgrade process\"\n\t});\n\nmerge(config.macros.sync,{\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Selected', field: 'selected', rowName: 'title', type: 'Selector'},\n\t\t\t{name: 'Tiddler', field: 'tiddler', title: \"Tiddler\", type: 'Tiddler'},\n\t\t\t{name: 'Server Type', field: 'serverType', title: \"Server type\", type: 'String'},\n\t\t\t{name: 'Server Host', field: 'serverHost', title: \"Server host\", type: 'String'},\n\t\t\t{name: 'Server Workspace', field: 'serverWorkspace', title: \"Server workspace\", type: 'String'},\n\t\t\t{name: 'Status', field: 'status', title: \"Synchronisation status\", type: 'String'},\n\t\t\t{name: 'Server URL', field: 'serverUrl', title: \"Server URL\", text: \"View\", type: 'Link'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t],\n\t\tbuttons: [\n\t\t\t{caption: \"Sync these tiddlers\", name: 'sync'}\n\t\t\t]},\n\twizardTitle: \"Synchronize with external servers and files\",\n\tstep1Title: \"Choose the tiddlers you want to synchronize\",\n\tstep1Html: \"<input type='hidden' name='markList'></input>\", // DO NOT TRANSLATE\n\tsyncLabel: \"sync\",\n\tsyncPrompt: \"Sync these tiddlers\",\n\thasChanged: \"Changed while unplugged\",\n\thasNotChanged: \"Unchanged while unplugged\",\n\tsyncStatusList: {\n\t\tnone: {text: \"...\", display:'none', className:'notChanged'},\n\t\tchangedServer: {text: \"Changed on server\", display:null, className:'changedServer'},\n\t\tchangedLocally: {text: \"Changed while unplugged\", display:null, className:'changedLocally'},\n\t\tchangedBoth: {text: \"Changed while unplugged and on server\", display:null, className:'changedBoth'},\n\t\tnotFound: {text: \"Not found on server\", display:null, className:'notFound'},\n\t\tputToServer: {text: \"Saved update on server\", display:null, className:'putToServer'},\n\t\tgotFromServer: {text: \"Retrieved update from server\", display:null, className:'gotFromServer'}\n\t\t}\n\t});\n\nmerge(config.macros.annotations,{\n\t});\n\nmerge(config.commands.closeTiddler,{\n\ttext: \"close\",\n\ttooltip: \"Close this tiddler\"});\n\nmerge(config.commands.closeOthers,{\n\ttext: \"close others\",\n\ttooltip: \"Close all other tiddlers\"});\n\nmerge(config.commands.editTiddler,{\n\ttext: \"edit\",\n\ttooltip: \"Edit this tiddler\",\n\treadOnlyText: \"view\",\n\treadOnlyTooltip: \"View the source of this tiddler\"});\n\nmerge(config.commands.saveTiddler,{\n\ttext: \"done\",\n\ttooltip: \"Save changes to this tiddler\"});\n\nmerge(config.commands.cancelTiddler,{\n\ttext: \"cancel\",\n\ttooltip: \"Undo changes to this tiddler\",\n\twarning: \"Are you sure you want to abandon your changes to '%0'?\",\n\treadOnlyText: \"done\",\n\treadOnlyTooltip: \"View this tiddler normally\"});\n\nmerge(config.commands.deleteTiddler,{\n\ttext: \"delete\",\n\ttooltip: \"Delete this tiddler\",\n\twarning: \"Are you sure you want to delete '%0'?\"});\n\nmerge(config.commands.permalink,{\n\ttext: \"permalink\",\n\ttooltip: \"Permalink for this tiddler\"});\n\nmerge(config.commands.references,{\n\ttext: \"references\",\n\ttooltip: \"Show tiddlers that link to this one\",\n\tpopupNone: \"No references\"});\n\nmerge(config.commands.jump,{\n\ttext: \"jump\",\n\ttooltip: \"Jump to another open tiddler\"});\n\nmerge(config.commands.syncing,{\n\ttext: \"syncing\",\n\ttooltip: \"Control synchronisation of this tiddler with a server or external file\",\n\tcurrentlySyncing: \"<div>Currently syncing via <span class='popupHighlight'>'%0'</span> to:</\"+\"div><div>host: <span class='popupHighlight'>%1</span></\"+\"div><div>workspace: <span class='popupHighlight'>%2</span></\"+\"div>\", // Note escaping of closing <div> tag\n\tnotCurrentlySyncing: \"Not currently syncing\",\n\tcaptionUnSync: \"Stop synchronising this tiddler\",\n\tchooseServer: \"Synchronise this tiddler with another server:\",\n\tcurrServerMarker: \"\\u25cf \",\n\tnotCurrServerMarker: \"  \"});\n\nmerge(config.commands.fields,{\n\ttext: \"fields\",\n\ttooltip: \"Show the extended fields of this tiddler\",\n\temptyText: \"There are no extended fields for this tiddler\",\n\tlistViewTemplate: {\n\t\tcolumns: [\n\t\t\t{name: 'Field', field: 'field', title: \"Field\", type: 'String'},\n\t\t\t{name: 'Value', field: 'value', title: \"Value\", type: 'String'}\n\t\t\t],\n\t\trowClasses: [\n\t\t\t],\n\t\tbuttons: [\n\t\t\t]}});\n\nmerge(config.shadowTiddlers,{\n\tDefaultTiddlers: \"[[GettingStarted]]\",\n\tMainMenu: \"[[GettingStarted]]\",\n\tSiteTitle: \"My TiddlyWiki\",\n\tSiteSubtitle: \"a reusable non-linear personal web notebook\",\n\tSiteUrl: \"\",\n\tSideBarOptions: '<<search>><<closeAll>><<permaview>><<newTiddler>><<newJournal \"DD MMM YYYY\" \"journal\">><<saveChanges>><<slider chkSliderOptionsPanel OptionsPanel \"options \\u00bb\" \"Change TiddlyWiki advanced options\">>',\n\tSideBarTabs: '<<tabs txtMainTab \"Timeline\" \"Timeline\" TabTimeline \"All\" \"All tiddlers\" TabAll \"Tags\" \"All tags\" TabTags \"More\" \"More lists\" TabMore>>',\n\tTabMore: '<<tabs txtMoreTab \"Missing\" \"Missing tiddlers\" TabMoreMissing \"Orphans\" \"Orphaned tiddlers\" TabMoreOrphans \"Shadowed\" \"Shadowed tiddlers\" TabMoreShadowed>>'\n\t});\n\nmerge(config.annotations,{\n\tAdvancedOptions: \"This shadow tiddler provides access to several advanced options\",\n\tColorPalette: \"These values in this shadow tiddler determine the colour scheme of the ~TiddlyWiki user interface\",\n\tDefaultTiddlers: \"The tiddlers listed in this shadow tiddler will be automatically displayed when ~TiddlyWiki starts up\",\n\tEditTemplate: \"The HTML template in this shadow tiddler determines how tiddlers look while they are being edited\",\n\tGettingStarted: \"This shadow tiddler provides basic usage instructions\",\n\tImportTiddlers: \"This shadow tiddler provides access to importing tiddlers\",\n\tMainMenu: \"This shadow tiddler is used as the contents of the main menu in the left-hand column of the screen\",\n\tMarkupPreHead: \"This tiddler is inserted at the top of the <head> section of the TiddlyWiki HTML file\",\n\tMarkupPostHead: \"This tiddler is inserted at the bottom of the <head> section of the TiddlyWiki HTML file\",\n\tMarkupPreBody: \"This tiddler is inserted at the top of the <body> section of the TiddlyWiki HTML file\",\n\tMarkupPostBody: \"This tiddler is inserted at the end of the <body> section of the TiddlyWiki HTML file immediately after the script block\",\n\tOptionsPanel: \"This shadow tiddler is used as the contents of the options panel slider in the right-hand sidebar\",\n\tPageTemplate: \"The HTML template in this shadow tiddler determines the overall ~TiddlyWiki layout\",\n\tPluginManager: \"This shadow tiddler provides access to the plugin manager\",\n\tSideBarOptions: \"This shadow tiddler is used as the contents of the option panel in the right-hand sidebar\",\n\tSideBarTabs: \"This shadow tiddler is used as the contents of the tabs panel in the right-hand sidebar\",\n\tSiteSubtitle: \"This shadow tiddler is used as the second part of the page title\",\n\tSiteTitle: \"This shadow tiddler is used as the first part of the page title\",\n\tSiteUrl: \"This shadow tiddler should be set to the full target URL for publication\",\n\tStyleSheetColors: \"This shadow tiddler contains CSS definitions related to the color of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler\",\n\tStyleSheet: \"This tiddler can contain custom CSS definitions\",\n\tStyleSheetLayout: \"This shadow tiddler contains CSS definitions related to the layout of page elements. ''DO NOT EDIT THIS TIDDLER'', instead make your changes in the StyleSheet shadow tiddler\",\n\tStyleSheetLocale: \"This shadow tiddler contains CSS definitions related to the translation locale\",\n\tStyleSheetPrint: \"This shadow tiddler contains CSS definitions for printing\",\n\tSystemSettings: \"This tiddler is used to store configuration options for this TiddlyWiki document\",\n\tTabAll: \"This shadow tiddler contains the contents of the 'All' tab in the right-hand sidebar\",\n\tTabMore: \"This shadow tiddler contains the contents of the 'More' tab in the right-hand sidebar\",\n\tTabMoreMissing: \"This shadow tiddler contains the contents of the 'Missing' tab in the right-hand sidebar\",\n\tTabMoreOrphans: \"This shadow tiddler contains the contents of the 'Orphans' tab in the right-hand sidebar\",\n\tTabMoreShadowed: \"This shadow tiddler contains the contents of the 'Shadowed' tab in the right-hand sidebar\",\n\tTabTags: \"This shadow tiddler contains the contents of the 'Tags' tab in the right-hand sidebar\",\n\tTabTimeline: \"This shadow tiddler contains the contents of the 'Timeline' tab in the right-hand sidebar\",\n\tToolbarCommands: \"This shadow tiddler determines which commands are shown in tiddler toolbars\",\n\tViewTemplate: \"The HTML template in this shadow tiddler determines how tiddlers look\"\n\t});\n/***\n|''Name:''|TiddlySpaceLinkPlugin|\n|''Description:''|Formatter to reference other spaces from wikitext |\n|''Author:''|PaulDowney (psd (at) osmosoft (dot) com) |\n|''Source:''|http://github.com/TiddlySpace/tiddlyspace/raw/master/src/plugins/TiddlySpaceLinkPlugin.js|\n|''Version:''|1.3.1|\n|''License:''|[[BSD License|http://www.opensource.org/licenses/bsd-license.php]] |\n|''Comments:''|Please make comments at http://groups.google.co.uk/group/TiddlyWikiDev |\n|''~CoreVersion:''|2.4|\n!!Documentation\nThis plugin provides wikitext formatters for referencing another [[space|Space]] on the same TiddlySpace server, as in the following examples:\n<<<\n  {{{@space}}} -- @space \n  {{{~@space}}} -- ~@space \n  {{{Tiddler@space}}} -- Tiddler@space\n  {{{[[Tiddler Title]]@space}}} -- [[Tiddler Title]]@space \n  {{{[[Link text|Tiddler Title]]@space}}} -- [[Link text|Tiddler Title]]@space\n<<<\nLinks to tiddlers with a title begining with an \"@\" remain as tiddlyLinks:\n<<<\n  {{{[[@tiddler]]}}} -- [[@tiddler]]\n<<<\nand these may be changed into a space link using {{{@@}}}:\n<<<\n  {{{[[@@space]]}}} -- [[@@space]]\n  {{{[[Link to an another space|@@space]]}}} -- [[Link to another space|@@space]]\n  {{{[[@space|@@space]]}}} -- [[@space|@@space]]\n<<<\nTiddlySpace includes the [[TiddlySpaceLinkPlugin]] which provides WikiText markup for linking to other spaces on the same server. For example @glossary is a link to the {{{glossary}}} space and [[Small Trusted Group]]@glossary a link to an individual tiddler in the @glossary space. Prefixing the link with a tilde escapes the link, for example {{{~@space}}}.\nEmail addresses, for example joe.bloggs@example.com and mary@had.a.little.lamb.org should be unaffected.\n!!Features\nThe plugin provides external links decorated so that other plugins may be included to add features such as the ability to dynamically pull externally linked tiddlers into the current TiddlyWiki.\nWikitext linking to a space on another server, for example from a tiddler in a space on tiddlyspace.com to a tiddler or a space on example.com, isn't currently supported. \n!!Code\n***/\n//{{{\n/*jslint onevar: false nomen: false plusplus: false */\n/*global jQuery config createTiddlyText createExternalLink createTiddlyLink */\n\nfunction createSpaceLink(place, spaceName, title, alt, isBag) {\n\tvar link, a, currentSpaceName;\n\ttry {\n\t\t// seems safe to expect this to have been initialised within TiddlySpace\n\t\tlink = config.extensions.tiddlyweb.status.server_host.url;\n\t} catch (ex) {\n\t\tlink = \"http://tiddlyspace.com\";\n\t}\n\ttry {\n\t\tif (spaceName === config.extensions.tiddlyspace.currentSpace.name) {\n\t\t\ttitle = title || spaceName;\n\t\t\ta = createTiddlyLink(place, title, false);\n\t\t\tjQuery(a).text(alt || title);\n\t\t\treturn a;\n\t\t}\n\t} catch (ex1) {\n\t\tcurrentSpaceName = false;\n\t}\n\n\t// assumes a http URI without user:pass@ prefix\n\tif(!isBag) {\n\t\tlink = link.replace(\"http://\", \"http://\" + spaceName.toLowerCase() + \".\");\n\t} else {\n\t\tlink += \"/bags/\" + spaceName + \"/tiddlers.wiki\";\n\t}\n\n\tif (title) {\n\t\ta = createExternalLink(place, link + \"#\" + encodeURIComponent(String.encodeTiddlyLink(title)), alt || title);\n\t} else {\n\t\ta = createExternalLink(place, link, alt || spaceName);\n\t}\n\tjQuery(a).addClass('tiddlySpaceLink').attr('tiddler', title);\n\tif(isBag) {\n\t\tjQuery(a).attr('bag', spaceName);\n\t} else {\n\t\tjQuery(a).attr('tiddlyspace', spaceName);\n\t}\n\treturn a;\n}\n\n(function ($) {\n\n\tconfig.textPrimitives.spaceName = \"[a-zA-Z][a-zA-Z0-9-]*[a-zA-Z0-9]\";\n\tconfig.textPrimitives.spaceNameStrict = \"[a-z][a-z0-9-]*\";\n\tconfig.textPrimitives.bareTiddlerLetter = config.textPrimitives.anyLetterStrict;\n\n\tconfig.formatters.splice(0, 0, {\n\t\tname: \"spacenameLink\",\n\t\tmatch: config.textPrimitives.unWikiLink + \"?\" + config.textPrimitives.bareTiddlerLetter + \"*@\" + config.textPrimitives.spaceName + \"\\\\.?.?\",\n\t\tlookaheadRegExp: new RegExp(config.textPrimitives.unWikiLink + \"?(\" + config.textPrimitives.bareTiddlerLetter + \"*)@(\" + config.textPrimitives.spaceName + \")\", \"mg\"),\n\t\thandler: function (w) {\n\t\t\tif (w.matchText.substr(w.matchText.length - 2, 1) === '.' && w.matchText.substr(w.matchText.length - 1, 1).match(/[a-zA-Z]/)) {\n\t\t\t\tw.outputText(w.output, w.matchStart, w.nextMatch);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (w.matchText.substr(0, 1) === config.textPrimitives.unWikiLink) {\n\t\t\t\tw.outputText(w.output, w.matchStart + 1, w.nextMatch);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t\tif (lookaheadMatch && lookaheadMatch.index === w.matchStart) {\n\t\t\t\tcreateSpaceLink(w.output, lookaheadMatch[2], lookaheadMatch[1]);\n\t\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tname: \"tiddlySpaceLink\",\n\t\tmatch: \"\\\\[\\\\[[^\\\\|\\\\]]*\\\\|*@@\" + config.textPrimitives.spaceName + \"\\\\]\",\n\t\tlookaheadRegExp: new RegExp(\"\\\\[\\\\[(.*?)(?:\\\\|@@(.*?))?\\\\]\\\\]\", \"mg\"),\n\t\thandler: function (w) {\n\t\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t\tif (lookaheadMatch && lookaheadMatch.index === w.matchStart) {\n\t\t\t\tvar alt = lookaheadMatch[2] ? lookaheadMatch[1] : lookaheadMatch[1].replace(/^@@/, \"\");\n\t\t\t\tvar space = lookaheadMatch[2] || alt;\n\t\t\t\tcreateSpaceLink(w.output, space, \"\", alt);\n\t\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t\t}\n\t\t}\n\t},\n\t{\n\t\tname: \"tiddlyLinkSpacenameLink\",\n\t\tmatch: \"\\\\[\\\\[[^\\\\[]*\\\\]\\\\]@\",\n\t\tlookaheadRegExp: new RegExp(\"\\\\[\\\\[(.*?)(?:\\\\|(.*?))?\\\\]\\\\]@(\" + config.textPrimitives.spaceName + \")\", \"mg\"),\n\t\thandler: function (w) {\n\t\t\tthis.lookaheadRegExp.lastIndex = w.matchStart;\n\t\t\tvar lookaheadMatch = this.lookaheadRegExp.exec(w.source);\n\t\t\tif (lookaheadMatch && lookaheadMatch.index === w.matchStart) {\n\t\t\t\tvar title = lookaheadMatch[2] || lookaheadMatch[1];\n\t\t\t\tvar alt = lookaheadMatch[1] || lookaheadMatch[2];\n\t\t\t\tcreateSpaceLink(w.output, lookaheadMatch[3], title, alt);\n\t\t\t\tw.nextMatch = this.lookaheadRegExp.lastIndex;\n\t\t\t}\n\t\t}\n\t});\n\n\t// ensure space links don't appear as missing links\n\tconfig.textPrimitives.brackettedLink = \"\\\\[\\\\[([^\\\\]][^@\\\\]][^\\\\]]*)\\\\]\\\\](?=[^@])\";\n\tconfig.textPrimitives.titledBrackettedLink = \"\\\\[\\\\[([^\\\\[\\\\]\\\\|]+)\\\\|([^\\\\[\\\\]\\\\|]+)\\\\]\\\\](?=[^@])\";\n\n\t// reevaluate derrived expressions ..\n\tconfig.textPrimitives.tiddlerForcedLinkRegExp = new RegExp(\"(?:\" + config.textPrimitives.titledBrackettedLink + \")|(?:\" +\n\t\tconfig.textPrimitives.brackettedLink + \")|(?:\" +\n\t\tconfig.textPrimitives.urlPattern + \")\",\"mg\");\n\tconfig.textPrimitives.tiddlerAnyLinkRegExp = new RegExp(\"(\"+ config.textPrimitives.wikiLink + \")|(?:\" +\n\t\tconfig.textPrimitives.titledBrackettedLink + \")|(?:\" +\n\t\tconfig.textPrimitives.brackettedLink + \")|(?:\" +\n\t\tconfig.textPrimitives.urlPattern + \")\",\"mg\");\n\n\t// treat space links in titledBracketedLink as external links\n\tvar missingTiddlySpaceLink = new RegExp(\"^@@\" + config.textPrimitives.spaceName + \"$\", \"\");\n\tvar isExternalLink = config.formatterHelpers.isExternalLink;\n\tconfig.formatterHelpers.isExternalLink = function(link) {\n\t\treturn missingTiddlySpaceLink.test(link) || isExternalLink(link);\n\t};\n\n}(jQuery));\n//}}}\n// The closing of the frame that wraps the TiddlyWiki code.\n\n// create the formatter global that is needed. Must be here\n// at the end because we need to have config established.\n// XXX Why is formatter a global!!!!\nvar formatter = new Formatter(config.formatters);\n\n//clobber createTiddlyLink\nfunction createTiddlyLink(place,title,includeText,className,isStatic,linkedFromTiddler,noToggle)\n{\n        var text = includeText ? title : null;\n        var i = getTiddlyLinkInfo(title,className);\n        var urlString = store.getTiddlerText(\"SiteUrl\");\n        var linktext = urlString ? urlString + '/' + title : title;\n        var btn = createExternalLink(place, linktext, text);\n        btn.className += ' ' + className;\n        return btn;\n}\n\n// clobber creatTagButton\n\nfunction createTagButton(place,tag,excludeTiddler,title,tooltip)\n{\n    var taglink = serverOptions.container ?\n        serverOptions.container + '?select=tag:' + encodeURIComponent(tag) :\n            \"/search?q=tag:\" + encodeURIComponent(tag);\n    var btn = createExternalLink(place, taglink, tag);\n    return btn;\n}\n\n// messages required for invokeMacro\nfunction createTiddlyError(place, msg, details) {\n\tjQuery(place).append(\"<!-- \" + msg + \"\\n\" + details + \" -->\");\n}\n\n// override createSpaceLink\nfunction createSpaceLink(place, spaceName, title, alt, isBag) {\n    var link, a;\n    // XXX this needs to come from config or parameters\n    link = serverOptions.host;\n\n    // assumes a http URI without user:pass@ prefix\n    link = link.replace(\"http://\", \"http://\" + spaceName.toLowerCase() + \".\");\n\n    if (title) {\n        a = createExternalLink(place, link + \"/\" +\n                encodeURIComponent(title), alt || title);\n    } else {\n        a = createExternalLink(place, link, alt || spaceName);\n    }\n    jQuery(a).addClass('tiddlySpaceLink').attr('tiddler', title);\n    jQuery(a).attr('tiddlyspace', spaceName);\n    return a;\n}\n\nconfig.options.chkOpenInNewWindow = false;\nconfig.evaluateMacroParameters = 'none';\n\nreturn [wikify, store, Tiddler];\n};\n\nif (typeof exports != \"undefined\")\n    exports.createWikifier = createWikifier;\n", "title": "twikifier.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 455195}, {"creator": "jon", "fields": {"_hash": "3c0f225050f57af95edfec818d9e64918ef3661b", "summary": "Provide an overview of apps in TiddlySpace"}, "created": "20110722131339", "recipe": "gadabout_private", "modified": "20111004145850", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/Applications", "bag": "apps_public", "text": "<html>\n<head>\n<title>Applications</title>\n<style type=\"text/css\">\ntd {\ntext-align: center;\nborder: solid 1px #CCC;\npadding: 8px;\n}\n#apps img {\nwidth: 48px;\nheight: 48px;\n}\ntd {\nwidth: 50%\n}\n</style>\n\n<script type='text/javascript' src='/bags/common/tiddlers/backstage.js'></script>\n<link href=\"/bags/common/tiddlers/profile.css\" type='text/css' rel='stylesheet' >\n<script type='text/javascript' src='http://tiddlyspace.com/bags/ts_public/tiddlers/jquery.min.js'></script>\n<script type=\"text/javascript\">\n$(document).ready(function() {\n\t$.ajax({\n\t\tdataType: \"json\",\n\t\turl: \"/tiddlers?select=type:text/html\",\n\t\tsuccess: function(tids) {\n\t\t\ttids = tids.sort(function(a, b) {\n\t\t\t\treturn a.title.toLowerCase() < b.title.toLowerCase() ? -1 : 1;\n\t\t\t});\n\t\t\tvar lastCol = 2, row;\n\t\t\tfor(var i = 0; i < tids.length; i++) {\n\t\t\t\tvar tid = tids[i];\n\t\t\t\tif(tid && tid.tags.indexOf(\"app\") > -1) {\n\t\t\t\t\tif(lastCol == 2) {\n\t\t\t\t\t\trow = $(\"<tr />\").appendTo(\"#apps\")[0];\n\t\t\t\t\t\tlastCol = 0;\n\t\t\t\t\t}\n\t\t\t\t\tvar title = tids[i].title;\n\t\t\t\t\tvar bag = tids[i].bag;\n\t\t\t\t\tvar space = bag.split(\"_\")[0];\n\t\t\t\t\tvar item = $(\"<td />\").appendTo(row)[0];\n\t\t\t\t\t$('<img alt=\"space siteicon\" />').attr(\"src\", \"http://\" + space + \".tiddlyspace.com/SiteIcon\").appendTo(item);\n\t\t\t\t\tvar heading = $(\"<h2 />\").appendTo(item)[0];\n\t\t\t\t\t$(\"<a />\").attr(\"href\", \"/\" + title).text(title).appendTo(heading);\n\t\t\t\t\tvar summary = tids[i].fields.summary;\n\t\t\t\t\t$(\"<div />\").text(summary || \"No summary\").appendTo(item);\n\t\t\t\t\tlastCol += 1;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n});\n</script>\n</head>\n<body>\n<div id=\"container\">\n\t<div id=\"header\">\n\t\t<h1>TiddlySpace Applications</h1>\n\t</div>\n\t<div class=\"main section\">\n\t\t<p>HTML tiddlers tagged app.</p>\n\t\t<table id=\"apps\"></table>\n\t</div>\n</div>\n</body>\n</html>", "title": "Applications", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists"], "revision": 454867}, {"creator": "optimusprime", "fields": {"_hash": "45fdbef0f9c0c88653f1b5dd6f5f2d6162c43795"}, "created": "20110914135304", "recipe": "gadabout_private", "modified": "20110915122649", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/manifest.mf", "bag": "takenote_public", "text": "CACHE MANIFEST\n# version 0.6.3\n\nCACHE:\n/takenote\n/dashboard\n/bags/common/tiddlers/jquery-ui.custom.css\n/bags/common/tiddlers/jquery-ui.custom.js\n/notabene.css\n/notabene.js\n/bags/common/tiddlers/jquery-json.js\n/bags/common/tiddlers/jquery.js\n/bags/tiddlyspace/tiddlers/chrjs\n/bags/common/tiddlers/chrjs-store.js\n/touchicon_takenote.png\n/bags/common/tiddlers/cancelTiddler.png\n/bags/common/tiddlers/saveTiddler.png\n/bags/common/tiddlers/deleteTiddler.png\n/bags/common/tiddlers/HtmlBackground\n/bags/common/tiddlers/icon-search.png\n/bags/common/tiddlers/icon-incomplete.png\n/bags/common/tiddlers/icon-recent.png\n/bags/common/tiddlers/bookmark_bubble.js\nNETWORK:\n*\n", "title": "manifest.mf", "permissions": ["read", "write", "create", "delete"], "modifier": "optimusprime", "type": "text/cache-manifest", "tags": [], "revision": 403050}, {"creator": "jon", "fields": {"geo.lat": "51.1271875", "_title_validated": "yes", "_title_set": "yes", "geo.long": "0.2605954", "_hash": "a94a8fe5ccb19ba61c4c0873d391e987982fbbd3", "_modified": "2011-09-15T07:11:18.112Z", "_created": "2011-09-15T07:11:10.643Z"}, "created": "20110915071118", "recipe": "gadabout_private", "modified": "20110915071118", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/hello%20worldtest", "bag": "takenote_public", "text": "test", "title": "hello worldtest", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 402945}, {"creator": "jon", "fields": {"_title_validated": "yes", "_created": "2011-09-14T18:30:01.646Z", "_title_set": "yes", "_hash": "a94a8fe5ccb19ba61c4c0873d391e987982fbbd3", "_modified": "2011-09-14T18:30:05.365Z"}, "created": "20110914183010", "recipe": "gadabout_private", "modified": "20110914183010", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/hello%20world", "bag": "takenote_public", "text": "test", "title": "hello world", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 402944}, {"creator": "jon", "fields": {"_hash": "378e7c4224d9b9ed97947eefce1fab45a0a71696", "tiddlyspaceinit_version": "0.6"}, "created": "20110914182131", "recipe": "gadabout_private", "modified": "20110914182131", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/takenoteSetupFlag", "bag": "takenote_public", "text": "@@Please do not modify this tiddler; it was created automatically upon space creation.@@", "title": "takenoteSetupFlag", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludePublisher", "excludeSearch"], "revision": 403173}, {"creator": "jon", "fields": {"_hash": "5b293d4fc34641d5ef4d173f8f8afba69446a6bf", "summary": "Customise your space's SiteTitle, SiteIcon and SiteInfo"}, "created": "20110722150138", "recipe": "gadabout_private", "modified": "20110913094431", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/customise", "bag": "apps_public", "text": "<html>\n<head>\n<title>Customise your space</title>\n<style type=\"text/css\">\ninput,\ntextarea {\n\tborder: solid 1px #00A800;\n\tfont-family: Georgia;\n\tline-height: 1.3em;\n\tfont-size: 0.8em;\n\tpadding: 8px;\n}\n\ntextarea {\n\twidth: 450px;\n\theight: 400px;\n}\n\ntextarea.error,\ninput.error {\n\tborder: solid 1px red;\n}\n\ntextarea.saving,\ninput.saving {\n\tborder: solid 1px yellow;\n}\n\n#text-html dt {\n\tfloat: none;\n}\n</style>\n<link href=\"/bags/common/tiddlers/profile.css\" type='text/css' rel='stylesheet' >\n<script type='text/javascript' src='http://tiddlyspace.com/bags/ts_public/tiddlers/jquery.min.js'></script>\n<script type='text/javascript' src='http://tiddlyspace.com/bags/ts_public/tiddlers/jquery-json.min.js'></script>\n<script type='text/javascript' src='/TiddlySpaceCSRF'></script>\n<script type='text/javascript' src='/jquery.form.js'></script>\n<script type='text/javascript' src='/backstage.js'></script>\n<script type='text/javascript' src='http://tiddlyspace.com/bags/tiddlyspace/tiddlers/chrjs'></script>\n<script type=\"text/javascript\">\n$(document).ready(function() {\n\tvar space = window.location.hostname.split(\".\")[0];\n\tvar recipe = new tiddlyweb.Recipe(space + \"_private\", \"/\");\n\tvar siteTitle = new tiddlyweb.Tiddler(\"SiteTitle\", recipe);\n\tvar siteInfo = new tiddlyweb.Tiddler(\"SiteInfo\", recipe);\n\tvar csrf = window.getCSRFToken();\n\n\tvar progress = 0;\n\tvar complete = function() {\n\t\tprogress += 1;\n\t\tif(progress == 2) {\n\t\t\t$(\".settings\").show();\n\t\t}\n\t};\n\n\tsiteTitle.get(function(st_tid) {\n\t\t$(\"#edit-sitetitle\").val(st_tid.text);\n\t\tcomplete();\n\t}, function(xhr) {\n\t\tif(xhr.status !== 404) {\n\t\t\twindow.location.href = \"/challenge?tiddlyweb_redirect=%2Fconfigure\";\n\t\t} else {\n\t\t\tcomplete();\n\t\t}\n\t});\n\n\tsiteInfo.get(function(si_tid) {\n\t\t$(\"#edit-siteinfo\").val(si_tid.text);\n\t\tcomplete();\n\t}, function(xhr) {\n\t\tif(xhr.status !== 404) {\n\t\t\twindow.location.href = \"/challenge?tiddlyweb_redirect=%2Fconfigure\";\n\t\t} else {\n\t\t\tcomplete();\n\t\t}\n\t});\n\t\n\tvar form = $('#edit-siteicon')[0];\n\t$(form).attr(\"action\", \"/bags/\" + space + \"_public/tiddlers?csrf_token=\" + csrf + \"&redirect=/tiddlers\");\n\t$(form).ajaxForm({\n\t\tbeforeSubmit: function() {\n\t\t\t$(\"#edit-siteicon\").addClass(\"saving\");\n\t\t},\n\t\tsuccess: function() { \n\t\t\t$('#edit-siteicon').removeClass(\"saving error\");\n\t\t\t$(\"#edit-siteicon img\").attr(\"src\", \"\");\n\t\t\t$(\"#edit-siteicon img\").attr(\"src\", \"/SiteIcon?r=\" + Math.random()); // refresh icon\n\t\t},\n\t\terror: function() {\n\t\t\t$(\"#edit-siteicon\").addClass(\"error\");\n\t\t}\n\t});\n\t\t\n\t$(\"#edit-sitetitle\").blur(function(ev) {\n\t\t$(ev.target).addClass(\"saving\");\n\t\tsiteTitle.text = $(ev.target).val();\n\t\tsiteTitle.put(function() {\n\t\t\t$(ev.target).removeClass(\"saving error\");\n\t\t}, function() {\n\t\t\t$(ev.target).addClass(\"error\");\n\t\t})\n\t});\n\n\t$(\"#edit-siteinfo\").blur(function(ev) {\n\t\t$(ev.target).addClass(\"saving\");\n\t\tsiteInfo.text = $(ev.target).val();\n\t\tsiteInfo.put(function() {\n\t\t\t$(ev.target).removeClass(\"saving error\");\n\t\t}, function() {\n\t\t\t$(ev.target).addClass(\"error\");\n\t\t})\n\t});\n});\n</script>\n</head>\n<body>\n<div id=\"container\">\n\t<div style=\"display:none;\" class=\"settings\">\n\t\t<div id=\"header\">\n\t\t\t<h1>Customise your space</h1>\n\t\t</div>\n\t\t<p>Tell us a bit about your space!</p>\n\t\t<div id=\"text-html\">\n\t\t\t<dl>\n\t\t\t\t<dt>SiteIcon:</dt><dd>\n\t\t\t\t\t<form id=\"edit-siteicon\" method=\"POST\" enctype=\"multipart/form-data\">\n\t\t\t\t\t\t<img src=\"/SiteIcon\" width=\"48\" height=\"48\" />\n\t\t\t\t\t\t<input type=\"hidden\" name=\"title\" value=\"SiteIcon\" />\n\t\t\t\t\t\t<input type=\"hidden\" name=\"csrf_token\" class=\"csrf\" />\n\t\t\t\t\t\t<input type=\"file\" name=\"file\" />\n\t\t\t\t\t\t<input type=\"submit\" value=\"upload\" />\n\t\t\t\t\t</form>\n\t\t\t\t</dd>\n\t\t\t\t<dt>Title:</dt><dd><input type=\"text\" id=\"edit-sitetitle\" /></dd><dt>Description:</dt><dd><textarea id=\"edit-siteinfo\"></textarea></dd>\n\t\t\t</dl>\n\t\t</div>\n\t</div>\n</div>\n</body>\n</html>", "title": "customise", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists"], "revision": 455156}, {"creator": "jon", "fields": {"created": "2011-07-28T14:30:03.066Z", "geo.lat": "51.498053", "modified": "2011-08-07T11:06:38.775Z", "_title_validated": "yes", "_title_set": "yes", "geo.long": "-0.1340638", "_hash": "23a812be7e12645116790c969f0963938b9bf6e6"}, "created": "20110807110641", "recipe": "gadabout_private", "modified": "20110912185532", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Crazy%20September", "bag": "gadabout_public", "text": "A work in progress outlining a period of 15 days where I will visit France, San Francisco and Edinburgh back to back. Owch.\n\n* 15 Sept - prepare Edinburgh bag and dump in office for collection 30th Sept.\n* 16 Sept - bags packed for France/SF and in flat.\n* 17 sept, saturday Folkestone to Calais - Check-in closes  07:20 \n*  18 Calais - Folkestone - check in closes 18:12, arrive back in UK in 18:17\n\n* 19 flight to [[SFO|San Francisco, USA]] check in open 10:30 leaves at 13:00 arriving 3:30pm same day. Leave the big TW around 08:00 arriving 10:04. Buy an anytime travelcard ticket at the station. Should be about \u00a346 total.\n\n* 20 Lots of choices... Noisebridge, art at SFMOMA, Computer History Museum\n* 21 BOOKED drive to yosemite via a diner, stay night at [[Housekeeping Camp|http://www.yosemitepark.com/Accommodations_HousekeepingCamp_LodgingDetails.aspx]] making a fire and toasting some marshmallows and avoiding bears\n* 22 BOOKED hike yosemite, - potential hikes include [[panorama trail (long)|http://yosemitefun.com/panorama_trail.htm]] or [[vernal falls (short/crowded)|http://yosemitefun.com/yosemite_vernal_falls_trail.htm]] and stay another night\n* 23 BOOKED Leave Yosemite early morning\n\n* 24 Blues festival this weekend also [[bike / beer festival|http://www.sfbike.org/?fat]]\n* 25  [[scavenger hunt|http://www.pdxhunt.com/sanfrancisco.htm]]\n\n*  26 Wine tour (TBC)\n*  27 Kabuki baths in japan town during the day - also visit tea garden, evening watching [[San Francisco Giants vs Colorado rockies|http://www.stubhub.com/san-francisco-giants-tickets/giants-vs-rockies-9-27-2011-1008719/]]\n* 28 Free day\n*  29 leaving 7:30pm :(\n*  30 arriving 13:15 in London. Pick up Edinburgh train ticket. You take it at 11:50pm from london euston 23:50 - 07:15 - edinburgh waverley\n\n*  1 oct: Stag activities\n* 2nd 14:35 flight to London Stansted London, picked up my mum for dinner / sleep?\n* 3rd breathe.\n\nThings that would have been cool...\nhttp://en.wikipedia.org/wiki/Spadena_House\n\nThings that could be cool..\nhttp://www.sixflags.com/discoverykingdom/index.aspx\n", "title": "Crazy September", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75571}, {"creator": "jon", "fields": {"_hash": "d70a86e8e0a1f65636fdd42b1f6111405a7c29a3"}, "created": "20110714140828", "recipe": "gadabout_private", "modified": "20110912164533", "uri": "http://takenote.tiddlyspace.com/bags/takenote_public/tiddlers/install", "bag": "takenote_public", "text": "<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>Install takenote!</title>\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/notabene.css\" />\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/jquery-ui.css\">\n\t\t<link rel=\"apple-touch-icon-precomposed\" href=\"/touchicon.png\"/>\n\t\t<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=0,initial-scale=1\">\n\t\t<style type=\"text/css\">\n@media screen and (orientation:portrait) and (min-width: 320px) {\n.gitbanner {\ndisplay: none;\n}\n}\n\n.toolpanel input,\n.toolpanel h2,\n.toolpanel ul {\nmargin-left: 40px;\n}\n\n.section.sectionUser {\n\tbackground-image: url(/icon-user.png);\n\tbackground-position: 10px 15px;\n\tbackground-repeat: no-repeat;\n}\n\n.section.sectionOnoffline {\n\tbackground-image: url(/icon-notes.png);\n\tbackground-position: 10px 15px;\n\tbackground-repeat: no-repeat;\n}\n.toolpanel .subsection {\nmargin-left: 40px;\n}\n\t\t\t.ts-loggedin .newOnly {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t#register-takenote input {\n\t\t\t\tborder: 1px solid #CCC;\n\t\t\t\tborder-bottom-left-radius: 5px 5px;\n\t\t\t\tborder-bottom-right-radius: 5px 5px;\n\t\t\t\tborder-top-left-radius: 5px 5px;\n\t\t\t\tborder-top-right-radius: 5px 5px;\n\t\t\t\tfont-size: 18px;\n\t\t\t\theight: 24px;\n\t\t\t\twidth: 160px;\n\t\t\t\tmargin-left: 0px;\n\t\t\t\tbackground-color: whiteSmoke;\n\t\t\t}\n\t\t\t#register-takenote input:hover {\n\t\t\t\tbackground-color: #EBEBEB;\n\t\t\t}\n\t\t\t.registerCol {\n\t\t\t\ttext-align: right;\n\t\t\t}\n\t\t</style>\n\t</head>\n\t<body>\n\t\t<a class=\"gitbanner\" href=\"http://github.com/jdlrobson/notabene\"><img style=\"position: absolute; top: 0; left: 0; border: 0;\" src=\"https://a248.e.akamai.net/assets.github.com/img/edc6dae7a1079163caf7f17c60495bbb6d027c93/687474703a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f6c6566745f677265656e5f3030373230302e706e67\" alt=\"Fork me on GitHub\"></a>\n\t\t<div class=\"takenotedashboard\">\n\t\t\t<div class=\"header\">\n\t\t\t\t<div class=\"siteheading\">\n\t\t\t\t\t<h1>takenote</h1>\n\t\t\t\t</div>\n\t\t\t\t<div class='siteicon'></div>\n\t\t\t</div>\n\t\t\t<div class=\"toolpanel viewer\">\n<div class='section sectionOnoffline'>\n\t\t\t\t\t<h2>notes online, notes offline</h2>\n\t\t\t\t<p class=\"subsection\">\n\t\t\t\t\tTaking notes on paper? That's <a href=\"http://en.wikipedia.org/wiki/Paper\">so 200BC</a>.\n\t\t\t\t\tStart to take notes on the web instead. Take notes with links. Take notes with tags. Take notes with your location. Take notes without the internet (once installed it works offline).\n\t\t\t\t\tNeed more convincing? <a href=\"/takenote\">give it a spin!</a>. Take note, that you can't save notes online with the demo!\n\t\t\t\t</p>\n</div>\n\t\t\t\t<div class='section newOnly sectionUser'>\n\t\t\t\t\t<h2>New users</h2>\n\t\t\t\t\t<div class=\"subsection\">Itching to update your note taking? Simply sign up below</div>\n<p>&nbsp;</p>\n\t\t\t\t\t<form class=\"subsection\" id=\"register-takenote\">\n\t\t\t\t\t\t<table>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t\t<div>store my notes in</div>\n\t\t\t\t\t\t\t\t\t<input type=\"text\" name=\"username\" placeholder=\"<space>\" />.tiddlyspace.com\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t<td><input type=\"password\" name=\"password\" placeholder=\"enter password\" /></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td><input type=\"password\" name=\"password_confirm\" placeholder=\"enter password again\" /></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t\t<td class=\"registerCol\">\n\t\t\t\t\t\t\t\t\t<input type='submit' value='register' />\n\t\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</table>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n<div class='section  sectionUser'>\n\t\t\t\t<h2>Existing users</h2>\n\t\t\t\t<div class=\"subsection\"><form class=\"registration\"></form></div>\n\t\t\t\t<p class=\"subsection\"><a href=\"http://tiddlyspace.com\">Existing users</a> should <a href=\"http://docs.tiddlyspace.com/How%20do%20I%20include%2Fexclude%20spaces%3F\">include</a> the takenote space into the space they would like to use takenote.</p>\n</div>\n\t\t</div>\n\t\t<script src=\"/bags/common/tiddlers/jquery.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs.space'></script>\n\t\t<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs.users'></script>\n\t\t<script src=\"/bags/common/tiddlers/chrjs-store.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/jquery-json.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/common/tiddlers/ts.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script type=\"text/javascript\">\n\t\t\tts.init(function() {\n\t\t\t\tvar json = ['{\"fields\":{\"created\":\"2011-07-14T14:43:46.455Z\",',\n\t\t\t\t\t'\"_title_set\":\"yes\",\"modified\":\"2011-07-15T07:17:24.946Z\",',\n\t\t\t\t\t'\"_title_validated\":\"yes\"},\"text\":\"',\n\t\t\t\t\t\"Thanks for giving TakeNote a spin. Type away in this box.\\u000aRefresh your browser and your note\",\n\t\t\t\t\t\" and all the things you've typed will still be here!\\u000a\\u000a\",\n\t\t\t\t\t'TakeNote supports [[TiddlyWiki wiki syntax|http://tiddlywiki.org/TiddlyWiki%20Markup]] meaning',\n\t\t\t\t\t\" you can do things such as [[links]].\\u000a\\u000aThere's a lot more to it, and most of the syntax is quite\",\n\t\t\t\t\t'logical.\\u000a\\u000a!Use exclamation marks for headings\\u000a* lists make lots of sense',\n\t\t\t\t\t' - just use an asterisk',\n\t\t\t\t\t\"\\u000a* things like ''bold'' and //italic// are easy to remember\",\n\t\t\t\t\t'\\u000a\\u000aThere is also markdown support - but this is currently not available (but could be with enough',\n\t\t\t\t\t' demand.)\\u000a\\u000aFed up of seeing this message? Simply hit delete (the trash button) and it will disappear. ',\n\t\t\t\t\t'Want to save it? Hit save (the tick button).\\u000a\\u000aEnjoy!\\u000a[[jon|http://jonrobson.me.uk]]\\u000a\"}'].join(\"\");\n\t\t\t\tvar id = \"takenote_public/Welcome to TakeNote\";\n\t\t\t\tvar item = localStorage.getItem(id);\n\t\t\t\tif(!item) {\n\t\t\t\t\tlocalStorage.setItem(id, json);\n\t\t\t\t}\n\t\t\t\tts.forms.register($(\"#register-takenote\")[0], {\n\t\t\t\t\tsuccess: function(space) {\n\t\t\t\t\t\t$.ajax({ \n\t\t\t\t\t\t\turl: \"/spaces/\" + space.name,\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tcontentType: \"application/json\",\n\t\t\t\t\t\t\tdata: jQuery.toJSON({\n\t\t\t\t\t\t\t\t\"subscriptions\": [\"takenote\", \"takenote-theme\"]\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\t\twindow.location = ts.getHost(space.name) + \"/config\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t</script>\n<script type=\"text/javascript\">\n\n  var _gaq = _gaq || [];\n  _gaq.push(['_setAccount', 'UA-7040645-6']);\n  _gaq.push(['_trackPageview']);\n\n  (function() {\n    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;\n    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';\n    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);\n  })();\n\n</script>\n\t</body>\n</html>\n", "title": "install", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists", "excludeSearch", "takenote"], "revision": 403027}, {"creator": "jon", "fields": {"_hash": "b22619215293fa09ec3140465559e33713fb9d12", "summary": ""}, "created": "20110830104421", "recipe": "gadabout_private", "modified": "20110830104426", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/GettingStarted", "bag": "apps_public", "text": "TiddlySpace applications are now ready to [[launch|/Applications]].\n\n", "title": "GettingStarted", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeMissing", "excludeSearch"], "revision": 454872}, {"creator": "jon", "fields": {"_hash": "767272f7dd163eca20975db082d886c1e8474b9b", "summary": ""}, "created": "20110830103217", "recipe": "gadabout_private", "modified": "20110830103217", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/ts.css", "bag": "apps_public", "text": ".ts-loading {\n\tbackground-image: url(/ajax-loader.gif);\n\tbackground-repeat: no-repeat;\n\theight: 30px;\n\twidth: 30px;\n}", "title": "ts.css", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/css", "tags": ["excludeLists"], "revision": 455193}, {"creator": "jon", "fields": {"_hash": "eb63775f6626b2e69fea9459529a3825b5fd26f5", "summary": ""}, "created": "20110830103215", "recipe": "gadabout_private", "modified": "20110830103215", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/ajax-loader.gif", "bag": "apps_public", "text": "R0lGODlhEAAQAPIAAAAAAP///zw8PLy8vP///5ycnHx8fGxsbCH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQJCgAAACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkECQoAAAAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkECQoAAAAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkECQoAAAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQJCgAAACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQJCgAAACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAkKAAAALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==", "title": "ajax-loader.gif", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/gif", "tags": ["excludeLists"], "revision": 455135}, {"creator": "jon", "fields": {"_hash": "fa2435adb1b10d813e367d62832bf5eb0bd7688e", "summary": ""}, "created": "20110619155244", "recipe": "gadabout_private", "modified": "20110826074450", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/travelblog.js", "bag": "travelblog_public", "text": "// version 0.2.9\n// https://raw.github.com/jdlrobson/gadabout/master/src/travelblog.js\n\nvar cache = {};\nvar space = document.location.host.split(\".\")[0];\nvar locale = {\n\tplaceholdertext: \"Tell us all about this place!\",\n\tplaceholdertitle: \"name of place\",\n\tnointernet: \"No internet connection!\",\n\tsharelinkprefix: \"Saved successfully. Share it: \",\n\tconfirmdelete: \"Delete this note forever? Yes forever is a scary word!\",\n\tcreatelinktext: \"Write new travel note with this name.\",\n\treload: \"Please try reloading this page.\"\n}\nvar map, markers, zoom, connection_status = true;\n\nvar activeTiddler = {}, position = {};\n\nfunction getBag() {\n\treturn window.location.host.split(\".\")[0] + \"_public\";\n}\n\nfunction getResource(tiddler) {\n\treturn \"/recipes/\" + getBag() + \"/tiddlers/\" + encodeURIComponent(tiddler.title);\n}\n\nfunction storeEdit() {\n\tvar tiddler = getTiddler();\n\tif(!tiddler || !tiddler.title) return;\n\n\t$(\"#publish\").attr(\"disabled\", true);\n\tvar url = getResource(tiddler);\n\tif(tiddler) {\n\t\t$.ajax({ type: \"PUT\",\n\t\t\tcontentType: \"application/json\",\n\t\t\turl: url,\n\t\t\tdata: JSON.stringify(tiddler),\n\t\t\tsuccess: function(r) {\n\t\t\t\twindow.location.pathname = url;\n\t\t\t\tclearCache();\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\t$(\"#publish\").attr(\"disabled\", false);\n\t\t\t\t$(\"<div class='error' />\").text(locale.nointernet).appendTo(\"#window-edit\");\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction loadTiddler(callback) {\n\tvar blankTiddler = { title: null, text: null, fields: {} };\n\tvar tid = localStorage.getItem(\"currentTiddler\");\n\tvar hash = window.location.hash;\n\tvar url = hash.substr(2);\n\tif(url) {\n\t\t$.ajax({ url: url, dataType: \"json\",\n\t\t\tsuccess: function(tiddler) {\n\t\t\t\tactiveTiddler = tiddler;\n\t\t\t\tcallback(tiddler);\n\t\t\t},\n\t\t\terror: function() {\n\t\t\t\tvar title = url.split(\"/\");\n\t\t\t\ttitle = title[title.length - 1];\n\t\t\t\tactiveTiddler = blankTiddler;\n\t\t\t\tif(title) {\n\t\t\t\t\tactiveTiddler.title = decodeURIComponent(title);\n\t\t\t\t}\n\t\t\t\tcallback();\n\t\t\t}\n\t\t})\n\t} else {\n\t\tactiveTiddler = tid ? JSON.parse(tid) : blankTiddler;\n\t\tcallback();\n\t}\n}\nfunction getTiddler() {\n\tvar tiddler = activeTiddler;\n\tif(typeof(position.latitude) != \"undefined\") {\n\t\ttiddler.fields['geo.lat'] = position.latitude;\n\t}\n\tif(typeof(position.longitude) != \"undefined\") {\n\t\ttiddler.fields['geo.long'] = position.longitude;\n\t}\n\treturn tiddler;\n}\n\nfunction cacheEdit() {\n\tvar tiddler = getTiddler();\n\tvar json = JSON.stringify(tiddler);\n\tlocalStorage.setItem(\"currentTiddler\", json);\n}\nfunction clearCache() {\n\tlocalStorage.removeItem(\"currentTiddler\");\n}\n\nfunction showPublishButton(area) {\n\tif($(\"#publish\").length === 0) {\n\t\t$(\"<button />\").attr(\"id\", \"publish\").click(function(ev) {\n\t\t\t\tstoreEdit();\n\t\t\t}).text(\"Publish to web.\").appendTo(area);\n\t}\n}\n\nfunction makeTextInput(area) {\n\tvar tiddler = getTiddler();\n\tvar allowSave = function(ev) {\n\t\tactiveTiddler.text = $(ev.target).val();\n\t\tif(connection_status) {\n\t\t\tshowPublishButton(area);\n\t\t}\n\t\tcacheEdit();\n\t};\n\n\t$(\"<textarea id='edit-text' />\").attr(\"placeholder\", locale.placeholdertext).change(allowSave).\n\t\tblur(allowSave).appendTo(area);\n\tif(tiddler) {\n\t\t$(\"#edit-text\").text(tiddler.text)\n\t}\n}\n\nfunction showCurrentPosition() {\n\tif(typeof(position.latitude) != \"undefined\" && typeof(position.longitude) != \"undefined\") {\n\t\tvar center = drawMarker(position.longitude, position.latitude, null);\n\t\tmap.setCenter(center, zoom);\n\t}\n}\n\nfunction makeTitleInput(area) {\n\tvar tiddler = getTiddler();\n\tvar heading = $(\"<h2>Place: </h2>\").appendTo(area);\n\t$(\"<input id='edit-title' />\").blur(function(ev) {\n\t\t\tvar val = $(ev.target).val();\n\t\t\tsetTitle(val);\n\t\t}).attr(\"placeholder\", locale.placeholdertitle).appendTo(heading);\n\tfunction setTitle(val) {\n\t\tif(val) {\n\t\t\tcacheEdit();\n\t\t\t$(\"#edit-title\").parent().empty().text(val);\n\t\t\tactiveTiddler.title = val;\n\t\t\tvar tiddler = getTiddler();\n\t\t\tif(!position.latitude) {\n\t\t\t\t$(\"#edit-location .locationInput\").val(val);\n\t\t\t\t$(\"#edit-location .find\").click();\n\t\t\t}\n\t\t}\n\t\t$(\"#edit-text\").show();\n\t}\n\n\tvar geohandler = function(r) {\n\t\tposition.latitude = r.lngLat.lat;\n\t\tposition.longitude = r.lngLat.lng;\n\t\tshowCurrentPosition();\n\t\tcacheEdit();\n\t};\n\n\t// make it find the location lat and lng\n\t$(\"<div id='edit-location' />\").geoSearch({\n\t\t\tservice: \"nominatim\", handler: geohandler\n\t\t}).appendTo(area);\n\t$(\"#edit-location input\").hide();\n\n\t$(\"<button class='geobutton' />\").text(\"Associate this note with a location\").click(function(ev) {\n\t\t\t$(\"#edit-location-2\").toggle();\n\t\t}).appendTo(area);\n\t$(\"<div id='edit-location-2' style='display: none;' />\").geoSearch({\n\t\t\tservice: \"nominatim\", handler: geohandler\n\t\t}).appendTo(area);\n\n\tmakeTextInput(area);\n\t$(\"#edit-text\").hide();\n\n\t// load an existing title if it exists\n\tif(tiddler) {\n\t\tsetTitle(tiddler.title);\n\t}\n}\n\nfunction addDeleteButton(area) {\n\tvar toolbar = $(\"<div id='edit-toolbar' />\").appendTo(area)[0];\n\tvar success = function(ev) {\n\t\t$(\"#window-edit\").empty();\n\t\tactiveTiddler = null;\n\t\twindow.location.hash = \"\"; // reset hash so it doesnt reload\n\t\tclearCache();\n\t\tmakeEditorArea();\n\t}\n\t$(\"<button id='deleteButton' />\").text(\"delete\").appendTo(toolbar).click(function(ev) {\n\t\tif(confirm(locale.confirmdelete)) {\n\t\t\t$(ev.target).attr(\"disabled\", true);\n\t\t\t$.ajax({ url: getResource(activeTiddler), type: \"delete\",\n\t\t\t\tsuccess: function(r) {\n\t\t\t\t\tsuccess(ev);\n\t\t\t\t},\n\t\t\t\terror: function(ctx) {\n\t\t\t\t\tif(ctx.status === 404) {\n\t\t\t\t\t\tsuccess(ev);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$(ev.target).attr(\"disabled\", false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n\t$(\"<button id='cancelButton'/>\").text(\"cancel\").click(function(ev) {\n\t\tif(confirm(\"Lose these unsaved changes?\")) {\n\t\t\tsuccess(ev);\n\t\t}\n\t}).appendTo(toolbar);\n}\n\nfunction makeEditorArea() {\n\tloadTiddler(function(tiddler) {\n\t\tconstructMenu(false);\n\t\tif(tiddler) {\n\t\t\tvar lat = tiddler.fields[\"geo.lat\"], lng = tiddler.fields[\"geo.long\"];\n\t\t\tif(typeof(lng) != \"undefined\") {\n\t\t\t\tposition.longitude = lng;\n\t\t\t}\n\t\t\tif(typeof(lat) != \"undefined\") {\n\t\t\t\tposition.latitude = lat;\n\t\t\t}\n\t\t}\n\t\tvar area = $(\"#window-edit\")[0];\n\t\taddDeleteButton(area);\n\t\tmakeTitleInput(area);\n\t\tmap = createMap(area);\n\t\tmarkers = new OpenLayers.Layer.Markers( \"Markers\" );\n\t\tshowCurrentPosition();\n\t});\n}\n\nfunction makeTiddlyLink(el) {\n\t$(el).click(clickTiddlyLink);\n}\n\nfunction isTiddlyLink(el) {\n\tvar href = $(el).attr(\"href\") || \"\";\n\tvar hasClass = $(el).hasClass(\"externalLink\");\n\tvar hostLocation = window.location.protocol + \"//\" + window.location.host;\n\t// check for externalLink class\n\tif(hasClass && href.indexOf(\"#\") === -1 &&\n\t\t(href[0] === \"/\" || href.indexOf(\"/\") === -1)) {\n\t\thasClass = false;\n\t} else if(hasClass && href.indexOf(\"#\") === -1 && href.indexOf(hostLocation) === 0) {\n\t\thref = href.substr(hostLocation.length, href.length);\n\t\thasClass = false;\n\t}\n\tvar notTiddlyLink = $(el).hasClass(\"notTiddlyLink\");\n\treturn !notTiddlyLink && !hasClass ? true : false;\n}\n\nfunction clickTiddlyLink(ev)  {\n\tvar href = $(ev.target).attr(\"href\");\n\tif(isTiddlyLink(ev.target)) {\n\t\tprintUrl(href);\n\t\tev.preventDefault();\n\t\treturn false;\n\t}\n}\n\n$(\"#window a\").live(\"click\", clickTiddlyLink);\n\nfunction createMap(maparea) {\n\tif($(\"#mapdiv\").length === 0) {\n\t\t$(\"<div id='mapdiv' />\").appendTo(maparea);\n\t}\n\tOpenLayers.ImgPath = \"/\";\n\tmap = new OpenLayers.Map(\"mapdiv\", { theme: null });\n\tmap.addLayer(new OpenLayers.Layer.OSM()); \n\tzoom = 8;\n\treturn map;\n}\n\nfunction drawMarker(lng, lat, title) {\n\tvar lonLat = new OpenLayers.LonLat(lng, lat).transform(\n\t\t\tnew OpenLayers.Projection(\"EPSG:4326\"), // transform from WGS 1984\n\t\t\tmap.getProjectionObject() // to Spherical Mercator Projection\n\t\t);\n\tvar size = new OpenLayers.Size(8, 8);\n\tvar offset = new OpenLayers.Pixel(-(size.w/2), -size.h);\n\tvar icon = new OpenLayers.Icon(\"/marker.png\", size, offset);\n\tvar marker = new OpenLayers.Marker(lonLat, icon);\n\tif(title) {\n\t\tmarker.events.register('dblclick', marker, function(ev) { \n\t\t\tprintUrl(\"/\" + title);\n\t\t\tOpenLayers.Event.stop(ev);\n\t\t});\n\t\tvar popup;\n\t\tmarker.events.register('mouseover', marker, function(ev) {\n\t\t\tpopup = new OpenLayers.Popup(null,\n\t\t\t\tlonLat,\n\t\t\t\tnew OpenLayers.Size(200,70),\n\t\t\t\t\"<p>\" + title + \"</p><p>(double click to open)</p>\",\n\t\t\t\ttrue);\n\t\t\tmap.addPopup(popup);\n\t\t});\n\t\tmarker.events.register('mouseout', marker, function(ev) {\n\t\t\tpopup.destroy();\n\t\t});\n\t}\n\tmarkers.addMarker(marker);\n\treturn lonLat;\n};\n\nfunction printMap(url) {\n\tvar lng = parseFloat($(\".meta .geo .longitude\").text(), 10);\n\tvar lat = parseFloat($(\".meta .geo .latitude\").text(), 10);\n\n\tvar place = $(\"#article\")[0];\n\tvar maparea = $(\"<div />\").addClass(\"mapArea\").prependTo(place)[0];\n\t$('<div class=\"end\" />').appendTo(place);\n\n\tmap = createMap(maparea);\n\tmarkers = new OpenLayers.Layer.Markers( \"Markers\" );\n\tmap.addLayer(markers);\n\n\tvar tiddlersToMarkers = function(tiddlers) {\n\t\tvar lat1, lat2, lon1, lon2;\n\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\tvar tiddler = tiddlers[i];\n\t\t\tvar fields = tiddler.fields;\n\t\t\tvar lat = parseFloat(fields['geo.lat'], 10);\n\t\t\tvar lng = parseFloat(fields['geo.long'], 10);\n\t\t\tif(lat && lng) {\n\t\t\t\tlat1 = typeof(lat1) == \"undefined\" || lat < lat1 ? lat : lat1;\n\t\t\t\tlat2 = typeof(lat2) == \"undefined\" || lat > lat2 ? lat : lat2;\n\t\t\t\tlon1 = typeof(lon1) == \"undefined\" || lng < lon1 ? lng : lon1;\n\t\t\t\tlon2 = typeof(lon2) == \"undefined\" || lng > lon2 ? lng : lon2;\n\t\t\t\tdrawMarker(lng, lat, tiddler.title);\n\t\t\t}\n\t\t}\n\t\treturn [lon1 || -180, lat1 || -90, lon2 || 180, lat2 || 90];\n\t};\n\n\tvar center;\n\tif(lng && lat) {\n\t\tcenter = drawMarker(lng, lat, null);\n\t\tmap.setCenter(center, zoom);\n\t\tvar searchurl = \"/search?q=near:\"+ parseInt(lat,10) +\n\t\t\t\",\"+parseInt(lng,10) +\",1000000\";\n\t\tloadUrl(searchurl, function(tiddlers) {\n\t\t\t\ttiddlersToMarkers(tiddlers);\n\t\t\t}, { dataType: \"json\" });\n\t}\n\t// add markers to map from the links in this tiddler\n\tvar titles = [];\n\t$(\"#window .activeTiddlyLink\").each(function(i, el) {\n\t\ttitles.push(\"title:\"+encodeURI($(el).text()))\n\t});\n\tif(titles.length > 0) {\n\t\tloadUrl(window.location.hash.substr(2),\n\t\t\tfunction(tiddlers) {\n\t\t\t\tvar bb = tiddlersToMarkers(tiddlers);\n\t\t\t\tif(!center) {\n\t\t\t\t\tvar lo = ((bb[2] - bb[0]) / 2) + bb[0];\n\t\t\t\t\tvar la = ((bb[3] - bb[1]) / 2) + bb[1];\n\t\t\t\t\tcenter = new OpenLayers.LonLat(lo, la).transform(\n\t\t\t\t\t\tnew OpenLayers.Projection(\"EPSG:4326\"), // transform from WGS 1984\n\t\t\t\t\t\tmap.getProjectionObject() // to Spherical Mercator Projection\n\t\t\t\t\t);\n\t\t\t\t\tmap.setCenter(center, 1);\n\t\t\t\t}\n\t\t\t}, { dataType: \"json\" });\n\t}\n}\nfunction cleanupHTMLSerialization() {\n\tvar links = $(\"#window a\");\n\tvar loaded = 0;\n\tlinks.each(function(i, el) {\n\t\tif(isTiddlyLink(el)) {\n\t\t\tvar url = $(el).attr(\"href\");\n\t\t\t$(el).addClass(\"activeTiddlyLink\");\n\t\t\tif(loaded < 10) { // pre load first 10 links for SPEED\n\t\t\t\tloadUrl(url);\n\t\t\t\tloaded += 1;\n\t\t\t}\n\t\t}\n\t\t// remove bad links\n\t\tvar text = $(el).text();\n\t\tif([\"SiteTitle\", \"viewer\", \"editor\", \"ServerSettings\",\n\t\t\t\"SiteIcon\", space + \"SetupFlag\" ].indexOf(text) > -1) {\n\t\t\t$(el).parent(\"li\").remove();\n\t\t}\n\t});\n\tvar tiddlersView = $(\"#tiddlers\").length > 0;\n\tif(tiddlersView) {\n\t\t$(\"#header\").html(\"<h1>All Travel Notes</h1>\");\n\t\tconstructMenu(true);\n\t} else {\n\t\tconstructMenu(false);\n\t}\n\tvar backlinks = $(\"<div id='backLinks' />\").insertAfter($(\"#header\")[0])[0];\n\tvar title = $(\"#title\").text();\n\tvar bag = $(\"#links .bag\").text();\n\tif(title && bag) {\n\t\t$.ajax({ dataType: \"json\",\n\t\t\turl: \"/bags/\" + bag + \"/tiddlers/\" + title + \"/backlinks\", // bags must be used for backlinks\n\t\t\tsuccess: function(tiddlers) {\n\t\t\t\tif(tiddlers.length > 0) {\n\t\t\t\t\tvar txt = tiddlers.length > 1 ? \"tiddlers\" : \"tiddler\";\n\t\t\t\t\t$(\"<span />\").text(tiddlers.length + \" \" + txt + \" link here: \").appendTo(backlinks);\n\t\t\t\t}\n\t\t\t\tvar list = $(\"<ul />\").appendTo(backlinks)[0]\n\t\t\t\tfor(var i = 0; i < tiddlers.length; i++) {\n\t\t\t\t\tvar tiddler = tiddlers[i];\n\t\t\t\t\tvar item = $(\"<li/>\").appendTo(list)[0];\n\t\t\t\t\t$(\"<a />\").attr(\"href\", \"/recipes/\" + tiddler.bag + \"/tiddlers/\" + tiddler.title).\n\t\t\t\t\t\ttext(tiddler.title).appendTo(item);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tvar headerLink = $(\"#header h1 a\");\n\tif(headerLink) {\n\t\t$(headerLink).removeClass(\"activeTiddlyLink\").addClass(\"notTiddlyLink\");\n\t\t$(headerLink).attr(\"href\", \"/\" + $(headerLink).text());\n\t}\n\t$(\"#links\").remove();\n}\n\nfunction constructMenu(newbutton) {\n\t$(\"#bar\").remove();\n\tvar menu = $(\"<div id='bar' />\").appendTo(\"#window\")[0];\n\t$(\"<a href='/editor' />\").addClass(\"externalLink newButton notTiddlyLink\").text(\"add note\").appendTo(menu);\n\tvar path = window.location.pathname === \"/\" ?\n\t\t\"/\" + encodeURIComponent($(\"#header h1 a\").text()) : window.location.pathname;\n\tif($(\"#tiddlertext\").length > 0) {\n\t\t$(\"<a href=\\\"/editor#\" + path + \"\\\" />\").\n\t\t\taddClass(\"externalLink editButton notTiddlyLink\").\n\t\t\ttext(\"edit note\").appendTo(menu);\n\t}\n\t$('<a href=\"/customise\">customise</a>').\n\t\taddClass(\"externalLink configureButton notTiddlyLink\").appendTo(menu);\n}\n\nfunction loadUrl(url, callback, options) {\n\tvar match = url ? url.match(/\\/tiddlers\\.form/) : false;\n\tif(match && match[0]){\n\t\tcache[url] = \"Unsupported page\";\n\t\tif(callback) {\n\t\t\tcallback(r,  textStatus, jqXHR);\n\t\t}\n\t\treturn;\n\t}\n\toptions = options || {};\n\t$(\"#createLink\").remove();\n\t$.ajax({\n\t\turl: url,\n\t\tdataType: options.dataType || \"html\",\n\t\tsuccess: function(r,  textStatus, jqXHR) {\n\t\t\tcache[url] = r;\n\t\t\tif(callback) {\n\t\t\t\tcallback(r, textStatus, jqXHR);\n\t\t\t}\n\t\t},\n\t\terror: function(jqXHR) {\n\t\t\treturn callback ? callback(false, \"\", jqXHR) : false;\n\t\t}\n\t});\n}\nfunction transformDefaultHtml(url) {\n\tcleanupHTMLSerialization();\n\tprintMap(url);\n\t$(\".meta\").remove();\n}\n\nfunction supports_history_api() {\n\treturn !!(window.history && history.pushState);\n}\n\nfunction printUrl(url) {\n\tif(!supports_history_api()){\n\t\twindow.location.href = url;\n\t\treturn;\n\t}\n\t//console.log(url);\n\t$(\"#window\").empty().text(\"loading...\");\n\thistory.pushState({ url: url }, null, url);\n\tfunction success(url) {\n\t\tvar r = cache[url]\n\t\tvar doc = $(r);\n\t\t$(\"#window\").empty();\n\t\tvar container;\n\t\t//console.log(\"doc\", doc);\n\t\t$(doc).each(function(i, el) {\n\t\t\tvar id = $(el).attr(\"id\") || false;\n\t\t\tif(id == \"container\") {\n\t\t\t\tcontainer = el;\n\t\t\t}\n\t\t});\n\t\t//console.log(\"!\",container);\n\t\tif(container) {\n\t\t\tvar win = $(\"#window\")[0];\n\t\t\t$(\"#header\", container).appendTo(win);\n\t\t\t$(\"#article\", container).appendTo(win);\n\t\t}\n\t\ttransformDefaultHtml(url);\n\t\tdocument.title = $(\"#header h1\", r).text();\n\t}\n\tif(cache[url]) {\n\t\tsuccess(url);\n\t} else {\n\t\tloadUrl(url, function(tiddlers,  textStatus, jqXHR) {\n\t\t\tif(!tiddlers) {\n\t\t\t\tdocument.title = \"Missing note\";\n\t\t\t\t$(\"#createLink\").remove();\n\t\t\t\t$(\"#window\").empty();\n\t\t\t\tif(jqXHR.status === 404) {\n\t\t\t\t\t$(\"<h2>Missing</h2>\").appendTo(\"#window\");\n\t\t\t\t\t$(\"<a id='createLink' />\").addClass(\"externalLink\").\n\t\t\t\t\t\tattr(\"href\", \"/editor#!\" + url).\n\t\t\t\t\t\ttext(locale.createlinktext).appendTo(\"#window\");\n\t\t\t\t} else {\n\t\t\t\t\t$(\"<h2>Whoops!</h2>\").appendTo(\"#window\");\n\t\t\t\t\t$(\"<a id='createLink' />\").addClass(\"externalLink\").\n\t\t\t\t\t\tattr(\"href\", window.location.href).\n\t\t\t\t\t\ttext(locale.reload).appendTo(\"#window\");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsuccess(url);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction setup(editmode) {\n\tif(!editmode) {\n\t\tif($(\"#win\").length === 0) {\n\t\t\tvar header = $(\"#header\").html();\n\t\t\tvar body = \"<div id='article'>\" + $(\"#article\").html() + \"</div>\";\n\t\t\t$(document.body).html([\"<div id='tbbody'>\",\n\t\t\t\t\"<!--HEADER-->\",\n\t\t\t\t\"<div id='siteheading'>\",\n\t\t\t\t\t\"<div id='SiteIcon'></div>\",\n\t\t\t\t\t\"<h1><a href='/' id='siteTitle'></a></h1>\",\n\t\t\t\t\"</div>\",\n\t\t\t\t\"<div id='SiteInfo'></div>\",\n\t\t\t\t\"<!--HEADER-->\",\n\t\t\t\t\"<hr/>\",\n\t\t\t\t\"<a id='listLink' href='/tiddlers?select=tag:!excludeLists\",\n\t\t\t\t\"&select=bag:!takenote_public&sort=title'>list travel notes</a>\",\n\t\t\t\t\"<hr/>\",\n\t\t\t\t\"<div id='window'></div>\",\n\t\t\t\t\"<div id='disqus_thread'></div>\",\n\t\t\t\t\"<div id='footer'></div>\",\n\t\t\t\"</div>\"].join(\"\"));\n\t\t\t$(\"#window\").html(body);\n\t\t\t$(\"<div id='header'>\" + header + \"</div>\").prependTo(\"#window\");\n\t\t}\n\t\tvar footerEl = $(\"<div />\").addClass(\"footerbar\").appendTo(\"#footer\")[0];\n\t\t$('<a href=\"/getyourown\">get your own here!</a>').addClass(\"footerLink notTiddlyLink\").\n\t\t\tappendTo(footerEl);\n\t\t$('<a href=\"/challenge/tiddlywebplugins.tiddlyspace.cookie_form?tiddlyweb_redirect=%2Ftiddlers\">login</a>').\n\t\t\taddClass(\"footerLink notTiddlyLink\").appendTo(footerEl);\n\t\t$('<a href=\"https://github.com/jdlrobson/gadabout\">developers</a>').\n\t\t\taddClass(\"footerLink notTiddlyLink\").appendTo(footerEl);\n\t\ttransformDefaultHtml(window.location.path);\n\t}\n\t$.ajax({ url: \"/SiteTitle\", dataType: \"json\",\n\t\tsuccess: function(tiddler) {\n\t\t\t$(\"#siteTitle\").text(tiddler.text);\n\t\t}\n\t});\n\t$.ajax({ url: \"/SiteInfo\", dataType: \"json\",\n\t\tsuccess: function(tiddler) {\n\t\t\t$(\"#SiteInfo\").text(tiddler.text);\n\t\t}\n\t});\n}\nvar initialised;\nvar startUrl = window.location.pathname;\n$(document).ready(function() {\n\tvar _onpopstate = window.onpopstate;\n\twindow.onpopstate = function(ev) {\n\t\tif(_onpopstate) {\n\t\t\t_onpopstate.apply(this, arguments);\n\t\t}\n\t\tif(!initialised) {\n\t\t\tinitialised = true;\n\t\t\treturn false;\n\t\t}\n\t\tvar url;\n\t\tif(ev.state && ev.state.url) {\n\t\t\turl = ev.state.url;\n\t\t} else if(cache[window.location.pathname]) {\n\t\t\turl = window.location.pathname;\n\t\t} else if(window.location.pathname == startUrl) {\n\t\t\turl = startUrl;\n\t\t}\n\t\tif(url) {\n\t\t\tprintUrl(url);\n\t\t}\n\t\tev.preventDefault();\n\t}\n\tvar editmode = $(\"#window-edit\").length > 0;\n\tsetup(editmode);\n\t\n\tif(editmode) {\n\t\tmakeEditorArea();\n\t} else {\n\t\tmakeTiddlyLink($(\"#listLink\")[0]);\n\t}\n});\n", "title": "travelblog.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 224779}, {"creator": "jon", "fields": {"geo.lat": "9.85924703671498", "geo.long": "124.206622339855", "_hash": "51b9e5ebe2a2fa139e77c0ee9096c0fc25d347fb"}, "created": "20110514101815", "recipe": "gadabout_private", "modified": "20110826071338", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bohol%2C%20Philippines", "bag": "gadabout_public", "text": "Recommended by [[@noodlesinmysand|http://www.twitter.com/noodlesinmysand]] and Robert V.\n\nHome of the chocolate hills:\n[img[http://farm5.static.flickr.com/4033/4567110759_af02655e51.jpg]]\nphoto from [[elricky|http://www.flickr.com/photos/elricky/4567110759/sizes/m/]]\n\n\nStay at Panglao Island, Balicasag for snorkelling.\nMore adventure try Danao but allow 1 day. check out www.eatdanao.com)\n", "title": "Bohol, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75489}, {"creator": "jon", "fields": {"geo.lat": "37.7749295", "geo.marker": "", "geo.long": "-122.4194155", "_hash": "c328db760103fb7a4427bf7561c815932e8e7d36"}, "created": "20110409182407", "recipe": "gadabout_private", "modified": "20110824203735", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/San%20Francisco%2C%20USA", "bag": "gadabout_public", "text": "So... Flying at end of September with Virgin due to drunkard flight booking. What we going to do? See [[Crazy September]].\n\nVisas - https://esta.cbp.dhs.gov/\n!Places to eat\nLe Colonia, Vietnamese restaurant has good reviews on [[trip advisor|http://www.tripadvisor.co.uk/Restaurant_Review-g580468-d950262-Reviews-Le_Colonial_Vietnamese_Restaurant-Blacktown_New_South_Wales.html]]\nhttp://lecolonialsf.com/\n\n!Places to get beer and be ~IDed and tip $1 per drink (or so I hear)\nhttp://www.magnoliapub.com/\nhttp://21st-amendment.com/\n\n!Things we want to do/see\n* Alcatraz\n* Hippy hill in [[Haight (hippy area)|http://wikitravel.org/en/San_Francisco/Haight]]\n[img[http://farm1.static.flickr.com/31/99077856_75e32ab8ce.jpg]]\n* Go to a boat sushi restaurant in [[Japan Town|http://wikitravel.org/en/San_Francisco/Western_Addition]] (it's like conveyer belt sushi but with boats on water).\n[img[http://farm1.static.flickr.com/160/415968150_c73ad37796.jpg]]\n* Get a postcard view of the city from Alamo Square\n[img[http://farm3.static.flickr.com/2464/3911952462_1b7613c498.jpg]]\n* [[Yosemite National Park, California]] - stop off at diner for lunch on way there\n[img[http://farm3.static.flickr.com/2236/2103640967_574996b337.jpg]]]\n* ihop for old times sake\n* Visit a vineyard in [[Napa Valley, California]]  or the less commercial Somona\n\n* [[Geek meet up|http://upcoming.yahoo.com/search/?q=web&loc=san+francisco&rt=1&date=9%2F25%2F2011]]\n\npsd recommends...\n* Muir Park\n[img[http://farm1.static.flickr.com/62/179821999_7a1f543e68.jpg]]\n\n* Stanford\n* [[Computer History Museum|http://www.computerhistory.org/]]\n* [[NASA Ames|http://www.nasa.gov/centers/ames/home/index.html]]\n* [[seatrek|http://www.seatrek.com/]] kayaking around Bay bridge\n* [[Japanese Tea Garden|http://japaneseteagardensf.com/]] (looks awesome - Mon, Wed, Fri: FREE admission if entered by 10:00 am)\n* art at [[SFMOMA|http://www.sfmoma.org/]]\nOffices of Twitter, Google\n* Frys\n* REI\n* [[Noisebridge|https://www.noisebridge.net/wiki/Noisebridge]] (via both Andrew and psd)\n* Lombard Road - Z road!\n* Japanese onsen (TUESDAY) http://www.kabukisprings.com/baths.php\n!Places to stay\n* 9600 recommends [[San Remo hotel|http://www.sanremohotel.com/]]\n* Stuarts - my friend Stuart has a flat here. Handy.\nMaybe stay a night in Japan town here: [[on tripadvisor|http://www.tripadvisor.co.uk/Hotel_Review-g60713-d113923-Reviews-Hotel_Kabuki_a_Joie_de_Vivre_hotel-San_Francisco_California.html]] http://www.jdvhotels.com/hotels/sanfrancisco/kabuki\n\n!Things to explore\n* 24th sept http://www.sflovevolution.org/home.php\n* Blues festival - http://www.polkstreetbluesfestival.com/ 24th and 25th Sept\n\n//photos from [[mwparenteau|http://www.flickr.com/photos/mwparenteau/99077856/sizes/m/in/photostream/]],  [[santoposmoderno|http://www.flickr.com/photos/santoposmoderno/3911952462/sizes/m/in/photostream/]][[mdoeff|http://www.flickr.com/photos/mdoeff/157764397/sizes/m/in/photostream/]], [[smif|http://www.flickr.com/photos/smif/2103640967/]], [[fortinbras|http://www.flickr.com/photos/fortinbras/179821999/sizes/m/in/photostream/]]/, [[goosmurf|http://www.flickr.com/photos/goosmurf/415968150/sizes/m/in/photostream/]]/", "title": "San Francisco, USA", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75784}, {"creator": "jon", "fields": {"_hash": "43ea42d63003cd161cbe5d61a3af5dc9b0680874", "summary": ""}, "created": "20110726111731", "recipe": "gadabout_private", "modified": "20110818095212", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/jquery.form.js", "bag": "apps_public", "text": "/*!\n * jQuery Form Plugin\n * version: 2.83 (11-JUL-2011)\n * @requires jQuery v1.3.2 or later\n *\n * Examples and documentation at: http://malsup.com/jquery/form/\n * Dual licensed under the MIT and GPL licenses:\n *   http://www.opensource.org/licenses/mit-license.php\n *   http://www.gnu.org/licenses/gpl.html\n */\n;(function($) {\n\n/*\n\tUsage Note:\n\t-----------\n\tDo not use both ajaxSubmit and ajaxForm on the same form.  These\n\tfunctions are intended to be exclusive.  Use ajaxSubmit if you want\n\tto bind your own submit handler to the form.  For example,\n\n\t$(document).ready(function() {\n\t\t$('#myForm').bind('submit', function(e) {\n\t\t\te.preventDefault(); // <-- important\n\t\t\t$(this).ajaxSubmit({\n\t\t\t\ttarget: '#output'\n\t\t\t});\n\t\t});\n\t});\n\n\tUse ajaxForm when you want the plugin to manage all the event binding\n\tfor you.  For example,\n\n\t$(document).ready(function() {\n\t\t$('#myForm').ajaxForm({\n\t\t\ttarget: '#output'\n\t\t});\n\t});\n\n\tWhen using ajaxForm, the ajaxSubmit function will be invoked for you\n\tat the appropriate time.\n*/\n\n/**\n * ajaxSubmit() provides a mechanism for immediately submitting\n * an HTML form using AJAX.\n */\n$.fn.ajaxSubmit = function(options) {\n\t// fast fail if nothing selected (http://dev.jquery.com/ticket/2752)\n\tif (!this.length) {\n\t\tlog('ajaxSubmit: skipping submit process - no element selected');\n\t\treturn this;\n\t}\n\t\n\tvar method, action, url, $form = this;\n\n\tif (typeof options == 'function') {\n\t\toptions = { success: options };\n\t}\n\n\tmethod = this.attr('method');\n\taction = this.attr('action');\n\turl = (typeof action === 'string') ? $.trim(action) : '';\n\turl = url || window.location.href || '';\n\tif (url) {\n\t\t// clean url (don't include hash vaue)\n\t\turl = (url.match(/^([^#]+)/)||[])[1];\n\t}\n\n\toptions = $.extend(true, {\n\t\turl:  url,\n\t\tsuccess: $.ajaxSettings.success,\n\t\ttype: method || 'GET',\n\t\tiframeSrc: /^https/i.test(window.location.href || '') ? 'javascript:false' : 'about:blank'\n\t}, options);\n\n\t// hook for manipulating the form data before it is extracted;\n\t// convenient for use with rich editors like tinyMCE or FCKEditor\n\tvar veto = {};\n\tthis.trigger('form-pre-serialize', [this, options, veto]);\n\tif (veto.veto) {\n\t\tlog('ajaxSubmit: submit vetoed via form-pre-serialize trigger');\n\t\treturn this;\n\t}\n\n\t// provide opportunity to alter form data before it is serialized\n\tif (options.beforeSerialize && options.beforeSerialize(this, options) === false) {\n\t\tlog('ajaxSubmit: submit aborted via beforeSerialize callback');\n\t\treturn this;\n\t}\n\n\tvar n,v,a = this.formToArray(options.semantic);\n\tif (options.data) {\n\t\toptions.extraData = options.data;\n\t\tfor (n in options.data) {\n\t\t\tif(options.data[n] instanceof Array) {\n\t\t\t\tfor (var k in options.data[n]) {\n\t\t\t\t\ta.push( { name: n, value: options.data[n][k] } );\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tv = options.data[n];\n\t\t\t\tv = $.isFunction(v) ? v() : v; // if value is fn, invoke it\n\t\t\t\ta.push( { name: n, value: v } );\n\t\t\t}\n\t\t}\n\t}\n\n\t// give pre-submit callback an opportunity to abort the submit\n\tif (options.beforeSubmit && options.beforeSubmit(a, this, options) === false) {\n\t\tlog('ajaxSubmit: submit aborted via beforeSubmit callback');\n\t\treturn this;\n\t}\n\n\t// fire vetoable 'validate' event\n\tthis.trigger('form-submit-validate', [a, this, options, veto]);\n\tif (veto.veto) {\n\t\tlog('ajaxSubmit: submit vetoed via form-submit-validate trigger');\n\t\treturn this;\n\t}\n\n\tvar q = $.param(a);\n\n\tif (options.type.toUpperCase() == 'GET') {\n\t\toptions.url += (options.url.indexOf('?') >= 0 ? '&' : '?') + q;\n\t\toptions.data = null;  // data is null for 'get'\n\t}\n\telse {\n\t\toptions.data = q; // data is the query string for 'post'\n\t}\n\n\tvar callbacks = [];\n\tif (options.resetForm) {\n\t\tcallbacks.push(function() { $form.resetForm(); });\n\t}\n\tif (options.clearForm) {\n\t\tcallbacks.push(function() { $form.clearForm(); });\n\t}\n\n\t// perform a load on the target only if dataType is not provided\n\tif (!options.dataType && options.target) {\n\t\tvar oldSuccess = options.success || function(){};\n\t\tcallbacks.push(function(data) {\n\t\t\tvar fn = options.replaceTarget ? 'replaceWith' : 'html';\n\t\t\t$(options.target)[fn](data).each(oldSuccess, arguments);\n\t\t});\n\t}\n\telse if (options.success) {\n\t\tcallbacks.push(options.success);\n\t}\n\n\toptions.success = function(data, status, xhr) { // jQuery 1.4+ passes xhr as 3rd arg\n\t\tvar context = options.context || options;   // jQuery 1.4+ supports scope context \n\t\tfor (var i=0, max=callbacks.length; i < max; i++) {\n\t\t\tcallbacks[i].apply(context, [data, status, xhr || $form, $form]);\n\t\t}\n\t};\n\n\t// are there files to upload?\n\tvar fileInputs = $('input:file', this).length > 0;\n\tvar mp = 'multipart/form-data';\n\tvar multipart = ($form.attr('enctype') == mp || $form.attr('encoding') == mp);\n\n\t// options.iframe allows user to force iframe mode\n\t// 06-NOV-09: now defaulting to iframe mode if file input is detected\n   if (options.iframe !== false && (fileInputs || options.iframe || multipart)) {\n\t   // hack to fix Safari hang (thanks to Tim Molendijk for this)\n\t   // see:  http://groups.google.com/group/jquery-dev/browse_thread/thread/36395b7ab510dd5d\n\t   if (options.closeKeepAlive) {\n\t\t   $.get(options.closeKeepAlive, function() { fileUpload(a); });\n\t\t}\n\t   else {\n\t\t   fileUpload(a);\n\t\t}\n   }\n   else {\n\t\t// IE7 massage (see issue 57)\n\t\tif ($.browser.msie && method == 'get') { \n\t\t\tvar ieMeth = $form[0].getAttribute('method');\n\t\t\tif (typeof ieMeth === 'string')\n\t\t\t\toptions.type = ieMeth;\n\t\t}\n\t\t$.ajax(options);\n   }\n\n\t// fire 'notify' event\n\tthis.trigger('form-submit-notify', [this, options]);\n\treturn this;\n\n\n\t// private function for handling file uploads (hat tip to YAHOO!)\n\tfunction fileUpload(a) {\n\t\tvar form = $form[0], el, i, s, g, id, $io, io, xhr, sub, n, timedOut, timeoutHandle;\n        var useProp = !!$.fn.prop;\n\n        if (a) {\n        \t// ensure that every serialized input is still enabled\n          \tfor (i=0; i < a.length; i++) {\n                el = $(form[a[i].name]);\n                el[ useProp ? 'prop' : 'attr' ]('disabled', false);\n          \t}\n        }\n\n\t\tif ($(':input[name=submit],:input[id=submit]', form).length) {\n\t\t\t// if there is an input with a name or id of 'submit' then we won't be\n\t\t\t// able to invoke the submit fn on the form (at least not x-browser)\n\t\t\talert('Error: Form elements must not have name or id of \"submit\".');\n\t\t\treturn;\n\t\t}\n\t\t\n\t\ts = $.extend(true, {}, $.ajaxSettings, options);\n\t\ts.context = s.context || s;\n\t\tid = 'jqFormIO' + (new Date().getTime());\n\t\tif (s.iframeTarget) {\n\t\t\t$io = $(s.iframeTarget);\n\t\t\tn = $io.attr('name');\n\t\t\tif (n == null)\n\t\t\t \t$io.attr('name', id);\n\t\t\telse\n\t\t\t\tid = n;\n\t\t}\n\t\telse {\n\t\t\t$io = $('<iframe name=\"' + id + '\" src=\"'+ s.iframeSrc +'\" />');\n\t\t\t$io.css({ position: 'absolute', top: '-1000px', left: '-1000px' });\n\t\t}\n\t\tio = $io[0];\n\n\n\t\txhr = { // mock object\n\t\t\taborted: 0,\n\t\t\tresponseText: null,\n\t\t\tresponseXML: null,\n\t\t\tstatus: 0,\n\t\t\tstatusText: 'n/a',\n\t\t\tgetAllResponseHeaders: function() {},\n\t\t\tgetResponseHeader: function() {},\n\t\t\tsetRequestHeader: function() {},\n\t\t\tabort: function(status) {\n\t\t\t\tvar e = (status === 'timeout' ? 'timeout' : 'aborted');\n\t\t\t\tlog('aborting upload... ' + e);\n\t\t\t\tthis.aborted = 1;\n\t\t\t\t$io.attr('src', s.iframeSrc); // abort op in progress\n\t\t\t\txhr.error = e;\n\t\t\t\ts.error && s.error.call(s.context, xhr, e, status);\n\t\t\t\tg && $.event.trigger(\"ajaxError\", [xhr, s, e]);\n\t\t\t\ts.complete && s.complete.call(s.context, xhr, e);\n\t\t\t}\n\t\t};\n\n\t\tg = s.global;\n\t\t// trigger ajax global events so that activity/block indicators work like normal\n\t\tif (g && ! $.active++) {\n\t\t\t$.event.trigger(\"ajaxStart\");\n\t\t}\n\t\tif (g) {\n\t\t\t$.event.trigger(\"ajaxSend\", [xhr, s]);\n\t\t}\n\n\t\tif (s.beforeSend && s.beforeSend.call(s.context, xhr, s) === false) {\n\t\t\tif (s.global) {\n\t\t\t\t$.active--;\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tif (xhr.aborted) {\n\t\t\treturn;\n\t\t}\n\n\t\t// add submitting element to data if we know it\n\t\tsub = form.clk;\n\t\tif (sub) {\n\t\t\tn = sub.name;\n\t\t\tif (n && !sub.disabled) {\n\t\t\t\ts.extraData = s.extraData || {};\n\t\t\t\ts.extraData[n] = sub.value;\n\t\t\t\tif (sub.type == \"image\") {\n\t\t\t\t\ts.extraData[n+'.x'] = form.clk_x;\n\t\t\t\t\ts.extraData[n+'.y'] = form.clk_y;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar CLIENT_TIMEOUT_ABORT = 1;\n\t\tvar SERVER_ABORT = 2;\n\n\t\tfunction getDoc(frame) {\n\t\t\tvar doc = frame.contentWindow ? frame.contentWindow.document : frame.contentDocument ? frame.contentDocument : frame.document;\n\t\t\treturn doc;\n\t\t}\n\t\t\n\t\t// take a breath so that pending repaints get some cpu time before the upload starts\n\t\tfunction doSubmit() {\n\t\t\t// make sure form attrs are set\n\t\t\tvar t = $form.attr('target'), a = $form.attr('action');\n\n\t\t\t// update form attrs in IE friendly way\n\t\t\tform.setAttribute('target',id);\n\t\t\tif (!method) {\n\t\t\t\tform.setAttribute('method', 'POST');\n\t\t\t}\n\t\t\tif (a != s.url) {\n\t\t\t\tform.setAttribute('action', s.url);\n\t\t\t}\n\n\t\t\t// ie borks in some cases when setting encoding\n\t\t\tif (! s.skipEncodingOverride && (!method || /post/i.test(method))) {\n\t\t\t\t$form.attr({\n\t\t\t\t\tencoding: 'multipart/form-data',\n\t\t\t\t\tenctype:  'multipart/form-data'\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// support timout\n\t\t\tif (s.timeout) {\n\t\t\t\ttimeoutHandle = setTimeout(function() { timedOut = true; cb(CLIENT_TIMEOUT_ABORT); }, s.timeout);\n\t\t\t}\n\t\t\t\n\t\t\t// look for server aborts\n\t\t\tfunction checkState() {\n\t\t\t\ttry {\n\t\t\t\t\tvar state = getDoc(io).readyState;\n\t\t\t\t\tlog('state = ' + state);\n\t\t\t\t\tif (state.toLowerCase() == 'uninitialized')\n\t\t\t\t\t\tsetTimeout(checkState,50);\n\t\t\t\t}\n\t\t\t\tcatch(e) {\n\t\t\t\t\tlog('Server abort: ' , e, ' (', e.name, ')');\n\t\t\t\t\tcb(SERVER_ABORT);\n\t\t\t\t\ttimeoutHandle && clearTimeout(timeoutHandle);\n\t\t\t\t\ttimeoutHandle = undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// add \"extra\" data to form if provided in options\n\t\t\tvar extraInputs = [];\n\t\t\ttry {\n\t\t\t\tif (s.extraData) {\n\t\t\t\t\tfor (var n in s.extraData) {\n\t\t\t\t\t\textraInputs.push(\n\t\t\t\t\t\t\t$('<input type=\"hidden\" name=\"'+n+'\" />').attr('value',s.extraData[n])\n\t\t\t\t\t\t\t\t.appendTo(form)[0]);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!s.iframeTarget) {\n\t\t\t\t\t// add iframe to doc and submit the form\n\t\t\t\t\t$io.appendTo('body');\n\t                io.attachEvent ? io.attachEvent('onload', cb) : io.addEventListener('load', cb, false);\n\t\t\t\t}\n\t\t\t\tsetTimeout(checkState,15);\n\t\t\t\tform.submit();\n\t\t\t}\n\t\t\tfinally {\n\t\t\t\t// reset attrs and remove \"extra\" input elements\n\t\t\t\tform.setAttribute('action',a);\n\t\t\t\tif(t) {\n\t\t\t\t\tform.setAttribute('target', t);\n\t\t\t\t} else {\n\t\t\t\t\t$form.removeAttr('target');\n\t\t\t\t}\n\t\t\t\t$(extraInputs).remove();\n\t\t\t}\n\t\t}\n\n\t\tif (s.forceSync) {\n\t\t\tdoSubmit();\n\t\t}\n\t\telse {\n\t\t\tsetTimeout(doSubmit, 10); // this lets dom updates render\n\t\t}\n\n\t\tvar data, doc, domCheckCount = 50, callbackProcessed;\n\n\t\tfunction cb(e) {\n\t\t\tif (xhr.aborted || callbackProcessed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tdoc = getDoc(io);\n\t\t\t}\n\t\t\tcatch(ex) {\n\t\t\t\tlog('cannot access response document: ', ex);\n\t\t\t\te = SERVER_ABORT;\n\t\t\t}\n\t\t\tif (e === CLIENT_TIMEOUT_ABORT && xhr) {\n\t\t\t\txhr.abort('timeout');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse if (e == SERVER_ABORT && xhr) {\n\t\t\t\txhr.abort('server abort');\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!doc || doc.location.href == s.iframeSrc) {\n\t\t\t\t// response not received yet\n\t\t\t\tif (!timedOut)\n\t\t\t\t\treturn;\n\t\t\t}\n            io.detachEvent ? io.detachEvent('onload', cb) : io.removeEventListener('load', cb, false);\n\n\t\t\tvar status = 'success', errMsg;\n\t\t\ttry {\n\t\t\t\tif (timedOut) {\n\t\t\t\t\tthrow 'timeout';\n\t\t\t\t}\n\n\t\t\t\tvar isXml = s.dataType == 'xml' || doc.XMLDocument || $.isXMLDoc(doc);\n\t\t\t\tlog('isXml='+isXml);\n\t\t\t\tif (!isXml && window.opera && (doc.body == null || doc.body.innerHTML == '')) {\n\t\t\t\t\tif (--domCheckCount) {\n\t\t\t\t\t\t// in some browsers (Opera) the iframe DOM is not always traversable when\n\t\t\t\t\t\t// the onload callback fires, so we loop a bit to accommodate\n\t\t\t\t\t\tlog('requeing onLoad callback, DOM not available');\n\t\t\t\t\t\tsetTimeout(cb, 250);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t// let this fall through because server response could be an empty document\n\t\t\t\t\t//log('Could not access iframe DOM after mutiple tries.');\n\t\t\t\t\t//throw 'DOMException: not available';\n\t\t\t\t}\n\n\t\t\t\t//log('response detected');\n                var docRoot = doc.body ? doc.body : doc.documentElement;\n                xhr.responseText = docRoot ? docRoot.innerHTML : null;\n\t\t\t\txhr.responseXML = doc.XMLDocument ? doc.XMLDocument : doc;\n\t\t\t\tif (isXml)\n\t\t\t\t\ts.dataType = 'xml';\n\t\t\t\txhr.getResponseHeader = function(header){\n\t\t\t\t\tvar headers = {'content-type': s.dataType};\n\t\t\t\t\treturn headers[header];\n\t\t\t\t};\n                // support for XHR 'status' & 'statusText' emulation :\n                if (docRoot) {\n                    xhr.status = Number( docRoot.getAttribute('status') ) || xhr.status;\n                    xhr.statusText = docRoot.getAttribute('statusText') || xhr.statusText;\n                }\n\n\t\t\t\tvar dt = s.dataType || '';\n\t\t\t\tvar scr = /(json|script|text)/.test(dt.toLowerCase());\n\t\t\t\tif (scr || s.textarea) {\n\t\t\t\t\t// see if user embedded response in textarea\n\t\t\t\t\tvar ta = doc.getElementsByTagName('textarea')[0];\n\t\t\t\t\tif (ta) {\n\t\t\t\t\t\txhr.responseText = ta.value;\n                        // support for XHR 'status' & 'statusText' emulation :\n                        xhr.status = Number( ta.getAttribute('status') ) || xhr.status;\n                        xhr.statusText = ta.getAttribute('statusText') || xhr.statusText;\n\t\t\t\t\t}\n\t\t\t\t\telse if (scr) {\n\t\t\t\t\t\t// account for browsers injecting pre around json response\n\t\t\t\t\t\tvar pre = doc.getElementsByTagName('pre')[0];\n\t\t\t\t\t\tvar b = doc.getElementsByTagName('body')[0];\n\t\t\t\t\t\tif (pre) {\n\t\t\t\t\t\t\txhr.responseText = pre.textContent ? pre.textContent : pre.innerHTML;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (b) {\n\t\t\t\t\t\t\txhr.responseText = b.innerHTML;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (s.dataType == 'xml' && !xhr.responseXML && xhr.responseText != null) {\n\t\t\t\t\txhr.responseXML = toXml(xhr.responseText);\n\t\t\t\t}\n\n                try {\n                    data = httpData(xhr, s.dataType, s);\n                }\n                catch (e) {\n                    status = 'parsererror';\n                    xhr.error = errMsg = (e || status);\n                }\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\tlog('error caught: ',e);\n\t\t\t\tstatus = 'error';\n                xhr.error = errMsg = (e || status);\n\t\t\t}\n\n\t\t\tif (xhr.aborted) {\n\t\t\t\tlog('upload aborted');\n\t\t\t\tstatus = null;\n\t\t\t}\n\n            if (xhr.status) { // we've set xhr.status\n                status = (xhr.status >= 200 && xhr.status < 300 || xhr.status === 304) ? 'success' : 'error';\n            }\n\n\t\t\t// ordering of these callbacks/triggers is odd, but that's how $.ajax does it\n\t\t\tif (status === 'success') {\n\t\t\t\ts.success && s.success.call(s.context, data, 'success', xhr);\n\t\t\t\tg && $.event.trigger(\"ajaxSuccess\", [xhr, s]);\n\t\t\t}\n            else if (status) {\n\t\t\t\tif (errMsg == undefined)\n\t\t\t\t\terrMsg = xhr.statusText;\n\t\t\t\ts.error && s.error.call(s.context, xhr, status, errMsg);\n\t\t\t\tg && $.event.trigger(\"ajaxError\", [xhr, s, errMsg]);\n            }\n\n\t\t\tg && $.event.trigger(\"ajaxComplete\", [xhr, s]);\n\n\t\t\tif (g && ! --$.active) {\n\t\t\t\t$.event.trigger(\"ajaxStop\");\n\t\t\t}\n\n\t\t\ts.complete && s.complete.call(s.context, xhr, status);\n\n\t\t\tcallbackProcessed = true;\n\t\t\tif (s.timeout)\n\t\t\t\tclearTimeout(timeoutHandle);\n\n\t\t\t// clean up\n\t\t\tsetTimeout(function() {\n\t\t\t\tif (!s.iframeTarget)\n\t\t\t\t\tvar a = true;//$io.remove();\n\t\t\t\txhr.responseXML = null;\n\t\t\t}, 100);\n\t\t}\n\n\t\tvar toXml = $.parseXML || function(s, doc) { // use parseXML if available (jQuery 1.5+)\n\t\t\tif (window.ActiveXObject) {\n\t\t\t\tdoc = new ActiveXObject('Microsoft.XMLDOM');\n\t\t\t\tdoc.async = 'false';\n\t\t\t\tdoc.loadXML(s);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tdoc = (new DOMParser()).parseFromString(s, 'text/xml');\n\t\t\t}\n\t\t\treturn (doc && doc.documentElement && doc.documentElement.nodeName != 'parsererror') ? doc : null;\n\t\t};\n\t\tvar parseJSON = $.parseJSON || function(s) {\n\t\t\treturn window['eval']('(' + s + ')');\n\t\t};\n\n\t\tvar httpData = function( xhr, type, s ) { // mostly lifted from jq1.4.4\n\n\t\t\tvar ct = xhr.getResponseHeader('content-type') || '',\n\t\t\t\txml = type === 'xml' || !type && ct.indexOf('xml') >= 0,\n\t\t\t\tdata = xml ? xhr.responseXML : xhr.responseText;\n\n\t\t\tif (xml && data.documentElement.nodeName === 'parsererror') {\n\t\t\t\t$.error && $.error('parsererror');\n\t\t\t}\n\t\t\tif (s && s.dataFilter) {\n\t\t\t\tdata = s.dataFilter(data, type);\n\t\t\t}\n\t\t\tif (typeof data === 'string') {\n\t\t\t\tif (type === 'json' || !type && ct.indexOf('json') >= 0) {\n\t\t\t\t\tdata = parseJSON(data);\n\t\t\t\t} else if (type === \"script\" || !type && ct.indexOf(\"javascript\") >= 0) {\n\t\t\t\t\t$.globalEval(data);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn data;\n\t\t};\n\t}\n};\n\n/**\n * ajaxForm() provides a mechanism for fully automating form submission.\n *\n * The advantages of using this method instead of ajaxSubmit() are:\n *\n * 1: This method will include coordinates for <input type=\"image\" /> elements (if the element\n *\tis used to submit the form).\n * 2. This method will include the submit element's name/value data (for the element that was\n *\tused to submit the form).\n * 3. This method binds the submit() method to the form for you.\n *\n * The options argument for ajaxForm works exactly as it does for ajaxSubmit.  ajaxForm merely\n * passes the options argument along after properly binding events for submit elements and\n * the form itself.\n */\n$.fn.ajaxForm = function(options) {\n\t// in jQuery 1.3+ we can fix mistakes with the ready state\n\tif (this.length === 0) {\n\t\tvar o = { s: this.selector, c: this.context };\n\t\tif (!$.isReady && o.s) {\n\t\t\tlog('DOM not ready, queuing ajaxForm');\n\t\t\t$(function() {\n\t\t\t\t$(o.s,o.c).ajaxForm(options);\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\t\t// is your DOM ready?  http://docs.jquery.com/Tutorials:Introducing_$(document).ready()\n\t\tlog('terminating; zero elements found by selector' + ($.isReady ? '' : ' (DOM not ready)'));\n\t\treturn this;\n\t}\n\n\treturn this.ajaxFormUnbind().bind('submit.form-plugin', function(e) {\n\t\tif (!e.isDefaultPrevented()) { // if event has been canceled, don't proceed\n\t\t\te.preventDefault();\n\t\t\t$(this).ajaxSubmit(options);\n\t\t}\n\t}).bind('click.form-plugin', function(e) {\n\t\tvar target = e.target;\n\t\tvar $el = $(target);\n\t\tif (!($el.is(\":submit,input:image\"))) {\n\t\t\t// is this a child element of the submit el?  (ex: a span within a button)\n\t\t\tvar t = $el.closest(':submit');\n\t\t\tif (t.length == 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttarget = t[0];\n\t\t}\n\t\tvar form = this;\n\t\tform.clk = target;\n\t\tif (target.type == 'image') {\n\t\t\tif (e.offsetX != undefined) {\n\t\t\t\tform.clk_x = e.offsetX;\n\t\t\t\tform.clk_y = e.offsetY;\n\t\t\t} else if (typeof $.fn.offset == 'function') { // try to use dimensions plugin\n\t\t\t\tvar offset = $el.offset();\n\t\t\t\tform.clk_x = e.pageX - offset.left;\n\t\t\t\tform.clk_y = e.pageY - offset.top;\n\t\t\t} else {\n\t\t\t\tform.clk_x = e.pageX - target.offsetLeft;\n\t\t\t\tform.clk_y = e.pageY - target.offsetTop;\n\t\t\t}\n\t\t}\n\t\t// clear form vars\n\t\tsetTimeout(function() { form.clk = form.clk_x = form.clk_y = null; }, 100);\n\t});\n};\n\n// ajaxFormUnbind unbinds the event handlers that were bound by ajaxForm\n$.fn.ajaxFormUnbind = function() {\n\treturn this.unbind('submit.form-plugin click.form-plugin');\n};\n\n/**\n * formToArray() gathers form element data into an array of objects that can\n * be passed to any of the following ajax functions: $.get, $.post, or load.\n * Each object in the array has both a 'name' and 'value' property.  An example of\n * an array for a simple login form might be:\n *\n * [ { name: 'username', value: 'jresig' }, { name: 'password', value: 'secret' } ]\n *\n * It is this array that is passed to pre-submit callback functions provided to the\n * ajaxSubmit() and ajaxForm() methods.\n */\n$.fn.formToArray = function(semantic) {\n\tvar a = [];\n\tif (this.length === 0) {\n\t\treturn a;\n\t}\n\n\tvar form = this[0];\n\tvar els = semantic ? form.getElementsByTagName('*') : form.elements;\n\tif (!els) {\n\t\treturn a;\n\t}\n\n\tvar i,j,n,v,el,max,jmax;\n\tfor(i=0, max=els.length; i < max; i++) {\n\t\tel = els[i];\n\t\tn = el.name;\n\t\tif (!n) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (semantic && form.clk && el.type == \"image\") {\n\t\t\t// handle image inputs on the fly when semantic == true\n\t\t\tif(!el.disabled && form.clk == el) {\n\t\t\t\ta.push({name: n, value: $(el).val()});\n\t\t\t\ta.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tv = $.fieldValue(el, true);\n\t\tif (v && v.constructor == Array) {\n\t\t\tfor(j=0, jmax=v.length; j < jmax; j++) {\n\t\t\t\ta.push({name: n, value: v[j]});\n\t\t\t}\n\t\t}\n\t\telse if (v !== null && typeof v != 'undefined') {\n\t\t\ta.push({name: n, value: v});\n\t\t}\n\t}\n\n\tif (!semantic && form.clk) {\n\t\t// input type=='image' are not found in elements array! handle it here\n\t\tvar $input = $(form.clk), input = $input[0];\n\t\tn = input.name;\n\t\tif (n && !input.disabled && input.type == 'image') {\n\t\t\ta.push({name: n, value: $input.val()});\n\t\t\ta.push({name: n+'.x', value: form.clk_x}, {name: n+'.y', value: form.clk_y});\n\t\t}\n\t}\n\treturn a;\n};\n\n/**\n * Serializes form data into a 'submittable' string. This method will return a string\n * in the format: name1=value1&amp;name2=value2\n */\n$.fn.formSerialize = function(semantic) {\n\t//hand off to jQuery.param for proper encoding\n\treturn $.param(this.formToArray(semantic));\n};\n\n/**\n * Serializes all field elements in the jQuery object into a query string.\n * This method will return a string in the format: name1=value1&amp;name2=value2\n */\n$.fn.fieldSerialize = function(successful) {\n\tvar a = [];\n\tthis.each(function() {\n\t\tvar n = this.name;\n\t\tif (!n) {\n\t\t\treturn;\n\t\t}\n\t\tvar v = $.fieldValue(this, successful);\n\t\tif (v && v.constructor == Array) {\n\t\t\tfor (var i=0,max=v.length; i < max; i++) {\n\t\t\t\ta.push({name: n, value: v[i]});\n\t\t\t}\n\t\t}\n\t\telse if (v !== null && typeof v != 'undefined') {\n\t\t\ta.push({name: this.name, value: v});\n\t\t}\n\t});\n\t//hand off to jQuery.param for proper encoding\n\treturn $.param(a);\n};\n\n/**\n * Returns the value(s) of the element in the matched set.  For example, consider the following form:\n *\n *  <form><fieldset>\n *\t  <input name=\"A\" type=\"text\" />\n *\t  <input name=\"A\" type=\"text\" />\n *\t  <input name=\"B\" type=\"checkbox\" value=\"B1\" />\n *\t  <input name=\"B\" type=\"checkbox\" value=\"B2\"/>\n *\t  <input name=\"C\" type=\"radio\" value=\"C1\" />\n *\t  <input name=\"C\" type=\"radio\" value=\"C2\" />\n *  </fieldset></form>\n *\n *  var v = $(':text').fieldValue();\n *  // if no values are entered into the text inputs\n *  v == ['','']\n *  // if values entered into the text inputs are 'foo' and 'bar'\n *  v == ['foo','bar']\n *\n *  var v = $(':checkbox').fieldValue();\n *  // if neither checkbox is checked\n *  v === undefined\n *  // if both checkboxes are checked\n *  v == ['B1', 'B2']\n *\n *  var v = $(':radio').fieldValue();\n *  // if neither radio is checked\n *  v === undefined\n *  // if first radio is checked\n *  v == ['C1']\n *\n * The successful argument controls whether or not the field element must be 'successful'\n * (per http://www.w3.org/TR/html4/interact/forms.html#successful-controls).\n * The default value of the successful argument is true.  If this value is false the value(s)\n * for each element is returned.\n *\n * Note: This method *always* returns an array.  If no valid value can be determined the\n *\t   array will be empty, otherwise it will contain one or more values.\n */\n$.fn.fieldValue = function(successful) {\n\tfor (var val=[], i=0, max=this.length; i < max; i++) {\n\t\tvar el = this[i];\n\t\tvar v = $.fieldValue(el, successful);\n\t\tif (v === null || typeof v == 'undefined' || (v.constructor == Array && !v.length)) {\n\t\t\tcontinue;\n\t\t}\n\t\tv.constructor == Array ? $.merge(val, v) : val.push(v);\n\t}\n\treturn val;\n};\n\n/**\n * Returns the value of the field element.\n */\n$.fieldValue = function(el, successful) {\n\tvar n = el.name, t = el.type, tag = el.tagName.toLowerCase();\n\tif (successful === undefined) {\n\t\tsuccessful = true;\n\t}\n\n\tif (successful && (!n || el.disabled || t == 'reset' || t == 'button' ||\n\t\t(t == 'checkbox' || t == 'radio') && !el.checked ||\n\t\t(t == 'submit' || t == 'image') && el.form && el.form.clk != el ||\n\t\ttag == 'select' && el.selectedIndex == -1)) {\n\t\t\treturn null;\n\t}\n\n\tif (tag == 'select') {\n\t\tvar index = el.selectedIndex;\n\t\tif (index < 0) {\n\t\t\treturn null;\n\t\t}\n\t\tvar a = [], ops = el.options;\n\t\tvar one = (t == 'select-one');\n\t\tvar max = (one ? index+1 : ops.length);\n\t\tfor(var i=(one ? index : 0); i < max; i++) {\n\t\t\tvar op = ops[i];\n\t\t\tif (op.selected) {\n\t\t\t\tvar v = op.value;\n\t\t\t\tif (!v) { // extra pain for IE...\n\t\t\t\t\tv = (op.attributes && op.attributes['value'] && !(op.attributes['value'].specified)) ? op.text : op.value;\n\t\t\t\t}\n\t\t\t\tif (one) {\n\t\t\t\t\treturn v;\n\t\t\t\t}\n\t\t\t\ta.push(v);\n\t\t\t}\n\t\t}\n\t\treturn a;\n\t}\n\treturn $(el).val();\n};\n\n/**\n * Clears the form data.  Takes the following actions on the form's input fields:\n *  - input text fields will have their 'value' property set to the empty string\n *  - select elements will have their 'selectedIndex' property set to -1\n *  - checkbox and radio inputs will have their 'checked' property set to false\n *  - inputs of type submit, button, reset, and hidden will *not* be effected\n *  - button elements will *not* be effected\n */\n$.fn.clearForm = function() {\n\treturn this.each(function() {\n\t\t$('input,select,textarea', this).clearFields();\n\t});\n};\n\n/**\n * Clears the selected form elements.\n */\n$.fn.clearFields = $.fn.clearInputs = function() {\n\tvar re = /^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i; // 'hidden' is not in this list\n\treturn this.each(function() {\n\t\tvar t = this.type, tag = this.tagName.toLowerCase();\n\t\tif (re.test(t) || tag == 'textarea') {\n\t\t\tthis.value = '';\n\t\t}\n\t\telse if (t == 'checkbox' || t == 'radio') {\n\t\t\tthis.checked = false;\n\t\t}\n\t\telse if (tag == 'select') {\n\t\t\tthis.selectedIndex = -1;\n\t\t}\n\t});\n};\n\n/**\n * Resets the form data.  Causes all form elements to be reset to their original value.\n */\n$.fn.resetForm = function() {\n\treturn this.each(function() {\n\t\t// guard against an input with the name of 'reset'\n\t\t// note that IE reports the reset function as an 'object'\n\t\tif (typeof this.reset == 'function' || (typeof this.reset == 'object' && !this.reset.nodeType)) {\n\t\t\tthis.reset();\n\t\t}\n\t});\n};\n\n/**\n * Enables or disables any matching elements.\n */\n$.fn.enable = function(b) {\n\tif (b === undefined) {\n\t\tb = true;\n\t}\n\treturn this.each(function() {\n\t\tthis.disabled = !b;\n\t});\n};\n\n/**\n * Checks/unchecks any matching checkboxes or radio buttons and\n * selects/deselects and matching option elements.\n */\n$.fn.selected = function(select) {\n\tif (select === undefined) {\n\t\tselect = true;\n\t}\n\treturn this.each(function() {\n\t\tvar t = this.type;\n\t\tif (t == 'checkbox' || t == 'radio') {\n\t\t\tthis.checked = select;\n\t\t}\n\t\telse if (this.tagName.toLowerCase() == 'option') {\n\t\t\tvar $sel = $(this).parent('select');\n\t\t\tif (select && $sel[0] && $sel[0].type == 'select-one') {\n\t\t\t\t// deselect all other options\n\t\t\t\t$sel.find('option').selected(false);\n\t\t\t}\n\t\t\tthis.selected = select;\n\t\t}\n\t});\n};\n\n// helper fn for console logging\nfunction log() {\n\tvar msg = '[jquery.form] ' + Array.prototype.join.call(arguments,'');\n\tif (window.console && window.console.log) {\n\t\twindow.console.log(msg);\n\t}\n\telse if (window.opera && window.opera.postError) {\n\t\twindow.opera.postError(msg);\n\t}\n};\n\n})(jQuery);", "title": "jquery.form.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 455162}, {"creator": "jon", "fields": {"geo.lat": "38.2791042", "geo.long": "-122.2776185", "_hash": "2c30e909756b8a150930ef04d6ebe359cc9b1e85"}, "created": "20110801210242", "recipe": "gadabout_private", "modified": "20110815094510", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Napa%20Valley%2C%20California", "bag": "gadabout_public", "text": "go on a [[vineyard|http://wikitravel.org/en/Napa_Valley]] tour and drink lots of wine there.\n\nFor $100 per person looks like we can get a [[limo|http://www.beauwinetours.com/napa_valley_daily_limo_tours.html]]\nor you can [[cycle it|http://www.napavalleybiketours.com/tours/stagsleapdistrictbiketour/index.html]] (wine tasting fees not included sadly)\n\nYou can also do [[self guided bike tours|http://www.napavalleybiketours.com/tours/selfguidedtours/index.html]] for $89 for more flexibility.\n\n[img[http://farm1.static.flickr.com/63/157764397_b02b79d243.jpg]]\nAlso m.viator.com/tour/san-francisco/napa-and-sonoma-wine-country-tour/0-2660SFOWIN/info.htm\n\nVineyards that I like the look of that might be worth visiting individually:\n*R H Phillips - [[Toasted Head|http://www.toastedhead.com/home_intro.asp?month=2&day=20&year=1982]] (contact details [[here|http://www.catchwine.com/wineries/california/r_h_phillips_vineyard/]] - don't currently seem to do wine tasting?\n* Rutherford contact details [[here|http://www.catchwine.com/wineries/california/rutherford_wine_company/]]\n* Francis Ford Coppola winery - http://www.franciscoppolawinery.com/ - they do wine tasting in the dark\n* [[Canyon Road|http://www.canyonroadwinery.com/home.html]] - no wine tasting?\n* Artisan tasting at [[St Francis|http://www.stfranciswinery.com/visit/planning_a_visit/index.asp]]\n* [[Benziger family vineyard|http://www.benziger.com/come-visit]]\n* [[Stags Leap|http://stagsleap.com/visit]]\n\nFor an aerial view of Napa Valley check out [[Sterling Vineyards|http://www.sterlingvineyards.com/home]]. General Admission: $25\nVisitor fee includes aerial tram, self-guided tour, complimentary tasting of five wines and a souvenir wine glass.\nFor DIY tours [[tripadvisors listings|http://www.tripadvisor.com/Attractions-g33107-Activities-Sonoma_Sonoma_County_California.html]] may help.", "title": "Napa Valley, California", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75718}, {"creator": "jon", "fields": {"_hash": "bb4459fb3ee187330a487e026ee5061a2642a189"}, "created": "20110717191016", "recipe": "gadabout_private", "modified": "20110813185107", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/List%20of%20countries", "bag": "gadabout_public", "text": "The following [[List of sovereign states|http://en.wikipedia.org/wiki/List_of_sovereign_states]] are countries I plan to visit before I die. (See [[SiteInfo]]). They come from \nPlease let me know if I've missed any.\n\n!Progress\n36/193 (19%)\n\nBreaking this down into regions - I have done this purely on geographical area - nothing political meant here at all!\n\n!!Carribean (1/13)\n# [[Antigua and Barbuda]]\n# [[Bahamas]]\n# --[[Barbados]]--\n# [[Cuba]]\n# [[Dominica]]\n# [[Dominican Republic]]\n# [[Grenada]]\n# [[Jamaica]]\n# [[Haiti]]\n# [[Saint Kitts and Nevis]]\n# [[Saint Lucia]]\n# [[Saint Vincent and the Grenadines]]\n# [[Trinidad and Tobago]]\n\n!!Africa (2/55)\n# [[Algeria]]\n# [[Comoros]]\n# [[C\u00f4te d'Ivoire]]\n# [[Angola]]\n# [[Benin]]\n# [[Botswana]]\n# [[Burkina Faso]]\n# [[Burundi]]\n# [[Cameroon]]\n# [[Cape Verde]]\n# [[Central African Republic]]\n# [[Chad]]\n# [[Congo, Democratic Republic of the]]\n# [[Congo, Republic of the]]\n# [[Djibouti]]\n# --[[Egypt]]--\n# [[Equatorial Guinea]]\n# [[Eritrea]]\n# [[Ethiopia]]\n# [[Gabon]]\n# [[Ghana]]\n# [[Guinea-Bissau]]\n# [[Guinea]]\n# [[Kenya]]\n# [[Lesotho]]\n# [[Liberia]]\n# [[Libya]]\n# [[Madagascar]]\n# [[Malawi]]\n# [[Maldives]]\n# [[Mali]]\n# [[Mauritania]]\n# [[Mauritius]]\n# [[Montenegro]]\n# [[Morocco]]\n# [[Mozambique]]\n# [[Namibia]]\n# [[Niger]]\n# [[Nigeria]]\n# [[Rwanda]]\n# [[S\u00e3o Tom\u00e9 and Pr\u00edncipe]]\n# [[Senegal]]\n# [[Seychelles]]\n# [[Sierra Leone]]\n# [[Somalia]]\n# [[South Africa]]\n# [[Sudan]]\n# [[Swaziland]]\n# [[Tanzania]]\n# [[The Gambia]]\n# [[Togo]]\n# --[[Tunisia]]--\n# [[Uganda]]\n# [[Zambia]]\n# [[Zimbabwe]]\n\n!!Asia (9/25)\n# [[Bangladesh]]\n# [[Bhutan]]\n# --[[Brunei]]--\n# [[Burma]]\n# --[[Cambodia]]--\n# --[[China]]--\n# [[East Timor]]\n# [[India]]\n# [[Indonesia]]\n# --[[Japan]]--\n# [[Kazakhstan]]\n# [[Korea, North]]\n# [[Korea, South]]\n# [[Kyrgyzstan]]\n# --[[Laos]]--\n# --[[Malaysia]]--\n# [[Mongolia]]\n# [[Nepal]]\n# [[Pakistan]]\n# [[Palau]]\n# [[Philippines]]\n# --[[Singapore]]--\n# [[Sri Lanka]]\n# --[[Thailand]]--\n# --[[Vietnam]]--\n\n!!Europe (19/46)\n# --[[Albania]]--\n# [[Andorra]]\n# [[Armenia]]\n# --[[Austria]]--\n# [[Belarus]]\n# --[[Belgium]]--\n# [[Bosnia and Herzegovina]]\n# [[Bulgaria]]\n# [[Croatia]]\n# --[[Cyprus]]--\n# --[[Czech Republic]]--\n# --[[Denmark]]--\n# [[Estonia]]\n# [[Finland]]\n# --[[France]]--\n# --[[Germany]]--\n# [[Georgia]]\n# --[[Greece]]--\n# --[[Hungary]]--\n# [[Iceland]]\n# --[[Ireland]]--\n# [[Italy]]\n# [[Latvia]]\n# [[Liechtenstein]]\n# [[Lithuania]]\n# [[Luxembourg]]\n# [[Macedonia]]\n# [[Malta]]\n# [[Moldova]]\n# [[Monaco]]\n# --[[Netherlands]]--\n# [[Norway]]\n# [[Poland]]\n# --[[Portugal]]--\n# [[Romania]]\n# [[Russia]]\n# [[San Marino]]\n# [[Serbia]]\n# --[[Slovakia]]--\n# --[[Slovenia]]--\n# --[[Spain]]--\n# --[[Sweden]]--\n# --[[Switzerland]]--\n# [[Ukraine]]\n# --[[United Kingdom]]--\n# [[Vatican City]]\n\n!!Central America (3/10)\n# --[[Belize]]--\n# [[Colombia]]\n# [[Costa Rica]]\n# [[Ecuador]]\n# [[El Salvador]]\n# --[[Guatemala]]--\n# [[Honduras]]\n# --[[Mexico]]--\n# [[Nicaragua]]\n# [[Panama]]\n\n!!North America (1/2)\n# [[Canada]]\n# --[[United States]]--\n\n!!South America (0/10)\n# [[Argentina]]\n# [[Bolivia]]\n# [[Brazil]]\n# [[Chile]]\n# [[Guyana]]\n# [[Paraguay]]\n# [[Peru]]\n# [[Suriname]]\n# [[Venezuela]]\n# [[Uruguay]]\n\n!!Middle East (1/19)\n# [[Azerbaijan]]\n# [[Afghanistan]]\n# [[Iran]]\n# [[Iraq]]\n# [[Bahrain]]\n# [[Israel]]\n# [[Jordan]]\n# [[Kuwait]]\n# [[Lebanon]]\n# [[Oman]]\n# [[Qatar]]\n# [[Saudi Arabia]]\n# [[Syria]]\n# [[Tajikistan]]\n# --[[Turkey]]--\n# [[Turkmenistan]]\n# [[United Arab Emirates]]\n# [[Uzbekistan]]\n# [[Yemen]]\n\n!Oceania (0/13)\n# [[Australia]]\n# [[Fiji]]\n# [[Kiribati]]\n# [[Marshall Islands]]\n# [[Micronesia, Federated States of]]\n# [[Nauru]]\n# [[New Zealand]]\n# [[Papua New Guinea]]\n# [[Samoa]]\n# [[Solomon Islands]]\n# [[Tonga]]\n# [[Tuvalu]]\n# [[Vanuatu]]\n\n\n-----\n\nThe following countries do not appear in the list (reasons given below)\nNew Zealand is a Commonwealth realm[Note 6] and has responsibilities for (but has no sovereignty over) two freely associated states:\n# [[Cook Islands]]\n# [[Niue]]\n\n# [[Abkhazia]]\n# [[American Samoa]] (overseas region of USA)\n# [[Greenland]] (part of Denmark)\n# [[Guadeloupe]] (overseas region of France)\n# [[Guam]] (overseas region of USA)\n# --[[Hong Kong]]-- (part of China)\n# [[Kosovo]] (declared independence in Feb 2008)\n# --[[Macao]]-- (part of China)\n# Montserrat (British overseas territory in Carribean)\n# [[Nagorno-Karabakh]]\n# [[Northern Cyprus]]\n# --[[Northern Ireland]]--  (part of the United Kingdom)\n# [[Palestine]] (has observer status at UN)\n# [[Puerto Rico]] (USA)\n# [[Sahrawi Arab Democratic Republic]]\n# --[[Scotland]]--  (part of the United Kingdom)\n# [[South Ossetia]]\n# [[South Sudan]] (declared independence in 2011)\n# [[Somaliland]]\n# [[Taiwan]]\n# [[Tokelau]] (part of New Zealand)\n# [[Transnistria]]\n# --[[Wales]]-- (part of the United Kingdom)", "title": "List of countries", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75695}, {"creator": "jon", "fields": {"geo.lat": "48.1372719", "geo.long": "11.5754815", "_hash": "0123dd21bea35b02f0af8b743920626004b58c36"}, "created": "20110807115733", "recipe": "gadabout_private", "modified": "20110807123522", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Munich%2C%20Germany", "bag": "gadabout_public", "text": "We did lots of drinking and eating pretzels in Munich.\n\nThe Englischer Garten was great for drinking on a sunny day. It was also full of naked German's sunbathing. There was a nice stream running through the park where everyone was jumping in.\n\nWe drank and ate pretzels at Augustiner Bierhalle (http://www.augustiner-restaurant.com/html/film.html)\n\nNext time I go...\nhttp://www.beerbikemunich.com/bike.html", "title": "Munich, Germany", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75711}, {"creator": "jon", "fields": {"_hash": "e92dd195d3edd48e5c8cfc77a58bb502bb156c9b"}, "created": "20110806165150", "recipe": "gadabout_private", "modified": "20110806170244", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Cameroon", "bag": "gadabout_public", "text": "The country name comes from a corrupted version of the Portuguese word for prawns. You can see  lots of prawns swimming up the river in [[Douala, Cameron]] in November.\n\nhttp://en.wikipedia.org/wiki/Fon_of_Bafut\n\n[img[http://farm1.static.flickr.com/89/249219786_9c4a21c4ba.jpg]]\nhttp://www.flickr.com/photos/shooteverypig/249219786/sizes/m/in/photostream/\n\nAlso see Ekom falls,", "title": "Cameroon", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75530}, {"creator": "jon", "fields": {"_hash": "ba55ccad71f30dbada701437fd37e1901491da3a"}, "created": "20110806160732", "recipe": "gadabout_private", "modified": "20110806160739", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_private/tiddlers/SiteInfo", "bag": "gadabout_private", "text": "In 2007 I challenged myself to visit every UN recognised country in the world. That's a mighty bit of work, and although I probably will never do that, it would be good to get as close to that target as possible. Here I collect notes on how I will and how I did do that during my many backpacking adventures.", "title": "SiteInfo", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75415}, {"creator": "jon", "fields": {"geo.lat": "39.1671", "geo.long": "-120.1441", "_hash": "7a9ada0f674a7f017b89240d99767014b1e057f7"}, "created": "20110804193917", "recipe": "gadabout_private", "modified": "20110804193917", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Lake%20Tahoe%2C%20USA", "bag": "gadabout_public", "text": "It's not too far from Carson City in Nevada.\n\n[img[http://farm5.static.flickr.com/4118/4942889156_c514f8c6ec.jpg]]\nhttp://www.flickr.com/photos/rraheja/4942889156/sizes/m/in/photostream/\n", "title": "Lake Tahoe, USA", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75665}, {"creator": "jon", "fields": {"geo.lat": "37.8491831664333", "geo.long": "-119.556037106674", "_hash": "625119e5433fc745918025b1c18360fa72f763e2"}, "created": "20110514193318", "recipe": "gadabout_private", "modified": "20110804193735", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Yosemite%20National%20Park%2C%20California", "bag": "gadabout_public", "text": "A four hour drive from [[San Francisco, USA]].\nhttp://wikitravel.org/en/Yosemite_National_Park\n\n[[Lake Tahoe, USA]] is nearby.\n", "title": "Yosemite National Park, California", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75849}, {"creator": "jon", "fields": {"_hash": "4abead31d5952596fd8fbafcfb958571175326e4", "summary": "Upload files to TiddlySpace"}, "created": "20110726112851", "recipe": "gadabout_private", "modified": "20110804130829", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/upload", "bag": "apps_public", "text": "<html>\n<head>\n<title>Upload file to your space</title>\n<style type=\"text/css\">\nform,\ninput,\ntextarea {\n\tborder: solid 1px green;\n}\n\ntextarea {\n\twidth: 400px;\n\theight: 400px;\n}\n\nform.error,\ntextarea.error,\ninput.error {\n\tborder: solid 1px red;\n}\n\nform.saving,\ntextarea.saving,\ninput.saving {\n\tborder: solid 1px yellow;\n}\n\n</style>\n<link href=\"/HtmlCss\" type='text/css' rel='stylesheet' >\n<script type='text/javascript' src='http://tiddlyspace.com/bags/ts_public/tiddlers/jquery.min.js'></script>\n<script type='text/javascript' src='http://tiddlyspace.com/bags/ts_public/tiddlers/jquery-json.min.js'></script>\n<script type='text/javascript' src='/TiddlySpaceCSRF'></script>\n<script type='text/javascript' src='/jquery.form.js'></script>\n<script type=\"text/javascript\">\n$(document).ready(function() {\n\tvar space = window.location.hostname.split(\".\")[0];\n\tvar csrf = window.getCSRFToken();\n\tvar form = $('#upload')[0];\n\t$(form).attr(\"action\", \"/bags/\" + space + \"_public/tiddlers?csrf_token=\" + csrf + \"&redirect=/tiddlers\");\n\t$(form).ajaxForm({\n\t\tbeforeSubmit: function() {\n\t\t\tvar file = $(\"[name=file]\").val();\n\t\t\tvar a = file.split('\\\\');\n\t\t\tfile = a[a.length - 1];\n\t\t\tvar val = $(\"[name=title]\").val();\n\t\t\tif(!val) {\n\t\t\t\t$(\"[name=title]\").val(file);\n\t\t\t}\n\t\t},\n\t\tsuccess: function(a) {\n\t\t\tvar title = $(\"[name=title]\").val;\n\t\t\t$('#messageArea').html(\"Successfully uploaded to \");\n\t\t\t$(\"<a />\").attr(\"href\", \"/\" + encodeURIComponent(title)).text(title).appendTo(\"#messageArea\");\n\t\t\t$(\"[name=title]\").val(\"\");\n\t\t},\n\t\terror: function() {\n\t\t\t$('#messageArea').html(\"Error uploading file.\")\n\t\t}\n\t});\n});\n</script>\n</head>\n<body>\n<div id=\"container\">\n\t<div class=\"settings\">\n\t\t<h1>Upload files to your space</h1>\n\t\t<div id=\"messageArea\"></div>\n\t\t<form id=\"upload\" method=\"POST\" enctype=\"multipart/form-data\">\n\t\t\t\ttitle: <input type=\"text\" name=\"title\" />\n\t\t\t\t<input type=\"hidden\" name=\"tags\" value=\"excludeLists\">\n\t\t\t\t<input type=\"hidden\" name=\"csrf_token\" class=\"csrf\" />\n\t\t\t\t<input type=\"file\" name=\"file\" />\n\t\t\t\t<input type=\"submit\" value=\"upload\" />\n\t\t</form>\n\t</div>\n</div>\n</body>\n</html>", "title": "upload", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists"], "revision": 455197}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "52623687986a6719c6cfa52087c8a15213ec184a", "summary": ""}, "created": "20110513084144", "recipe": "gadabout_private", "modified": "20110804130403", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/editor", "bag": "travelblog_public", "text": "<html>\n<head>\n\t<title>Travelblog</title>\n\t<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />\n\t<link href=\"HtmlCss\" type='text/css' rel='stylesheet'></link>\n\t<link  href=\"http://fonts.googleapis.com/css?family=Droid+Sans:regular,bold\" rel=\"stylesheet\" type=\"text/css\" >\n</head>\n<body>\n<div id='tbbody'>\n\t<!--HEADER-->\n\t<div id='siteheading'>\n\t\t<div id='SiteIcon'></div>\n\t\t<h1 id='siteTitle'></h1>\n\t</div>\n\t<div id='SiteInfo'></div>\n\t<!--HEADER-->\n<hr/>\n\t<a id='listLink' href=\"/tiddlers?select=tag:!excludeLists&select=bag:!takenote_public&sort=title\">list travel notes</a>\n<hr/>\n\t<div id='window-edit'>\n\t\t<noscript>javascript is required to edit content on this site</noscript>\n\t</div>\n</div>\n<script src=\"http://www.openlayers.org/api/OpenLayers.js\"></script>\n<script type=\"text/javascript\" src=\"http://ajax.googleapis.com/ajax/libs/jquery/1.5.1/jquery.min.js\"></script>\n\t<script type=\"text/javascript\" src=\"http://tiddlyspace.com/bags/geoplugins_public/tiddlers/jqGeoSearch\"></script>\n\t<script type=\"text/javascript\" src=\"travelblog.js\"></script>\n</body>\n</html>", "title": "editor", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["app", "excludeLists"], "revision": 224664}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "3d3b3d592d277ee9a87fe6382376dd3d7df622a0", "summary": ""}, "created": "20110513083910", "recipe": "gadabout_private", "modified": "20110804130201", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/HtmlCss", "bag": "travelblog_public", "text": "#window .meta {\ndisplay: none;\n}\n#window h1,\n#window h2,\n#window h3,\n#window h4 {\ncolor: #454545;\n}\n#window h1 {\nfont-size: 1.6em;\n}\n#window h2 {\nfont-size: 1.3em;\n}\n#window h3 {\nfont-size: 1.1em;\n}\n#window h4 {\nfont-size: 1em;\n}\n#window h5 {\nfont-size: 0.8em;\n}\nblockquote {\nquotes: \"\\201C\" \"\\201D\";\nmargin-bottom: 50px;\n}\n.geobutton,\n#publish {\nclear: both;\ndisplay: block;\n}\nblockquote:before {\ncontent: open-quote;\nfont-size: 3em;\nfont-weight: bold;\n}\nblockquote:after {\ncontent: close-quote;\nfont-size: 3em;\nfont-weight: bold;\nfloat: right;\n}\n\n\n#footer a.footerLink {\nmargin-right: 8px;\n}\n\na.brokenLink {\nfont-style: oblique;\ncolor: rgb(0, 0, 170);\n}\n\n#article .end {\nclear: both;\n}\n\n#footer {\nmargin-top: 20px;\nborder-top: solid 1px #EEE;\ncolor: #AAA;\n}\nstrike {\nfont-weight: bold;\n}\n.activeTiddlyLink {\nfont-style: \"italic\";\nfont-weight: \"bold\"\n}\n.enhance-annotation {\npadding: 10px;\nwidth: 100%;\ndisplay: block;\nbackground-color: #FFFFC8;\ncolor: #00A800;\n}\n.enhance-annotation a {\npadding: 10px;\ndisplay: block;\nbackground-color: #FFFFC8;\ncolor: #00A800;\nfont-weight: bold;\n}\n\n#text-html img {\nmax-width: 700px;\n}\n#cancelButton,\n#deleteButton {\nborder: none;\nbackground: none;\ntext-decoration: underline;\ncolor: red;\n}\n#window-edit, #window {\nposition: relative;\nfont-size: 0.8em;\n}\n#window-edit textarea {\nheight: 200px;\nwidth: 548px;\ndisplay: block;\nfloat:left;\n}\n#edit-toolbar {\nposition: absolute;\nright: 0px;\ntop: 30px;\n}\n\n#mapdiv {\nheight: 250px;\nwidth: 250px;\nborder: solid 1px #4D4D4D;\nfloat: right;\n}\n#window-edit #mapdiv {\nfloat: left;\n}\n#SiteIcon {\nbackground-image: url(/SiteIcon);\nheight: 48px;\nwidth: 48px;\nbackground-repeat: no-repeat;\n-webkit-border-radius: 5px;\nbackground-size: 48px 48px;\nfloat: left;\nborder: solid 2px #CCC;\nbox-shadow: 2px 2px 2px #AAA;\nmargin-right: 8px;\npadding: 6px;\nbackground-position: center center;\n}\n#siteTitle {\nheight: 60px; /*48px + padding of SiteIcon (6*2)*/\nline-height: 60px;\nfont-size: 2em;\ntext-shadow: 0 3px 0 rgba(200, 200, 200, 0.5);\nmargin-top: 0px;\nmargin-left: 18px;\ntext-decoration: none;\ncolor: #454545;\nfont-family: 'Droid Sans', Arial, sans-serif;\n}\n#SiteInfo {\nfont-size: 0.8em;\nfont-style: oblique;\ncolor: #5E5E5E;\n}\n#header h1 a {\nline-height: 60px;\ntext-decoration: none;\ncolor: #454545;\nfont-family: 'Droid Sans', Arial, sans-serif;\nborder-bottom: solid 2px #6B6B6B;\npadding-right: 50px;\n}\n.mapArea {\nright: -12px;\nposition: relative;\n}\n.resultsArea {\nborder: 1px dotted #CCC;\nfont-size: 0.6em;\nmargin-bottom: 8px;\npadding: 8px;\n}\n.resultsArea a {\nmargin-right: 8px;\n}\n\nbody {\nfont-size: 14px;\n}\n\n#container,\n#tbbody {\nwidth: 800px;\nfont-family: 'Droid Sans', Verdana;\nmargin: auto;\nborder-left: solid 1px #999;\nborder-right: solid 1px #CCC;\nbackground-color: white;\npadding-bottom: 20px;\npadding-left: 20px;\npadding-right: 20px;\npadding-top: 2px;\n}\nh1,h2,h3,h4,h5 {\nfont-family: Helvetica;\n}\n#windowfooter {\nfont-size: 10px;\ncolor: #aaa;\nmargin-top: 20px;\n}\n\n#bar {\nposition: absolute;\ntop: 0px;\nright: 0px;\nfont-size: 0.8em;\n}\n#bar a {\nmargin-right: 8px;\n}\n\n\n/* openlayers specific */\n\ndiv.olMap {\n    z-index: 0;\n    padding: 0px!important;\n    margin: 0px!important;\n    cursor: default;\n}\n\ndiv.olMapViewport {\n    text-align: left;\n}\n\ndiv.olLayerDiv {\n   -moz-user-select: none;\n}\n\n.olLayerGoogleCopyright {\n    left: 2px;\n    bottom: 2px;  \n}\n.olLayerGooglePoweredBy {\n    left: 2px;\n    bottom: 15px;   \n}\n.olControlAttribution {\n    font-size: smaller; \n    right: 3px; \n    bottom: 4.5em; \n    position: absolute; \n    display: block;\n}\n.olControlScale {\n    right: 3px;\n    bottom: 3em;\n    display: block;\n    position: absolute;\n    font-size: smaller;\n}\n.olControlScaleLine {\n   display: block;\n   position: absolute;\n   left: 10px;\n   bottom: 15px;\n   font-size: xx-small;\n}\n.olControlScaleLineBottom {\n   border: solid 2px black;\n   border-bottom: none;\n   margin-top:-2px;\n   text-align: center;\n}\n.olControlScaleLineTop {\n   border: solid 2px black;\n   border-top: none;\n   text-align: center;\n}\n\n.olControlPermalink {\n    right: 3px;\n    bottom: 1.5em;\n    display: block;\n    position: absolute;\n    font-size: smaller;\n} \n\ndiv.olControlMousePosition {\n    bottom: 0em;\n    right: 3px;\n    display: block;\n    position: absolute;\n    font-family: Arial;\n    font-size: smaller;\n}\n\n.olControlOverviewMapContainer {\n    position: absolute;\n    bottom: 0px;\n    right: 0px;\n}\n\n.olControlOverviewMapElement {\n    padding: 10px 18px 10px 10px;\n    background-color: #00008B;\n    -moz-border-radius: 1em 0 0 0;\n}\n\n.olControlOverviewMapMinimizeButton {\n    right: 0px;\n    bottom: 80px;\n}    \n\n.olControlOverviewMapMaximizeButton {\n    right: 0px;\n    bottom: 80px;\n}\n\n.olControlOverviewMapExtentRectangle {\n    overflow: hidden;\n    background-image: url(\"img/blank.gif\");\n    cursor: move;\n    border: 2px dotted red;\n}\n.olControlOverviewMapRectReplacement {\n    overflow: hidden;\n    cursor: move;\n    background-image: url(\"img/overview_replacement.gif\");\n    background-repeat: no-repeat;\n    background-position: center;\n}\n\n.olLayerGeoRSSDescription {\n    float:left;\n    width:100%;\n    overflow:auto;\n    font-size:1.0em;\n}\n.olLayerGeoRSSClose {\n    float:right;\n    color:gray;\n    font-size:1.2em;\n    margin-right:6px;\n    font-family:sans-serif;\n}\n.olLayerGeoRSSTitle {\n    float:left;font-size:1.2em;\n}\n\n.olPopupContent {\n    padding:5px;\n    overflow: auto;\n}    \n.olControlNavToolbar { \n    width:0px;\n    height:0px;\n}    \n.olControlNavToolbar div { \n  display:block;\n  width:  28px;\n  height: 28px;\n  top: 300px;\n  left: 6px;\n  position: relative;\n}\n\n.olControlNavigationHistory {\n   background-image: url(\"img/navigation_history.png\");\n   background-repeat: no-repeat;\n   width:  24px;\n   height: 24px;\n\n}\n.olControlNavigationHistoryPreviousItemActive { \n  background-position: 0px 0px;\n}\n.olControlNavigationHistoryPreviousItemInactive { \n   background-position: 0px -24px;\n}\n.olControlNavigationHistoryNextItemActive { \n   background-position: -24px 0px;\n}\n.olControlNavigationHistoryNextItemInactive { \n   background-position: -24px -24px;\n}\n\n.olControlNavToolbar .olControlNavigationItemActive { \n  background-image: url(\"img/panning-hand-on.png\");\n  background-repeat: no-repeat;\n}\n.olControlNavToolbar .olControlNavigationItemInactive { \n  background-image: url(\"img/panning-hand-off.png\");\n  background-repeat: no-repeat;\n}\n.olControlNavToolbar .olControlZoomBoxItemActive { \n  background-image: url(\"img/drag-rectangle-on.png\");\n  background-color: orange;\n  background-repeat: no-repeat;\n}\n.olControlNavToolbar .olControlZoomBoxItemInactive { \n  background-image: url(\"img/drag-rectangle-off.png\");\n  background-repeat: no-repeat;\n}\n.olControlEditingToolbar  {\n    float:right;\n    right: 0px;\n    height: 30px; \n    width: 200px;\n}\n.olControlEditingToolbar div { \n  background-image: url(\"img/editing_tool_bar.png\");\n  background-repeat: no-repeat;\n  float:right;\n  width:  24px;\n  height: 24px;\n  margin: 5px;\n}\n.olControlEditingToolbar .olControlNavigationItemActive { \n  background-position: -103px -23px; \n}\n.olControlEditingToolbar .olControlNavigationItemInactive { \n  background-position: -103px -0px; \n}\n.olControlEditingToolbar .olControlDrawFeaturePointItemActive { \n  background-position: -77px -23px; \n}\n.olControlEditingToolbar .olControlDrawFeaturePointItemInactive { \n  background-position: -77px -0px; \n}\n.olControlEditingToolbar .olControlDrawFeaturePathItemInactive { \n  background-position: -51px 0px; \n}\n.olControlEditingToolbar .olControlDrawFeaturePathItemActive { \n  background-position: -51px -23px; \n}\n.olControlEditingToolbar .olControlDrawFeaturePolygonItemInactive { \n  background-position: -26px 0px; \n}\n.olControlEditingToolbar .olControlDrawFeaturePolygonItemActive { \n  background-position: -26px -23px ;                                                                   \n}\ndiv.olControlSaveFeaturesItemActive { \n    background-image: url(img/save_features_on.png);\n    background-repeat: no-repeat;\n    background-position: 0px 1px;\n}\ndiv.olControlSaveFeaturesItemInactive { \n    background-image: url(img/save_features_off.png);\n    background-repeat: no-repeat;\n    background-position: 0px 1px;\n}\n\n.olHandlerBoxZoomBox {\n    border: 2px solid red;\n    position: absolute;\n    background-color: white;\n    opacity: 0.50;\n    font-size: 1px;\n    filter: alpha(opacity=50);\n}\n.olHandlerBoxSelectFeature {\n    border: 2px solid blue;\n    position: absolute;\n    background-color: white;\n    opacity: 0.50;\n    font-size: 1px;\n    filter: alpha(opacity=50);\n}   \n\n.olControlPanPanel {\n    top: 10px;\n    left: 5px;\n}  \n\n.olControlPanPanel div {\n    background-image: url(img/pan-panel.png);\n    height: 18px;\n    width: 18px;\n    cursor: pointer;\n    position: absolute;\n}\n\n.olControlPanPanel .olControlPanNorthItemInactive {\n    top: 0px;\n    left: 9px;\n    background-position: 0px 0px;\n}\n.olControlPanPanel .olControlPanSouthItemInactive {\n    top: 36px;\n    left: 9px;\n    background-position: 18px 0px;\n}\n.olControlPanPanel .olControlPanWestItemInactive {\n    position: absolute;\n    top: 18px;\n    left: 0px;\n    background-position: 0px 18px;\n}\n.olControlPanPanel .olControlPanEastItemInactive {\n    top: 18px;\n    left: 18px;\n    background-position: 18px 18px;\n}\n\n.olControlZoomPanel {\n    top: 71px;\n    left: 14px;\n} \n\n.olControlZoomPanel div {\n    background-image: url(img/zoom-panel.png);\n    position: absolute;\n    height: 18px;\n    width: 18px;\n    cursor: pointer;\n}\n\n.olControlZoomPanel .olControlZoomInItemInactive {\n    top: 0px;\n    left: 0px;\n    background-position: 0px 0px;\n}\n\n.olControlZoomPanel .olControlZoomToMaxExtentItemInactive {\n    top: 18px;\n    left: 0px;\n    background-position: 0px -18px;\n}\n\n.olControlZoomPanel .olControlZoomOutItemInactive {\n    top: 36px;\n    left: 0px;\n    background-position: 0px 18px;\n}\n\n.olPopupCloseBox {\n  background: url(\"img/close.gif\") no-repeat;\n  cursor: pointer;\n}\n\n.olFramedCloudPopupContent {\n    padding: 5px;\n    overflow: auto;\n}\n\n.olControlNoSelect {\n -moz-user-select: none;\n}\n\n.olImageLoadError {\n    background-color: pink;\n    opacity: 0.5;\n    filter: alpha(opacity=50); /* IE */\n}\n\n/**\n * Cursor styles\n */\n\n.olCursorWait {\n    cursor: wait;\n}\n.olDragDown {\n    cursor: move;\n}\n.olDrawBox {\n    cursor: crosshair;\n}\n.olControlDragFeatureOver {\n    cursor: move;\n}\n.olControlDragFeatureActive.olControlDragFeatureOver.olDragDown {\n    cursor: -moz-grabbing;\n}\n\n/**\n * Layer switcher\n */\n.olControlLayerSwitcher {\n    position: absolute;\n    top: 25px;\n    right: 0px;\n    width: 20em;\n    font-family: sans-serif;\n    font-weight: bold;\n    margin-top: 3px;\n    margin-left: 3px;\n    margin-bottom: 3px;\n    font-size: smaller;\n    color: white;\n    background-color: transparent;\n}\n\n.olControlLayerSwitcher .layersDiv {\n    padding-top: 5px;\n    padding-left: 10px;\n    padding-bottom: 5px;\n    padding-right: 75px;\n    background-color: darkblue;\n    width: 100%;\n    height: 100%;\n}\n\n.olControlLayerSwitcher .layersDiv .baseLbl,\n.olControlLayerSwitcher .layersDiv .dataLbl {\n    margin-top: 3px;\n    margin-left: 3px;\n    margin-bottom: 3px;\n}\n\n.olControlLayerSwitcher .layersDiv .baseLayersDiv,\n.olControlLayerSwitcher .layersDiv .dataLayersDiv {\n    padding-left: 10px;\n}\n\n.olControlLayerSwitcher .maximizeDiv,\n.olControlLayerSwitcher .minimizeDiv {\n    top: 5px;\n    right: 0px;\n}\n", "title": "HtmlCss", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/css", "tags": ["excludeLists", "theme"], "revision": 224529}, {"creator": "jon", "fields": {"_hash": "5493103cbed23a569485f9432f0df20fdd5c20df", "summary": ""}, "created": "20110804122812", "recipe": "gadabout_private", "modified": "20110804122847", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/HtmlJavascript", "bag": "gadabout_public", "text": "http://www.openlayers.org/api/OpenLayers.js\nhttp://tiddlyspace.com/bags/console/tiddlers/jquery.min.js\n/travelblog.js\nhttp://htmljs.tiddlyspace.com/htmljs-disqus\n/tracker.js\nhttp://www.google-analytics.com/ga.js\n", "title": "HtmlJavascript", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 75619}, {"creator": "jon", "fields": {"_hash": "8dba7b1837d8eda32a1721527266f4203ba9d84c"}, "created": "20110804064555", "recipe": "gadabout_private", "modified": "20110804064555", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Move", "bag": "gadabout_public", "text": "<html>\n<iframe src=\"http://player.vimeo.com/video/27246366?color=ffffff\" width=\"400\" height=\"225\" frameborder=\"0\"></iframe><p><a href=\"http://vimeo.com/27246366\">MOVE</a> from <a href=\"http://vimeo.com/rickmereki\">Rick Mereki</a> on <a href=\"http://vimeo.com\">Vimeo</a>.</p>\n</html>\n", "title": "Move", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75707}, {"creator": "jon", "fields": {"created": "2011-08-01T10:47:53.395Z", "geo.lat": "52.9296614", "modified": "2011-08-02T08:02:28.392Z", "_title_validated": "yes", "_title_set": "yes", "geo.long": "1.2924843", "_hash": "232c22c6fdfba0d523a4c763352b084977c4cf2a"}, "created": "20110802080227", "recipe": "gadabout_private", "modified": "20110802080227", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Sheringham%2C%20Norfolk", "bag": "gadabout_public", "text": "Crayfish tails from the stall at end of gun street\nFish and chips from straits\nIce cream from ronaldos\nLose a few quid in the amusements\nMission complete.\n", "title": "Sheringham, Norfolk", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75804}, {"creator": "jon", "fields": {"geo.lat": "13.7527447", "geo.marker": "", "geo.long": "100.4940766", "_hash": "bd73f798d5886358d670d0c9d34e881162ed6617"}, "created": "20110723080821", "recipe": "gadabout_private", "modified": "20110730124510", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bangkok%2C%20Thailand", "bag": "gadabout_public", "text": "Bangkok was my first experience of Asia.\nIt was quite stressful.", "title": "Bangkok, Thailand", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75473}, {"creator": "jon", "fields": {"geo.lat": "19.8887438", "geo.long": "102.135898", "_hash": "d29974138a0ba8fad52a6e9a69edad02272eb34c"}, "created": "20110728143233", "recipe": "gadabout_private", "modified": "20110728143233", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Luang%20Prabang%2C%20Laos", "bag": "gadabout_public", "text": "My memory of LP was going to a shop in the middle of nowhere and buying a lamp, and the lady shopkeeper refusing to let me leave without taking her umbrella as she was concerned I would get wet.\n\nI still have that umbrella, hanging in my room reminding me of how those with so little can still give so much.", "title": "Luang Prabang, Laos", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75696}, {"creator": "jon", "fields": {"geo.lat": "6.3223472152277", "geo.long": "99.849516380126", "_hash": "166e77a9908c1ef757fb7f1d03b8dba7d024bade"}, "created": "20101120204217", "recipe": "gadabout_private", "modified": "20110727075902", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Langkawi%2C%20Malaysia", "bag": "gadabout_public", "text": "Go to [[Ko Lipe, Thailand]] instead.\n\nAlthough my Dad liked it here...", "title": "Langkawi, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75669}, {"creator": "jon", "fields": {"_hash": "daca4e2f938cd466a0005a37f2b83e0746f54840"}, "created": "20110727075338", "recipe": "gadabout_private", "modified": "20110727075758", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Mozambique", "bag": "gadabout_public", "text": "Mozambique has a pretty impressive coast:\n\n<html>\n<iframe src=\"http://player.vimeo.com/video/24982498?title=0&amp;byline=0&amp;portrait=0\" width=\"400\" height=\"225\" frameborder=\"0\"></iframe><p><a href=\"http://vimeo.com/24982498\">The Dune Discovery- paragliding where no one has before</a> from <a href=\"http://vimeo.com/bestodyssey\">Offshore Odysseys</a> on <a href=\"http://vimeo.com\">Vimeo</a>.</p>\n</html>\n", "title": "Mozambique", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75709}, {"creator": "jon", "fields": {"geo.lat": "23.1229013", "geo.long": "113.2529963", "_hash": "60ff3e6cacf60065be9ed89110ad29f0ee967885"}, "created": "20110727062925", "recipe": "gadabout_private", "modified": "20110727062946", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/China", "bag": "gadabout_public", "text": "I went to China.\n\nI always imagined I first trip would be touching down in Beijing and checking out the great wall. Instead I found myself extremely bored in [[Hong Kong]] (a week there is far too long) and taking a day tour (I hate tours) to China to [[Guangzhou, China]].\n\nNow I really hate tours, but visas can be tricky to get. You can't just rock up. So basically this was my only choice - join a day trip. My mum had done one back in 1985 when pregnant with me (my first time abroad I guess) - so I figured that was another reason to do it.\n\nIt was the worse tour you could ever imagine.\n\nI got to see a panda.... in a zoo.\nI went to this museum, then halfway through they revealed you could BUY things on display in the museum. Pretty sure that was a shop...\nWe went to a restaurant and ate 'authentic' chinese food... although we ate sweet and sour chicken... which I ''know'' is westernised!\nWe went to see local crafts... in a big shop.\nAlthough we did see a temple, and [[a memorial hall|http://en.wikipedia.org/wiki/Sun_Yat-sen_Memorial_Hall_(Guangzhou)]] - they were both a little disappointing. Most of the group I was with were couples who had were outside of their comfort zone. I was firmly in it.\n\nIt was clear the trip for them was all about the commission rather than getting us to feel China.\n\nAs we left this was confirmed as they tried to get me to buy a plate for \u00a310 with yours truly eating dinner on it.\n[img[http://farm6.static.flickr.com/5091/5576973658_805476b8e2.jpg]]\nThis followed a request for tips.\n\nHopefully my expression on the plate with my chopsticks gives an idea of the disappointment which was going through my head during that chinese meal we had.\n\npictures on flickr as always [[here|http://www.flickr.com/photos/jdlrobson/5576973658/]]", "title": "China", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75548}, {"creator": "jon", "fields": {"geo.lat": "22.260745021644", "geo.long": "114.17839728571", "_hash": "52140b6b3b715ef0dc282b5046df4fab05025bb9"}, "created": "20101128170838", "recipe": "gadabout_private", "modified": "20110727061411", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hong%20Kong", "bag": "gadabout_public", "text": "For those of you going to Hong Kong in February. Beware the fog!\nMy trip here was blighted by bad weather.\n\nI went to see the Big Buddha, and it was only when I got to the top of the stairs I could even make out the Buddha himself:\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/4631202157/\" title=\"Oh my Buddha by rakugo, on Flickr\"><img src=\"http://farm5.static.flickr.com/4040/4631202157_2680774027.jpg\" width=\"500\" height=\"375\" alt=\"Oh my Buddha\" /></a>\n</html>\n\nHong Kong was pretty much how I expected:\n[img[http://farm5.static.flickr.com/4065/4631201239_6a6c11415c.jpg]]\n\nThere was also great walking on grass island:\n[img[http://farm5.static.flickr.com/4064/4631800020_79215de6be.jpg]]\n\nPhotos on this page can be found on flickr [[here|http://www.flickr.com/photos/jdlrobson/4631201239/sizes/m/in/photostream/]] and [[here|http://www.flickr.com/photos/jdlrobson/4631800020/sizes/m/in/photostream/]].\n", "title": "Hong Kong", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75617}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-02T15:04:03.402Z", "geo.lat": "39.8874001451375", "modified": "2011-07-03T14:48:10.593Z", "_title_validated": "yes", "_title_set": "yes", "geo.long": "19.5832415307327", "_hash": "ea06a6d321bc9504a56fe075ba8ec636914c3815"}, "created": "20110717130206", "recipe": "gadabout_private", "modified": "20110727061131", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Erikoussa%20Island%2C%20Greece", "bag": "gadabout_public", "text": "Nice windmill. Church on hill. Chilled out. More locals then tourists.\n[img[http://farm7.static.flickr.com/6041/5914918122_f84730b88d.jpg]]\n\nTook long walk to this bar called Fiki. Has nice view over harbour and in a nice windy spot. Rude waiter though and nothing other than beer. Desperately craving ginger beer but nobody has it!\n\nNo dolphins spotted from boat and water not as crystal blue as expected. Scenery isn't brilliant from the boat. There are some pretty views here and those make me reminise of grass island in [[Hong Kong]] but its better weather here. Nice view of [[Canal d'amour, Sidari, Corfu]] right at the end!\n\n//view the photo in this post [[here|http://www.flickr.com/photos/jdlrobson/5914918122/sizes/m/in/photostream/]]//", "title": "Erikoussa Island, Greece", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75587}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-05T10:36:57.393Z", "geo.lat": "39.86581206321716", "modified": "2011-07-05T11:53:16.031Z", "_title_set": "yes", "geo.long": "20.025522708892822", "_hash": "8599b710182401acfb4792611be80bb5bdadf031"}, "created": "20110717125533", "recipe": "gadabout_private", "modified": "20110727060935", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Lekursi%20Castle%2C%20Albania", "bag": "gadabout_public", "text": "great views of butrint lake, corfu and the beaches around Albania from the castle.\n[img[http://farm7.static.flickr.com/6025/5914908102_c998f6d6eb.jpg]]\n[[link|http://www.flickr.com/photos/jdlrobson/5914908102/in/photostream/]]\n\nRuins of an old village lie outside\n[img[http://farm6.static.flickr.com/5273/5914347745_df15b4027a.jpg]]\n[[on flickr|http://www.flickr.com/photos/jdlrobson/5914347745/]]\n\nThe castle has now been repurposed as a restaurant with a lovely terrace which takes advantage of the view.\n[img[http://farm7.static.flickr.com/6041/5914347927_09204e147a.jpg]]\n[[link|http://www.flickr.com/photos/jdlrobson/5914347927/sizes/m/in/photostream/]]\n\nAlbania pretty damn nice!", "title": "Lekursi Castle, Albania", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75672}, {"creator": "jon", "fields": {"geo.lat": "6.1738605", "geo.long": "118.0604445", "_hash": "ce574d774fb58b154d0ae575c090ab903be2be29"}, "created": "20110725074321", "recipe": "gadabout_private", "modified": "20110725074321", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Lankayan%20Island%2C%20Malaysia", "bag": "gadabout_public", "text": "Another beautiful island of this area.\n", "title": "Lankayan Island, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75670}, {"creator": "jon", "fields": {"geo.lat": "-90", "geo.long": "0", "_hash": "510a8f3b98face5c715ceb23183e9ac5773d810b"}, "created": "20110718141639", "recipe": "gadabout_private", "modified": "20110723191246", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Gadabout", "bag": "gadabout_public", "text": "<<<\ngad\u00b7a\u00b7bout/\u02c8gad\u0259\u02ccbout/\n\nNoun: \n# A habitual pleasure-seeker\n# a person who travels often or to many different places, especially for pleasure.\n<<<\n\nIn 2007 I challenged myself to visit [[every UN recognised country in the world|List%20of%20countries]].\nFor that I need [[notes|/tiddlers?select=tag:!excludeLists&select=bag:!takenote_public&sort=title]].\n\nTravel blogs in the traditional sense suck. I don't care where you are now. I care about where I am now or going to be soon and your experiences of being at said place. This site reflects that. I hope you  enjoy the experience. If not let me know why.", "title": "Gadabout", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75595}, {"creator": "jon", "fields": {"geo.lat": "45", "geo.long": "-66", "_hash": "cd6ba1b83bfb1e2030ff1a0a281d31fb12190884"}, "created": "20110723133147", "recipe": "gadabout_private", "modified": "20110723133702", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bay%20of%20Fundy%2C%20Canada", "bag": "gadabout_public", "text": "Lobster, lighthouses, while watching. Tidal whirlpool on deer island. Hiking along the fundy trail parkway.\n\nIn [[Canada]]", "title": "Bay of Fundy, Canada", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75480}, {"creator": "jon", "fields": {"geo.lat": "4.890278", "geo.long": "114.942222", "_hash": "aee43378af241492e9cd45ae9730ca4fb661c373"}, "created": "20110723080821", "recipe": "gadabout_private", "modified": "20110723083056", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bandar%20Seri%20Begawan%2C%20Brunei", "bag": "gadabout_public", "text": "BSB is an odd place.\n\nI found it even the more stranger as at the time I was there, there was a conference going on in London about some work I did for the charity [[ilga|http://ilga.org]] which was effectively shaming the country for being one of the countries of the world that say homosexuality is illegal. You can see a bit of background on this project here:\n\n<html>\n<iframe src=\"http://player.vimeo.com/video/9067239\" width=\"400\" height=\"300\" frameborder=\"0\"></iframe><p><a href=\"http://vimeo.com/9067239\">Why straight people should care about LGBTI rights</a> from <a href=\"http://vimeo.com/jonrobson\">Jon Robson</a> on <a href=\"http://vimeo.com\">Vimeo</a>.</p>\n</html>\n\nSo essentially I spent an entire day, logging on to the biggest gay website that could ever exist, fearing that if my wifi was tapped or twitter stream was tapped I might get in trouble with the law.\n\nAnyway, nothing happened, so that's good but that aside, it's still a very odd place. It's a very quiet place. This is the capital of the country, and I rarely saw anyone outside. It was like walking through a small town, village even, in the UK. I was also here alone, and BSB and Brunei, are not really on the SE Asia backpackers radar. This might be due to the lack of alcohol, the cost, the lack of tubing. I wanted to learn more about this small place that no one's ever heard of.\n\nHostels don't really exist here. I as a result stayed in [[LeGallery|http://www.tripadvisor.com/Hotel_Review-g293938-d1168024-Reviews-LeGallery_Suites-Bandar_Seri_Begawan.html]]. For that I got a huuuge room and hugggee bed. During my stay the staff were very helpful and arranged airport pickup. It was the location however that made me choose it as it was within walking distance of the centre piece of Brunei - the impressive Sultan Omar Ali Saifuddien Mosque. I did go and see this, and messed up big time by walking on some carpet with shoes on. I felt terrible. The reason I went inside was I wanted to learn more about Islam, a religion I know very little about. I tried to engage in conversation with a man inside, however he sent me to an information booth which was not in English and had no time for me. I was slightly disappointed. What was bizarre about the mosque was the contrast with everything around it. It's right next to a water village - basically lots of houses on stilts built over water. The mosque is made of gold. It was an unusual sight.\n\n[img[http://a6.sphotos.ak.fbcdn.net/hphotos-ak-ash1/23545_596234770804_222302160_5753626_2770105_n.jpg]]\n\nLater I went to a market, and I took a jetty ride around the river in BSB. It's the only place I've ever seen a shell garage in the middle of a body of water:\n[img[http://sphotos.ak.fbcdn.net/hphotos-ak-snc3/hs476.snc3/26105_597945667154_222302160_5828152_7255157_n.jpg]]\n\nThe evening I had there was the hardest. I didn't really know what to do with myself. I had some food, then in the absence of alcohol headed to a cinema on a bus, where I watched some forgettable film where Benicio del Toro was a werewolf or something. I then walked into the night market where I finally got to talk to some Bruneian people.\n\n[img[http://a3.sphotos.ak.fbcdn.net/hphotos-ak-snc3/23545_596233024304_222302160_5753590_5631758_n.jpg]]\n\nThey were ''lovely''. They were not what I expected (one was curious about my sex life with my girlfriend - not what you expect in a muslim country!). They were helpful - they gave me somewhere to sit down and asked about England. I asked them what I should do with myself, and they suggested shisha pipes. They knew a great place and said they'd order me a taxi. Instead 2 of the girls drove me there, and when they got there and realised it was closed, they drove me to the sultan's palace just so I could say I had seen it. They then drove me back to my hotel. Now I don't usually get into cars with strangers. I never do it in the UK, but now this was the third time I've found myself doing it during my travels (the first being [[Ljubljana, Slovenia]] and the second [[Agematsu, Japan]]. Something about travel brings out the best in me - I meet people, I gain trust and just believe in people. It might be naive, but it was a lovely experience, and a great way to end my trip to Brunei before heading off to [[Kota Kinabalu, Malaysia]] by boat.\n", "title": "Bandar Seri Begawan, Brunei", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75471}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "efdc90daf158677f997b5e17a59b950aed2af0d8"}, "created": "20101120202130", "recipe": "gadabout_private", "modified": "20110723080646", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/2007%20South%20East%20Asia%20trip", "bag": "gadabout_public", "text": "My original itinerary for this trip is recorded here: [[2007 Asia - Original Itinerary]]\n\nThis was my first proper time travelling and the start of an obsession.\n\nThe route looked a bit like this:\n[[Bangkok, Thailand]]\n[[Siem Reap, Cambodia]]\n[[Phnom Penh, Cambodia]]\n[[Hoi Chi Min City, Vietnam]]\n[[Hoi An, Vietnam]]\n[[Nha Trang, Vietnam]]\n[[Hue, Vietnam]]\n[[Hanoi, Vietnam]]\n[[Cat Ba Island, Vietnam]]\n[[Hanoi, Vietnam]]\n[[Sapa, Vietnam]]\n[[Hanoi, Vietnam]]\n[[Vientaine, Laos]]\n[[Vang Vieng, Laos]]\n[[Luang Prabang, Laos]]\n[[Chang Mai, Thailand]]\n[[Surat Thani, Thailand]]\n[[Ko Samui, Thailand]]\n[[Ko Phangan, Thailand]]\n[[Bangkok, Thailand]]", "title": "2007 South East Asia trip", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 75434}, {"creator": "jon", "fields": {"geo.lat": "13.7527447", "geo.marker": "", "geo.long": "100.4940766", "_hash": "4c297bb5b6781ce89a4f540e3af59a900128cc2a"}, "created": "20101121000342", "recipe": "gadabout_private", "modified": "20110723080413", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/2007%20Asia%20-%20Original%20Itinerary", "bag": "gadabout_public", "text": "This is how I originally planned my trip to South East Asia in 2007.\nIt lasted 49 days and consisted of lone travel as well as a [[intrepid|http://www.intrepidtravel.com/]]  tour of vietnam\nLike all itineraries it didn't quite go as planned.\n\n!Day 1 London, Sat 14th July 2007\nYou phone the bank to check they don\u2019t assume your card stolen. You start taking anti-malaria tablets.\nBoard plane at\tfrom Gatwick Airport South Terminal for DOHA (Qatar Airways ~QR0076). It is a 6 hour 50 minute flight and you arrive at Doha\tand then fly to Bangkok leaving\tfor an additional 7 hour flight with ~QR0612.\n!Day 2 [[Bangkok, Thailand]], Sun 15th\nThis highlights some time of importance or a journey constraint.\nThis highlights something that should definitely be visited \u2013 a trip highlight for Kate or Jon\n11am\n19:50\n20:35\nIt\u2019s 7:35 am\n. You arrive in Bangkok, and using Diethelm Travel Thailand transfer to the hotel. You check in at Viengtai Hotel. You relax with sleep and Thai massages. You also get some Riel and Thai Bahts. DON\u2019T GET SOME AT THE BORDER.\nThai massage\n!Days 3-5, [[Siem Riep, Cambodia]], Mon 16th - Tue 18th (M)\nYou check out in the morning after breakfast, the plan now being to head to Cambodia. You head for the border crossing at Aranya Prathet / Poipet (by bus/train 5/6 hours journey -watch out for dodgy bus scams all way to Siem Riep p86). A thirty day visa is available here (or in Bangkok) and should cost $20/\u00a310, but beware immigration officers may try to rip you off for $25. Have money ready for arrival as there are no cash machines. You then head on towards Siem Reap catching transport from the border (another 6 hours \u2013 sick of travelling yet!?!, 3 hours by taxi $60). On arrival you find somewhere to sleep, stock up on money and charge your batteries for the exciting day 4.\nOn day 4 you wake up early for sunrise (getting there for approx 05:48) to see the .\nAngkok Wat\ntemples\nAngkor Wat \u2013 hurray!\nIf ahead of schedule or keen you consider a visit to Kratie (possibly via Kompong Cham)... where you MAY see Irwaddy dolphins, the worlds only freshwater dolphins! Since its not a definite you probably won\u2019t do this.\nIrwaddy dolphin\nIt\u2019s a 6 hr bus ride to Phnom Penh from here using \u201cHour Lean\u201d transport. Possibly able to book a boat down the Mekong River to Phnom Penh. Alternatively grab the bus to Phnom Penh from Siem Riep if time is tight (\t). It is definitely worth stopping over at Kompong Cham before heading to Phnom Penh.\n6 hour ride\n!Day 6-7 [[Phnom Penh, Cambodia]], Thu 19th \u2013 Fri 20th\nCambodias capital is thriving following a tumultuous past. The riverfront restaurants are a great place to chill out and watch the world pass by.\nWat Phnom\nA free day allows time to walk up to the nearby hilltop temple of Wat Phnom. Visit the and the Tuol Seng Museum or check out the Royal Palace and Silver Pagoda.\nKilling Fields of Choeung Ek\nKilling Fields\nof Choeung Ek\nSilver Pagoda\nOn Friday you head for Hoi Chi Minh City via the border crossing at Phnom Den/Tinh Bein, this would be more scenic and could involve a trip down the Mekong (unnecessary if you did get one from Kratie). Alternatively if time is tight grab a flight using Vietnam Airlines for around $78/\u00a341. If there is still things left to do consider a flight into Ho Chi Minh City in the early morning of day 8.\n!Days 8-10 [[Ho Chi Minh City, Vietnam]], Sat 21st- 23rd\nYou and your fellow travellers will be arriving at all times from around the world today, so there are no arranged activities. Your leader will organise a pre-trip meeting for the\tfollowed by an optional group dinner. Look for a welcome note at reception in the joining point hotel explaining where to meet. For those who arrive early, there is sightseeing information on the Intrepid noticeboard in reception.\tThe hotel is Lac Vien Hotel, 28 /12-14 Bui Vien St, District 1.\nNote that your group leader will collect your local payment ($200/\u00a3104) in cash at the group meeting on day 8. Please bring new USD bills/notes in large denominations.\nearly evening\nHotel check-in time is 12 noon.\nReunification Palace\nOn day 9 our morning walking tour takes in the highlights of Ho Chi Minh City including Reunification Palace, Notre Dame Cathedral and the Museum of War Crimes (entrance fees not included). The rest of the day is at leisure for further exploration - consider a\tto the\nChu Chi Tunnels\nhalf-day excursion\nCu Chi Tunnels\nwhere you can fire an assault rifle.\nNotre Dame\nDay 10 is free for further exploration of this dynamic city. Ho Chi Minh City is characterised by a vast variety of sights and sounds, from ancient pagodas to bustling markets. The French influence is evident in the excellent baguettes and coffee.\twe head off to the station for the overnight train to Nha Trang. Though bedding is provided, you may like to bring your own sleeping sheet. The trains are not air-conditioned. Most people like to stock up on French rolls, cheese and bottled water for the journey which takes about\t.\n!Days 11-12 [[Nha Trang, Vietnam]], Mon 24th- 25th\nArriving in Nha Trang in the morning, we make the short trip to our hotel. You can spend the days lazing on the beach soaking up the sun, exploring the local markets or the nearby historical\n.\nCham Towers\nIn the evening\n14 hours\nCham\nTowers\nMake sure you try some of the excellent seafood restaurants. Optional activities include a boat trip to the nearby islands,\t($14) or\t(coral seabed) (fee not included).\nMud bath\nScuba Diving On the evening of day 12 we take the\n!Days 13-15 [[Hoi An, Vietnam]] Thu 26th \u201328th (M)\nWe arrive in Danang on the morning of day 13 and travel on to Hoi An, about 30km from Danang. Known as Faifo to early Western traders, Hoi An was a major international port during the 17th, 18th and 19th centuries and many parts of the town still look as they did in centuries gone by. Hoi An is a charming small town easily explored by foot, or you can hire a bicycle if you want to explore further afield. Make the effort to\tand watch the action at the local fish market! You can\nmud bathing\nscuba diving\novernight train to [[Danang, Vietnam]].\nget up early\nwardrobe tailored\nhave a whole new\t(http://www.hoian.co.uk/tailor_shop_guide.php ) at Yaly Couture (highly recommended, mail delivery service - 47 Nguyen Thai Hoc Street/Tran Phu Street), take a trip to\t, hire a bike for a scenic ride to Cua Dai Beach or just sit in the local cafes and watch the world go by. You can even try your hand cooking at a\t- your leader has the details. There is an entrance fee to the old town of Hoi An of approximately $5/\u00a33 (not included).\n!My Son Days 16-18 [[Hue, Vietnam]], Sun 29th \u2013 31st (M)\nHai Van Pass\nOn day 16 we take a bus from Hoi An to Hue over the spectacular\twhich is considered one of the most scenic trips in the world. The journey takes about 5 hours with stops at Marble Mountain, China Beach and the Cham Museum en route (entrance fees not included).\nMy Son\nVietnamese cooking lesson\nHai Van Pass\nChina Beach\nHue is known for the magnificent architecture of its Royal Tombs, pagodas and temples built by the Nguyen Dynasty along the picturesque setting of the Perfume River. The Royal Tombs of the Nguyen emperors on the outskirts of the city are easily reached by bicycle. Don't miss the Imperial Citadel - within the Imperial Enclosure is the Forbidden Purple City, which was almost totally destroyed during the Tet Offensive of the Vietnam War, and the museum of Royal Relics. There is an entrance fee to each of the Tombs and the\tof approximately $5 each (bike hire and entrance fees not included).\nImperial Citadel\nImperial Citadel\nthe Dong Ba market\nThe morning of day 18 is free for more exploration -\t, which sells everything imaginable, is a great place to spend some time, or your leader can help you arrange a dragon boat cruise on the Perfume River (fee not included). In the afternoon we board the Reunification Express bound for Hanoi, the journey takes about\tso make sure you stock up on snacks!\nDong Ba Market\n!Day 19 [[Hanoi, Vietnam]], Wed 1st August\nWe arrive in Hanoi in the morning and walk to our hotel. A walking tour of the Old Quarter is a wonderful way to spend some of the day. You can find an amazing selection of shops in Hang Gai selling everything from souvenirs to exquisite silk clothing, beautifully embroidered tablecloths and CDs.\n!Day 20 [[Halong Bay, Vietnam]], Thu 2nd\nThe drive to\tthrough the Red River Delta takes about 4 hours and we stop en route for refreshments at a handicraft village run by disabled people. We board our boat on arrival at Halong Bay and cruise the breathtaking bay with its limestone karsts rising from the clear emerald waters. We enjoy a sumptuous seafood lunch on board, explore some of the limestone caves in the area and go swimming during the warmer months. We spend the night on\twhere you have the\n13 hours\nHalong Bay\nCat Ba Island\noption of visiting the national park in the morning. Please note there is an entrance fee into the national park of Cat Ba of approximately $1 and transport will cost approximately $4/\u00a32 (not included).\nHalong Bay\nKissing Rocks, Halong Bay\n!Days 21-22 [[Hanoi, Vietnam]], Fri 3rd-4th\nOn day 21 we travel to Haiphong by ferry where we transfer to our vehicle for the 2-hour drive back to Hanoi. The afternoon is free for exploration before our last night's dinner together.\nand possibly accommodation, although you may\ndecide to do this on an early arrival.\nYou may depart at any time on day 22 from the drop off point Hong Ngoc 3 Hotel, 39 Hang Bac Street, Old Quarter (+84 (0) 4 9260322).\n!Day 23-26 [[Vientiane, Laos]], Sun 5th - 8th\n\nWhen ready you head for Laos (either day 22 or 23). Time becomes less tight here so feel free to\ntake your time. You can fly to Vientiane for $103/\u00a354. A Laos visa will cost $30/\u00a317. In Vientiane we visit\tand Pha That Luang and if we are not too sick of temples at this\npoint Wat Si Saket.\nBuddha park\nYou prebook flights back from the full moon party\nBuddha park\nPha That Luang\nVang Vieng You go down a river in a tube and watch lots of Friends episodes.\n!Days 27-29 [[Luang Prabang, Laos]] Thu 9th- 11th (M)\n\nThis is linked by road from Vientiane. We see the beautiful\t.\nTat Kuang Si Falls\n\n!Days 30-33 [[Chang Mai, Thailand]] Sun 12th \u201315th\nHere we visit the\tin Lampang (http://www.changthai.com/) drive from Chang Mai. 3500 Baht / $107/ \u00a353 for one day (5500 Baht/ \u00a383 for two).\nTat Kuang Si Falls\nThai Elephant Conservation Centre\na1\nhour\nThai Elephant Conservation Centre 08:00 - 09:30 Am. Check in at the mahout for mahout registration and provided the mahout suits. 09:00 - 09:30 Am. Participate in the ritual ceremony of Ganesha ( Play respect to the god of elephant before training for luck) 09:30 - 11:30 Am. Learn about elephant knowledge and elephant command language used for the elephants and then the staffs will introduce the elephants and the mahouts and start the training lesson afterward. 11:00 - 11:30 Am. Enjoy riding your elephant back to the main site of the camp where the elephant shows are performing and enjoy watching the elephant show.. 11:30 - 12:00 Am. Visit the Elephant Dung Paper Factory 12:00 Am. Enjoy lunch at the restaurant 13:15 - 13:30 Pm. Enjoy watching the Elephant bathing! 13:30 - 14:30 Pm. Enjoy watching the elephant show! 14:30 - 14:50 Pm. Visit sick elephants at the elephant hospital! 14:50 - 15:20 Pm. Ride the elephant back to the mahout training course. 15:20 - 13:30 Pm. Receive the mahout certificate 15:30 - 16:00 Pm. Short ride the elephant back to the forest and say good bye to them and the mahouts.\nElephant Nature Park (www.elephantnaturepark.org ) is a cheaper alternative at 2,500 Baht / $76 / \u00a338\twhich includes personally feeding and bathing an elephant\nElephant Bathing We consider a days tour to a tribal village.\nWhen ready we catch a plane to Bangkok with www.airasia.com. This is very cheap approximately $33/\u00a317. Alternatively we bus it.\n\n!Days 34-42 Bangkok and Southern Thailand Thu 16th \u2013 26th\nLots of free time here to explore Southern Thailand and its beautiful beaches. We consider a visit to the Reclining Buddha at Wat Po near Bangkok.\nReclining Buddha at Wat Po.\nWe will miss Queen\u2019s Day \u2013 it is on the 12th August. In Bangkok Jon and Kate sample the night life and buy some souvenirs.\nA monkey with ping pong ball.\nThey also go to the\tand see a nice waterfall, some leopards, monkeys, tigers and other animals.\nKhao Yai National Park\nKhao Yai National Park\n\n!Day 43-45 Koh Samui, Mon 27th\nHow you get here is up to you and you may want to arrive early to get bearings. You can fly in from Bangkok or go via bus etc through the southern bits of Thailand. Here you can laze on beaches and scuba dive.\nParadise in Koh Samui //(Koh Samui turned out to be horrible and the complete opposite of paradise)//\n\n!Day 46 Koh Phangan Full Moon Party, Tue 28th\nYou get here via the boat from Koh Samui to Hat Rin. You party the night away. Might want to get here early to catch your bearings!!\nThe full moon party.\n!Day 47 Koh Samui (Panic Stations), Wed 29th\nIn the\tyou catch the ferry to Koh Samui. You catch from Koh Samui. You fly Bangkok airways (prebooked) and it costs you about $81/\u00a342. You seek a hotel and prepare for the flight home the following day.\n!Days 48 Bangkok, Thur 30th\nFlight leaves at\tIt\u2019s a very emotional time. Kate and Jon also want to kill each other at this point. We arrive in Doha after a 7 hour journey at\tdeparting 2 hours later at\tfor London (QR75).\nDay 49 London, Fri 31st you arrive at Gatwick, 7hrs 25 minutes later. Very tired.\nBoring Gatwick", "title": "2007 Asia - Original Itinerary", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 75424}, {"creator": "jon", "fields": {"geo.lat": "47.5871453075302", "geo.marker": "", "geo.long": "14.1407042525907", "_hash": "7dda8d187ad993b0e3f638d4a55a7e8f9f7a0cd3"}, "created": "20101120214627", "recipe": "gadabout_private", "modified": "20110723074027", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/2010%20Europe%20Trip", "bag": "gadabout_public", "text": "In June 2010 I made the most of being young and booked a 10 day inter rail ticket so I could travel around Europe. I checked out 3 new countries I'd never been to before - Austria, Slovakia and the Czech Republic.\n\n[[Vienna, Austria]]\n[[Bratislava, Slovakia]]\n[[Cesky Krumlov, Czech Republic]]\n[[Hallstatt, Austria]]\n[[Salzburg, Austria]]\n[[Munich, Germany]]\n[[Paris, France]]\n[[London, UK]]", "title": "2010 Europe Trip", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 75449}, {"creator": "jon", "fields": {"_hash": "fc7297831b9e610dc92012b8c555ff61b7029cbc", "summary": ""}, "created": "20110723073232", "recipe": "gadabout_private", "modified": "20110723073232", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/marker.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABUAAAAZCAYAAADe1WXtAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAHwSURBVEiJpdW9a9NRFMbxT9qmNWmSRqlFhE6CLuIL1DcUHDqJm/0HBEUk3RQXpW7dXdysWlAEHQSlo4IoIohQKFJQxKWIIlTb5pc2anMdkmBbmleHZ3vul3Pvc865QggaCfu6uIOtTfkbGboYTRIN8yvJd5xoG4psmqk9LH0gBMJTQh+FJOPobAmKo718zbFcrACr+kI4TpThHQYbQhHr4WqG6MkG2FqtEsb5nWQJZ2pCMZDh5RBLc3WAa/WGsIMozV0k1kExnGR+jOKfJoFVLRBGKKT4jL0hBLq51kfhRZ2D04Qblfes5blNKcFynItwYTf5Ug3zc0KyolSlslrgIQpxxiCWYWaC0mbGUUIHASFDeFwD+Kjcbh/RWX3Tw1mixTYrzRP6iXBsXfppHl6m2M6bXqLYx4PNWmpnguhTi+m/L99iEf2bNn8P108RtQI9Qj5Ort5Ebenl27MmgfcoZZhFR93Zx8gu8o2GYIGQLYdzqKmFkuHtTVbrQXOsZJhsZUvtT1P4UQM4/S+cbS3t0xSTOVY2AkuEA+Q7Od/Okt6eID+7ATpRDmcGsba+k26unCRfBc6XRzXCwba+k0q18RRzUxXoOZZT3Kp3piG0Aj49SP41IcFPZP8bWmmxVwOsxDjbjL8pKPZ3c79eOGv1F5xHWAKxXNwiAAAAAElFTkSuQmCC", "title": "marker.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists", "excludeSearch"], "revision": 224670}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "1457774710e61ba6c7be6f80ef8d4901b45f22a3", "summary": ""}, "created": "20110409190512", "recipe": "gadabout_private", "modified": "20110723071241", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Croatia", "bag": "gadabout_public", "text": "You can apparently survive here on a budget of 300 HRK (about \u00a330)\n[[Pula, Croatia]] and [[Zagreb, Croatia]] are served by budget airlines\n\nhttp://www.hznet.hr provides trains around Croatia. Cheaper but slower then buses.\n\nSingle flights to Croatia in June can be sought for \u00a326-37 with Ryanair/easyjet to [[Zagreb, Croatia]] and [[Pula, Croatia]].", "title": "Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75574}, {"creator": "optimusprime", "fields": {"_hash": "22c46e033c7095f0c097735d157ae65c392f11e4", "summary": ""}, "created": "20110723065657", "recipe": "gadabout_private", "modified": "20110723071014", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/north-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAF2SURBVDiN3ZI7S4JhGIav9y0MFBQHkQwMI81oCCQhS8LD6GQIgUMQ7UHw/QQXUTD/gEFbe2tjJwqHoMWtwVpyEJIksLfBA36+fgiN3dtz8zwXz0kopZiUEOUYkAaiwNbAfgIegWuljDutZhwkRNkFVIAjjW7WOXCqlNHWQEKUd4FLYGkGZKgmcKCUcTMCDTp5mQYJhdy0Wl+0Wl0r2IZSRlsOjIpVJ9VqikIhbtXV0qAWAaUYcDstK5NZ4epqn17vh0jkgufnDyvgjqR/HU02m6RSSQIwNyepVlNWEIC0pH9iTScnEYJB9yhOJPzkciErUFRAqQn4xl2v106jcYzTuWDKfn1tEw7X6HZ7k6A3OQkBKBTiGgRgedmFYUwdwCegZHrtzU0P9fohUoqpM3Q636yt1Wg2P02+nEw8O0taQgAcDhvF4p7mm0DZ7CqJhN8SMlQ+v8729qLJmx8PPB47xeLDTBBAIODi/v59FGs7+qu0Hf0f0C/2AGVt8aX+pAAAAABJRU5ErkJggg==", "title": "north-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224672}, {"creator": "optimusprime", "fields": {"_hash": "b8032c8fef481e0206ca394b6338ee25a031b89c", "summary": ""}, "created": "20110723065808", "recipe": "gadabout_private", "modified": "20110723071010", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/west-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFXSURBVDiNrZS/S0JRFMc/7yEGDYpDSDUp+QOiBFFQarEWwSUH23MQXJxc3d4oiP+AQSBSiENzoUNRUJNQRJM25+AgSWC3wSx5z/d8ht/t/Life865nCsJIVBLkopR4BAIAyFgQ5OkkkUFsAMl4GTeQV2QJBX3gHNgc1EIgDxViSlIMrlFJrM7G8S4HUNIILBGs3lMo3GE223XxC0/g9WdidO5iqLsk07vIMuS7kUWxq+jkdUqk8sFKRSi2GwrRsX+gsJqZyLhplSK4fE45gKmQaGJ4fU6KJcPiMddpgETydNGr/dBp9NnNPr6F+jxDzQkm70iGDyj1XpbGPSgdrbb78RiF6RSl3S7fdOga71gvf6K31+hULhhMPg0BgmRvwNO9RKGwxGKco/PV6FafWbWkgNIQojJijxhYkUikXVcLju12osWBEtaWgAh8rfANgZtGkla1sf2DfO/YN4gqU7hAAAAAElFTkSuQmCC", "title": "west-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224790}, {"creator": "optimusprime", "fields": {"_hash": "215cee25994179f7a2f58f622a2e5f37b5994ffd", "summary": ""}, "created": "20110723065809", "recipe": "gadabout_private", "modified": "20110723071007", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/zoom-minus-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAD5SURBVDiN7ZSxagJBFEXPzgyKBATBQvYXbGORUtLb+gV+gLB/ob3l1vmI7QwW7jfY7TZuYQQVBfelcMRo4mB0S2954R54970ZDwZCAVJFQJ6g22QuDd9/oVotO0PL5ZY0XV0H1WplZrMeu13uBJVKikZjxGKx/RuktUJrRZ7vnSCtFcact2KAFPABsmxDu/1BvV5xgubzNVm2+WmlBoiBztEZjxMn5IpiBUzvSV5oqoCoAFCkRIIJED4ACUWCybH6PnBPOYnNHi5bJPgCuv+EJUDXZk9PRCT4BJrcNmYING0GAE/k97/mecM34B1oAa/WjjlsOLK9nukb4J5MZIEHXKgAAAAASUVORK5CYII=", "title": "zoom-minus-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224792}, {"creator": "optimusprime", "fields": {"_hash": "9916717072b522e98f87ff881ed4a025261791f2", "summary": ""}, "created": "20110723065808", "recipe": "gadabout_private", "modified": "20110723071002", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/south-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFzSURBVDiNzZK/S4JRFIafK0HQUDQJtTmEIDTVUI1B/0BDcwVBkwkf+Ae4CDm5uehmBIKjS6YFUqQEElFogwpfESIhlImgp8EfqN/3oYNDZzvvee9zz+W+Cs6FGZRtFpD/CZobbk5O1nE4lqY6mM9Xubh4NQdVqw1Cob2JEBFhezs6oo08LR5/I52uTARFoy/c339YgwDOzlJ0OtaJ+Plp4fXeGnQDKJ+vEg4/WYL8/gd0/dugKzjXgZVh0W5foFA4ZnFxfsRcLtdxOsM0m+1xzrsNyI2rn58NfL47w62admMGAcjZgKzZJBh8pFj8GvTpdIVYrGBmBcjagKTZpNXq4PGkAGi3O7jd11YQgKQSEZQKhIFDM0cisU+pVOf09MoKEhHRjvqgJeAZWB13ra0tU6v9Uqs1zSA64BLR6kqkmxmlAjvApRnMonTgQETLwFCOeoILiEwBifQ2yfSFwUbDpVRgC9gFNoGNnpyj+8NJEc2QjT9Byo8ryc6AHQAAAABJRU5ErkJggg==", "title": "south-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224677}, {"creator": "optimusprime", "fields": {"_hash": "e949f6a0c4ee1cb1042b1f1873435379436b47b5", "summary": ""}, "created": "20110723065809", "recipe": "gadabout_private", "modified": "20110723070959", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/zoom-world-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPCSURBVDiNbZRbTNMHFIe/XoCWFUqbQktaGCBYFEKAUhlKgV0CpImTRKISiDPEFzH6YLwETLRKDOoeTNT4SBTIwIQYRsAIZKjIGBIUo6CowBiMm8AoZVwK/Ns9kOEYnLeTnHzn8jvniOBHN1uYWAwJCToyM0PRaOTU1vbx+PEwgrBlOKL/gzQaOdXVe9FovBkacqBQeFJR8RarNYy4uAAcDieHDtXR0zO9MfF/ndOnE3j9+gfs9mViYu5itT6gsLCFhYUVsrJq2LGjlM7OCaqrv8dm2701qKgokezs7WRkVDM1tcD9+3sxGlW8ejVJcLAvBoOC1VUXT54MMzAwy7594dy5891GkF6v4PjxOKqq3vHmzRRHjzYyPOwgNTWIgoJY5HIpZWVWzp7dxfT0Iu3tI6SkVJKWFsTOnerPM3r+PJeBATtSqZi8vIc4nQIREX5YLAZKS7sBuHx5Dzbbr7hcYDSqMJt1iMUizp3bRVTU3bWK5HIpOTn1tLePUV5uJTMzhI8f7YSH+62X/uzZn6SmBgEgk0kpKIhjaUlgcXEVlcoLSXx8ns1iMXDvXg8vXowTEqJkbGye/PxoLBYDSqUnJpOWwEAFR45Es22bEolExNzcMrdvd2E26wCQHjgQidsNycl6WltH8PKS0NAwSEPDIEVFiVRUvANAEFz4+npy6dJvAFy4kIRIBCsrAmlpwYjn5px0do5jMPhw9aoFtVq23s7c3DIul5upqUVmZpwb5FarZdy69S39/XaUSk/Ejx79jsmkpaqql5KSDvR6H4qL95Ce/iX+/t44HGsAqVSEXC4lPz+aK1eSCQ725cSJXzAa1TQ2DiLt6vpETIw/Wq03oaFKysp6qK8fIDY2ALNZR1HRVwiCC39/bzw8xDQ1/UFpaTc2227cbjCZdJw82YzU5YIPH/7i5s1vkEhE5OY+RBDc9PXN0NY2QnFxOwCnTpmoqupldHSeyEg1k5ML3LjxNX5+XiwtCWvyZ2X9jNmsw+FY4fr1FBITAzl8OIqysrcAeHiI0em+YHR0HplMwrVrFvR6H6zWUHJy6tZaB5icXKSyspeMjBCSkn5i//4IDh6MxM/PC6dTIDY2gImJBS5eTEKlkvHy5Sfi47XU1vbR0TH+GQRw/nwrY2N/8/59PnV1/Rw71kR39xQKhSclJRYKC1tYXhYoL7eSnh7C06fDnDnTsq7ipjcSFqakpiYLl8tNf78dgJ6eaYxGFfHxWlZXXWRn1256I5tA69cshvT0ELKztzM7u0xz8xBtbSOb9ulf+wficXBkn91yAwAAAABJRU5ErkJggg==", "title": "zoom-world-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224796}, {"creator": "optimusprime", "fields": {"_hash": "4cf1bc3a94a15a550c28ccf5c5d2d0fe3e1ca85a", "summary": ""}, "created": "20110723065809", "recipe": "gadabout_private", "modified": "20110723070956", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/east-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAFVSURBVDiNndSxS0JRFMfx75UwaFAcwiFokHQJdLEhW4SgxSULagskcRXhgf+C4IP+AAc3IRAnwcm0IJQUQTECJw2soRyEJAnsNj0oe+rTM97z48PlHO4VkJQsrhegDtSAopRKZTogDELTlQZiUipD7cC0AgIQAh6FUA9mQpGIm2Bwxwi2BVwLoVp1IYfDSi53TKl0hsezaQS70oW08vu3aTQuSKWOsNs35mEhIdT9uTMymQThsJtO5xJF8WI2z4wfGhq2xbJOMumn3Q4RCDj0IntLbc3ptJHPn1AonOJy2X63vEuvfzL5ptsdMhh8/jlfWwYpl5+JRm9otd6nW3VDUK83RFFuyWY7syK1udBo9EUi8YCq1hiPJ/OiRV1ISkkm80Q8fke//7Howmkplco/qNl8w+fLUK2+LgIA+kAMVn/9GnIupXIPq7/+NLCrIWB8/Qs/th/Sj3HEFRbWQQAAAABJRU5ErkJggg==", "title": "east-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224646}, {"creator": "optimusprime", "fields": {"_hash": "37e322ec52c3a759b4ad1e20cb6951bc1b81331a", "summary": ""}, "created": "20110723065826", "recipe": "gadabout_private", "modified": "20110723070953", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/zoom-plus-mini.png", "bag": "travelblog_public", "text": "iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAABHNCSVQICAgIfAhkiAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAF7SURBVDiNrZI7TwJBFEbP4LALZFUsLETsiI2WmPhoTPwB2kljQWdrsv8CElorLaysNLG2sFBjpNSK2PmINAYLHmbhWrAuLCz4wJNsMvPNvWd3dkaJCL0olV8BNoAlIO3GReAWOBexr/t6ukVK5SeBApDts/s5BPZE7EqfSKn8GnAMzH4j+eIJ2BaxLz2R+yX3v5B0yxZE7ErIDQp/kOD2FAAU5FaAq6CqVCpOsbiDiJBOH/HwUAkqA1gN0T6dQJLJcQCUUt54ABua9hEPJOh6BLCk6dwTAGIxjWGMAWBZYS+3LIN43ASg0WhSqzndbWkFOe+VExMGz8+7aB3yKhynhQiEw/4skdjn/f3DyzqrQDSqMU1NqyXeE4loIhF/ZprtrBvf7PW1SiZzxvR0DID5+Smy2UUADg7uKJXeACiXq5TLVZ/It7Ve1tfnODnZBGBr65SLi8dBpf6tjYIetlivO0Sj2h03h4qGbg1geXkGEbi5eRlN9FP+7R99ApfKg9ZFo/NkAAAAAElFTkSuQmCC", "title": "zoom-plus-mini.png", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/png", "tags": ["excludeLists"], "revision": 224794}, {"creator": "optimusprime", "fields": {"_hash": "9d01cc5dc8e042c0d4ad6cfb8b3ac38e84a5ef9f", "summary": ""}, "created": "20110723065846", "recipe": "gadabout_private", "modified": "20110723070949", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/blank.gif", "bag": "travelblog_public", "text": "R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAQAIBRAA7", "title": "blank.gif", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/gif", "tags": ["excludeLists"], "revision": 224643}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "679f92897add1fdaf27f5dd2ae013cec2346b4a8"}, "created": "20110201130852", "recipe": "gadabout_private", "modified": "20110723062902", "uri": "http://geoplugins.tiddlyspace.com/bags/geoplugins_public/tiddlers/jqGeoSearch", "bag": "geoplugins_public", "text": "/***\n|''Name''|jqGeoSearch|\n|''Version''|0.3.6|\n|''Source''|https://github.com/jdlrobson/jquery-plugins/raw/master/jQGeoSearch/jQGeoSearch.js|\n!Usage\njQGeoSearch allows you to easily create client side pages that take a human readable place name and return you useful information like the longitude and latitude. To use simply use the following code to get started\n\n{{{\n\t$(el).geoSearch({\n\t\tservice: \"nominatim\", // other valid values are google, opengeocoding, openaddresses and nominatim\n\t\thandler: function(r) {\n\t\t\tconsole.log(r);\n\t\t},\n\t\tproxy: \"/\", // note the proxy takes a uri argument which is the lookup service\n\t\tproxyType: \"post\", // the method to use for the proxy server\n\t\tdata: {} // additional data that should be posted to service (useful for adding additional parameters to proxy service)\n\t})\n}}}\n***/\n//{{{\n(function($) {\n\n$.fn.extend({\n\tgeoSearch: function(options) {\n\t\toptions = ext.makeOptions(options);\n\t\tvar container = this;\n\t\tvar triggerSearch = function(val) {\n\t\t\tvar resultsArea = $(\".resultsArea\", container)[0];\n\t\t\t$(resultsArea).text(\"Searching...\");\n\t\t\text.lookupLngLat(val, resultsArea, options, options.handler || function() {});\n\t\t};\n\t\tvar input = $(\"<input type='text' class='locationInput' name='location'/>\").\n\t\t\tkeypress(function(ev){\n\t\t\t\tif(ev.charCode === 13) {\n\t\t\t\t\ttriggerSearch($(ev.target).val());\n\t\t\t\t}\n\t\t\t}).appendTo(container)[0];\n\t\t$(\"<input type='button' class='find' value='find'>\").\n\t\t\tclick(function(ev) {\n\t\t\t\ttriggerSearch($(input).val());\n\t\t\t\tev.preventDefault();\n\t\t\t}).appendTo(container);\n\t\t$(\"<div />\").addClass(\"resultsArea\").appendTo(container)[0];\n\t\treturn this;\n\t}\n});\nvar ext = $._geoSearch = {\n\tlocale: {\n\t\tnoresults: \"Nothing found. To increase accuracy include country or postcode.\"\n\t},\n\tmakeOptions: function(options) {\n\t\tif(!options) {\n\t\t\toptions = {};\n\t\t}\n\t\tif(!options.proxy) {\n\t\t\toptions.proxy = false;\n\t\t}\n\t\tif(!options.method) {\n\t\t\toptions.method = \"get\";\n\t\t}\n\t\tif(!options.service) {\n\t\t\toptions.service = \"google\";\n\t\t}\n\t\tif(!options.data) {\n\t\t\toptions.data = {};\n\t\t}\n\t\tif(!options.dataType) {\n\t\t\toptions.dataType = \"json\";\n\t\t}\n\t\treturn options;\n\t},\n\tservice: {\n\t\tgoogle: {\n\t\t\turl: \"http://google.co.uk/maps/api/geocode/json?sensor=true&address=%0\",\n\t\t\tresultsPath: \"results\",\n\t\t\tlngLat: function(r) {\n\t\t\t\treturn r.geometry.location;\n\t\t\t},\n\t\t\thumanReadable: function(r) {\n\t\t\t\treturn r.formatted_address;\n\t\t\t}\n\t\t},\n\t\topengeocoding: {\n\t\t\turl: \"http://www.opengeocoding.org/geoservice_shrestha4_2.php?address=%0&address_id=&output=json\",\n\t\t\tresultsPath: \"Placemark\",\n\t\t\tlngLat: function(r) {\n\t\t\t\tvar p = r.Point.coordinates;\n\t\t\t\treturn { lng: p[0], lat: p[1] };\n\t\t\t},\n\t\t\thumanReadable: function(r) {\n\t\t\t\treturn r.address;\n\t\t\t}\n\t\t},\n\t\topenaddresses: {\n\t\t\turl: \"http://www.openaddresses.org/search?query=%0\",\n\t\t\tresultsPath: \"features\",\n\t\t\tlngLat: function(r) {\n\t\t\t\tvar p = r.geometry.coordinates;\n\t\t\t\treturn { lng: p[0], lat: p[1] };\n\t\t\t},\n\t\t\thumanReadable: function(r) {\n\t\t\t\treturn r.properties.display;\n\t\t\t}\n\t\t},\n\t\tnominatim: {\n\t\t\turl: \"http://open.mapquestapi.com/nominatim/v1/search.php?q=%0&format=json\",\n\t\t\tresultsPath: false,\n\t\t\tlngLat: function(r) {\n\t\t\t\treturn { lng: r.lon, lat: r.lat };\n\t\t\t},\n\t\t\thumanReadable: function(r) {\n\t\t\t\treturn r.display_name;\n\t\t\t}\n\t\t}\n\t},\n\tinit: function() {\n\t\text.service[\"default\"] = ext.service.nominatim;\n\t},\n\tlookupLngLat: function(name, container, options, callback) {\n\t\tname = encodeURIComponent(name);\n\t\tvar mode = ext.service[options.service] || ext.service[\"default\"];\n\t\tvar url = mode.url.replace(\"%0\", name);\n\t\tvar data = {}, lookupUrl;\n\t\tif(!options.proxy) {\n\t\t\tlookupUrl = url;\n\t\t} else {\n\t\t\tdata.uri = url;\n\t\t\tlookupUrl = options.proxy;\n\t\t}\n\t\tdata = $.extend(data, options.data);\n\t\t$.ajax({type: options.method, dataType: options.dataType, url: lookupUrl,\n\t\t\tdata: data,\n\t\t\tcontentType: \"application/x-www-form-urlencoded\", \n\t\t\tsuccess: function(geo) {\n\t\t\t\t$(container).empty();\n\t\t\t\tvar i, result;\n\t\t\t\tvar results = mode.resultsPath ? geo[mode.resultsPath] || [] : geo;\n\t\t\t\tif(results.length === 0) {\n\t\t\t\t\t$(container).text(ext.locale.noresults);\n\t\t\t\t} else if(results.length === 1 || (results.length > 0 && options.useTopResult)) {\n\t\t\t\t\tresult = results[0];\n\t\t\t\t\tresult.lngLat = mode.lngLat(result);\n\t\t\t\t\tresult.humanReadable = mode.humanReadable(result);\n\t\t\t\t\tcallback(result);\n\t\t\t\t} else {\n\t\t\t\t\tvar clickHandler = function(ev) {\n\t\t\t\t\t\tev.preventDefault();\n\t\t\t\t\t\tvar target = ev.target;\n\t\t\t\t\t\tvar data = $(target).data(\"geo.info\");\n\t\t\t\t\t\tif(data) {\n\t\t\t\t\t\t\tcallback(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t$(container).empty();\n\t\t\t\t\t};\n\t\t\t\t\tfor(i=0; i < results.length; i++) {\n\t\t\t\t\t\tresult = results[i];\n\t\t\t\t\t\tresult.lngLat = mode.lngLat(result);\n\t\t\t\t\t\tvar formatted = mode.humanReadable(result);\n\t\t\t\t\t\tresult.humanReadable = formatted;\n\t\t\t\t\t\t$(\"<a />\").attr(\"href\", \"javascript:false;\").\n\t\t\t\t\t\t\ttext(formatted).data(\"geo.info\", result).\n\t\t\t\t\t\t\tclick(clickHandler).appendTo(container)[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n};\next.init();\n\n}(jQuery));\n//}}}\n", "title": "jqGeoSearch", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists", "excludeSearch", "systemConfig"], "revision": 76254}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-05T09:56:35.398Z", "geo.lat": "39.92280900478363", "modified": "2011-07-05T10:36:57.330Z", "_title_set": "yes", "geo.long": "20.1914119720459", "_hash": "676c0dc233ee63ad436bdb665adf77eeac58f3bd"}, "created": "20110717130546", "recipe": "gadabout_private", "modified": "20110723061504", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Blue%20eye%20national%20park%2C%20Albania", "bag": "gadabout_public", "text": "the road down to the blue eye is pretty scary in a bus. it's very narrow and winding.\n\nBlue eye lake is very green.\ntook a dip in the blue eye itself - very cold! after a few mins became uncomfortable.\n\nthe blue eye restaurant has the perfect position for a drink in pretty tranquil surroundings\n\nIt's very rare you get to see water like this in Europe!\n[img[http://farm6.static.flickr.com/5279/5914347631_ce95a4cd00.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/5914347631/sizes/m/in/photostream/", "title": "Blue eye national park, Albania", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75486}, {"creator": "jon", "fields": {"_hash": "378e7c4224d9b9ed97947eefce1fab45a0a71696", "tiddlyspaceinit_version": "0.6"}, "created": "20110722131326", "recipe": "gadabout_private", "modified": "20110722131326", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/appsSetupFlag", "bag": "apps_public", "text": "@@Please do not modify this tiddler; it was created automatically upon space creation.@@", "title": "appsSetupFlag", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludePublisher", "excludeSearch"], "revision": 455136}, {"creator": "jon", "fields": {"_hash": "7555e28e8dc762bf032d36fb4bdaee9b673f5614"}, "created": "20110722131326", "recipe": "gadabout_private", "modified": "20110722131326", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/MarkupPreHead", "bag": "apps_public", "text": "<!--{{{-->\n<link rel=\"shortcut icon\" href=\"/recipes/apps_public/tiddlers/favicon.ico\" />\n<link href=\"/bags/apps_public/tiddlers.atom\" rel=\"alternate\"\n\ttype=\"application/atom+xml\" title=\"apps's public feed\" />\n<link rel=\"canonical\" href=\"http://apps.tiddlyspace.com/\" />\n<!--}}}-->", "title": "MarkupPreHead", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists"], "revision": 454873}, {"creator": "jon", "fields": {"_hash": "037a796b07f748584d280b286c6bd88ed85090cc"}, "created": "20110722131326", "recipe": "gadabout_private", "modified": "20110722131326", "uri": "http://apps.tiddlyspace.com/bags/apps_public/tiddlers/SiteSubtitle", "bag": "apps_public", "text": "a TiddlySpace", "title": "SiteSubtitle", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch"], "revision": 454879}, {"creator": "jon", "fields": {"geo.lat": "17.156496452218", "geo.marker": "", "geo.long": "-89.072924302753", "_hash": "9533ab6fa44448a6981e0ba8cf728c801a928aa7"}, "created": "20110722101613", "recipe": "gadabout_private", "modified": "20110722102150", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/San%20Ignacio%2C%20Belize", "bag": "gadabout_public", "text": "San Ignacio (called by locals Cayo) is one of the more tourist-friendly towns in Belize, with a variety of restaurants keeping longer hours than in many other towns. There are a wide variety of restaurants, and many have both vegetarian and non-vegetarian options.\n[img[http://farm4.static.flickr.com/3187/2885967439_542d952b82.jpg]]\nthanks to [[advwench|http://www.flickr.com/photos/advwench]] for this photo -  the entrance to the underworld according to Mayans at Barton Creek\n\nhttp://wikitravel.org/en/San_Ignacio_(Belize)\n\n!Trips\n* Tikal\n** Get to [[El Ramate, Guatemala]] by bus. \n** Take a day tour\n** Get direct bus to [[Flores, Guatemala]]\n*  Caracol http://www.flickr.com/photos/advwench/tags/caracol/show/ OR Mountain Pine Ridge Area (there is a waterfall here) - this area of Belize is largely inhabited and due to bandits to get there you travel in a convoy. Apparently the pine area is weird as the switch from tropical to pine trees is quick and startling.\n* Poustinia Land Art park - admission by appointment only. Art set in a natural environment (wilds of the jungle)\n* The outpost sounds like a fun excursion.. [[Barton Creek Outpost, Belize]]\n* Go caving and see mayan sacrifices in [[Actun Tunichil Muknal, Belize]] - most recommended\n* Butterflies in Belize Butterfly Ranch\n\n!Sleep\n* J&R's Guesthouse\n20 Far West Street\n*http://www.parrot-nest.com/contact.html\n* In [[Bullet Tree Falls, Belize]]\n\n!Get out\n[[Belize City, Belize]] (2.5hrs)\nBen says get here from [[Belize City, Belize]] (about 4hrs) called Cayo.\nFrom here there are 2 ruins you can go to. xinantunich, p? something. 1000ft falls, cave tour. Nice ruins to see. cave tours/jungle/waterfalls/swim. \n", "title": "San Ignacio, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75786}, {"creator": "jon", "fields": {"geo.lat": "41.000028", "geo.long": "19.9999619", "_hash": "7cc57dc86218222e2f333a7306ab19b25205dabb"}, "created": "20110722072214", "recipe": "gadabout_private", "modified": "20110722072214", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Albania", "bag": "gadabout_public", "text": "I loved Albania.\n\nI went to [[Sarand\u00eb, Albania]]\n\nHere are some images from my trip\n\n[img[http://farm6.static.flickr.com/5273/5914347745_df15b4027a.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/5914347745/sizes/m/in/photostream/\n\n[img[http://farm6.static.flickr.com/5279/5914347631_ce95a4cd00.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/5914347631/sizes/m/in/photostream/\n\n[img[http://farm6.static.flickr.com/5075/5914346299_862d4b4c8b.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/5914346299/sizes/m/in/photostream/", "title": "Albania", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75459}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-02T09:02:43.134Z", "geo.lat": "39.7953753", "modified": "2011-07-02T15:04:03.293Z", "_title_set": "yes", "geo.long": "19.6979003", "_hash": "a36d8a1e8da7c72cbcfb2f3b26005fba6db750aa"}, "created": "20110717125435", "recipe": "gadabout_private", "modified": "20110722071942", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Canal%20d'amour%2C%20Sidari%2C%20Corfu", "bag": "gadabout_public", "text": "The canal d'amour in Sidari, [[Corfu, Greece]] is a lovely spot with great views of the sea and mountains of [[Albania]].\n\nThere are only small beaches here and all of them are covered in sunbeds like a nasty rash which you must pay to hire.\n\nWe have found a great spot on some rocks to sunbathe where there is just the sound of waves lapping against its sides.\n\nThere are some nice restaurants nearby such as the Aquarius which have great views of the sea to admire whilst you eat.\n\nSome guys on a stag do (one of them must be a stag to wear that thong) are jumping from a small rock into the sea. Looks fun but dangerous!\n\n[img[http://farm7.static.flickr.com/6029/5914358257_a917d8500f.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/5914358257/sizes/m/in/photostream/\n", "title": "Canal d'amour, Sidari, Corfu", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75534}, {"creator": "jon", "fields": {"_hash": "d127e101d6df55bec55537f2802fd0aaf8d64c89"}, "created": "20110721200218", "recipe": "gadabout_private", "modified": "20110721201310", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/tracker.js", "bag": "travelblog_public", "text": "  var _gaq = _gaq || [];\n  _gaq.push(['_setAccount', 'UA-7040645-5']);\n  _gaq.push(['_trackPageview']);", "title": "tracker.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 224681}, {"creator": "jon", "fields": {"_hash": "d25d9d9d448008f3778fee93851d59f5d70d9366"}, "created": "20110721162040", "recipe": "gadabout_private", "modified": "20110721162121", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/Home", "bag": "travelblog_public", "text": "Welcome! This app will help you look after all your travel notes. You can [[get your own|/getyourown]].\n", "title": "Home", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 224472}, {"creator": "jon", "fields": {"_hash": "3eb8f147400603211ed46a9b93d4cc511aee928a"}, "created": "20110719192849", "recipe": "gadabout_private", "modified": "20110721161316", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/getyourown", "bag": "travelblog_public", "text": "<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>Get your own Travelblog</title>\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/HtmlCss\" />\n\t</head>\n\t<body>\n\t\t<div id='tbbody'>\n\t\t\t<p>\n\t\t\t\tWant to keep notes on things and have it on a handy map? Look no further!\n\t\t\t</p>\n\t\t\t<div class='newOnly'>\n\t\t\t\tSimply sign up below:\n\t\t\t\t<form id=\"registerform\">\n\t\t\t\t\t<table>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>store my notes in</td>\n\t\t\t\t\t\t\t<td>\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"username\" placeholder=\"<space>\" />.tiddlyspace.com\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t<td><input type=\"password\" name=\"password\" placeholder=\"enter password\" /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td>&nbsp;</td>\n\t\t\t\t\t\t\t<td><input type=\"password\" name=\"password_confirm\" placeholder=\"enter password again\" /></td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t<td colspan=\"2\" class=\"registerCol\">\n\t\t\t\t\t\t\t\t<input type='submit' value='register' />\n\t\t\t\t\t\t\t</td>\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</table>\n\t\t\t\t</form>\n\t\t\t</div>\n\t\t</div>\n\t\t<script src=\"http://tiddlyspace.com/bags/console/tiddlers/jquery.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs.space'></script>\n\t\t<script type='text/javascript' src='/bags/tiddlyspace/tiddlers/chrjs.users'></script>\n\t\t<script src=\"http://tiddlyspace.com/bags/console/tiddlers/jquery-json.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"http://ts.tiddlyspace.com/bags/ts_public/tiddlers/ts.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script type=\"text/javascript\">\n\t\t\tts.init(function() {\nconsole.log($(\"#registerform\")[0]);\n\t\t\t\tts.forms.register($(\"#registerform\")[0], {\n\t\t\t\t\tsuccess: function(space) {\n\t\t\t\t\t\t$.ajax({ \n\t\t\t\t\t\t\turl: \"/spaces/\" + space.name,\n\t\t\t\t\t\t\ttype: \"POST\",\n\t\t\t\t\t\t\tcontentType: \"application/json\",\n\t\t\t\t\t\t\tdata: jQuery.toJSON({\n\t\t\t\t\t\t\t\t\"subscriptions\": [\"travelblog\"]\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tsuccess: function() {\n\t\t\t\t\t\t\t\twindow.location = ts.getHost(space.name) + \"/config\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t</script>\n\t</body>\n</html>\n", "title": "getyourown", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists"], "revision": 224666}, {"creator": "jon", "fields": {"geo.lat": "6.4847492051138", "geo.long": "99.302946555921", "_hash": "14c36bc037168411a7bae169d41765e74b65a6f1"}, "created": "20101120204235", "recipe": "gadabout_private", "modified": "20110721113158", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Ko%20Lipe%2C%20Thailand", "bag": "gadabout_public", "text": "[img[http://farm5.static.flickr.com/4045/4361810847_2029557b42.jpg]]\n\nhttp://www.flickr.com/photos/jdlrobson/4361810847/sizes/m/in/photostream/", "title": "Ko Lipe, Thailand", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75637}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "acfa5ec3130bd40d9ccd779ac0c7833917aac5b7"}, "created": "20101121200319", "recipe": "gadabout_private", "modified": "20110721075321", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/annual%20activity%20of%20being%20away%20from%20home%20to%20celebrate%20my%20birthday", "bag": "gadabout_public", "text": "Every year I now try to be somewhere interesting for my birthday to make it a memorable day. I only had this genius idea and started this activity in 2008.\n\n2008: On a plane over [[Tokyo, Japan]]. Ended up getting lots of free Jack Daniels from a barman and getting in trouble for trying it on with a random Japanese girl who took us for ramen noodles.\n2009: In a longhouse in [[Kuching, Malaysia]] listening to Beatles music and drinking rice brandy.\n2010: In [[Kuala Lumpur, Malaysia]] up in the Sky Bar in an expensive hotel drinking expensive cocktails watching over the Petronas Towers.\n2011: The morning was spent in the company of weed smoking rastafarians in [[Hopkins, Belize]], something I hadn't expected. The evening was spent in the paradisal island of [[Tobacco Caye, Belize]].\n2012: ?", "title": "annual activity of being away from home to celebrate my birthday", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75863}, {"creator": "jon", "fields": {"geo.lat": "47.56222", "geo.marker": "", "geo.long": "13.64931", "_hash": "9f323a3e4b1c55c830a738b49b0074bfe13768a2"}, "created": "20101202212852", "recipe": "gadabout_private", "modified": "201107210737", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hallstatt%2C%20Austria", "bag": "gadabout_public", "text": "Hallstatt in Austria is something out of a dream.\n\nThe view was awesome\n[img[http://farm5.static.flickr.com/4120/4763454922_ed92c97094.jpg]]\n[[on flickr|http://www.flickr.com/photos/jdlrobson/4763454922/]]\n\n... as was the hiking. I went off on my own into alpine forests and found perfect repose.\n[img[http://farm5.static.flickr.com/4140/4763456400_70c73659a8.jpg]]\n[[on flickr|http://www.flickr.com/photos/jdlrobson/4763456400]]\n...and nature.\n[img[http://farm5.static.flickr.com/4141/4762817863_5f505972aa.jpg]]\n[[on flickr|http://www.flickr.com/photos/jdlrobson/4762817863/]]\n\n.. and finally the people were awesome...\nI lost my wallet here, and some young kid handed it into the city hall. A nice lady in the supermarket took me there and all 100+ euros, credit cards and driving license were still in there.\n", "title": "Hallstatt, Austria", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75608}, {"creator": "jon", "fields": {"geo.lat": "-0.527918369188719", "geo.long": "166.935329938872", "_hash": "2cf9f02da561a918453603344642c8c125f36e8c"}, "created": "20110721072836", "recipe": "gadabout_private", "modified": "20110721072836", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Nauru", "bag": "gadabout_public", "text": "Only 150 people visit his tiny island in a year. It's only 8 square miles.\n\nI read that this place is a bit of a dump due to excavation of bird poo for gunpowder. This excavation has built and now messed up their economy", "title": "Nauru", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75719}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "ba8e4997c9e3bb5148e859171fb3e972ccd793fd"}, "created": "20101127113100", "recipe": "gadabout_private", "modified": "20110721064018", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Whale%20Sharks", "bag": "gadabout_public", "text": "I'd love to see one.\nApparently it might be possible in Belize\nhttp://ambergriscaye.com/pages/town/whalesharks.html\n\nThat didn't work for me but also\n[[Donsol, Philippines]] and [[Ningaloo Marine Park, Australia]]", "title": "Whale Sharks", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75847}, {"creator": "jon", "fields": {"geo.lat": "21.1708105", "geo.marker": "", "geo.long": "94.8595191", "_hash": "e2421e181d8b9401fdad9c20e4327baaa6cdfe8c"}, "created": "20101212165041", "recipe": "gadabout_private", "modified": "20110719202455", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bagan%2C%20Myanmar", "bag": "gadabout_public", "text": "I *will* one day see this. Thanks to  [[racoles|http://www.flickr.com/photos/racoles/1716779339/]] for the inspirational photo..\n[img[http://farm3.static.flickr.com/2412/1716779339_bb7303dedc.jpg]]\n\nSome useful links:\nhttp://www.telegraph.co.uk/travel/destinations/asia/burma/8639453/Burma-A-backpackers-guide.html\nhttp://www.travelblog.org/Asia/Burma/blog-626253.html", "title": "Bagan, Myanmar", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["temples"], "revision": 75466}, {"creator": "jon", "fields": {"_hash": "7be70f64a4e06ef224bbfde08ccccbd0fca74cc2"}, "created": "20110719192846", "recipe": "gadabout_private", "modified": "20110719192846", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/config", "bag": "travelblog_public", "text": "<!DOCTYPE html>\n<html>\n\t<head>\n\t\t<title>Configure</title>\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/notabene.css\" />\n\t\t<link type=\"text/css\" rel=\"stylesheet\" href=\"/jquery-ui.css\">\n\t\t<link rel=\"apple-touch-icon-precomposed\" href=\"/touchicon.png\"/>\n\t\t<meta name=\"viewport\" content=\"width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no,initial-scale=0\">\n\t\t<script src=\"http://tiddlyspace.com/bags/console/tiddlers/jquery.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"/bags/tiddlyspace/tiddlers/chrjs\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"http://tiddlyspace.com/bags/console/tiddlers/jquery-json.min.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t\t<script src=\"http://ts.tiddlyspace.com/bags/ts_public/tiddlers/ts.js\" type=\"text/javascript\" charset=\"utf-8\"></script>\n\t</head>\n\t<body>\n\t\t<div id=\"tbbody\">\n\t\t\t\tconfiguring... please wait.\n\t\t</div>\n\t\t<script type=\"text/javascript\">\n\t\tvar space = window.location.host.split(\".\")[0];\n\t\tvar tid = new tiddlyweb.Tiddler(\"ServerSettings\",\n\t\t\tnew tiddlyweb.Bag(space + \"_public\", \"/\"));\n\t\ttid.text = \"index: Home\\n\";\n\t\ttid.type = \"text/config\";\n\t\ttid.tags = [\"excludeLists\"];\n\t\ttid.fields = {\n\t\t\t\"server.content-type\": \"text/config\"\n\t\t}\n\t\ttid.put(function() {\n\t\t\tvar tid2 = new tiddlyweb.Tiddler(\"Home\",\n\t\t\t\tnew tiddlyweb.Bag(space + \"_public\", \"/\"));\n\t\t\ttid2.text = \"Hello!\";\n\t\t\ttid2.put(function() {\n\t\t\t\twindow.location = window.location.protocol + \"//\" + window.location.host;\n\t\t\t}, function() {});\n\t\t}, function() {});\n\t</script>\n\t</body>\n</html>", "title": "config", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/html", "tags": ["excludeLists"], "revision": 224644}, {"creator": "jon", "fields": {"geo.lat": "14.5833333", "geo.marker": "", "geo.long": "120.9666667", "_hash": "10962222e5137039eedcf4c68684f4f083bfe422"}, "created": "20110507120418", "recipe": "gadabout_private", "modified": "20110719055553", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Manila%2C%20Philippines", "bag": "gadabout_public", "text": "It may be possible to get flights here from Heathrow \u00a3371.\nIt's got a bad reputation but it's the cheapest port of entry. Even Air Asia fly there.\n\nNorth haven spa, baguio\nGo on walking tour http://celdrantours.blogspot.com/\n", "title": "Manila, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75701}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "42f0d64ef441c2cf27b91b47520d14920b3728ec"}, "created": "20110513091712", "recipe": "gadabout_private", "modified": "20110718141635", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/ServerSettings", "bag": "gadabout_public", "text": "twrelease:alpha\nindex: Gadabout\n\n\n", "title": "ServerSettings", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75797}, {"creator": "jon", "fields": {"geo.lat": "6.29393995947156", "geo.long": "133.690171433835", "_hash": "f6a9b892c39dd2879641615a4ba3f2f03886176b"}, "created": "20110717185311", "recipe": "gadabout_private", "modified": "20110717185533", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Palau", "bag": "gadabout_public", "text": "Palau (Belau) [1] is a group of islands in the Micronesia area of Oceania, to the southeast of the Philippines.\n\nIt is a very warm island with a massive [[lake full of jellyfish that apparently people snorkel in|http://en.wikipedia.org/wiki/Jellyfish_Lake]]\n\n[img[http://farm6.static.flickr.com/5171/5568770675_04568df5a8_z.jpg]]\n\nJellyfish aside, Palau itself is very pretty as this picture shows:\n[img[http://farm5.static.flickr.com/4036/4677474364_9f47d5c3fc_z.jpg]]\n\n(thank you [[aussieskibum|http://www.flickr.com/photos/aussieskibum/4677474364/sizes/z/in/photostream/]] and [[tony-chen|http://www.flickr.com/photos/tony-chen/5568770675/]])", "title": "Palau", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75731}, {"creator": "jon", "fields": {"geo.lat": "59.976555636383", "geo.long": "10.7422509518994", "_hash": "d4ecd0e47ce989e39e024eb5d2650e7c9ba074de"}, "created": "20110717170724", "recipe": "gadabout_private", "modified": "20110717171747", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Oslo%2C%20Norway", "bag": "gadabout_public", "text": "Just checked tickets 12 weeks in advance and found a train from [[Bergen, Norway]] to [[Oslo, Norway]] leaving at 07:58 Bergen arriving at 14:32 Oslo (6 h 34 min) on http://www.nsb.no for 199 krone - a bargain \u00a322.  It is supposed to be one of the [[world's best train rides|http://www.visitnorway.com/en/Articles/Theme/Getting-here-and-around/The-worlds-best-train-ride/]]. Late February/March is the best time to travel in winter as days are short.\n\nBergen actually looks much more interesting than Oslo, so I think travelling from Oslo to Bergen might be more interesting.\nhttp://wikitravel.org/en/Oslo\n\nIgnore the porn star music but it gives an idea of the train journey.\n<html>\n<iframe width=\"560\" height=\"349\" src=\"http://www.youtube.com/embed/3paizvbhV0I\" frameborder=\"0\" allowfullscreen></iframe>\n</html>\n", "title": "Oslo, Norway", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75729}, {"creator": "jon", "fields": {"geo.lat": "69.746137153561", "geo.long": "18.6268936435424", "_hash": "96780d59f98a0a8411ad5e5ccfd34cb416cbebed"}, "created": "20110717171420", "recipe": "gadabout_private", "modified": "20110717171420", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Troms%C3%B8%2C%20Norway", "bag": "gadabout_public", "text": "Seeing the northern lights, or the aurora borealis, as they are also known, is a jaw-dropping and mystical moment.\n\nThe lights are at their most frequent in late autumn and winter/early spring. \n\nBetween the autumn equinox and spring equinox (21 September - 21 March), it is dark between 6 pm and 1 am, and you have maximum chances of spotting the lights. However, the weather is also of importance, and September, October and November tend to be wet and snowless in the north.\n\nFrom December the weather dries up, and there is normally plenty of snow. If you come in December or January, you experience the polar nights with atmospheric evenings and very short days.\n\nIn February and March the days are longer and you see more of the snow-clad landscapes during daytime, and the evenings still offer maximum chances to spot the northern lights.\n\n", "title": "Troms\u00f8, Norway", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75836}, {"creator": "jon", "fields": {"geo.lat": "60.394973", "geo.long": "5.3269603", "_hash": "4a9e0ff601e4c2750906cd51c945099cdab3e89c"}, "created": "20110717171018", "recipe": "gadabout_private", "modified": "20110717171018", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bergen%2C%20Norway", "bag": "gadabout_public", "text": "Come to Bergen for access to the fjords\nhttp://wikitravel.org/en/Bergen", "title": "Bergen, Norway", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75483}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-03T15:58:39.594Z", "geo.lat": "39.7938752", "modified": "2011-07-04T13:46:51.667Z", "_title_validated": "yes", "_title_set": "yes", "geo.long": "19.6995645", "_hash": "633ed04d2d85430b53a330951689d23a75aab211"}, "created": "20110717130730", "recipe": "gadabout_private", "modified": "20110717130730", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Greek%20Alcohol", "bag": "gadabout_public", "text": "I really wanted to like Greek wine but the one I've tried from the \"upper end\" of the supermarket.. Agiorgitiko erasmios is horrible.\n\nIt appears to be fizzy?! Horrible after taste and bottle has the cheek to describe as pleasant.\n\nThe whole experience has put me off Greek wine altogether. If there is a better one please let me know....\n\nThe beer here consists of lager and is nothing to shout about. I've had about 6 different types. Drinkable but nothing special.", "title": "Greek Alcohol", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75600}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-05T06:26:19.632Z", "geo.lat": "39.9215430021286", "modified": "2011-07-05T09:56:35.328Z", "_title_set": "yes", "geo.long": "20.18758714199066", "_hash": "5075a7bfcd6cea8a5c72320ea28ffd981a499551"}, "created": "20110717125414", "recipe": "gadabout_private", "modified": "20110717130555", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Sarand%C3%AB%2C%20Albania", "bag": "gadabout_public", "text": "<<<\nI must warn you if you go to Albania you must go with an open mind\n<<<\nbest advert ever! I quickly booked myself in.\n\nsince this I learnt that\n1) many tourists going from [[Corfu, Greece]] arrive then decide Albania is not for them and do a u-turn back\n2) Albania is Lonely Planet's number 1 place to visit in 2011\n\nAlbania is a former Communist country. So communist it didn't even want to be friends with other communist nations notably including the Soviet union.\n\nTo get there from Corfu you take a 80s style boat and listen to music from a similar period. right now listening to the \"take those broken wings\" song (forget name). Took about an hour.\n\nreally nice pebble beaches\nroads still under construction\n4 million population\nroad follows river of bulitza(sp?)to [[Blue eye national park, Albania]]\nIce cream about 30p! Beers \u00a31!\n\nA drive out of Sarande reveals there is a bit of a rubbish problem here. however hydroelectric is apparently the main source of energy in this country.", "title": "Sarand\u00eb, Albania", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75792}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-02T07:19:48.525Z", "geo.lat": "39.7953753", "modified": "2011-07-02T07:40:06.391Z", "_title_set": "yes", "geo.long": "19.6979003", "_hash": "c05f800309ec971118ed0b82a5beff4a11372b79"}, "created": "20110717130402", "recipe": "gadabout_private", "modified": "20110717130402", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/being%20a%20coffee%20snob%20abroad", "bag": "gadabout_public", "text": "It's extremely hard to find good coffee abroad. I know its never going to be to the standards of http://notesmusiccoffee.com but my expectations are as low as \"has ground coffee\". However, everywhere in [[Corfu, Greece]] seems to sell instant crap. Today I found a place opposite the canal d'amour village with a machine and when asked \"do you have fresh coffee\" they delightfully said yes. I asked for a long coffee and then she preceded to make instant. I had to intervene. I explained I wanted one from that machine. She replied that the machine was for espresso and cappuccino. I questioned whether she could not do an espresso and add hot water. This seemed illogical to her so I just asked for 2 espressos. She said do you want them strong. I said yes please with plans of getting some hot water from her and doing a DIY coffee. A weaker coffee was asked for. The end result was 1 espresso and 1 nescafe. How that happened I have no idea. Won't be going there again...", "title": "being a coffee snob abroad", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75864}, {"creator": "jon", "fields": {"geo.marker": "", "created": "2011-07-06T10:06:58.510Z", "geo.lat": "39.79295253753662", "modified": "2011-07-06T10:08:57.891Z", "_title_set": "yes", "geo.long": "19.704821705818176", "_hash": "2a9c9375661a04d4e740b4073d7094cbcdb8f417"}, "created": "20110717125741", "recipe": "gadabout_private", "modified": "20110717125741", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Albanian%20passport%20stamp", "bag": "gadabout_public", "text": "You can get a on the return journey at the ferry port in [[Sarand\u00eb, Albania]] by going downstairs and through immigration.", "title": "Albanian passport stamp", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75460}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "ff02f67db709058bddca6ec7de8928ee0ccf6902"}, "created": "20110121192807", "recipe": "gadabout_private", "modified": "20110717124938", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/hostelplaya.jpg", "bag": "jon-in-belize_public", "text": "/9j/4AAQSkZJRgABAgEASABIAAD/7RBgUGhvdG9zaG9wIDMuMAA4QklNA+0AAAAAABAASAAAAAEAAgBIAAAAAQACOEJJTQQNAAAAAAAEAAAAeDhCSU0D8wAAAAAACAAAAAAAAAAAOEJJTQQKAAAAAAABAAA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBBQAAAAAAAQAAAAEOEJJTQQMAAAAAA7QAAAAAQAAAHAAAABIAAABUAAAXoAAAA60ABgAAf/Y/+AAEEpGSUYAAQIBAEgASAAA/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgASABwAwEiAAIRAQMRAf/dAAQAB//EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi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", "title": "hostelplaya.jpg", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/jpeg", "tags": ["excludeLists"], "revision": 120763}, {"creator": "jon", "fields": {"geo.lat": "39.7511", "geo.marker": "", "geo.long": "20.0261", "_hash": "b73fd69083850675c24165f3ed6bab80df4cb1e9"}, "created": "20110619160230", "recipe": "gadabout_private", "modified": "20110717114844", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Butrint%2C%20Albania", "bag": "gadabout_public", "text": "You can get here from [[Corfu, Greece]] via [[Sarand\u00eb, Albania]]. I hear of and have seen photos of pretty Roman ruins. I however went to Sarand\u00eb and the [[Blue eye national park, Albania]] instead.", "title": "Butrint, Albania", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75512}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "b1e78fa2cd2b89324d5ec145b63e41886ad34cad"}, "created": "20101128123000", "recipe": "gadabout_private", "modified": "20110717113300", "uri": "http://geoplugins.tiddlyspace.com/bags/geoplugins_public/tiddlers/GeoUtils", "bag": "geoplugins_public", "text": "/***\n|''Name''|GeoUtils|\n|''Version''|0.3.1|\n|''Requires''|jqGeoSearch|\n!Usage\nIn your EditTemplate add\n<div macro=\"edit geo.lat\"></div><div macro=\"edit geo.long\"></div>\n<div macro=\"editGeo\"></div>\n\n!editGeo\nNote by default search uses http://www.opengeocoding.org/\nby using <div macro=\"editGeo X\"></div> you can search via X instead\nX can be \"google\", \"nominatim\", \"openaddresses\" or \"opengeocoding\"\nNote: the google Geocoding API may only be used in conjunction with a Google map; geocoding results without displaying them on a map is prohibited. For complete details on allowed usage, consult the [[Maps API Terms of Service License Restrictions|http://code.google.com/apis/maps/terms.html#section_10_12]].\n\nby default an update to title will fire a search for a tiddler without geodata. Use noAutoTrigger parameter to turn this off.\n***/\n//{{{\n(function($) {\nconfig.macros.editGeo = {\n\thandler: function(place, macroName, params, wikifier, paramString, tiddler){\n\t\tvar el = story.findContainingTiddler(place);\n\t\tvar container = $(\"<div />\").addClass(\"editGeoArea\").appendTo(place)[0];\n\t\tvar latHolder = $(\"[edit='geo.lat']\", el)[0];\n\t\tvar lngHolder = $(\"[edit='geo.long']\", el)[0];\n\t\tvar args = paramString.parseParams(\"anon\")[0];\n\t\tparams = args.anon || [];\n\t\tvar options = {\n\t\t\tdata: {\n\t\t\t\tcsrf_token: config.extensions.tiddlyspace.getCSRFToken()\n\t\t\t},\n\t\t\tservice: params[0],\n\t\t\tmethod: \"post\",\n\t\t\tproxy: \"/reflector\",\n\t\t\thandler: function(result) {\n\t\t\t\tvar location = result.lngLat;\n\t\t\t\tvar lat = location.lat;\n\t\t\t\tvar lng = location.lng;\n\t\t\t\t$(latHolder).val(lat);\n\t\t\t\t$(lngHolder).val(lng);\n\t\t\t}\n\t\t};\n\t\t$(container).geoSearch(options);\n\t\tvar trigger = args.noAutoTrigger ? false : true;\n\t\tvar tidEl = store.getTiddler(tiddler.title);\n\t\tif(trigger && !tiddler.fields[\"geo.lat\"] && !tiddler.fields[\"geo.long\"]) {\n\t\t\t$(\"[edit=title]\", tidEl).blur(function(ev) {\n\t\t\t\tif(!$(latHolder).val() && !$(lngHolder).val()) {\n\t\t\t\t\t$(\"input[name=location]\", container).val($(ev.target).val());\n\t\t\t\t\t$(\".find\", container).click();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n};\n\n})(jQuery)\n//}}}\n", "title": "GeoUtils", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch", "systemConfig"], "revision": 76230}, {"creator": "jon", "fields": {"_hash": "c930dd12e76bf3f35410b8017b78b48e3edfe639"}, "created": "20110710174233", "recipe": "gadabout_private", "modified": "20110717113031", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/upgrade.js", "bag": "travelblog_public", "text": "$(document).ready(function() {\n\tvar shell = $(\"#tbbody\")[0];\n\tif(!shell) {\n\t\tvar c = $(\"<div />\").addClass(\"enhance-annotation\").prependTo(document.body)[0];\n\t\t$(\"<a />\").text(\"Enhance this page.\").attr(\"href\", \"/viewer#!\" + window.location.pathname).\n\t\t\tappendTo(c);\n\t\t$(\"<div />\").text(\"This page was not meant to be read in this fashion. Clicking the enhance page link will format the page in a much more user friendly way\").appendTo(c);\n\t}\n});", "title": "upgrade.js", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/javascript", "tags": ["excludeLists"], "revision": 224788}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "da5f6a72fff70995c07ee6315de7b40da39f39fc"}, "created": "20110513083919", "recipe": "gadabout_private", "modified": "20110717113018", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/robots", "bag": "travelblog_public", "text": "User-agent: *\nDisallow: /recipes/*/tiddlers\nDisallow: /bags/*/tiddlers\nAllow: /bags/gadabout_public/tiddlers\nAllow: /bags/gadabout_public/tiddlers/*\nDisallow: /bags/*/tiddlers.wiki\nDisallow: /recipes/*/tiddlers.wiki", "title": "robots", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "text/plain", "tags": ["excludeLists", "excludeSearch"], "revision": 224674}, {"creator": "jon", "fields": {"geo.lat": "20.632442866532", "geo.marker": "", "geo.long": "-87.076553767321", "_hash": "4d50f299d62b565f43ec3184d4932227a38af56b"}, "created": "20100925174738", "recipe": "gadabout_private", "modified": "20110717103301", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Playa%20del%20Carmen%2C%20Mexico", "bag": "jon-in-belize_public", "text": "We stayed in [[Hostel Playa, Playa del Carmen]] - it was noisy but had hammocks and cheap :)\n\n!1st class bus to [[Chetumal, Mexico]]\nFrom Playa del Carmen, ADO express buses depart frequently to Chetumal (and there are a few ADO GL and OCC buses for a bit more money). The trip takes about 4.5 hours and costs MX$214 for Primera Class (as at June 2010). Check the ticketbus site for up to date schedules and fares.\n\nThe bus arrives at the ADO bus terminal in Chetumal, but the Mexican buses don\u2019t go into Belize, so you have to change buses in Chetumal. There are a few options for getting from Chetumal to Belize; see the next section, TRANSPORTATION BETWEEN BELIZE AND MEXICO.\n\nAim to get to Chetumal before 3pm to be able to get a bus direct from the New Market station in Chetumal to [[Orange Walk, Belize]]\nBased on this you should get a bus at either 07:10 (arriving 12:40) or 09:20 (arriving 13:45)\nOnwards to [[Orange Walk, Belize]] will roughly need an extra 2.5 hours. (15:10/16:15 arrival time)\n!Timetable to Chetumal\n(from http://www.adogl.com.mx/en/index.htm)\nAll 226.00 unless stated from Playa del Carmen, Qroo.\n\n00:25, 1:50, 16:35, 18:11,  21:55, 23:58:\n4:10hrs\n\n09:20, 14:35, 17:15\n4:25hrs\n\n06:20, 07:10, 10:50, 13:20,  19:20 (270pesos for this bus)\n4:30hrs\n\n11:50, 19:35, 21:20:\n4:40hrs\n\n  \n", "title": "Playa del Carmen, Mexico", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120699}, {"creator": "jon", "fields": {"created": "2011-07-10T16:13:52.463Z", "geo.lat": "45.4386706", "modified": "2011-07-10T16:14:27.911Z", "_title_validated": "yes", "_title_set": "yes", "geo.long": "12.3290979", "_hash": "4ccb993a8dc9022ac50e515f0dd2d44e80de98cb"}, "created": "20110710161321", "recipe": "gadabout_private", "modified": "20110710175919", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Venice%2C%20Italy", "bag": "gadabout_public", "text": "Boutique hotel\nhttp://www.tripadvisor.com/Hotel_Review-g187870-d482693-Reviews-Ca_Maria_Adele-Venice_Veneto.html\n", "title": "Venice, Italy", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75845}, {"creator": "jon", "fields": {"geo.lat": "16.96024230201", "geo.marker": "", "geo.long": "-88.215241525119", "_hash": "3ac38544afb256750c54195ff0e995941d61b0e2"}, "created": "20100925174742", "recipe": "gadabout_private", "modified": "20110710165043", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Tobacco%20Caye%2C%20Belize", "bag": "jon-in-belize_public", "text": "Tobacco Caye is a tiny island off the coast of Belize, popular with budget travelers. Hammocks, novels, group meals and a healthy dose of snorkeling are likely to fill your day, on one of the few islands that won't break the bank in a country that normally excels at doing so.\n\nSmaller than [[Caye Caulker, Belize]] but more chilled out.\nDolphin's, manta rays and manatees are commonly sighted. We saw 4 dolphins off the coast and snorkling we saw an eagle ray and a stingray. We just missed seeing an octopus that had attached itself to a fishing boat's nets the night before. There were also barracudas around the reef and an osprey calls one of the huts home.\n\n[img[http://farm6.static.flickr.com/5263/5555722761_4a479b3d81.jpg]]\n\nThe distance from Belize City keeps people away who prefer [[Caye Caulker, Belize]] and [[Ambergris Caye, Belize]]. This is a great options for people on a low-moderate budget.\n\nWe stayed at Tobacco Caye Lodge for 3 nights. The island is ''extremely small'' and to be honest we regret not staying just 2 nights as we felt a bit trapped with the lack of eating options (people tend to eat in their hotels due to the size). It's a great place to just chill and enjoy the sun and sea but not much else. We played volleyball with the workers on the island every evening around 6pm. Even in just 3 days you'll get to know everyone on the island :)\n\nBoats make the journey from Dangriga in about 20-30 minutes and charge Bz$30/person. If you're staying at Tobacco Caye Lodge or Reef's End, you can arrange a time and come on their boats for the same price, or just turn up at 8:30-9:00am at the dock and ask around at the Riverside Caf\u00e9 when a boat will be leaving (they depart from the dock directly in front of the restaurant).\n\nFrom Tobacco Caye, at least one boat usually leaves around 9am each morning heading back to Dangriga. If you're interested in heading somewhere else like Glovers Reef or Thatch Caye you may be able to hire a boat to take you direct, or ride along with some snorkelers who are heading there, which saves a trip back to Dangriga.\n\n!Get out\nThatch Caye resort can be stayed in for US$ 351.00 per night (for 2 people)\n\n* http://www.flickr.com/photos/jdlrobson/5555722761/sizes/m/in/photostream/", "title": "Tobacco Caye, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120754}, {"creator": "jon", "fields": {"geo.lat": "16.962232920474", "geo.marker": "", "geo.long": "-88.229827877339", "_hash": "bbdf484b1db394d80d139a23d5b442295cf42527"}, "created": "20100925174722", "recipe": "gadabout_private", "modified": "20110710164609", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Dangriga%2C%20Belize", "bag": "jon-in-belize_public", "text": "!Treat\nPossible treat for $790USD (4 days/3 nights for 2 people - about \u00a385 a night per person):\nhttp://www.pelicanbeachbelize.com/island-packages-marine-activities/island-escape-4days-3-nights.html\n\n!Garifuna culture\nHome of Marie Sharp's hot sauce.\n\nhttp://wikitravel.org/en/Dangriga\n\n!Get in/out\n[[Belize City, Belize]] via Belmopan (4.5hrs)\nFly via [[Mayan Island Air]].\n3 hours from [[San Ignacio, Belize]]\nGet to [[Tobacco Caye, Belize]] via Riverside Cafe here (US$15) show up at 9am for the 45 minute ride.\nVisit [[Cockscomb Basin Forest Reserve]] via [[Maya Centre]]\nHopkins is a tiny fishing village off the beaten track.\n\n!Whale sharks\nBest seen during the the ten day period of the full moon between March and June in Gladden Spit and Silk Cayes Marine Park.", "title": "Dangriga, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120602}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "fb8ad968343eca71e023b2f77e16dd17f16c78c4"}, "created": "20110308163050", "recipe": "gadabout_private", "modified": "20110710164606", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Central%20America%202011", "bag": "jon-in-belize_public", "text": "!My Itinerary\nHealth advice at http://www.fitfortravel.nhs.uk/destinations/central-america/belize.aspx\nDay 1 Sat 12 Fly to [[Cancun, Mexico]] arriving at 17:40. From airport jump on the bus to [[Playa del Carmen, Mexico]] to sleep for the night at [[Hostel Playa, Playa del Carmen]]\nDay 2 Sun 13 After a nice sleep, take the 09:20 bus to [[Chetumal, Mexico]]. Then head to [[Orange Walk, Belize]] (2hrs) arriving for the evening  (at 15:10/16:15) staying in [[Hotel De la Fuente, Orange Walk]]\nDay 3 Mon 14 excursion to [[Lamanai, Belize]] (De la Fuente)\nDay 4 Tue 15 Head to [[San Ignacio, Belize]] via [[Belize City, Belize]]. We stays at John and Rosas Guesthouse.\nDay 5 Wed 16 Head to [[San Ignacio, Belize]] to stay in the tree house at [[Parrots Nest Lodge, Belize]] in [[Bullet Tree Falls, Belize]] for 2 nights. Get here early to go tubing in the afternoon for free!\nDay 6 Thur 17 The cave skeleton hike at [[Actun Tunichil Muknal, Belize]].\nDay 7 Fri 18 Head to [[Tikal]] grabbing a lift from one of the tours. Stay the night on site.\nDay 8 Sat 19  Back to Belize. Taxis can be sought for $25 right up to the border. At the border grab a collectivo to Benque and from there bus to [[Hopkins, Belize]] by taxi from [[Dangriga, Belize]] via [[Belmopan, Belize]].\nDay 9 Sun 20 Head back to [[Dangriga, Belize]] to grab a water taxi to [[Tobacco Caye]].\nDay 10 Mon 21\nDay 11 Tue 22 \nDay 12 Wed 23 Head back to [[Dangriga, Belize]] and then to [[Belize City, Belize]] via [[Belmopan, Belize]]. From there grab a water taxi to [[Caye Caulker, Belize]]\nDay 13 Thu\nDay 14 Fri 25\nDay 15 Sat 26 Head to [[Ambergris Caye, Belize]]\nDay 16 Sun 27 Take boat from [[Ambergris Caye, Belize]] to [[Chetumal, Mexico]], then head to [[Tulum, Mexico]].\nDay 17 Mon 28\nDay 18 Tue 1 \nDay 19 Wed 2 Head to [[Valladolid, Mexico]]\nDay 20 Thur 3 [[Puerto Morelas, Mexico]]\nDay 21 Fri 4\nDay 22 Sat 5 Catch the evening flight back to London\n\n[[Checklist]]\n[[Money]]\n\n!Currency\n<<currencyTable from:GBP to:MXN>>\n\n!Translation\n<<translateTable en es\n\"hello\" \"goodbye\" \"please\" \"thank you\" \"how much is it\" \"what is your name\" \"what time does the bus leave\">>\n\n!My Flights\nFlight Out:\n<<<\nSat 12 February 11\nDeparting:\t Terminal\t N London Gatwick Apt (LGW), London, United Kingdom 12:40 Sat\nArriving:\t Terminal\t 2, Cancun (CUN), Canc\u00fan, Mexico 17:40 Sat\nNon-stop \nBritish Airways (BA 2203) \nAircraft type - 777  \nEconomy\t\nBaggage allowance: 1 piece(s)\t More info \nE-ticketed flight Find out more\nDuration:\t11:00\n<<<\n\nInbound\n<<<\nSat 05 March 11\nDeparting: Terminal\t 2 Cancun (CUN), Canc\u00fan, Mexico 19:15 Sat\nArriving:\t Terminal\t N, London Gatwick Apt (LGW), London, United Kingdom 10:15 Sun Non-stop \nBritish Airways (BA 2202) \nAircraft type - 777  \nEconomy\t\nBaggage allowance: 1 piece(s)\t More info \nE-ticketed flight Find out more\nDuration:\t9:00\n<<<\n\n<<geoRoute\n\"Cancun, Mexico\"\n\"Playa del Carmen, Mexico\"\n\"Chetumal, Mexico\"\n\"Orange Walk, Belize\"\n\"Belize City, Belize\"\n\"San Ignacio, Belize\"\n\"Bullet Tree Falls, Belize\"\n\"Tikal, Guatemala\"\n\"Belmopan, Belize\"\n\"Dangriga, Belize\"\n\"Hopkins, Belize\"\n\"Tobacco Caye, Belize\"\n\"Belmopan, Belize\"\n\"Belize City, Belize\"\n\"Caye Caulker, Belize\"\n\"Ambergris Caye, Belize\"\n\"Chetumal, Mexico\"\n\"Tulum, Mexico\"\n\"Valladolid, Mexico\"\n\"Cancun, Mexico\"\n\"Puerto Morelas, Mexico\"\n\"Cancun, Mexico\"\ncolor:#00ff00 strokeOpacity:0.5 strokeWidth:6>>\n<<geogoto \"Corozal, Belize\" 6>>\n", "title": "Central America 2011", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 120555}, {"creator": "jon", "fields": {"_title_validated": "yes", "_title_set": "yes", "modified": "2011-07-10T16:18:14.901Z", "_hash": "67abbb5d2a55f88417cd821112491367d9db9b4a", "created": "2011-07-10T16:15:23.187Z"}, "created": "20110710161709", "recipe": "gadabout_private", "modified": "20110710161709", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Sicily%2C%20Italy", "bag": "gadabout_public", "text": "Cefal\u00f9\nAbbey of Thelema - http://en.m.wikipedia.org/wiki/Abbey_of_Thelema", "title": "Sicily, Italy", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75805}, {"creator": "jon", "fields": {"geo.lat": "38.70908932609", "geo.marker": "", "geo.long": "-9.1378784176029", "_hash": "f0f4ce0f76acef5ba658b040539365878c381055"}, "created": "20101105084642", "recipe": "gadabout_private", "modified": "201106261035", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Lisboa%2C%20Portugal", "bag": "gadabout_public", "text": "I loveeeeee Lisboa. It's so awesome.\n\nWe stayed near Rossio in [[Lisbon Story Guesthouse|http://www.lisbonstoryguesthouse.com/]]. It was set in a really interesting square. One morning there were lots of African people hanging around, selling fruit and chatting. There is also this great tiny shop in the square which sells drinks in the evening called [[a ginjinha|http://www.panoramio.com/photo/42291662]] - much recommended.\n\nFrom here it was a short walk to Barrio Alto which is an interesting place to explore. A place we ate here was \"Mamma Rosa\" (pizza) on Rua do gremio lusitano 14 Barrio Alto. We liked the friendliness and helpfulness of the staff!\n\nThe trams were great fun. We took them all over the place.\nThe best ride was to the old town from near Rossio station which takes you through extemely narrow streets. like this one [[from my flickr feed|http://www.flickr.com/photos/jdlrobson/5107872638/]]\n\n[img[http://farm2.static.flickr.com/1435/5107872638_9bca154ea2.jpg]]\n\nWe also rode the bus/trams to Belem. There was a nice museum here, a pretty church, and yummy not to be missed egg tarts at [[Casa Pasteis De Belem|http://www.pasteisdebelem.pt/]].\n\nLisboa tourist card came in very handy for all this travelling about!\n\nWe took a day trip from Rossio station to [[Sintra, Portugal]] which is also thoroughly recommended. Very pretty place and great fun wondering around, and for al fresco dining. There is an amazing castle here with a fantastic view that is worth the entrance fee alone.", "title": "Lisboa, Portugal", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75679}, {"creator": "jon", "fields": {"geo.lat": "39.619299", "geo.marker": "", "geo.long": "19.919585", "_hash": "6b2534b1a3e5aac6644899e3266e900d8f43f097"}, "created": "20110619160240", "recipe": "gadabout_private", "modified": "20110623185739", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Corfu%2C%20Greece", "bag": "gadabout_public", "text": "An island off Greece. Not much of a backpacker place from what I can see, but weather looks good in July :)\n\nAqua park:\nhttp://www.aqualand-corfu.com/contact.asp\n\nWalking:\nhttp://www.thecorfutrail.com/gallery.html#1\n\n* matt says stay north or north-west - kassiopi counter clockwise\n* kassiopi stoney beaches\n* sidari most popular tourist destination, sand beaches, very beautiful, canal, stone arch for swimming through, also sunset beach. most excursions are from here\n\n[img[http://farm1.static.flickr.com/32/51119765_c52ce07d4c.jpg]]\nCanal D'amour from [[personalspokesman|http://www.flickr.com/photos/personalspokesman/51119765/sizes/m/in/photostream/]].\n\n* paleokastritsa - expensive, aimed at older richer couples\nmatt says go to ereikoussa - water beautiful - sly stallone has a place here - dolphins visible from boat from Corfu.\n[img[http://farm5.static.flickr.com/4092/4840466661_9f9770f10f.jpg]]\nereikoussa\n\neat at \"the wave, sidari\", \"the garden, sidari\"\n\nThe highest mountain is\nMake sure you visit a local kafenion for a drink (traditional pub equivalent)\n\n* Take a boat trip to the Blue Lagoon\nhttp://www.captaintheocorfu.net/corfu-pictures.html\n\n", "title": "Corfu, Greece", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75561}, {"creator": "jon", "fields": {"geo.lat": "11.9804331", "geo.marker": "", "geo.long": "121.918866", "_hash": "4dcada5070715e48d81318e73130021499287d07"}, "created": "20110507120717", "recipe": "gadabout_private", "modified": "20110623065336", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Borocay%2C%20Philippines", "bag": "gadabout_public", "text": "This is ''the place'' for beaches.\n\n[img[http://farm4.static.flickr.com/3047/3058963272_fd278b3bea.jpg]]\nas [[roxj|http://www.flickr.com/photos/roxj/3058963272/sizes/m/]] picture shows...\n\"...a tropical island about an hour's flight from Manila in the Philippines. Its long white sand beaches rival the best beaches of more popular destinations such as the Caribbean, the South Pacific as well as neighbouring Thailand, Malaysia and Indonesia.\"\n\nRecommended by [[@noodlesinmysand|http://www.twitter.com/noodlesinmysand]]\n\nhttp://www.tripadvisor.co.uk/Hotel_Review-g294260-d537729-Reviews-Dave_s_Straw_Hat_Inn-Boracay_Visayas.html", "title": "Borocay, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75493}, {"creator": "jon", "fields": {"geo.lat": "33.833333", "geo.long": "36", "_hash": "0f5428c65175b4fb933310819e922c000cbc1e7d"}, "created": "20110531133400", "recipe": "gadabout_private", "modified": "20110531133400", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Beeka%20Valley%2C%20Lebanon", "bag": "gadabout_public", "text": "Lebanon has wine.\nhttp://www.chateaumusar.com.lb/english/terroir.htm", "title": "Beeka Valley, Lebanon", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75481}, {"creator": "jon", "fields": {"geo.lat": "56.9783400407692", "geo.long": "24.1220602104896", "_hash": "22b2e7e83ec7308b77fc60a4963ac241fdef0a34"}, "created": "20110525141402", "recipe": "gadabout_private", "modified": "20110525141402", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Riga%2C%20Latvia", "bag": "gadabout_public", "text": "Things to do:\n* Airport transfer in an old soviet car: http://www.riga-hostel.com/en/show/event/hostel-soviet-car-transfer\n* go canoeing http://www.riga-hostel.com/en/show/event/riga-canoe-trip-1\n* \"Riga has become an increasingly popular destination for Europeans drawn by its old town, its historical importance, and its reputation as having the best nightlife in Europe.\" (wikitravel)\n* bobsleighing http://www.traveloutthere.com/en/show/event/riga-bobsleigh-summer\n* Currency [[Latvian Lats|http://en.wikipedia.org/wiki/Latvian_lats]]\n\nIn 2009 the following was true:\n- Cheap local wine, 0,7 bottle \u2013 1,5 LVL / 2 EUR / 1,5 GBP\n- Good export wine, 0,7 bottle \u2013 3,5 LVL / 5 EUR / 3,5 GBP\n- Cider, that tasty local one, 0,5 bottle \u2013 0,60 LVL / 0,90 EUR / 0,60 GBP\n- Latvian light beer, 0,5 bottle \u2013 0,30 to 0,70 LVL / 0,50 to 1 EUR / 0,30 to 0,70 GBP\n- Latvian dark beer, 0,5 bottle \u2013 0,60 LVL / 0,90 EUR / 0,90 GBP\n- Import beers, 0,5 bottle \u2013 0,60 LVL / 0,90 EUR / 0,90 GBP", "title": "Riga, Latvia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75752}, {"creator": "jon", "fields": {"_hash": "565f572f1b37d0941e549895afaea324096bceb0"}, "created": "20110525084704", "recipe": "gadabout_private", "modified": "20110525084704", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Trans%20Siberian%20Railway", "bag": "gadabout_public", "text": "The Trans-Siberian Railway was a network of railways connecting Moscow with the Russian Far East and the Sea of Japan. It is the longest railway in the world. There are branch lines to China through Mongolia and Manchuria.\n\nYou can take it virtually via http://www.google.ru/intl/ru/landing/transsib/\n", "title": "Trans Siberian Railway", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75833}, {"creator": "jon", "fields": {"_hash": "616972a6a0539b7520f0918f29b0c1a2faea9632"}, "created": "20110525084420", "recipe": "gadabout_private", "modified": "20110525084531", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Lads%20trip%20abroad", "bag": "gadabout_public", "text": "Currently exploring destinations\n\n\nIn terms of place to get a rough idea of costs, I've picked the 20th weekend as I reckon it would be nice to have 2 long weekends in a row:\nhttp://www.skyscanner.net/flights-from/lond/110818/110821/cheapest-flights-from-london-in-august-2011.html\nWould be good if you could say yey, maybe or nay to each of these - maybe we're get a better idea of the sort of place we're after.\n\nThese are the (interesting e.g. not Spain) suggestions that have come out of it:\n[[Fez, Morocco]]/[[Marrakech, Morocco]] \u00a378 (think Morrocco is dry?) - yey  yes \n[[Prague, Czech Republic]] \u00a382 nay  no\n[[Wroclaw, Poland]] \u00a386 yey  yes\n[[Tallinn, Estonia]] \u00a3111 yey  no\n[[Moscow, Russia]] \u00a3115 (but bear in mind this is an expensive city and we'd need visas) yey  no\n[[Riga, Latvia]] \u00a3134 yey  yes\n\nhttp://www.skyscanner.net/flights/lond/bg/110819/110822/cheapest-flights-from-london-to-bulgaria-in-august-2011.html\nSofia, Bulgaria \u00a3150 yey  yes\nKiev, Ukraine \u00a3156 yey (I will go to Chernobyl)  no\nCorfu, Greece \u00a3157 nay (bloody expensive in these times apparently)   no\nBucharest, Romania \u00a3164  maybe ( bit too expensive?)  yes ", "title": "Lads trip abroad", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75664}, {"creator": "jon", "fields": {"geo.lat": "13.3452447", "geo.long": "103.8541628", "_hash": "4a2191d4985d3f53556b8736016b70a988d6b440"}, "created": "20110523150700", "recipe": "gadabout_private", "modified": "20110523150700", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Siem%20Reap%2C%20Cambodia", "bag": "gadabout_public", "text": "[img[http://farm4.static.flickr.com/3158/2392099933_13edb35ed4.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/2392099933/sizes/m/", "title": "Siem Reap, Cambodia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75806}, {"creator": "jon", "fields": {"geo.lat": "16.4770248", "geo.long": "107.575634", "_hash": "9e15a737771fec0ab53819f81978adea172f1989"}, "created": "20110523150609", "recipe": "gadabout_private", "modified": "20110523150609", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hue%2C%20Vietnam", "bag": "gadabout_public", "text": "[img[http://farm2.static.flickr.com/1043/3174097315_b95376962a.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/3174097315/sizes/m/", "title": "Hue, Vietnam", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75620}, {"creator": "jon", "fields": {"geo.lat": "22.3346401", "geo.long": "103.8413263", "_hash": "40831c14d57b86b403d8516f30a42d384ce9042b"}, "created": "20110523150454", "recipe": "gadabout_private", "modified": "20110523150506", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Sapa%2C%20Vietnam", "bag": "gadabout_public", "text": "[img[http://farm3.static.flickr.com/2122/2337954138_5b4ff1f504.jpg]]\n//[[link|http://www.flickr.com/photos/jdlrobson/2337954138/sizes/m/]]//\n", "title": "Sapa, Vietnam", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75788}, {"creator": "jon", "fields": {"geo.lat": "41.1240139", "geo.long": "28.9818695", "_hash": "d719f1dcf7d6db7d021542b1dbf99a62743f9b37"}, "created": "20110517201116", "recipe": "gadabout_private", "modified": "20110517201456", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Istanbul%2C%20Turkey", "bag": "gadabout_public", "text": "Lots of Roman ruins at Yerebatan Sarayi head\n[img[http://farm3.static.flickr.com/2789/4019956970_57c1a2977d.jpg]]\nFrom http://www.flickr.com/photos/sjmcdonough/4019956970/sizes/m/in/photostream/\n\nThe Grand Bazaar is also impressive\n[img[http://farm3.static.flickr.com/2707/4447671886_aa3ab5f6fe.jpg]]\nhttp://www.flickr.com/photos/spirosk/4447671886/sizes/m/in/photostream/\n\n", "title": "Istanbul, Turkey", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75625}, {"creator": "jon", "fields": {"geo.lat": "12.2431693", "geo.long": "109.1898675", "_hash": "5571a41e519e7227adb4e223cffe30cb91362578"}, "created": "20110517155620", "recipe": "gadabout_private", "modified": "20110517155640", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Nha%20Trang%2C%20Vietnam", "bag": "gadabout_public", "text": "I took my favourite photo off the coast of here on a small island called Mieu(?)\n[img[http://farm4.static.flickr.com/3272/2337124877_788c0b0b3d.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/2337124877/sizes/m/in/photostream/\n", "title": "Nha Trang, Vietnam", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75723}, {"creator": "jon", "fields": {"geo.lat": "15.8791004", "geo.long": "108.327678", "_hash": "885f5eb40a5897001b7c7ba31290b98b748228be"}, "created": "20110517155511", "recipe": "gadabout_private", "modified": "20110517155511", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hoi%20An%2C%20Vietnam", "bag": "gadabout_public", "text": "Lots of people wear hats in Hoi An.\n[img[http://farm4.static.flickr.com/3147/2337122203_3828051d5a.jpg]]\nhttp://www.flickr.com/photos/jdlrobson/2337122203/\n", "title": "Hoi An, Vietnam", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75613}, {"creator": "jon", "fields": {"_hash": "b74f316d4b14450c98aa3070d8ad5f6fa5bd84e6"}, "created": "20110517154759", "recipe": "gadabout_private", "modified": "20110517154759", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Halong%20Bay%2C%20Vietnam", "bag": "gadabout_public", "text": "Kayaking around here is/was great fun.\n[img[http://farm2.static.flickr.com/1072/3174906360_8cd9ebe721.jpg]] ([[flickr link|http://www.flickr.com/photos/jdlrobson/3174906360/sizes/m/in/photostream/]])", "title": "Halong Bay, Vietnam", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75609}, {"creator": "jon", "fields": {"geo.lat": "21.0292095", "geo.long": "105.85247", "_hash": "e8a41b3fe0f7cb39d79dea091238fdc67a62b7f1"}, "created": "20110517154719", "recipe": "gadabout_private", "modified": "20110517154719", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hanoi%2C%20Vietnam", "bag": "gadabout_public", "text": "When I stayed here I saw trippy water puppets, went to [[Sapa, Vietnam]] and [[Halong Bay, Vietnam]].", "title": "Hanoi, Vietnam", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75610}, {"creator": "jon", "fields": {"geo.lat": "41.620442287842", "geo.long": "-1.06458860259731", "_hash": "facc712b7569b956105f34473b0f24ee878f6acb"}, "created": "20110514174452", "recipe": "gadabout_private", "modified": "20110514174452", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Zaragoza%2C%20Spain", "bag": "gadabout_public", "text": "One new year I flew into here simply because it was cheap and there were trains for not too much to go to [[Barcelona, Spain]].\n\nIt turned out to be quite a nice little city.\n", "title": "Zaragoza, Spain", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75858}, {"creator": "jon", "fields": {"geo.lat": "5.3367716925003", "geo.marker": "", "geo.long": "100.26970587998", "_hash": "c2ba3db34ccf08e8e509beb6e5d3940373164d3f"}, "created": "20101120210438", "recipe": "gadabout_private", "modified": "20110514154943", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Penang%2C%20Malaysia", "bag": "gadabout_public", "text": "<<<\n\"I am just about to fall asleep. I am convinced this bed has bed bugs despite no evidence. There is a metal frame with a mattress with one sheet on it and nothing else. My mother would have a fit that there is not even a mattress cover. I have spread a slightly damp towel in the hope that this will form a layer of protection of some sort but there is not even a mosquito net so attack from mosquitos from above is more than possible.\"\n<<<\n\nPenang is a very pretty town. I like it a lot. Lots of old Chinese buildings, good food and some spectacular historic builders. China town's streets made me reminise of [[Hoi An, Vietnam]]. Here I saw the biggest incense tickets I've ever seen in my life, burning outside a temple of pyromaniacs who seemed to like burning anything they could. We went to a clan house - very impressive - every walk marked with fantastic bright art work. The smells of Little India reminded me much of Singapore. Later, after Dan hired a moped we drove to a recommended restaurant... which was shut... but instead stumbled across a lion dance.\n[img[http://farm3.static.flickr.com/2761/4362520028_149ba162e2_m.jpg]]\nThe lion was two boys in a lion costume who manipulated it so brilliantly that it brought fear and awe with every move. They climbed on to gymnastic platforms gliding and jumping from step to step. It brought me goosebumps and according to a nearby Malay a bigger one will arrive tomorrow. I found out throughout this trip that lion dances would be occurring frequently and spontaneously so on hindsight this statement didn't surprise me.\n\nThe following morning we took the bike and with the window in the hair, a law probably broken with no motorcycle license as such we were driving around Penang. We stopped at a cafe on the coast. Although this sounds glamorous the beach was pretty much road and debris. We chatted to a man on his way to work who gave us directions to a snake temple, after finishing our sticky rice with anchovies from a banana leaf we headed on our way. The snake temple was a slight disappointment, the temple had little character but lots of snakes. Adjoined to the temple was a snake zoo with 3 caged monkeys (wrong!), random rabbits (watch out for snakes), chickens and some giant tortoises. I wondered if this is where the kids were sent whilst their parents were at temple.\n\nThe snakes were pretty evil looking and all over the zoo as you would expect from a snake zoo, but most were in glass boxes. The spitting cobra was pretty evil. If you put your face in front of it and moved your head, its eyes would follow you and it would spit and lunge forward into the glass. Trust me you don't want to meet one of those outside a cage. We watched a burmese python attack a live mouse/rat. It locked its body around the poor creature and squeezed every last drop of its life. It was moving and powerful to see nature in action, with life disappear slowly as the mouse twitched its legs and give up its last bits of energy.\n\nAfter a long chat with the snake keeper including a chat about how he kisses a king cobra occasionally (it has a bite that can kill you in 15 minutes). It was interesting to hear this, knowing that the nearest hospital where anti-venom was stocked was 45 minutes away. Also the snake zoo for some reason didn't seem to stock the anti-venom due to some legal reason. If one bites your arm or leg, you need to amputate to stand any chance of survival.\n\nWe drove on to some very quiet fishing villages. The houses and life seemed much more basic and fundamental then anything I'd seen in Malaysia.\n\nWe later reached Batu Feringhi after a nice breezy drive through the hills where the beaches were nicer and there were several resorts. The beaches may have had the reputation of the best on the island but I've seen better. Somewhere in the middle of nowhere we stopped off at a fish restaurant which was closed. There were young men there who worked there normally who were very hospitable. They gave us some beers and we stopped and chatted. One was an international refugee from [[Myanmar]]. He couldn't speak much English but his friendliness was obvious. They told us to enjoy the beach with its terrific view and a couple of swings which we did. A hammock hung further down the beach that I would have loved to use but that would have been pushing my luck.\n\nOn our return we were heavily sunburnt. We rushed to get ready and headed for New World Park for yet another lion dance to meet some couchsurfers. We decided to get a rickshaw there, however this decision was regretted moments after boarding and some short small talk discovering that our driver was 76 years old. As he huffed and puffed, the rickshaw got slower and slower. Convinced his life was in danger, I did the right thing and offered to finish the last half of the drive. \n\nAmazingly, he let me.\n[img[http://farm5.static.flickr.com/4045/4362509196_356309d465.jpg]]\n//from [[my photostream|http://www.flickr.com/photos/jdlrobson/4362509196/]]//\n\nI drove around the streets of Penang in a rickshaw with a 76 year old man cackling away, telling anyone on the streets who would look in disbelief at this sight that \"I from London!\" in an attempt at a cockney accent. I almost crashed us into the side of a car, but we finished un-scaved. \n\nBest 15 ringgit I have ever spent and he has probably ever made.\n\nMy trip to Penang ended on Chinese New Year night. During the day the streets were empty but an air of excitment and anticipation lingered. As the night began, people filled the streets, the noise of drums, fireworks and firecrackers filled the air and lion dancers spontaneously danced in even the most remote spots.", "title": "Penang, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75741}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "1dbe2d61becae0fa97b3a7dea319f02469f46b1b"}, "created": "20101120200544", "recipe": "gadabout_private", "modified": "20110514122230", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/2010%20South%20East%20Asia%20trip", "bag": "gadabout_public", "text": "I managed to get 5 weeks off work to finish off what I started in my [[first Asia trip|2007 South East Asia trip]].\n\nThe route I took was\n[[Kuala Lumpur, Malaysia]]\n[[Cameron Highlands, Malaysia]]\n[[Penang, Malaysia]]\n[[Langkawi, Malaysia]]\n[[Ko Lipe, Thailand]]\n[[Langkawi, Malaysia]]\n[[Kuala Lumpur, Malaysia]]\n[[Bandar Seri Begawan, Brunei]]\n[[Kota Kinabalu, Malaysia]]\n[[Macao]]\n[[Hong Kong]]\n[[Shekou, China]]\n[[Hong Kong]]\n[[Singapore]]", "title": "2010 South East Asia trip", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 75458}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "84be1f7f489018984f2b42ff85826973b37bab7a"}, "created": "20101120202246", "recipe": "gadabout_private", "modified": "201105141219", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/2009%20South%20East%20Asia%20Trip", "bag": "gadabout_public", "text": "This was a short 10 day stint. Short but sweet taking in two new countries - Malaysia (Borneo) and Singapore:\n\n[[Singapore]]\n[[Kuching, Malaysia]]\n[[Singapore]]", "title": "2009 South East Asia Trip", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 75443}, {"creator": "jon", "fields": {"geo.lat": "22.487700986131", "geo.marker": "", "geo.long": "113.92401254279", "_hash": "b924cce1488e1c4ea2adffc4a84ad35e795cdb21"}, "created": "20101120214420", "recipe": "gadabout_private", "modified": "201105141216", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Shekou%2C%20China", "bag": "gadabout_public", "text": "The first thing I ever saw in China was this through a bus window:\n[img[http://farm4.static.flickr.com/3281/4631202459_6a0459516c.jpg]]\n\nWhat followed is why I don't do tours.\n\nWhile I collect together my thoughts, hopefully [[this panda plate|http://www.flickr.com/photos/jdlrobson/5576973658/]] gives you an idea:\n", "title": "Shekou, China", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75803}, {"creator": "jon", "fields": {"_hash": "09c2b5d5e1e27e74a7699d43361fcaf284258282"}, "created": "20100925180932", "recipe": "gadabout_private", "modified": "20110514121557", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/SiteTitle", "bag": "gadabout_public", "text": "gadabout", "title": "SiteTitle", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch"], "revision": 75817}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "f091c54eadb942c7e3a7300520108e6300f90287"}, "created": "20101120202532", "recipe": "gadabout_private", "modified": "201105141207", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/2008%20Japan%20-%20Original%20Itinerary", "bag": "gadabout_public", "text": "In 2008 I made a trip to Japan. This is how I planned it. It didn't quite work out this way but was still good fun!\n\n!Day 0 Mon 18th Feb\n\tYou starve yourself of sleep as much as possible.\n\n!Day 1 Tue 1th Feb\nFlight\nYou board the plane at 13:00 (VS900) and fly to Tokyo Japan. You sleep for the majority of the 12 hour flight as otherwise you\u2019re going be in trouble come Wed am!\n\n!Day 2 Wed 20th Feb, Day 3 Thur 21st Feb, Day 4 Fri 22nd Feb\nTokyo\nWednesday morning day 2 at 10am you hit Tokyo and are overwhelmed by the culture shock and lack of English signs. Luckily we meet Matt at the airport and he looks after us. You take it easy in time for the crazy birthday celebrations.\nOn day 3 we visit Ueno Park (cherry blossoms) and visit the Meiji Shrine.\n \nDay 4 we consider a day visit to Nikko - a shrine centre, with several sacred sites including the resting places of the Tokugawa shoguns (Togoshu shrine).  \nWe consider leaving in the evening to get to Matt\u2019s\n\n!Day 5 Sat 23rd Feb, Day 6 Sun 24th Feb, Day 7 Mon 25th Feb\nNagano\nArrive at Matt\u2019s.\nGo to an onsen?\nVisit Matsumoto Castle\n\nMatt lives 2 hours south of Nagano city in Komagane and lends you his car. We visit his school for a day to see the kids, and engage in some snowboarding/skiing.\n\n\n!Day 8 Tue 26th Feb, Day 9 Wed 27th Feb,\nTakayama\nIt may be snowed in\nSake breweries, traditional inns and art galleries in the Japanese Alps. \nGo to Hida Folk Village for a glimpse of traditional life.\nCurrently have no idea how to get this.\nMatt runs out of holiday?!\n\n!Day 10 Thur 28th Feb, Day 11 Fri 29th Feb, Day 12 Sat 1st March,\nKyoto\n\nkyoto!!! kyoto!!! kyoto!!\nyou can get there from tokyo in about 2.5hrs but i;d recommend staying over for a few days since it's so nice.\n\nit has so much more than tokyo. tokyo is a fabulous city but kyoto has the real history and the temple experience is just fantastic. gion is where the story of the geisha is famous. though this has been phased out, you can still see maiko around. nearby osaka and nara are also great places to visit.\n\nFeudal Japan\nVisit Himeji-Jo Castle en route to Kyoto\nKinkaku-ji Temple (Golden Pavilion).\nTour of the geisha district of Gion\n\nGolden Pavilion, Near Kyoto\nConsider a trip on route to Hiroshima to Tottori and its sand dunes: http://en.wikipedia.org/wiki/Tottori_Sand_Dunes\n\n!Day 13 Sun 2nd March, Day 14 Mon 3rd March,\n\nHiroshima\n The A-Bomb Dome and Peace Museum\nthe famous floating 'torii' of Miyajima's grand Itsukushima-jinja shrine.\n\n!Day 15 Tue 4th March\nOsaka\nEat octopus and a load of other nice food.\nYou stay in a capsule hotel:\nKapsel in Osaka, is on Douyamacho, Umeda, next door to the Mandarake Manga store. It is about a ten minute walk east of JR Osaka Station.\n&nbsp;A night in a Kapsel will cost 2500 Yen (US$23). Everything, including a shower, meals and television comes at an additional cost.\n\n!Day 16 Wed 5th March, Day 17 Thur 6th March, \n\nHakone / Kamakura\nGo to Fuji Hakone Izu National Park.\nBoat cruise across Lake Ashino-ko. \nVisit Mt Kamiyama volcano.\nIf not too cold to soak in an onsen.\n\nA trip to Mt Fuji the highest peak in Japan is also obviously on the cards.\nIzu-Shichito?\n\nKamakura\nYou also take a day trip to see the Great Buddha of Kamakura (50km south south west of Tokyo). Here you get some nice shots of Mt Fuji.\n\nthe Great Buddha of Kamakura\n\nGood view of Mt Fuji from Kamakura\n\n!Day 18 Fri 7th March, Day 19 Sat 8th March\nTokyo\nDay 18 you return to Tokyo where you crash for the night ready for the flight tomorrow.\n\nYou board the plane back to England at 12:00pm on the Saturday at Narita airport (VS901). It returns at 15:30 local time.\n\n\n!Stuff that I don\u2019t seem to be able to fit in..\nFit in Mito?!\nShikoku (\u56db\u56fd) is an oft-forgotten island in Japan. The smallest of Japan's Big Four, it lies to the south of Honshu. The island is thought of as a rural backwater, with few must-see attractions, but a visit there can wash away those doubts; particularly the mountainous inner regions offer some good hiking and a glimpse of the elusive Real Japan. It is also the home of the 88 Temple Pilgrimage of the Shingon sect of Buddhism.\n\nhokkaido and okinawa! such contrast. that's what's so great about japan. so much choice. something for everyone.\n\npeople tend to miss out kyushu, one of the 4 main islands but it's really worth a visit too!\n\ndepends on what you're really into, but kamakura which is like a mini kyoto is only 60 minutes from tokyo. also recommend nikko and hakone as places of natural beauty near the capital. if you;re in the right season (august) fuji-san would be a good option.\nLocal supermarkets are relatively inexpensive if you stick to Japanese food such as seasonal vegetables, seafood, soya bean products and rice. If you visit supermarkets shortly before closing time in the evening, you can purchase remaining perishable products at big discounts. \nThere are plenty of restaurants where you can have a full meal for between 500/\u00a32 and 1000/\u00a34 Yen. Noodles (ramen, soba and udon), domburi (for example, beef domburi), curry rice, bibimba (Korean style domburi), hamburgers and many more types of dishes are available at such inexpensive restaurants. Look for them around and inside large train stations and in business areas. \nA meal at a more average restaurant costs roughly between 1,000/\u00a34 and 3,000/\u00a312 Yen, while there is no upper price limit when it comes to high-class restaurants such as ryotei. \nDuring lunch hours, many restaurants offer inexpensive teishoku (set menus) at around 1000 Yen. Lunch boxes (bento), which are sold in convenience stores and department stores, train stations and at temporary stands in business areas are also a good deal. \nGiant Buddha\n\nhttp://www.japan-guide.com/e/e3100.html\n\nTallest statue in world in Ushiki nr Mito\nhttp://en.wikipedia.org/wiki/Ushiku_Daibutsu ", "title": "2008 Japan - Original Itinerary", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["trip"], "revision": 75439}, {"creator": "jon", "fields": {"geo.lat": "46.9903248", "geo.marker": "", "geo.long": "7.7729916", "_hash": "f9ed9eefbdfbc5e84c4ee407c9334287446e11a8"}, "created": "20110429080014", "recipe": "gadabout_private", "modified": "201105141204", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Br%C3%BCschh%C3%BCsli%2C%20Switzerland", "bag": "gadabout_public", "text": "Home of my uncle.\nI'm going to see him in May 2010 for the first time since 2008.\n", "title": "Br\u00fcschh\u00fcsli, Switzerland", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75507}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "a23ec70f847f759b9e86f3ca21414e38f9a18600"}, "created": "20101127210121", "recipe": "gadabout_private", "modified": "201105141203", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Vaccination%20Record", "bag": "gadabout_public", "text": "diptheria, tetanus and polio till 2017\ntyphoid fever 3 doses last on 07/02/09\nhepatitis A 07, 07 and 07/02/09 > 20 years 2 known\n", "title": "Vaccination Record", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["personal", "records"], "revision": 75842}, {"creator": "jon", "fields": {"geo.lat": "41.3856804", "geo.marker": "beenMarker", "geo.long": "2.1702046", "_hash": "6270e7ccaa475b3ad6a5b0726b37ba81bb1e0511"}, "created": "20101212164654", "recipe": "gadabout_private", "modified": "201105141203", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Barcelona%2C%20Spain", "bag": "gadabout_public", "text": "Write something here!", "title": "Barcelona, Spain", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75476}, {"creator": "jon", "fields": {"geo.lat": "55.9501755", "geo.marker": "", "geo.long": "-3.1875359", "_hash": "22a0fa93ecbdfa9e00e7fb06de69e6dadc30e47e"}, "created": "20110411074613", "recipe": "gadabout_private", "modified": "201105141203", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Edinburgh%2C%20Scotland", "bag": "gadabout_public", "text": "At the beginning of October I will be heading to Edinburgh for Iain's stag do.\n\n!Hotels\nhttp://www.premierinn.com/en/hotel/EDIMTI/edinburgh-city-centre-haymarket\nsold out?\n\nhttp://www.budgetbackpackers.com/map.php\n20 mins walk from hotel\n\nhttp://www.pointhoteledinburgh.co.uk/\nabout \u00a370\n\nDorms\nhttp://edinburghnightshostel.com/\nhttp://www.edinburghcitycentrehostels.co.uk/rates/", "title": "Edinburgh, Scotland", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75584}, {"creator": "jon", "fields": {"_hash": "378e7c4224d9b9ed97947eefce1fab45a0a71696", "tiddlyspaceinit_version": "0.6"}, "created": "20110514120208", "recipe": "gadabout_private", "modified": "20110514120208", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/gadaboutSetupFlag", "bag": "gadabout_public", "text": "@@Please do not modify this tiddler; it was created automatically upon space creation.@@", "title": "gadaboutSetupFlag", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludePublisher", "excludeSearch"], "revision": 75865}, {"creator": "jon", "fields": {"geo.lat": "55.6867239", "geo.marker": "beenMarker", "geo.long": "12.570069", "_hash": "6270e7ccaa475b3ad6a5b0726b37ba81bb1e0511"}, "created": "20101212164615", "recipe": "gadabout_private", "modified": "201105141202", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Copenhagen%2C%20Denmark", "bag": "gadabout_public", "text": "Write something here!", "title": "Copenhagen, Denmark", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75553}, {"creator": "jon", "fields": {"_hash": "04bb04c875ad6de25bd34db9fcd7b2dbd0aefd33"}, "created": "20110514115517", "recipe": "gadabout_private", "modified": "20110514120110", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hillman%20Wonders%20of%20the%20World", "bag": "gadabout_public", "text": "[[Hillman|http://www.hillmanwonders.com/]] claims that this is the top 100 list of things to see/do before you die.\nI ''love'' lists.\n\n!Things I've seen\n1 \u2423 Pyramids of Egypt\n13 \u2423 Angkor Wat\tCambodia \n33 \u2423 Egyptian Museum Egypt\n36 \u2423 Hong Kong Harborscape China \n62 \u2423 Golden Pavilion Japan \n78 \u2423 Stonehenge\tEngland\n82 \u2423 Petronas Twin Towers\tMalaysia \n84 \u2423 New York Skyline USA \n86\u2423EiffelTower France\n89\u2423BritishMuseum England \n97 \u2423 Neuschwanstein Castle Germany\n\n!Things I haven't:\n2 \u2423 Great Wall of China\n3\u2423TajMahal India\n4 \u2423 Serengeti Migration Kenya/Tanzania\n5\u2423GalapagosIslands Ecuador\n6 \u2423 Grand Canyon USA\n7\u2423MachuPicchu Peru\n8 \u2423 Iguazu Falls Argentina/Brazil\n9\u2423Bali Indonesia\n10 \u2423 Amazon Rain Forest Brazil/Peru\n11\u2423Ngorongoro Crater Tanzania\n12\u2423GreatBarrierReef Australia\n14\u2423VictoriaFalls Zambia&Zimbabwe\n15 \u2423 Forbidden City China\n16\u2423Bagan Myanmar\n17\u2423KarnakTemple Egypt\n18\u2423Teotihuacan Mexico\n19\u2423Banaue RiceTerraces Philippines\n20\u2423Bora Bora French Polynesia\n21 \u2423 Acropolis & its Parthenon Greece\n22\u2423Potala Palace at Lhasa China\n23\u2423Jerusalem Old City Israel\n24\u2423Qin TerraCotta Warriors China\n25 \u2423 Chichen Itza Mexico (although I was only an hour away)\n26 \u2423 Petra\tJordan\n27 \u2423 Nile River Cruise Egypt\n28\u2423Easter Island Chile\n29\u2423Cappadocia Turkey\n30 \u2423 Colosseum of Rome\n31 \u2423 Fjords of Norway\n32\u2423St Peter'sBasilica VaticanCity\n34\u2423Borobudur Indonesia\n35 \u2423 Valley of the Kings Egypt\n37 \u2423 Sistine Chapel Vatican City\n38\u2423Alhambra Spain\n39\u2423LouvreMuseum France\n40 \u2423 Canals of Venice Italy\n41\u2423Versailles France\n42 \u2423 Carlsbad Caverns USA\n43 \u2423 Mecca\tSaudi Arabia\n44 \u2423 Kathmandu Valley Nepal\n45 \u2423 Metropolitan Museum of Art USA \n46\u2423Mt.Everest China&Nepal \n47\u2423AntarcticCruise Multinational \n48 \u2423 Temple Emerald Buddha Thailand\n49 \u2423 Hagia Sofia Turkey\n50\u2423Pompeii Italy\n51\u2423KashmirValley India\n52 \u2423 Prague Old Town Czech Republic\n53 \u2423 Golden Temple India\n54 \u2423 Amalfi Coast & Drive Italy\n55 \u2423 Meenakshi\tIndia\n56\u2423ChartresCathedral France\n57 \u2423 Mezquita of Cordoba Spain\n58 \u2423 Damascus Old City / Umayyad Syria\n59 \u2423 Dubrovnik Croatia\n60 \u2423 Uffizi Gallery Italy\n61 \u2423 Rio Panoramic Views\tBrazil\n63 \u2423 Delphi Greece \n64 \u2423 St. Basil's Cathedral Russia \n65 \u2423 Abu Simbel Egypt\n66 \u2423 St. Mark's Basilica/Campanile Italy \n67 \u2423 Florence Cityscape Italy\n68\u2423Kremlin Russia\n69 \u2423 Varanasi & the Ganges India\n70 \u2423 Li River Cruise\tChina\n71 \u2423 Shwedagon Stupa\tMyanmar\n72 \u2423 Sahara Desert\tMultinational\n73 \u2423 Leaning Tower of Pisa\tItaly\n74 \u2423 Baalbek\tLebanon\n75 \u2423 Mont-St-Michel\tFrance \n76\u2423Topkapi Palace Turkey\n77 \u2423 Carnival in Rio\tBrazil\n79\u2423 AngelFalls Venezuela\n80 \u2423 Yellowstone\tUSA\n81 \u2423 Santorini\tGreece\n83 \u2423 Matterhorn\tSwitzerland\n85 \u2423 Marrakesh\tMorocco\n87 \u2423 Ladakh\tIndia\n88 \u2423 Niagara Falls\tCanada & USA\n90 \u2423 Burj Al Arab\tDubai, UAE\n91 \u2423 Yangtze River Cruise\tChina\n92\u2423Yosemite USA\n93 \u2423 Ayers Rock\tAustralia\n94 \u2423 Hermitage Museum\tRussia\n95 \u2423 Chambord Chateau\tFrance\n96\u2423Lijiang/Shangri-La China\n98 \u2423 Banff National Park\tCanada\n99 \u2423 San Francisco USA\n100 Portofino", "title": "Hillman Wonders of the World", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75612}, {"creator": "jon", "fields": {"geo.lat": "30.0505012", "geo.long": "31.2498969", "_hash": "6270e7ccaa475b3ad6a5b0726b37ba81bb1e0511"}, "created": "20101212163416", "recipe": "gadabout_private", "modified": "201105141201", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Cairo%2C%20Egypt", "bag": "gadabout_public", "text": "Write something here!", "title": "Cairo, Egypt", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75515}, {"creator": "jon", "fields": {"geo.lat": "47.4983377", "geo.marker": "beenMarker", "geo.long": "19.0404712", "_hash": "6270e7ccaa475b3ad6a5b0726b37ba81bb1e0511"}, "created": "20101212164559", "recipe": "gadabout_private", "modified": "201105141201", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Budapest%2C%20Hungary", "bag": "gadabout_public", "text": "Write something here!", "title": "Budapest, Hungary", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75510}, {"creator": "jon", "fields": {"_hash": "e57e02c8b0eb3099de9390305af389e8146364a8"}, "created": "20110514115253", "recipe": "gadabout_private", "modified": "20110514115253", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Places%20to%20Visit%20Before%20I%20die", "bag": "gadabout_public", "text": "Here are notes about places organised by country that I should probably go before death gets me.\n\n!Australia\nNingaloo  has whale sharks\n\n!Bulgaria\nIs there a conspiracy to hide the delights of Bulgaria from the rest of the world? Consider: the ancient Black Sea coastal resorts of Nesebar and Sozopol with their ruins and beaches, Veliko Tarnovo\u2019s dramatic riverside setting and ancient hilltop palace ruins, idyllic Koprivshtitsa\u2019s traditional grand mansions and pristine streetscapes. Heard of them? If not, take a look.\n\n!Ireland\nSlieve League, Donegal\n\n\n!looked for\n!!estonia\nbeavers lahemmaa national park, coastline\n\n!!Kosovo\nGazi Mehmed Pasha bath\n\n\n!!Greece\nSamana gorge, santorini\n\n!!Latvia\ncape kolka, riga art museum, winding lanes, blackheads house, cat house riga, kuldya waterfall\nkorasta prison, cesis, gauja national park\n\n!!Macedonia\nohrid lake\n\n!!Moldova\nOrheiul Vechi, Transdriestr\n!!Montenegro\nsveti stefn, durmitor national park\n\n!!Russia\nkurhshaya kosa, lenin, sakhalin seals\n\n!!Romania\nsighisoara, southern bucouikov monasteries, piata victoriei\n\n!!Leichenstein\nVaduz\n\n!!Serbia\nNovisad citadel\n\n!!Ukraine\nchernobyl, kyar caves monastery\n\n\n!!New Zealand\nRotorua hot springs\nhttp://news.bbc.co.uk/1/hi/programmes/from_our_own_correspondent/8683377.stm\n!Lithuania\nCuronian spit sand dunes, Trakai castle, hills of crosses, roman amphitheatre, ruins of eumolpias, aladzha monastery\n\nSearch using cc on flickr\nhttp://www.flickr.com/search/?l=cc&mt=all&adv=1&w=all&q=Novisad+&m=text", "title": "Places to Visit Before I die", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75742}, {"creator": "jon", "fields": {"geo.lat": "12.0357195", "geo.long": "39.0465891", "_hash": "baa9671ba6d603082cf8b1be5ccc3c43ca5416cf"}, "created": "20110514101743", "recipe": "gadabout_private", "modified": "20110514101743", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Lalibela%2C%20Ethiopia", "bag": "gadabout_public", "text": "Ethiopian Christmas (Leddet) takes place 6-7 January each year\nIt's very colourful apparently.", "title": "Lalibela, Ethiopia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75666}, {"creator": "jon", "fields": {"_hash": "7f036fb414ac944cac99e0b36694c930758d702f"}, "created": "20110513093516", "recipe": "gadabout_private", "modified": "20110513093516", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/ColorPalette", "bag": "travelblog_public", "text": "/*{{{*/\nBackground: #efe4f0\nForeground: #180e1a\nPrimaryPale: #ffffff\nPrimaryLight: #c299c8\nPrimaryMid: #794581\nPrimaryDark: #1a0f1c\nSecondaryPale: #ffffff\nSecondaryLight: #99c7c8\nSecondaryMid: #457f81\nSecondaryDark: #0f1c1c\nTertiaryPale: #ffffff\nTertiaryLight: #c8ba99\nTertiaryMid: #816f45\nTertiaryDark: #1c180f\nError: #f88\nColorPaletteParameters: HSL([292|70], [0.3039969759993255],[0.0859261890873313|0.3906174593915542|0.6953087296957771|1])\n/*}}}*/", "title": "ColorPalette", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch"], "revision": 224470}, {"creator": "jon", "fields": {"_hash": "378e7c4224d9b9ed97947eefce1fab45a0a71696", "tiddlyspaceinit_version": "0.6"}, "created": "20110513093516", "recipe": "gadabout_private", "modified": "20110513093516", "uri": "http://travelblog.tiddlyspace.com/bags/travelblog_public/tiddlers/travelblogSetupFlag", "bag": "travelblog_public", "text": "@@Please do not modify this tiddler; it was created automatically upon space creation.@@", "title": "travelblogSetupFlag", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludePublisher", "excludeSearch"], "revision": 224780}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "2aaeb50ff4c2f769d6d55f61170417bee483bc89"}, "created": "20101121195749", "recipe": "gadabout_private", "modified": "20110510101631", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/The%20Jungle%20Trek%202%20incident", "bag": "gadabout_public", "text": "This happened in [[Cameron Highlands, Malaysia]]\n\nNow, if you ever go to the Cameron Highlands beware \"jungle trek 2\". We were told it was an easy hike to take with stunning scenery and would take up 5 hours of our time. However after the incident we took the what I now regard as safer Jungle trek 1.\n\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/4361784813/\" title=\"Tea by rakugo, on Flickr\"><img src=\"http://farm5.static.flickr.com/4043/4361784813_5edaacea5f.jpg\" width=\"500\" height=\"375\" alt=\"Tea\" /></a>\n</html>\n\nFirstly... we couldn't find it. We had spent the morning in a mossy forest as part of a tour. Our excellent guide knew lots about this forest and the plants within. He was also a little sadistic when it comes to cicadas - on the drive back he dangled a cicada out of the window as he drove. If you've heard the soothing sounds of many cicadas, I can assure you the sound a cicada 4 feet away from you being dangled out of the window is not a sound you want to hear again.\n\nIt wasn't part of the tour but I saw some awesome butterfly/moth things. As you can imagine seeing magnificient creatures like this \n[img[http://farm5.static.flickr.com/4045/4362499628_83fe8f29b2.jpg]]\nand this\n[img[http://farm3.static.flickr.com/2751/4362499626_e407ce61e4.jpg]]\nmake one want to go hiking. So we asked our knowledge guide for the best route to take and how to find it.\nHis directions were not as good as his knowledge.\n\n!Getting lost\nWhat followed was about 1 hour trying to discover the starting point of trek 2. This in itself was the challenge and the reason for my Cameron Highlands memories. First of all we ended up walking in to what seemed to be a residential zone. We walked up a steep hill and a dog from a nearby house came out and barked at us. Now I get paranoid at dogs in foreign countries. Firstly a dog can smell fear whatever country it is from, and two rabies is a scary virus and I assume all foreign dogs on their own to have it. Scared out of my wits I tried to keep my composure and walk past the dog to join the trek 2 walk. I made it. Relieved that I had done so I continued up the path with Dan, until we came to what appeared to be... a greenhouse. Now I'm no expert but I have never seen a greenhouse on a trek of any sorts. We considered for a moment that maybe beyond the greenhouse was trek 2, but as we walked on, we suddenly heard the scary sound of bees. We looked up to see loads of the things. This was certainly not the way to trek 2, so we turned and walked back.. only oh yeh.. there was that dog. The dog this time was equally ferocious barking at us like crazy. We chose our moment and walked past. As we did we noticed residents in the house. Instantly I lost fear in the dog as it became clear the dog was there's. I puckered up courage and asked for directions to trek 2.\n\nI don't speak Malaysia. She didn't speak English. Although she pointed to where trek 2 was - but it wasn't clear where she was pointing. There was 2 places she could have pointed - we had a rough direction but not a clear one. So we walked up the first path that it could have been. Walked for a while and then realised this was also the wrong way. We returned and even asked her again. It was now clear it wasn't the direction we just took but the other direction.\n\nThe other direction had even more scary dogs. Luckily they were in a cage - but there was 4 of them and they were all on leashes and the fact they were all on leashes was even more of a reason to suspect rabies. They'd probably been tied up to stop biting people and giving them rabies.\n\nContinuing on we had yet another decision - up the stairway leading up or... through yet another greenhouse. Since the greenhouse didn't work last time, we began by trying the stairway. We walked for a while until we came to a forest opening with menacing signs outside written in Malaysian with no mention of trek 2. We didn't like the look for this forest. It didn't look right. We turned around and decided to try the greenhouse. As we entered we bumped into a guy. We apologised as we were obviously in the wrong place but he seemed to think we weren't. He pointed into the greenhouse smiling reassuring us that maybe this was the way. We entered, there were several workers, possibly of Indian origin digging vegetables of some sort out of the soil to our right. We walked a bit further closer to these workers until we reached seemingly the end of the greenhouse which was shrouded by bushes with the sound of a peaceful river running below us. This wasn't the right way. We needed to ask for help again. Bearing in mind the troubles we were having with finding English speakers here we tried again.\n\n!The bit where it got memorable\n\"Trek 2?\" we asked.\n\"No english\" they replied. Sigh. Then one of these workers got up and walked over to the bushes and beckoned us to follow. Now me being naive and tired I assumed he knew a secret way to trek 2. I started to follow. Dan now started getting a bit vocal. There was a sound of worry in his voice which is very unusual for Dan. Dan told me to go back. \nI replied \"No I think this is the way!\"\n\"Lets go back.\"\nSo Dan's not usually very fussy so I started trotting back, accepting his decision, only to notice there was a sense of urgency in his walk. As we got closer I realised why. Dan whispered to me \"Did you see that knife!?!\" \n\nI hadn't actually seen the knife. We walked quickly out of the greenhouse probably destroying many crops on the way.\n\nOn hindsight, he was getting stuff out of the ground so a knife would make sense. However equally the \"no english\" statement may have not been a reference to lack of English communication skills but a declaration that we are in a place that didn't accept English people and punished them with a stabbing in the bushes and hiding them in the river where no one would ever find me if trek 2 was so hard to find.\n\nWe took trek 1. It was much easier to find and it was very nice. Nothing special and nothing memorable to share but nice and most importantly didn't result in our deaths.\n\n!Coconut LED Torches\nAt end there was a slight second panic when 2 Europeans were walking behind us and seemed to be speeding up and getting closer to us by the minute. We prepared for an ambush but ended up hearing about Coconuts with LEDs in them. Basically one of these German guys was an obvious former hippy who apparently drove expensive cars in Germany for Audi half the year and the other half he went to [[Goa, India]] to sell coconut based souvenirs such as LED coconut torches and coconuts with LED's in them that just flashed (I guess a bit like a disco ball but coconut style). Apparently tourists go wild for these things and buy them in droves, and some how local Indian's are unable to make these just right so are perfectly happy to commission former hippies to make them and sell them on a commission basis. This German hippie man would go on a tourist visa so would be prohibited from working in India thus despite the massive demand had to rely on using local shop merchants to sell them on inconspicuously. I hope one day to see an LED torch. When I do I'll think of him and jungle trek 2.", "title": "The Jungle Trek 2 incident", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75829}, {"creator": "jon", "fields": {"geo.lat": "12.908", "geo.marker": "", "geo.long": "123.598", "_hash": "5a02d5809ac1cacc8cd816166c0e624c4f36dea5"}, "created": "20110509180801", "recipe": "gadabout_private", "modified": "20110509181544", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Donsol%2C%20Philippines", "bag": "gadabout_public", "text": "The place to see whale sharks. They grow up to 18m in length and spottings are common between January and May.\n\nthey're big things!\n[img[http://farm3.static.flickr.com/2290/2476918691_225c01bb0f.jpg]]\nthanks [[magtravels|http://www.flickr.com/photos/magtravels/2476918691/sizes/m/in/photostream/]]", "title": "Donsol, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75579}, {"creator": "jon", "fields": {"geo.lat": "13.7572111", "geo.marker": "", "geo.long": "121.0581111", "_hash": "3831655e4a3cee4676b123092deb7aaf0140ab67"}, "created": "20110507122031", "recipe": "gadabout_private", "modified": "20110507122031", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Batangas%2C%20Philippines", "bag": "gadabout_public", "text": "Only 2.5 hours away from [[Manila, Philippines]].\nBatangas has a large port with boats going almost everywhere in the Philippines.\nhttp://wikitravel.org/en/Batangas\n\nThis is the place to see Taal Volcano / Taal Lake.\n[img[http://farm4.static.flickr.com/3267/3100730196_7d72224918.jpg]]\nhttp://www.flickr.com/photos/deckchua/3100730196/sizes/m/", "title": "Batangas, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75477}, {"creator": "jon", "fields": {"geo.lat": "9.7966057", "geo.marker": "", "geo.long": "124.2421597", "_hash": "c0ef67e6505a63ab681e4fcc209e92855e80d277"}, "created": "20110507121422", "recipe": "gadabout_private", "modified": "20110507121422", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Bicol%2C%20Philippines", "bag": "gadabout_public", "text": "Recommended by [[@noodlesinmysand|http://www.twitter.com/noodlesinmysand]] \"if just to experience being overshadowed by a beautiful volcano\"\n\nThe [[Mayon Volcano|http://en.wikipedia.org/wiki/Mayon_Volcano]] is ''active''.\n\n[img[http://farm5.static.flickr.com/4101/4781470828_f4fdb03d7f.jpg]]\nphoto by [[zalda_fabia|http://www.flickr.com/photos/zaldy_fabia/4781470828/sizes/m/]]", "title": "Bicol, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75484}, {"creator": "jon", "fields": {"geo.lat": "10.3591887", "geo.marker": "", "geo.long": "123.8634544", "_hash": "1c13c5e70aae488032efe48742365a6e65ddd5cf"}, "created": "20110505184906", "recipe": "gadabout_private", "modified": "20110507120216", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Cebu%20City%2C%20Philippines", "bag": "gadabout_public", "text": "I really don't want to fly into [[Manila, Philippines]]. This is the entrance to the Philippines for me.\n\nhttp://wikitravel.org/en/Cebu_%28city%29\n\nCebu pacific seem to provide the cheapest flights from Singapore/Hong Kong", "title": "Cebu City, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75537}, {"creator": "jon", "fields": {"geo.lat": "5.9451093875319", "geo.marker": "", "geo.long": "116.06737649531", "_hash": "5904047be91aae8fbba298a4c9358195ae88e4d8"}, "created": "20101120214220", "recipe": "gadabout_private", "modified": "201105071157", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Kota%20Kinabalu%2C%20Malaysia", "bag": "gadabout_public", "text": "I've been here.\nI saw the biggest rat EVER.\nI had an extremely dull tour to see some mountains, but I managed to see a [[rafflesia flower|http://en.wikipedia.org/wiki/Rafflesia]] which was awesome.\nI had the cheapest airport transfer ever paying about \u00a31 for a bus to the airport from town.\nI flew to [[Macau]], on route meeting a girl called Savannah who reminded me I ''REALLY'' need to go to the [[Philippines]].", "title": "Kota Kinabalu, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75641}, {"creator": "jon", "fields": {"geo.lat": "9.4462305", "geo.marker": "", "geo.long": "118.3929417", "_hash": "70ebf1819db42f1af87063626de5da23aaf475e9"}, "created": "20110507115524", "recipe": "gadabout_private", "modified": "20110507115636", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Palawan%2C%20Philippines", "bag": "gadabout_public", "text": "[[This site|http://americanindavao.com]] has this perfect picture which explains why I want to go to Palawan.\n\n[img[http://americanindavao.com/blog/wp-content/uploads/2009/08/palawan-1.jpg]]\n\n[[From wikitravel|http://wikitravel.org/en/Palawan]]: Puerto Princesa International Airport(IATA: PPS) is the main gateway to Palawan, major airlines serve international and domestic flights; Philippine Airlines, Air Philippines, Cebu Pacific and Zest Airways have flights to and from Manila and Cebu, PAL Express (Air Philippines) have flights to and from Busuanga, while SEAIR connects the whole of Palawan internationally with [[Kota Kinabalu, Malaysia]].", "title": "Palawan, Philippines", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75733}, {"creator": "jon", "fields": {"geo.lat": "-37.1052489", "geo.marker": "", "geo.long": "-12.2776838", "_hash": "8f28f7e2cdc8a83c5d4f54e761ee5f306c7ff6cd"}, "created": "20110506123135", "recipe": "gadabout_private", "modified": "20110506123135", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Tristan%20da%20Cunha", "bag": "gadabout_public", "text": "The most remote inhabited island in the world\nIt takes 5-6 days to get to via boat from Cape Town.\nPermission to visit requires sending an email.\n\nGreat aerial photos:\nhttp://www.tristandc.com/aerialtristan.php\n\nTravelling here:\nhttp://wikitravel.org/en/Tristan_da_Cunha\n\n", "title": "Tristan da Cunha", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["island", "remoteness"], "revision": 75835}, {"creator": "jon", "fields": {"geo.lat": "21.1166111", "geo.marker": "", "geo.long": "-88.3333056", "_hash": "17b0068d135730e6973409bcbd1287229260308e"}, "created": "20110306180444", "recipe": "gadabout_private", "modified": "20110504154330", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Valladolid%2C%20Mexico", "bag": "jon-in-belize_public", "text": "Lovely little town away from the touristy beachy areas.", "title": "Valladolid, Mexico", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120761}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "f373d2af3ff7d665e196d485f4d139ed7c8b8210"}, "created": "20100925174731", "recipe": "gadabout_private", "modified": "20110504151845", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Itinerary", "bag": "jon-in-belize_public", "text": "I used this space to plan a trip to Belize, Mexico and Guatemala. I've published all my notes and will update them with information I learnt from my trip in the hope that it will help someone in future doing a similar or the same itinerary.\n\nSee [[Central America 2011]] for details on the trip.\n\nAll my notes can be accessed via this dropdown:\n* <<groupBy server.bag filter:\"[is[public]][notag[excludeLists]]\">>\n* Alternatively you can click on a dot in the map to reveal information about that location.\n* via the search box in the top right", "title": "Itinerary", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120665}, {"creator": "jon", "fields": {"geo.lat": "45.8996243", "geo.marker": "", "geo.long": "6.1284548", "_hash": "e9526e387fc40205400b989a0a158537be907684"}, "created": "20110501143648", "recipe": "gadabout_private", "modified": "20110501143648", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Annecy%2C%20france", "bag": "gadabout_public", "text": "Pretty little place recommended by Steph.", "title": "Annecy, france", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75461}, {"creator": "jon", "fields": {"geo.lat": "45.756463968333", "geo.marker": "", "geo.long": "16.011023109848", "_hash": "37d628509df463ff9d425e975ac2096cd213562f"}, "created": "20110404204555", "recipe": "gadabout_private", "modified": "20110410202833", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Zagreb%2C%20Croatia", "bag": "gadabout_public", "text": "In June flights are about \u00a379 return (\u00a335 single)\n3hr 30m bus to [[Zadar, Croatia]] via [[Plitvce National Park, Croatia]]\n\nhttp://www.camera-felice.com/en/gallery.html", "title": "Zagreb, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75857}, {"creator": "jon", "fields": {"geo.lat": "44.8696519", "geo.marker": "", "geo.long": "13.8411466", "_hash": "af68f6a41aa1a36cc469d0af61ec1c98e508d3e6"}, "created": "20110409165615", "recipe": "gadabout_private", "modified": "20110409201144", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Pula%2C%20Croatia", "bag": "gadabout_public", "text": "\u00a323 to fly single to London Stansted with Ryanair (in June)\nbut Ryanair charge \u00a36 a flight booking fee without some stupid card.", "title": "Pula, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75751}, {"creator": "jon", "fields": {"geo.lat": "44.9601469", "geo.marker": "", "geo.long": "14.4095157", "_hash": "64c75ad21b010aef2c1ab2a11df6c4c7e72aab2f"}, "created": "20110409194720", "recipe": "gadabout_private", "modified": "20110409195126", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Kres%2C%20Croatia", "bag": "gadabout_public", "text": "Griffon vultures\nhttp://www.wanderlust.co.uk/magazine/articles/destinations/the-griffon-vultures-of-cres-croatia", "title": "Kres, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75643}, {"creator": "jon", "fields": {"geo.lat": "43.801944", "geo.marker": "", "geo.long": "15.972778", "_hash": "9474df741850050e3d6409433cc2ff34b35f4a8a"}, "created": "20110409193952", "recipe": "gadabout_private", "modified": "20110409194010", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Krka%20National%20Park%2C%20Croatia", "bag": "gadabout_public", "text": "waterfalls", "title": "Krka National Park, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75645}, {"creator": "jon", "fields": {"geo.lat": "44.1148781", "geo.marker": "", "geo.long": "15.2289514", "_hash": "826ca190e2e3112ddd1d08248077f9b11c93c4b5"}, "created": "20110409165812", "recipe": "gadabout_private", "modified": "20110409193831", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Zadar%2C%20Croatia", "bag": "gadabout_public", "text": "3.5hrs from [[Split, Croatia]] by train.", "title": "Zadar, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75851}, {"creator": "jon", "fields": {"geo.lat": "43.5069058", "geo.marker": "", "geo.long": "16.4424496", "_hash": "0ac6779f1fdd97b6da2dc8f0e977f0001442650d"}, "created": "20110409165531", "recipe": "gadabout_private", "modified": "20110409193431", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Split%2C%20Croatia", "bag": "gadabout_public", "text": "Roman ruins\n\nA boat to [[Dubrovnik, Croatia]] will provide beautiful scenery. http://www.jadrolinija.hr/pdfs/EUR%20-%20engl.DUZ.%202011.pdf (20-60EUR) - looks like a day trip", "title": "Split, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75822}, {"creator": "jon", "fields": {"geo.lat": "42.6418783", "geo.marker": "", "geo.long": "18.1064811", "_hash": "768949acd593a36d9e18c5078a63cce3dac7a4f1"}, "created": "20110409160824", "recipe": "gadabout_private", "modified": "20110409192838", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Dubrovnik%2C%20Croatia", "bag": "gadabout_public", "text": "The new main bus station is in Kantafig, near Port Gruz and the Tudjman bridge, 2.5km northwest of the Old Town. Local bus 7 operates between this station and Babin kuk, and bus 1 serves Old Town.\nDirect buses run to/from [[Zagreb, Croatia]] (200 kuna, 11 hours, 7 daily), Korcula (100 kuna, 3 hours, 1 daily), Mostar (100 kuna, 3 hours, 2 daily), Orebic (100 kuna, 2.5 hours, 1 daily), Rijeka (400 kuna, 12 hours, 3 daily), Sarajevo (160 kuna, 5 hours, 1 daily), [[Split, Croatia]] (100-150 kuna, 4.5 hours, 14 daily), [[Zadar, Croatia]] (200 kuna, 8 hours, 7 daily). In the high season, there is also a daily bus leaving at 11AM going to the Montenegro cities of Herceg Novi, Bar, Kotor, and Budva.\nWhen coming by bus from Split or cities further north, police officers may board the bus and you may be asked for a valid identity document when crossing the Neum corridor which belongs to Bosnia and Herzegovina. While the bus companies list trip duration of approx. 4 hours, be prepared for a ride of closer to 5.5-6 hours, including Bosnian border checks.\nWhen traveling into Montenegro and the Airport sit on the right hand side (not behind driver) for best views, and vice-versa for the return. Traveling to Bosnia, sit on the left hand side (behind the driver) for best views.\nA departure listing for the international bus station is available at the website of the city bus operator: [2]\nOn all intercity buses you pay a separate fee of \u20ac2 or 10 kuna to the driver for luggage. So keep some change ready.", "title": "Dubrovnik, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75581}, {"creator": "jon", "fields": {"geo.lat": "45.638426438721", "geo.marker": "", "geo.long": "13.802309394454", "_hash": "20922b3c917ee794dd796930201b03d16c307a76"}, "created": "20110409190806", "recipe": "gadabout_private", "modified": "20110409190806", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Trieste%2C%20Italy", "bag": "gadabout_public", "text": "A flight into here is \u00a323 with Ryanair.. good for [[Croatia]]", "title": "Trieste, Italy", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75834}, {"creator": "jon", "fields": {"geo.lat": "52.1333333", "geo.marker": "", "geo.long": "23.6666667", "_hash": "e60d1efa88d5c528974ba09dad4ab2101f9c93eb"}, "created": "20110409161447", "recipe": "gadabout_private", "modified": "20110409183003", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Brest%2C%20Belarus", "bag": "gadabout_public", "text": "Home of the hero fortress\n[img[http://farm2.static.flickr.com/1175/1247120833_5628730b11.jpg]]\nhttp://www.flickr.com/photos/tschaut/1247120833/sizes/m/in/photostream/\n!From [[Minsk, Belarus]]\nYou can get there by train (~20 daily trains running from Minsk) at $5-20USD. It takes 3-4 hrs by train.", "title": "Brest, Belarus", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75495}, {"creator": "jon", "fields": {"geo.lat": "44.3667", "geo.marker": "", "geo.long": "15.4333", "_hash": "28b941b8155dd748772ac63554258681969f77ad"}, "created": "20110404204624", "recipe": "gadabout_private", "modified": "201104091704", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Plitvice%20National%20Park%2C%20Croatia", "bag": "gadabout_public", "text": "About half the buses for [[Zagreb, Croatia]] pass through here to [[Zadar, Croatia]]\n\n[img[http://farm2.static.flickr.com/1364/1449520442_6f2e8ed0d5.jpg]]\nphoto from [[mancha|http://www.flickr.com/photos/mpancha/1449520442/]]", "title": "Plitvice National Park, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75746}, {"creator": "jon", "fields": {"geo.lat": "43.1725913", "geo.marker": "", "geo.long": "16.4432297", "_hash": "8c02a3867bac5636c7843774f71a5c52b0765ea6"}, "created": "20110409165716", "recipe": "gadabout_private", "modified": "20110409165835", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hvar%2C%20Croatia", "bag": "gadabout_public", "text": "Pretty island", "title": "Hvar, Croatia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75622}, {"creator": "jon", "fields": {"geo.lat": "50.4499799", "geo.marker": "", "geo.long": "30.5235008", "_hash": "6b99422c1873c5b262e4c8218bcb84d620bab259"}, "created": "20101228182834", "recipe": "gadabout_private", "modified": "20110409161333", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Kiev%2C%20Ukraine", "bag": "gadabout_public", "text": "Kiev gets warm around April time (5-14\u2103), in May (11-21\u2103), June (14-24\u2103) - [[see bbc weather|http://www.bbc.co.uk/weather/world/city_guides/results.shtml?tt=TT004500]]\nThis appears to coincide with expensive planes.\n\nMidweek as expected is cheaper. Flights can be got to Kiev 6th-8th June 2010  for \u00a3123\nTypically you are looking around \u00a3200 for a flight however.\nTo enter there is [[no need for a visa for British citizens|http://www.worldtravelguide.net/ukraine/passport-visa]].\n\nKiev is a good jumping off point for a trip to [[Chernobyl, Ukraine]]...\n\nIn Kiev there is the Kievo-Pecherskaya Larva to see.\n[img[http://farm1.static.flickr.com/163/383467934_759554e372.jpg]]\nThere are also some rather interesting statues here. Such as the Motherland Kiev\n[img[http://wikitravel.org/upload/en/2/2b/Motherland-Kiev.jpg]]\n\n[img[http://mw2.google.com/mw-panoramio/photos/medium/3281962.jpg]]\n[img[http://mw2.google.com/mw-panoramio/photos/medium/37949261.jpg]]\n\n!Get in\nIt is a 24 hr train ride from [[Berlin, Germany]]\n10hr from [[Moscow, Russia]]\n", "title": "Kiev, Ukraine", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75634}, {"creator": "jon", "fields": {"geo.lat": "53.9", "geo.marker": "", "geo.long": "27.5666667", "_hash": "054de5974a67e9d1dea923be31951ec9792b4197"}, "created": "20110409161110", "recipe": "gadabout_private", "modified": "20110409161110", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Minsk%2C%20Belarus", "bag": "gadabout_public", "text": "!From Kiev\nThere is always a daily train leaving Tsentralnyi Vokzal (Central Station) station (at the eponymous metro stop in Kiev). It leaves Kiev at 18:22 and arrives the next morning at around 06:00. A 4 person berth should cost around 12 USD.\nFrom Minsk, train #86 leaves at 20:51, and arrives in Kiev the next morning at around 09:00. A 4 person berth should cost less than 12 USD.\n", "title": "Minsk, Belarus", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75702}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "8e31530f19f784cd2d8a3fb341e6586e4e9aab93"}, "created": "20110330074246", "recipe": "gadabout_private", "modified": "20110330075459", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Malta", "bag": "gadabout_public", "text": "Malta is a small island off the coast of Italy.\n* See [[Hagar Qim and Mnajdra, Malta]]\n* [[Gozo, Malta]]\n* The best beach is said to be [[Golden Bay Beach, Malta]].\n\nBuses in Malta are awesome ex 1950s British buses\n[img[http://wikitravel.org/upload/en/b/b2/100_1830.JPG]]\n//photo from wikitravel//", "title": "Malta", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75698}, {"creator": "jon", "fields": {"geo.lat": "36.0442999", "geo.marker": "", "geo.long": "14.2512221", "_hash": "bbbf1180e004f94e9cecafc0782d81450f2b2c5c"}, "created": "20110330075435", "recipe": "gadabout_private", "modified": "20110330075435", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Gozo%2C%20Malta", "bag": "gadabout_public", "text": "Has nice beaches such as Ramla Bay:\n[img[http://farm3.static.flickr.com/2179/2400623469_909d2a154a.jpg]]\n//photo [[mogello|http://www.flickr.com/photos/mogello/2400623469/sizes/m/]] //", "title": "Gozo, Malta", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75599}, {"creator": "jon", "fields": {"geo.lat": "28.394857", "geo.marker": "", "geo.long": "84.124008", "_hash": "ed0303df7db1ffe1e970550434ad6a0e09a42362"}, "created": "20110325083955", "recipe": "gadabout_private", "modified": "20110330074739", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Nepal", "bag": "gadabout_public", "text": "Nepal is 5 3/4 hours ahead of GMT. One of only two countries to have a time zone not equivalent to an hour.", "title": "Nepal", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75721}, {"creator": "jon", "fields": {"geo.lat": "35.8274843", "geo.marker": "", "geo.long": "14.4481753", "_hash": "b55bf4bf3e42bbb6530b0da976cffee04c338bfd"}, "created": "20110330074645", "recipe": "gadabout_private", "modified": "20110330074709", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Hagar%20Qim%20and%20Mnajdra%2C%20Malta", "bag": "gadabout_public", "text": "Has ruins that date back to an amazing 3600BC. That's like 5600 years ago! Amaziiing\n\n[img[http://farm6.static.flickr.com/5297/5502174493_169363ec0a.jpg]]\n//thanks to [[emitla|http://www.flickr.com/photos/emitla/5502174493/sizes/m/in/photostream/]]//", "title": "Hagar Qim and Mnajdra, Malta", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75602}, {"creator": "jon", "fields": {"geo.lat": "20.8398489", "geo.marker": "", "geo.long": "-86.8877871", "_hash": "eae84f33c0ee52247d8cfa56ba62e1df127d75ed"}, "created": "20110306180430", "recipe": "gadabout_private", "modified": "20110324095913", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Puerto%20Morelas%2C%20Mexico", "bag": "jon-in-belize_public", "text": "To get here is slightly confusing. I took a bus to Cancun, and after watching the signs got off on the side of the road (not a proper bus station). From here I grabbed a cab and took a 10 minute ride down to the town itself which is off the main highway. I hear you can walk this, but there are crocodiles in the marshes you walk past.\n\nGoing back to [[Cancun, Mexico]] is easy. You just get the taxi back to the highway. A small ticket booth sells tickets to Cancun and the airport which leaves from the same side of the road.\n\nThe town itself is very pretty. It's small and quiet with one single tourist attraction other than the beach - a lighthouse that leans due to being hit by a hurricane.", "title": "Puerto Morelas, Mexico", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120703}, {"creator": "jon", "fields": {"geo.lat": "-8.35", "geo.marker": "", "geo.long": "116.05", "_hash": "df4892707e3eff49797a65d72b28bbef2fa79165"}, "created": "20110322130123", "recipe": "gadabout_private", "modified": "20110322130123", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Gili%20Islands", "bag": "gadabout_public", "text": "http://en.wikipedia.org/wiki/Gili_Islands\nfor that remote island experience", "title": "Gili Islands", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75596}, {"creator": "jon", "fields": {"geo.lat": "38.7216415", "geo.marker": "", "geo.long": "-27.2205771", "_hash": "13341743ec1ca7e30493ce85787b55a2888d3fe9"}, "created": "20110318175204", "recipe": "gadabout_private", "modified": "20110318175204", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Azores", "bag": "gadabout_public", "text": "An island in the middle of the atlantic that is part of Portugal. \n\nhttp://en.wikipedia.org/wiki/Azores", "title": "Azores", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75462}, {"creator": "jon", "fields": {"geo.lat": "18.5", "geo.marker": "", "by-road": "[[Cancun, Mexico]] in 6hrs, [[Playa del Carmen, Mexico]] in 5hrs", "_hash": "2f8df7643eef28f1f71632d1cc4dcd60eb345e57", "geo.long": "-88.333333"}, "created": "20100925174752", "recipe": "gadabout_private", "modified": "20110318090134", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Chetumal%2C%20Mexico", "bag": "jon-in-belize_public", "text": "!Getting to Orange Walk\nOnce you get to Chetumal bus station, like 3 PM take a cab to the ''New market'' where the buses that come to Belize Park and there get on a bus to Orange Walk Town. \nIf it\u2019s about 4 PM get a taxi (you should not pay more than 80.00 Mexican pesos) to the Mexican Border and there wait for a bus to Orange Walk Town.\n\nFrom the Mexican Border to Orange Walk Tow it will take you about 1.5 hours. The bus fare from Chetumal to Orange Walk is $6.00BZ or $3.00USD per person.\n\n!Crossing border\nSee [[Mexico to Belize]]\n\n!Other\nProbably worth booking a hotel in advance due to late arrival\nPossibly http://www.tripadvisor.co.uk/Hotel_Review-g317139-d311388-Reviews-Hotel_Los_Cocos-Chetumal_Yucatan_Peninsula.html\n\nhttp://travellr.com/questions/mexico/2973/where-can-i-find-information-about-the-carnival-in-chetumal-mexico\n\nhttp://wikitravel.org/en/Chetumal\n\nCarnaval Chetumal 2011, to be held from 2 to 9 March with the theme of \"Biodiversity.\" [[see|http://translate.google.com/translate?js=n&prev=_t&hl=en&ie=UTF-8&layout=2&eotf=1&sl=auto&tl=en&u=http%3A%2F%2Fwww.opb.gob.mx%2Findex.php%3Foption%3Dcom_content%26view%3Darticle%26id%3D1778%3Ael-carnaval-2011-del-2-al-9-de-marzo-proximos%26catid%3D101%3Aportada%26Itemid%3D676]]\n\nSee [[Museo de la Cultura Maya]]\n\nThere be beach here but not much else. @benjam\nFrom WikiTravel Chetumal is quite safe. Since there are not a lot of tourists, you can easily get through a week without anyone trying to fool you. Taxi drivers don't usually try to drive you into places more expensive than what you are looking for. English is not widely spoken.\n\nTo [[Orange Walk, Belize]]\nfrom http://www.lonelyplanet.com/thorntree/thread.jspa?threadID=1743214:\nRegular buses depart Chetumal's Nuevo Mercado every half hour beginning at 4:00 am; last departure at 5:45 pm. \nThere are several bus lines on this route, Tillets, Gilharry, Venus and others. \nThe fare is about BZ$5.00 or $6.00 and takes 2hrs?\n2. Premier Lines provides express bus service between Belize City and Chetumal. The buses are a bit better than the Bluebird school buses and some are first-class type; all have air-conditioning though it might not function. There are stops for passengers at Orange Walk and Corozal. http://www.nationaltransportbelize.com/\nDepart Chetumal ADO bus terminal: 10:45 am, 1:45 pm and 4:45 pm.\nDuration & cost: about 1.5 hours & BZ$8.00 to Orangewalk.\n\nFrom [[Caye Caulker, Belize]] via [[Belize City, Belize]]\nSee [[Belize City, Belize]]\n!Border fees\nThe exit fee for departing Belize by land is US$18.75 (usually rounded to $19 by the border guys).\nAlso a small fee to leave Mexico.\nMexican tourist card MFT may be of interest\n\n!Get in\nby road: [[Cancun, Mexico]] in 6hrs, [[Playa del Carmen, Mexico]] by in 5hrs\n\n!Get out\nThe bus station/stop at the New Market is the departure point for buses going to Belize destinations include [[Corozal, Belize]], [[Orange Walk, Belize]], [[Belize City]] (US$1.5, US$2, US$5.5). \nTo get a bus to Belize, you can either go to ADO terminal or New Market (Nueva Mercado), the latter being probably the better choice. Taxi drives usually know where New Market is, and nowadays also from where the buses leave. Bus from New Market to Belize City costs 90 pesos and runs farely often via Orange Walk where a break of 15 minutes is usually scheduled. These buses are older and have no A/C, and they stop often. Once you arrive to New Market, someone will approach you and tell about the schedules. These guys are working for the bus company and not just there to rip you off.\nADO terminal also has a service to Belize but it's less frequent and more expensive.\n\nBoat\nNote: You can also get a boat from Chetumal to at least San Pedro from where you can continue to Caye Caulker or to Belize City. Usually you can either take a morning boat or an afternoon one, and the ride costs 300-400 pesos. Notice, that if you take the afternoon boat, you will most likely need to spend a night in San Pedro as the water taxis leaving from there do not run anymore once you get there.\n\nMost locals and Taxi drivers will know where the New Market is, even if they don't know where that bus station is. There is a service offered from the ADO terminal but it is less frequent than New Market and vastly more expensive.Just beside the border post in Chetumal is an office where you can pay your Tourist Card (IMB) whenever the border post is open, without having to go to a bank.\n\n[[Flores, Guatemala]] is US$25 and buses leave from ''main'' bus station at 6.30am and 2pm.", "title": "Chetumal, Mexico", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120572}, {"creator": "jon", "fields": {"geo.lat": "18.086770482835", "geo.marker": "", "geo.long": "-88.556274836659", "_hash": "ec9bca928875b57775f7c5805370184c2e15bc2d"}, "created": "20100925174822", "recipe": "gadabout_private", "modified": "20110318090126", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Orange%20Walk%2C%20Belize", "bag": "jon-in-belize_public", "text": "Staying in [[Hotel De la Fuente, Orange Walk]]\n\nBook a day trip to [[Lamanai, Belize]] via river which is apparently unmissable.\n\n2 nights is probably enough then head to [[San Ignacio, Belize]] possibly via [[Belize City, Belize]].\n", "title": "Orange Walk, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120680}, {"creator": "jon", "fields": {"geo.lat": "20.2106991", "geo.marker": "", "geo.long": "-87.4612553", "_hash": "dd113bbdab5cd1436950ed29c084b6724c2dc9ae"}, "created": "20110131211752", "recipe": "gadabout_private", "modified": "20110318090058", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Tulum%2C%20Mexico", "bag": "jon-in-belize_public", "text": "Ruins and nice beach\nTulum is mostly known for its ruins, which strike an impressive image next to the sea, but were constructed during a time period of Maya culture that was waning. The site is notable for a small cenote (albeit dry during Jan 2009), beautiful beach below the ruin laden cliffs and some well preserved stellae in only one of its structures. After visiting other ruins in the area such as Coba, Chichen Itza and Ek Balam, Tulum's main claim is the sea-side setting. It is best visited on a clear, bright day or at sunrise. Bring your swimming suit. At the time of writing, one of the best sections was closed to visitors and covered with plastic bottles and other refuse.\nA standard to telephoto zoom lens does well if you must photograph during times of peak tourism. This strategy will keep people out of your shots of the ruins. Tripods are allowed only with a permit that is exclusively available in Mexico City for a $500 fee. A monopod may be a possibility.\n\n!To airport\nDuring the daylight hours you can catch a bus regularly to Tulum, probably on the hour or so. The ride will take about 2 hours.", "title": "Tulum, Mexico", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120757}, {"creator": "jon", "fields": {"geo.lat": "16.8534596", "geo.marker": "", "geo.long": "-88.2813944", "_hash": "1c5625aef259113167cf6c59d3758596e67baf1f"}, "created": "20110308163826", "recipe": "gadabout_private", "modified": "20110318090034", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Hopkins%2C%20Belize", "bag": "jon-in-belize_public", "text": "We stayed here 1 night. The beaches were not as nice as we expected and the town seemed to be full of stoners :)\n\nIt was an interesting experience. More on this later I'm sure as I have a few stories to tell.", "title": "Hopkins, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120618}, {"creator": "jon", "fields": {"geo.lat": "17.222094", "geo.marker": "", "geo.long": "-89.623614", "_hash": "97f28ca22bc4f25d9ddda64b5e6895564d90a5f7"}, "created": "20100925174800", "recipe": "gadabout_private", "modified": "20110318090013", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Tikal%2C%20Guatemala", "bag": "jon-in-belize_public", "text": "<<image \"http://farm4.static.flickr.com/3598/3434118923_8e1e9df945.jpg\" width:500>>\nNo ATMs here.\nhttp://wikitravel.org/en/Tikal#Get_in", "title": "Tikal, Guatemala", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120746}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "140bb7cf38945f2850f4ea4e32a4551b2500f24e"}, "created": "20110203105311", "recipe": "gadabout_private", "modified": "20110318085957", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Bullet%20Tree%20Falls%2C%20Belize", "bag": "jon-in-belize_public", "text": "!Get here\nLook for the Bullet Tree Taxi stand in [[San Ignacio, Belize]], it is much cheaper to come with the village taxis.  They are located right around the corner from the bus stop off the main road.  Walk up to the five way intersection that you see from the bus stop make a left, directly in front of Belize Bank there is a side road where the bullet tree taxis are lined up, they are called collectivos(shared Taxi) and run apx 3to4 dollars per person [[Parrots Nest Lodge, Belize]].  15 if you take a private cab. ", "title": "Bullet Tree Falls, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120535}, {"creator": "jon", "fields": {"geo.marker": "", "geo.lat": "17.7425", "by-boat": "[[Belize City, Belize]]", "by-road": "", "geo.long": "-88.025", "_hash": "002989469df48283200b26faa79b7e2cc9332514", "publish.name": "Caye Caulker, Belize", "by-air": "[[Belize City, Belize]]"}, "created": "20100925174758", "recipe": "gadabout_private", "modified": "20110318085923", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Caye%20Caulker%2C%20Belize", "bag": "jon-in-belize_public", "text": "Eat at Rasta Pasta for massive portions of tacos, burritos etc..\n\n<<image \"http://farm2.static.flickr.com/1032/1350287008_292ebe6fa3.jpg\" width:500>>\nhttp://www.tripadvisor.com/Hotel_Review-g291963-d594426-Reviews-Maxhapan_Cabanas-Caye_Caulker_Belize_Cayes.html could be a good place to stay.\n\n<<image http://3.bp.blogspot.com/_4bUtxLV9a8k/TMYW-SfEgNI/AAAAAAAAAGc/iz1Whkw4ZY4/s400/001_0099.jpg>>\nthe reason why I am going.\n\nHostels:\nhttp://yumashousebelize.blogspot.com/\nhttp://www.barefootbeachbelize.com/\nhttp://www.lazyiguana.net/LazyIguanaLocation.htm (\u00a333 per room per night)\nIgnacio's Beach Cabins - good view, cheap but a bit worn down  ([[trip advisor|http://www.tripadvisor.co.uk/ShowUserReviews-g291963-d316409-r54882508-Ignacio_s_Cabins-Caye_Caulker_Belize_Cayes.html#CHECK_RATES_CONT]] - no beach\n\nTina's Guest House: Now called Yuma's House! Located on backpacker hot spot Caye Caulker you'll find your spot \nright on the beach for as little as $12US per night.\nGet a boat to [[San Pedro, Belize]] for trips back to [[Chetumal, Mexico]]", "title": "Caye Caulker, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120553}, {"creator": "jon", "fields": {"geo.lat": "17.908182342037", "geo.marker": "", "geo.long": "-87.951638041264", "_hash": "b39ee2b25a32378063083a1f3e36b4fb2615d0a4"}, "created": "20100925174728", "recipe": "gadabout_private", "modified": "20110318085918", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/San%20Pedro%2C%20Belize", "bag": "jon-in-belize_public", "text": "La Isla Bonita aka Ambergris Caye\n\nManatee watching is possible here.\n\nNote: You can also get a boat from Chetumal to at least San Pedro from where you can continue to Caye Caulker or to Belize City. Usually you can either take a morning boat or an afternoon one, and the ride costs 300-400 pesos. Notice, that if you take the afternoon boat, you will most likely need to spend a night in San Pedro as the water taxis leaving from there do not run anymore once you get there.\n\nPedro's Inn Backpacker Hostel: Located in beautiful Ambergis Caye, Pedro's offers the most inexpensive \naccommodation in San Pedro at $10 a night per person. Perdro's Inn is designed for people who prefer to spend \ntheir money on important things like partying, scuba diving, sunbathing, kayaking, windsurfing, sailing, swimming, \nsnorkeling, drinking and generally having a great time rather than paying a fortune to sleep. Traveling to San Pedro, \nBelize does not need to be expensive, sometimes the discount travel option is the perfect alternative for a cheap \nvacation.", "title": "San Pedro, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120732}, {"creator": "jon", "fields": {"geo.lat": "18.048778", "geo.marker": "", "geo.long": "-87.9236747", "_hash": "da39a3ee5e6b4b0d3255bfef95601890afd80709"}, "created": "20110306180454", "recipe": "gadabout_private", "modified": "20110318085914", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Ambergris%20Caye%2C%20Belize", "bag": "jon-in-belize_public", "text": "", "title": "Ambergris Caye, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 120528}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "8133f6f5d067f0b8fb7c94e95dec409fbf92cb46"}, "created": "20110206093324", "recipe": "gadabout_private", "modified": "20110318085657", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Papua%20New%20Guinea", "bag": "gadabout_public", "text": "!Sing-sings\nIn some parts of the New Guinea highlands, people engage in colorful local rituals that are called \"sing-sings\".[2] They paint themselves and dress up with feathers, pearls and animal skins to represent birds, trees or mountain spirits. Sometimes an important event, such as a legendary battle, would be enacted at such a musical festival.\n\n[img[http://upload.wikimedia.org/wikipedia/commons/thumb/0/03/SingSing_Wabag_Enga_PNG.jpg/800px-SingSing_Wabag_Enga_PNG.jpg]]\nSee  [[Goroka, Papua New Guinea]]", "title": "Papua New Guinea", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["sing-sings"], "revision": 75735}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "90d868831b885ec5817d61c58229b0989adc13d1"}, "created": "20110308163738", "recipe": "gadabout_private", "modified": "20110308163738", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Hostel%20Playa%2C%20Playa%20del%20Carmen", "bag": "jon-in-belize_public", "text": "I stayed here on my first night. It was a nice little hostel, however I wouldn't recommend it if you want to get some sleep. We had a private room and it was loud till about 1am (which still is not too late). It had a nice chilled out vibe.\n\nStaying in Hostel Playa\nhttp://www.hostelplaya.com/\n\n!Map to get there\n[img[hostelplaya.jpg]]\n1 - Bus Station\n2 - Bank\n3 - Police - Post Office\n4 - Internet\n5 - Laundry\n6 - Mall - Cinema - Restaurant\n7 - Supermarket\n8 - Mini Vans - Tulum - Xcaret - Cenotes\n9 - Beach Bars - Disco", "title": "Hostel Playa, Playa del Carmen", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120619}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "beeeb73804a1d5499dc584be70894bf24a079c92"}, "created": "20110308163517", "recipe": "gadabout_private", "modified": "20110308163647", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Mexico%20to%20Belize", "bag": "jon-in-belize_public", "text": "!My experience:\n* Leaving Mexico for Belize\npaid 200MXP to leave (suspected scam), nothing to enter Belize.\n\n* Entering Mexico from Belize\nWas told I had to pay something at bank before leaving. Left via plane without paying it. Leaving Belize I had to pay BZD 7.50 (by sea) it's BZD 37.50 by land.\n\n!My pre trip notes:\nFrom: http://belizebus.wordpress.com/2009/03/22/crossing-the-border-from-chetumal-to-corozal/\nVisitors entering Mexico by air should be issued (on the plane) with a form called Forma Migratoria M\u00faltiple or FMM. Fill it out on the plane. If you don\u2019t get a form on the plane, ask some questions. Visitors entering Mexico at a land border will receive a form and complete it at the border.\n\nThe FMM allows a maximum stay of 180 days, but it depends on the type of travel, i.e. tourist, transit, work, business, student, etc. When you go through immigration at the airport, the immigration officer will write in the actual number of days you can stay depending on which box was checked in the Type of Travel (Tipo de viaje) section (on the left side of the form). If the Tourist (Turismo) box is checked, you should get 180 days. If the Transit (Tr\u00e1nsito) box is checked, you might get only 30 days. Immigration will keep the left-side part of the FMM form, and you keep the right-side part with your passport.\n\n\nThere is usually a fee for the FMM. When arriving by air, the fee is usually included in the cost of the airline ticket, so there is nothing to pay on arrival in Mexico and nothing to pay later at a bank. When arriving at a land border, the fee is not paid at the border, but paid at a bank before departing Mexico. The immigration officer will attach another piece of paper showing the amount to be paid (currently MX$262). The bank will give a receipt which should be kept with the FMM. There is one situation where the fee is not paid \u2013 that\u2019s if the visit is 7 days or less and the visitor returns to the country of origin. The fee is always paid if the visitor is transiting through Mexico between two other countries; it doesn\u2019t matter how long the visitor stays in Mexico.\n\nWhen you leave Mexico by bus, the bus will stop at a small immigration booth just before crossing the bridge to Belize. Passengers get off, without luggage, and present their passports with FMM and receipt to the immigration officer. Whenever I have crossed, he has always asked (in Spanish) for MX$100 (that\u2019s pesos) or US$10. I have heard that since January 2010, he has been asking for US$20 from all bus passengers.\n\nBeware! This is a scam. Your passport might get stamped, but there is nothing to pay if the FMM fee has already been paid. THERE IS NO EXIT FEE.\nPassengers re-board the bus, proceed across the bridge over the Hondo River and stop at Belize Customs & Immigration. Passengers (with their luggage this time) go into the immigration building. For citizens of Canada, USA and many other countries, there are no visas or fees required when entering Belize. You will get a stamp in your passport allowing a stay of 30 days. Citizens of some countries require a visa which must be obtained before entering Belize. After completing immigration and customs, re-board the bus.", "title": "Mexico to Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120674}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "c869a1bfece7b3f04cb4bd36d27113c47ed33795"}, "created": "20110308163459", "recipe": "gadabout_private", "modified": "20110308163459", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Checklist", "bag": "jon-in-belize_public", "text": "* --getting to the airport--\n* --beach trip--\n* --contact lenses--\n* --1st night accommodation (sent request to Hostel Playa)--\n* --Antimalaria tablets (4 additional weeks needed)--\n* --[[Money]]--\n* --Hand wash detergent--\n* --Towel--\n* --Dehydration tabels--\n* --Hand sanitiser--\n* --DEET repellant--\n* --thick socks--\n* --[[dry bag?|http://www.sportsdirect.com/exped-waterproof-drybag-710017?src=google]]--", "title": "Checklist", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120556}, {"creator": "jon", "fields": {"geo.lat": "17.1722222", "geo.marker": "", "geo.long": "-89.1127778", "_hash": "7cf2eb7a9f69e2af85863266e7b3bd714ad7559d"}, "created": "20110308163237", "recipe": "gadabout_private", "modified": "20110308163237", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Parrots%20Nest%20Lodge%2C%20Belize", "bag": "jon-in-belize_public", "text": "I really enjoyed my stay here and would recommend it: \nHere you can stay in a treehouse http://www.parrot-nest.com/\nIt is in [[Bullet Tree Falls, Belize]].\n\nWe went tubing one afternoon (free to guests) which was great fun.\n", "title": "Parrots Nest Lodge, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120681}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "a4f8094b1514fac8fbceca61a0c41893ecddf5be"}, "created": "20110308163220", "recipe": "gadabout_private", "modified": "20110308163220", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Hotel%20De%20la%20Fuente%2C%20Orange%20Walk", "bag": "jon-in-belize_public", "text": "I really enjoyed my stay here and would recommend it: \nhttp://www.hoteldelafuente.com/\n\n!Getting here\nPlease check ADO Mexican bus schedules at http://ticketbus.com.mx and there you may be able to get the times the buses run from Playa del Carmen to Chetumal Quintana Roo.  Once you get to Chetumal bus station,  take a cab to New market (about $40MX) where the buses that come to Belize Park and there get on a bus to Orange Walk Town.\n\nFrom the Mexican Border to Orange Walk Tow it will take you about 1.5 hours.  The bus fare from Chetumal to Orange Walk is $6.00BZ or $3.00USD per person.\n ", "title": "Hotel De la Fuente, Orange Walk", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120620}, {"creator": "jon", "fields": {"geo.lat": "", "geo.marker": "", "geo.long": "", "_hash": "ba11b30c8f6bf2545f6e0867c0e471f8cec6adc1"}, "created": "20110308163008", "recipe": "gadabout_private", "modified": "20110308163008", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Money", "bag": "jon-in-belize_public", "text": "This information was true as of 2011:\n\n!!Border crossings\n!!Mexico - Belize: \nWhen you cross the border to Belize, you have to report to a small immigration booth on the Mexican side of the border. They will ask you (in Spanish) for MXP200. I'm pretty sure this is a scam but there's not much you can do about it.\n\nWhen I entered Mexico I was told to pay a fee at a bank. They gave me a photocopy of which could have been someone's personal bank details. I didn't pay it and left by air without doing so without any problems.\n\n!!!Belize - Guatemala\nBZD37.50 departure tax when leaving by land.\n\n!!!Guatemala - Belize\nWhen you enter Guatemala 20 quetzals\nWhen leaving no fee.\n\n!!!Belize- Mexico\nBZD37.50 departure tax\nWhen leaving my sea it was only 7.50 ([[Ambergris Caye, Belize]] to [[Chetumal, Mexico]])\n\n!!Excursions\n* [[Lamanai, Belize]] from [[Orange Walk, Belize]] BZD90\n* Tikal from [[San Ignacio, Belize]] transfer tagging along with tour USD25\n* Tikal to border transfer by taxi USD25\n* [[Actun Tunichil Muknal, Belize]] BZD160 for day tour\n\n\n!Useful Links\nhttp://www.xe.com/ucc/convert.cgi?Amount=80&From=BZD&To=GBP&image.x=20&image.y=13&image=Submit\n\n\n", "title": "Money", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120675}, {"creator": "jon", "fields": {"geo.lat": "17.2513889", "geo.marker": "", "geo.long": "-88.7669444", "_hash": "efd8d98cb61ba2a8c178d39a27ea09f789d5aa9e"}, "created": "20110306180514", "recipe": "gadabout_private", "modified": "20110306180514", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Belmopan%2C%20Belize", "bag": "jon-in-belize_public", "text": "We had the best salbutes here by the bus station.", "title": "Belmopan, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120533}, {"creator": "jon", "fields": {"geo.lat": "50.941336083712", "geo.marker": "beenMarker", "geo.long": "6.9570797423142", "_hash": "703d3777ec171c7828cdf7d897b2bef4025d7984"}, "created": "20110103151211", "recipe": "gadabout_private", "modified": "20110206121810", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Cologne%2C%20Germany", "bag": "gadabout_public", "text": "I recommend visiting 11th November - for Cologne Carnival festivities. Lots of K\u00f6lsch to drink!", "title": "Cologne, Germany", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75550}, {"creator": "jon", "fields": {"geo.lat": "50.847298516017", "geo.marker": "beenMarker", "geo.long": "4.3758505325175", "_hash": "45ec8a112d7e9ce6df4abe2217d13bddcc789c7e"}, "created": "20110103151038", "recipe": "gadabout_private", "modified": "20110206121759", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Brussels%2C%20Belgium", "bag": "gadabout_public", "text": "It's worth going here simply for the [[Delirium Cafe|http://www.deliriumcafe.be/]]", "title": "Brussels, Belgium", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75498}, {"creator": "jon", "fields": {"geo.lat": "18.392320758699", "geo.marker": "marker.png", "geo.long": "-88.39258702368", "_hash": "d7e6e5a65c0c66f81eff97d66e4dbc414371273f"}, "created": "20100925174719", "recipe": "gadabout_private", "modified": "20110206120400", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Corozal%2C%20Belize", "bag": "jon-in-belize_public", "text": "[[Sleep?|http://www.tripadvisor.com/Hotel_Review-g291973-d1045344-Reviews-The_Sea_Breeze_Hotel-Corozal_Town_Corozal.html]]\n\nCorozal Town in Northern Belize lies on the Caribbean Sea, 9 miles from the Mexican border. It has a population of approximately 8,100, and is the capital of the district of Corozal.\nVery regular buses are available between Corozal Town and Chetumal in Mexico, running about every 20 or 30 minutes during thhe day. The journey lasts about 1 hour and costs around US$1.25.\n\n!Cerros Ruins\nVisit the Cerros Ruins across Corozal Bay. The easiest way to reach the ruins is by boat, usually hireable at the main dock east of downtown, but the site can also be reached by road. Follow the Cerros Ruins signs on the road to Copper Bank and Sarteneja, but be careful, it is a ~10-mile dirt road which can be very washed out following bad weather, especially hurricanes. The direction to Cerros may also not be terribly well marked, but if you take the left path at major forks in the road, you should find it fairly easily. Again, hiring a boat in Corozal will definitely be quicker and easier, but taking the road will give you a chance to ride one of the hand-cranked ferries seen throughout Belize (no charge for the ferry, but feel free to tip or buy juice or snacks the ferry pilots have for sale).\n\nhttp://www.copperbankinn.com/About.html", "title": "Corozal, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120590}, {"creator": "jon", "fields": {"geo.lat": "20.6829", "geo.marker": "", "geo.long": "-88.56865", "_hash": "c3a300b3c0d60280fce51a66ea01d68ade750d3e"}, "created": "20100925174819", "recipe": "gadabout_private", "modified": "20110206120227", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Chichen%20Itza", "bag": "jon-in-belize_public", "text": "Chich\u00e9n Itz\u00e1 Archaeological Site\u2014 The large Mayan archaeological site of Chichen Itza is nowadays one of the World's New Seven Wonders, often visited on a day trip from Cancun, but is rather distant and only a small portion of the site and attractions can be seen this way. If you find the ancient Maya of interest, spend a night at one of the hotels at Chichen so you can avoid having a rushed incomplete visit. You can take a public bus or a private vehicle, about 2 1/2 hours from [[Cancun, Mexico]] by car. Also, close to the site is a cenote, which is a fresh water sinkhole, where you can swim. The Kukulc\u00e1n Pyramid is one of the most impressive Mayan structures. It is now closed off to climbing to preserve it from erosion.", "title": "Chichen Itza", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120575}, {"creator": "jon", "fields": {"geo.lat": "-6.087728", "geo.long": "145.386597", "_hash": "8b41de81e53ce93aa71e62eb0b1403ea1ca1a455"}, "created": "20110206093101", "recipe": "gadabout_private", "modified": "20110206093228", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Goroka%2C%20Papua%20New%20Guinea", "bag": "gadabout_public", "text": "Home of the Goroka festival.\n<html>\n<iframe title=\"YouTube video player\" width=\"480\" height=\"390\" src=\"http://www.youtube.com/embed/42oHjlEnuPM\" frameborder=\"0\" allowfullscreen></iframe>\n</html>\n\nIn May Goroka hosts the PNG Coffee Festival.\nThe renowned Goroka Show is held every year for three days on independence weekend (September 14, 15 and 16th). The Goroka Show is the oldest show in Papua New Guinea, over 50 years of \"keeping the spirit alive\".", "title": "Goroka, Papua New Guinea", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75598}, {"creator": "jon", "fields": {"geo.lat": "17.495112635402", "geo.long": "-88.201751586808", "_hash": "69fa10c01338a5fa80198bab2fba5689029d01c0"}, "created": "20100925174707", "recipe": "gadabout_private", "modified": "20110203105311", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Belize%20City%2C%20Belize", "bag": "jon-in-belize_public", "text": "Described as dodgy. Most people miss it out completely but apparently despite being dodgy it is interesting. Don't flash valuables / look like a tourist / walk alone / walk without advice. If people are being friendly here, don't trust them :)\n\n!To [[San Ignacio, Belize]]\nThere is a bus every half hour heading west, if you are lucky you can catch an express, there are quite a few throughout the day, busses window plate will read BENQUE, get off in San Ignacio, a little town over a low lying wooden bridge that crosses the river, the bus will go left past the market and stop at the bus stop which is in the heart of town. \n\n!Get in/out\nfrom [[Orange Walk, Belize]] it is 2hrs by bus.\nfrom [[Chetumal, Mexico]] 4hr by bus.\nfrom [[Caye Caulker, Belize]] US$9 by boat (30-45 minutes)\n\nAlmost every day, buses leave Belize City every hour for towns to the north and west. Towns to the south, like [[Dangriga, Belize]] and [[Placencia, Belize]], are limited to a few runs each day. The buses are comfortable and safe... and the views are spectacular.", "title": "Belize City, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120532}, {"creator": "jon", "fields": {"geo.lat": "21.160556", "geo.long": "-86.8475", "_hash": "399d65d267c9b31c1f72a9ef5e2d359fa0f6202b"}, "created": "20100925174756", "recipe": "gadabout_private", "modified": "20110131213115", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Cancun%2C%20Mexico", "bag": "jon-in-belize_public", "text": "http://wikitravel.org/en/Cancun\n\nHead to [[Chetumal, Mexico]] (6 hour bus journey)\nCancun Airport you can grab the 11.59pm bus to Chetumal. It arrives at 5am and you can head on out of there towards Belize with the 5am or 530am bus to Belize City both leaving at the ADO terminal in Chetumal!\nOnce in Belize City you can walk or take a cab to the watertaxi terminal and enjoy the 45min ride to CC. \nAll very easy! :) If you need further help, let me know! \n\n!To  Playa del Carmen\nFrom Cancun airport to [[Playa del Carmen, Mexico]], there is an approximately hourly ADO Riviera airport shuttle bus (check the ticketbus site for departure times and fares). Tickets are sold at a counter in the airport just after exiting customs, or from the ticket seller where the bus is parked. To get to the bus, go out of the airport terminal, turn right and keep going to the other end of the terminal. The bus trip is about 1 hour and costs MX$106 (as at June 2010).", "title": "Cancun, Mexico", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120540}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "1bad563693e17e18206beb3168bec7ff428cf6f1"}, "created": "20110108174121", "recipe": "gadabout_private", "modified": "20110108174121", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Barton%20Creek%20Outpost%2C%20Belize", "bag": "jon-in-belize_public", "text": "http://www.bartoncreekoutpost.com/\n\nBarton Creek Outpost is the perfect base for your backpacking adventures in Belize. We offer several free hikes on \nthe property as well as a stroll through the neighboring Mennonite community. Maya ruins abound in the area and \nthe nearby Mountain Pine Ridge is home to some of the most amazing waterfalls and swimming holes you\u2019ll ever see, \na great way to spend a hot Belizean day. We are surrounded by lush tropical jungle and the hills are littered with \ncaves including Barton Creek Cave, a mile long canoe trip deep inside what the Maya believed to be the \u201cGateway to \nthe Underworld\u201d.   The Outpost works closely with the best local tour operators including Mountain Equestrian Trails \n(MET) recognized in the famous book \u201c1000 Places To See Before You Die\u201d. Because we primarily cater to \nbackpacking campers we specialize in inexpensive, off the beaten trail, tours. If you are coming to the San Ignacio \narea contact us about area tours, we can usually get them cheaper than you can. Your stay at Barton Creek Outpost \ncan be a relaxing visit filled with hammock time and good books or the adventure of a lifetime.\n\n!Trips\n2 Days & 3 Nights w/ Barton Creek Cave OR waterfall USD99\nhttp://www.bartoncreekoutpost.com/Camping.html", "title": "Barton Creek Outpost, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120529}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "7a6c423997986cfbdda0a56a0160a427cc68af21"}, "created": "20110108111423", "recipe": "gadabout_private", "modified": "201101081142", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Actun%20Tunichil%20Muknal%2C%20Belize", "bag": "jon-in-belize_public", "text": "[[wikitravel|http://wikitravel.org/en/Actun_Tunichil_Muknal]] / [[wikipedia|http://en.wikipedia.org/wiki/Actun_Tunichil_Muknal]\n\nTo get here its 1hr from san ignacio. The whole trip takes 10hrs bring thick socks and change of clothes.\n\n<html>\n<object width=\"480\" height=\"385\"><param name=\"movie\" value=\"http://www.youtube.com/v/os43W1iMI-k?fs=1&amp;hl=en_US&amp;color1=0x234900&amp;color2=0x4e9e00\"></param><param name=\"allowFullScreen\" value=\"true\"></param><param name=\"allowscriptaccess\" value=\"always\"></param><embed src=\"http://www.youtube.com/v/os43W1iMI-k?fs=1&amp;hl=en_US&amp;color1=0x234900&amp;color2=0x4e9e00\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" allowfullscreen=\"true\" width=\"480\" height=\"385\"></embed></object>\n</html>", "title": "Actun Tunichil Muknal, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120526}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "a3fe2c886b03be5de4f555168fa6119d408152e8"}, "created": "20110108112928", "recipe": "gadabout_private", "modified": "20110108112928", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Search", "bag": "jon-in-belize_public", "text": "Can't find something? Give it a search..\n<<search>>", "title": "Search", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch"], "revision": 120733}, {"creator": "jon", "fields": {"geo.lat": "17", "geo.long": "-89.7", "_hash": "fb95dcd0daae78bc8fc0e4b36e0a41bae8b616b4"}, "created": "20100925174807", "recipe": "gadabout_private", "modified": "20110108111255", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/El%20Ramate%2C%20Guatemala", "bag": "jon-in-belize_public", "text": "http://wikitravel.org/en/El_Remate\nIn Guatemala.\nCross the border (20 mins from San Ignacio). Guesthouse will take you there.\n[[Stay here?|http://www.hotelgringoperdido.com/attractions.html]]\n\n!Getting there from San Ignacio\nhttp://www.lacasadedondavid.com/there.html\nYou can take the 9 mile ride from San Ignacio to the Belize-Guatemala border by taxi or local bus. Cross the border and get a local bus, collective minibus or taxi. Local buses run almost every hour. If you should be at the border at the time the Linea Dorada/San Juan buses are returning from Belize City or Chetumal, they can get you to the hotel entrance for about $6.\n\nBuses at Puente Ixlu (El Cruce)\n!Getting out to Belize City/Chetamul\nTo and From Chetumal, Mexico, Belize City and [[San Ignacio, Belize]] - you can take the Mundo Maya/Linea Dorada or San Juan buses. From the Chetumal bus terminal it leaves at 6:00 am daily and costs about $30.  From Belize City the bus leaves at 9:30 am, cost $25. This is your best deal as this normally comfortable bus reserves seating and you can arrange for the driver to bring you right to the hotel entrance in El Remate. \n\n!Ben's tips\nDon't believe taxi driver/money changers.\nWalk past taxis to bus stop and get a bus here.\nnice little village on edge of lake.\norganise taxi to [[Tikal, Guatemala]].\n\n!Visit Tikal\nBuses leave El Remate at 5.30am for [[Tikal]] and returning 2pm. Accommodations can make reservations US$4\nGringo Perdido Ecological Inn  / Mirador del Duende\n\n<<image http://farm4.static.flickr.com/3635/3347059569_de9669f60e.jpg>>\nThe lake? image by souweine\n", "title": "El Ramate, Guatemala", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120613}, {"creator": "jon", "fields": {"geo.lat": "50.6389011", "geo.long": "-2.0572322", "_hash": "bc107de5b97279fe5f5fbb08f9b4145baad0a78f"}, "created": "20110107183851", "recipe": "gadabout_private", "modified": "20110107183851", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Corfe%20Castle%2C%20Dorset%2C%20England", "bag": "gadabout_public", "text": "Looks pretty..\n\n[img[http://take-a-view.co.uk/images/2010winners/AC_0005864_Spencer.jpg]]", "title": "Corfe Castle, Dorset, England", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75554}, {"creator": "jon", "fields": {"_hash": "378e7c4224d9b9ed97947eefce1fab45a0a71696", "tiddlyspaceinit_version": "0.6"}, "created": "20110106131931", "recipe": "gadabout_private", "modified": "20110106131931", "uri": "http://historyplugin.tiddlyspace.com/bags/historyplugin_public/tiddlers/historypluginSetupFlag", "bag": "historyplugin_public", "text": "@@Please do not modify this tiddler; it was created automatically upon space creation.@@", "title": "historypluginSetupFlag", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludePublisher", "excludeSearch"], "revision": 84863}, {"creator": "jon", "fields": {"geo.lat": "57.4790124", "geo.long": "-4.225739", "_hash": "91e106f3e7b2d0803d2d14bab251e3d0e60f741b"}, "created": "20110103152837", "recipe": "gadabout_private", "modified": "20110103152837", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Inverness%2C%20Scotland", "bag": "gadabout_public", "text": "Easyjet flies here for around \u00a350\nFrom here it's 2.5 hrs to the isle of skye.", "title": "Inverness, Scotland", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75623}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "d4a08ae1ed62194f45ec4e200c0633c6718cdec9"}, "created": "20110103145655", "recipe": "gadabout_private", "modified": "20110103150109", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Mongolia", "bag": "gadabout_public", "text": "Mongolia interests me greatly. What other countries are there where maps are useless and gps coordinates are essential?\n\nAlthough there is not much to see there, the inaccessibility of the place is what interests me.\n[[Ulaanbaatar, Mongolia]] is the most accessible of places but the remote [[Tavan Bogd National Park]] and [[Lake Khovsgol]] sound the more interesting.\n\nThe Gobi Desert most accessible from [[Dalanzadgad, Mongolia]] sounds especially remote.\n\nI'm likely to visit this country one day, possibly via the [[Trans Siberian Railway]]", "title": "Mongolia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["country"], "revision": 75706}, {"creator": "jon", "fields": {"geo.lat": "43.5717042", "geo.long": "104.4259502", "_hash": "caaabf41d11f928ac6535229949d1edfa244f01e"}, "created": "20110103150044", "recipe": "gadabout_private", "modified": "20110103150044", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Dalanzadgad%2C%20Mongolia", "bag": "gadabout_public", "text": "Adventurous types can drive here from [[Ulaanbaatar, Mongolia]]. The Flaming Cliffs is on route where hundreds of dinosaur fossils were discovered in the 1920s. The area is known as Bayanzag by locals.", "title": "Dalanzadgad, Mongolia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75575}, {"creator": "jon", "fields": {"geo.lat": "47.9160182", "geo.long": "106.918296", "_hash": "7e40d067d1c58660725e2e89089e0ede69dced35"}, "created": "20110103145512", "recipe": "gadabout_private", "modified": "20110103145841", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Ulaanbaatar%2C%20Mongolia", "bag": "gadabout_public", "text": "See [[Mongolia]]\n\nApparently this is a good jumping off point for:\n\n* Dornod\nTaking a jeep to this grassland area with lots of gazelles. Alternatively buses travel here six times a week.\n\n* Seeing dinosaur fossils at their National History Museum.\n", "title": "Ulaanbaatar, Mongolia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75838}, {"creator": "jon", "fields": {"geo.lat": "16.537969729299", "geo.long": "-88.406185302688", "_hash": "88256cd2c2bacc5afc2781f2bbb743395d9936ba"}, "created": "20100925174746", "recipe": "gadabout_private", "modified": "20110103094454", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Placencia%2C%20Belize", "bag": "jon-in-belize_public", "text": "palm lined beaches\nwonderful laid back ambience of the cayes.\nUseful for getting to [[Cockscomb Basin Forest Reserve]]\nAlso a good spot to find whale sharks in the [[Gladden Spit Marine Park]].\n", "title": "Placencia, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120687}, {"creator": "jon", "fields": {"geo.lat": "51.2698031", "geo.long": "30.2194864", "_hash": "2eb8832356f8964401ca1f55c30a67ef67e46aad"}, "created": "20101228182717", "recipe": "gadabout_private", "modified": "20101228182908", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Chernobyl%2C%20Ukraine", "bag": "gadabout_public", "text": "Tours seem to be between the price of \u00a3[[100|http://tour2chernobyl.com/payment.html]]-[[126|http://kiev-hostels.com/en/tours/chernobyl-tour235.html]]\nThe more expensive one is handily run by a youth hostel.\n\n[img[http://kiev-hostels.com/photo%20chernobyl.files/image006.jpg]]\n\nSee [[Kiev, Ukraine]]\n", "title": "Chernobyl, Ukraine", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75546}, {"creator": "jon", "fields": {"geo.lat": "17.141838466657", "geo.long": "-88.686281793099", "_hash": "d16fc9aba8df77010064b7fadd29bbfeb3f80186"}, "created": "20101227235051", "recipe": "gadabout_private", "modified": "20101227235103", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Caves%20Branch%2C%20Belize", "bag": "jon-in-belize_public", "text": "Passing through jungle and citrus orchard as it skirts the northern edges of the Maya Mountain range, Belize\u2019s Hummingbird Highway offers a near constant procession of postcard-perfect vistas. There are also plenty of reasons to stop along the way, chief among these being a visit to Cave\u2019s Branch for cave tubing and St Herman\u2019s Cave, where, with a guide, you can explore its huge caverns and classic Maya ceremonial chambers containing calcified skeletons and artifacts. There\u2019s also the Blue Hole, a 25ft-deep sapphire-blue swimming hole inside a 328ft-wide cenote that was formed when the roof caved in on one of the Sibun River\u2019s underground tributaries.\n\nAlso see http://www.belize.com/articles/belize-caves-branch.html", "title": "Caves Branch, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120542}, {"creator": "jon", "fields": {"geo.lat": "48.809550016588", "geo.long": "14.316452417485", "_hash": "eadabcef10ef264624cc3c6e8868d0af9a428aa7"}, "created": "20101212113313", "recipe": "gadabout_private", "modified": "20101212114631", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Cesky%20Krumlov%2C%20Czech%20Republic", "bag": "gadabout_public", "text": "This was the highlight of our Europe trip.\n\nCesky Krumlov is a lovely little town with a castle next to a river.\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/4762812977/\" title=\"cesky krumlov by rakugo, on Flickr\"><img src=\"http://farm5.static.flickr.com/4114/4762812977_9c838bccf1.jpg\" width=\"500\" height=\"281\" alt=\"cesky krumlov\" /></a>\n</html>\n\nThe town itself is very medieval, and just how I imagined a Czech village to be. It's small but has enough to keep you busy whether it's drinking one of the cheap beers or having a lovely meal next to the river. There is a castle with a bear pit to explore and fantastic views over the town.\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/4763451362/\" title=\"Bear in need of a hug by rakugo, on Flickr\"><img src=\"http://farm5.static.flickr.com/4118/4763451362_e271243d2a.jpg\" width=\"500\" height=\"281\" alt=\"Bear in need of a hug\" /></a>\n</html>\n\nThe highlight of the trip however was not the town but the river, or more precisely the thing you could do on the river. We hired a boat with 2 friends we met in the hostel and bought several cans of beer and spent 4 hours navigating down it, stopping at bars on the way and trying to avoid trees (we didn't succeed on the latter). The weather was hot, the views were brilliant, the people we met were mostly drunk. It was fun. Very fun. I'd previously been to [[Vang Vieng, Laos]] and this brought back good memories and was easily the closest thing I've found to the Vang Vieng experience only instead of tubes.. canoes. If you've done that. Come here. You will love it.\n\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/4762813165/\" title=\"Beers on the river by rakugo, on Flickr\"><img src=\"http://farm5.static.flickr.com/4101/4762813165_f3a9d9e235.jpg\" width=\"500\" height=\"281\" alt=\"Beers on the river\" /></a>\n</html>\nWe stayed at [[Krumlov House|http://www.krumlovhostel.com/]] and arrived via minibus from Linz train station (in Austria) which was about 2 hours drive. There is a church on a hill a short walk from the city centre which is recommended for pretty sunsets.\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/4762816331/\" title=\"Sunset Cesky Krumlov by rakugo, on Flickr\"><img src=\"http://farm5.static.flickr.com/4116/4762816331_02971e8608.jpg\" width=\"500\" height=\"281\" alt=\"Sunset Cesky Krumlov\" /></a>\n</html>", "title": "Cesky Krumlov, Czech Republic", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75543}, {"creator": "jon", "fields": {"geo.lat": "18.9333333", "geo.long": "102.45", "_hash": "22cfdfb36e9fecff4479aa138650e04dc697308b"}, "created": "20101212114247", "recipe": "gadabout_private", "modified": "20101212114247", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Vang%20Vieng%2C%20Laos", "bag": "gadabout_public", "text": "Vang Vieng is a place where you can go and experience groundhog day.\nGet up late, and eat breakfast whilst watching episodes of Friends on repeat (this continues all day and takes some adjusting too).\nGet in a taxi and get dropped off at the top of a river with a tube.\nGo down the river in said tube stopping and drinking at the many bars on the way down. \nMake sure you try out one of the swings at the bar to throw yourself into the browny water.\nGet to the last bar where they happen to sell several \"happy\" things.\nIf you don't have one of the happy things you get off at the exit point (which is not clearly marked). You only know where to get off as there is someone from the previous day there who knows the drill. If you do have a happy thing, be careful not to go several miles too far down the river (note the route is not well marked nor lit)\nFrom the exit point, go to a bar and ask for the menu.\nGet the \"happy menu\" instead.\nEither ask for the food menu which you meant, or continue to have happy things.\nSleep and repeat the process.\n\nBreaking out of this process is very difficult as I found (as usually you get up around 11am which means you miss the bus to [[Luang Prabang, Laos]] or [[Vientaine, Laos]]. I had to leave behind my 2 travel buddies and their hangovers to make sure I made it. But it was well worth it. [[Luang Prabang|Luang Prabang, Laos]] in particular I thought was wonderful...", "title": "Vang Vieng, Laos", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75843}, {"creator": "jon", "fields": {"geo.lat": "4.5346718849892", "geo.long": "101.4342566612", "_hash": "474a49b3da523d3cd2a173b104e4f488fb4baf2d"}, "created": "20101120195925", "recipe": "gadabout_private", "modified": "20101212111812", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Cameron%20Highlands%2C%20Malaysia", "bag": "gadabout_public", "text": "!Trek 2\nA land of tea plantations.\n[img[http://farm3.static.flickr.com/2742/4362499624_c0146f0c6e.jpg]]\n\nI will however remember the Cameron Highlands and Tanah Rata where I stayed for one incident - [[The Jungle Trek 2 incident]] that I shared with my good friend Dan.", "title": "Cameron Highlands, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75526}, {"creator": "jon", "fields": {"geo.lat": "1.2868907731942", "geo.long": "103.85952614554", "_hash": "da39a3ee5e6b4b0d3255bfef95601890afd80709"}, "created": "20101120204251", "recipe": "gadabout_private", "modified": "20101212111753", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Singapore", "bag": "gadabout_public", "text": "", "title": "Singapore", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75808}, {"creator": "jon", "fields": {"geo.lat": "3.0520681501602", "geo.long": "101.57707892684", "_hash": "a18498c2d29ab521b2c2dd22986baa75c83e748d"}, "created": "20101120195318", "recipe": "gadabout_private", "modified": "20101212111746", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Kuala%20Lumpur%2C%20Malaysia", "bag": "gadabout_public", "text": "I flew to KL in February 2010 as part of my now [[annual activity of being away from home to celebrate my birthday]]. When I flew there it was my longest flight alone, and also was the start of [[a trip|2010 South East Asia trip]] which would involve me travelling alone for three weeks - travelling alone is not an activity I usually do.\n\nThere was nothing special about KL. It's one of those Asian cities which is modernising rapidly. It had cheap massages, some interesting markets, some interesting animals such as frogs you could eat but I will remember it for this:\n<html>\n<iframe src=\"http://player.vimeo.com/video/10830018\" width=\"400\" height=\"300\" frameborder=\"0\"></iframe><p><a href=\"http://vimeo.com/10830018\">Fish bites - I embarrass myself as cannibalistic fish eat my feet</a> from <a href=\"http://vimeo.com/jonrobson\">Jon Robson</a> on <a href=\"http://vimeo.com\">Vimeo</a>.</p>\n</html>\n\nI had two visits on this trip. On the latter visit I flew in on my birthday from [[Langkawi, Malaysia]]. I went up the sky bar.\n<html>\n<a href=\"http://www.flickr.com/photos/stuckincustoms/2349026792/\" title=\"The Sky Bar in Kuala Lumpur with a view of Petronas by Stuck in Customs, on Flickr\"><img src=\"http://farm4.static.flickr.com/3270/2349026792_3790c5b089.jpg\" width=\"500\" height=\"385\" alt=\"The Sky Bar in Kuala Lumpur with a view of Petronas\" /></a>\n</html>\nIt was a pretty nice view although drinks were very expensive. I was more attracted to the swimming pool which you can actually use in the hotel it belongs to during the day (the [[Traders Hotel|http://www.shangri-la.com/en/property/kualalumpur/traders]]) which was much cheaper and more fun to do.\n\n", "title": "Kuala Lumpur, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75654}, {"creator": "jon", "fields": {"geo.lat": "1.5561912241032", "geo.long": "110.33345735178", "_hash": "3d1d932b7f9cac6a74a759e061befdef1c5428b3"}, "created": "20101120214148", "recipe": "gadabout_private", "modified": "20101212111715", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Kuching%2C%20Malaysia", "bag": "gadabout_public", "text": "I spent my 24th birthday and the surrounding days in 2009 in Borneo in a place called Kuching.\n\nIt's a bit of an odd place as it has the most cat statues per square mile of any time I have ever seen.\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/3308170197/\" title=\"Kuching Cats by rakugo, on Flickr\"><img src=\"http://farm4.static.flickr.com/3475/3308170197_537208b487.jpg\" width=\"500\" height=\"375\" alt=\"Kuching Cats\" /></a>\n</html>\nApparently it's due to the fact that Kuching means cat in Malay. As a result the city has the nickname - the Cat City. The city is not that remarkable but it's a great base for many exciting activities.\n\nI visited Bako National Park, home of the proboscis monkey, an unusual monkey which has the slight misfortune of having something which resembles a penis as a nose.\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/3308174543/\" title=\"P2190589 by rakugo, on Flickr\"><img src=\"http://farm4.static.flickr.com/3310/3308174543_b5e66fa225.jpg\" width=\"500\" height=\"375\" alt=\"P2190589\" /></a>\n</html>\nWhile trekking in the jungle I encountered a scary looking scorpion (luckily dead) and a snake falling from a tree. My favourite part of the trip however was seeing the most amazing and odd creature I have ever encountered in my life. It's called the mudskipper. They were absolutely everywhere and great fun to watch as they jumped over the sea.\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/3308174037/\" title=\"Mudskipper Army in Borneo by rakugo, on Flickr\"><img src=\"http://farm4.static.flickr.com/3479/3308174037_f824dbdcb3.jpg\" width=\"500\" height=\"375\" alt=\"Mudskipper Army in Borneo\" /></a>\n</html>\nHowever you like me may remember it from the Guinness advert.\n<html>\n<object width=\"480\" height=\"385\"><param name=\"movie\" value=\"http://www.youtube.com/v/9L4MOHpOLWo?fs=1&amp;hl=en_US&amp;color1=0x234900&amp;color2=0x4e9e00\"></param><param name=\"allowFullScreen\" value=\"true\"></param><param name=\"allowscriptaccess\" value=\"always\"></param><embed src=\"http://www.youtube.com/v/9L4MOHpOLWo?fs=1&amp;hl=en_US&amp;color1=0x234900&amp;color2=0x4e9e00\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" allowfullscreen=\"true\" width=\"480\" height=\"385\"></embed></object>\n</html>\n\nThe next part of our memorable trip involved staying at [[the longhouse adventure|http://www.longhouseadventure.com/]] in Annah Rais.\n\nAfter more trekking this time involving a small encounter with a leech and amazing scenery like this:\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/3310042596/\" title=\"P2190684 by rakugo, on Flickr\"><img src=\"http://farm4.static.flickr.com/3444/3310042596_3d8be3d944.jpg\" width=\"500\" height=\"375\" alt=\"P2190684\" /></a>\n</html>\n\nThis was our home for the night:\n<html>\n<a href=\"http://www.flickr.com/photos/jdlrobson/3310043332/\" title=\"The longhouse by rakugo, on Flickr\"><img src=\"http://farm4.static.flickr.com/3495/3310043332_9cc125c9ee.jpg\" width=\"500\" height=\"375\" alt=\"The longhouse\" /></a>\n</html>\nBeing the only visitors at the time, I got the locals to ourselves. We ended up singing to the Beatles, playing beautifully by the longhouse residents John and Rambo. We drank lots of rice brandy/wine and got very very drunk to celebrate my birthday. The lovely hosts even made me a cake.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-snc1/v2363/16/30/222302160/n222302160_4242545_9431.jpg]]\n\nDefinitely one of the more memorable birthdays I've ever had.\n", "title": "Kuching, Malaysia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75662}, {"creator": "jon", "fields": {"geo.lat": "16.22", "geo.long": "-89.1", "_hash": "5b905445b101478482b771ff5ae7dd90934c2238"}, "created": "20101212104617", "recipe": "gadabout_private", "modified": "201012121048", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Rio%20Blanco%20National%20Park", "bag": "jon-in-belize_public", "text": "A national park in the deep south.\n\nHas one of the best swimming holes in the country.\nSaint Elena seems to be the closest village?\n", "title": "Rio Blanco National Park", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120706}, {"creator": "jon", "fields": {"geo.lat": "35.68948", "geo.long": "139.6917", "_hash": "a4a718fae1ef6e06b54ef68c12c1c953d51de219"}, "created": "20101211120647", "recipe": "gadabout_private", "modified": "20101211130057", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Tokyo%2C%20Japan", "bag": "gadabout_public", "text": "Tokyo... Tokyo... Tokyo. If only I'd grown up there. \n\nI left for Tokyo on the 19th February 2008. The flight itself was eventful. The nice lady at the checkin desk of Virgin Atlantic noticed my birthday was during the flight and with a wink wink nudge nudge let me go with the exciting advice to \"At boarding mention there is a note for you on the system...\". I did this, but the people at boarding were not so nice. They thought I was pulling a fast one when I said I believed I was to be upgraded due to the annual event that is my birthday. A quick look on the system made their jaws drop and produced a few mild expletives from the boarding team. About 10 minutes later I was seated in the usual crappy seat with no leg room on my way to Japan. The crappy seat and failed promise was obviously disappointing - but I've only flown with Virgin once since - I'd booked it already - so the jokes on them really. I was off to Japan and that was ''bloody'' exciting. I must add there was a nice rather attractive air hostess who gave me champagne on the day itself and invited me and my travel partner Paul to a \"plane party\" which would be featuring the pilot and other air stewardess. I'm sad to say that never happened but the day turned out all right.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-sf2p/v200/16/30/222302160/n222302160_2776378_8884.jpg]]\n\nI met my friend Matt at Tokyo airport and we jumped on the tube. It all became real. Yes - people do wear  face masks on the tube.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-ash1/v200/16/30/222302160/n222302160_2776380_9543.jpg]]\n\nMatt took us all over the place on day 1. We saw temples. We saw shop windows with model replicas of the food that could be consumed there\n[img[http://sphotos.ak.fbcdn.net/photos-ak-ash1/v200/16/30/222302160/n222302160_2776369_3712.jpg]]\n\nand we went in cool electronic shops with massive models of Gundam.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-sf2p/v200/16/30/222302160/n222302160_2776392_7285.jpg]]\n\nOn my birthday night we found this awesome Jack Daniels bar where this awesome barman gave us lots of complimentary celebratory shots of Jack Daniels.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-ash1/v200/16/30/222302160/n222302160_2776374_1786.jpg]]\n\nHe also offered these celebratory shots to everyone else in the bar.. luckily it was a small bar but we all got very drunk.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-sf2p/v200/16/30/222302160/n222302160_2776373_1475.jpg]]\n\nWe later got invited for ramen by one of the girls. This is basically the Japanese equivalent of going to a kebab on a heavy night. As she got more drunk she seemed to forget that we couldn't speak Japanese and stopped using English. I was drunk, she was drunk and she invited me for ramen on my birthday so I tried it on with her. Luckily Matt understood enough Japanese and was able to translate that I was being too forward with my advances so that put an end to that.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-ash1/v200/16/30/222302160/n222302160_2776376_2372.jpg]]\n\nLater in the trip we saw dead fish\n[img[http://sphotos.ak.fbcdn.net/photos-ak-sf2p/v200/16/30/222302160/n222302160_2776401_3551.jpg]]\n\nand ate sushi fresh from the sea at the Tsukiji fish market\n[img[http://sphotos.ak.fbcdn.net/photos-ak-sf2p/v200/16/30/222302160/n222302160_2776403_4252.jpg]]\n\nWe saw the humourous side of the Japanese\n[img[http://sphotos.ak.fbcdn.net/photos-ak-ash1/v200/16/30/222302160/n222302160_2776405_4951.jpg]]\n\nand confirmed that yes people do eat whale.\n[img[http://sphotos.ak.fbcdn.net/photos-ak-ash1/v200/16/30/222302160/n222302160_2776382_2989.jpg]]\n\nWe spent a hell of a lot of the time in Tokyo playing video games in one of the many amusement arcades. It was just so much fun. Easily my favourite city in the world to date.", "title": "Tokyo, Japan", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["been"], "revision": 75832}, {"creator": "jon", "fields": {"_hash": "378e7c4224d9b9ed97947eefce1fab45a0a71696", "tiddlyspaceinit_version": "0.6"}, "created": "20101128120124", "recipe": "gadabout_private", "modified": "20101211122147", "uri": "http://geoplugins.tiddlyspace.com/bags/geoplugins_public/tiddlers/geopluginsSetupFlag", "bag": "geoplugins_public", "text": "@@Please do not modify this tiddler; it was created automatically upon space creation.@@", "title": "geopluginsSetupFlag", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludePublisher", "excludeSearch"], "revision": 76240}, {"creator": "jon", "fields": {"_hash": "1720b805c0408fb371f3e66ca349c2c80a668005"}, "created": "20101211113748", "recipe": "gadabout_private", "modified": "20101211113748", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_private/tiddlers/SystemSettings", "bag": "gadabout_private", "text": "chkPrivateMode: false", "title": "SystemSettings", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists"], "revision": 75416}, {"creator": "jon", "fields": {"geo.lat": "-20.1637642", "geo.long": "-67.5708536", "_hash": "96d53f55080027a1989c4b858273792d0fde6b92"}, "created": "20101128115247", "recipe": "gadabout_private", "modified": "201011281302", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Salar%20de%20Uyuni%2C%20Bolivia", "bag": "gadabout_public", "text": "I really want to go here so I can get perspective defying photos such as my friend Dave and Sarah's examples:\n[img[http://sphotos.ak.fbcdn.net/hphotos-ak-snc3/hs332.snc3/29206_398174513319_760188319_4111623_307677_n.jpg]]\nand\n[img[http://sphotos.ak.fbcdn.net/hphotos-ak-snc3/hs352.snc3/29206_398174428319_760188319_4111609_2639293_n.jpg]]\nMy friend Nick points out there is a hotel made of salt. Awesome:\n[img[http://sphotos.ak.fbcdn.net/hphotos-ak-snc4/hs1199.snc4/155127_620281036894_222300541_6743143_4535687_n.jpg]]\n\nI believe this is the hotel Playa Blanca\n<html>\n<object width=\"640\" height=\"385\"><param name=\"movie\" value=\"http://www.youtube.com/v/MiSCgMMtvhA?fs=1&amp;hl=en_US&amp;color1=0x234900&amp;color2=0x4e9e00\"></param><param name=\"allowFullScreen\" value=\"true\"></param><param name=\"allowscriptaccess\" value=\"always\"></param><embed src=\"http://www.youtube.com/v/MiSCgMMtvhA?fs=1&amp;hl=en_US&amp;color1=0x234900&amp;color2=0x4e9e00\" type=\"application/x-shockwave-flash\" allowscriptaccess=\"always\" allowfullscreen=\"true\" width=\"640\" height=\"385\"></embed></object>\n</html>\n", "title": "Salar de Uyuni, Bolivia", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75757}, {"creator": "jon", "fields": {"geo.lat": "", "geo.long": "", "_hash": "da39a3ee5e6b4b0d3255bfef95601890afd80709"}, "created": "20101127113148", "recipe": "gadabout_private", "modified": "20101127113148", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/Belize", "bag": "gadabout_public", "text": "", "title": "Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75482}, {"creator": "jon", "fields": {"geo.lat": "16.803226424443", "geo.long": "-88.490066524782", "_hash": "4afcb5bc3f1bbf4a4140a0d332c2e8ccb5f50e92"}, "created": "20100925174711", "recipe": "gadabout_private", "modified": "20101122210022", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Cockscomb%20Basin%20Forest%20Reserve", "bag": "jon-in-belize_public", "text": "From http://www.igougo.com/review-r1206496-Cockscomb_Jaguar_Preserve.html\nGoing south past Dangriga you will come to Maya Center, a Mayan village and craft center. Hop off the bus and buy yourself a ticket to Cockscomb Jaguar Preserve ($5 in the craft center building). They can also get you a taxi. This is the tricky part: the taxi costs $12.50 one way into the park (which is 6 miles west of Maya Center). If you have time, you might try to hitch a ride into the park. If you have the energy, you could walk. It\u2019s a nice, quiet walk along a private road. \n\nOnce in the park, register and choose your accommodations. There are campsites (which I wouldn\u2019t recommend, even though I had a tent with me--$2.50-$5). I choose the next step up which is the rustic cabin ($7.50). Be sure you have a mosquito net. I set my tent up on the bunkbed. This is not a private room and if others are staying you will be sharing it. I had it all to myself. There is no electricity but they give you a candle to use. This kind of makes for a unique and very pleasant experience. There are showers and a bathroom outside which are also shared. They are cold but nice. \nCockscomb is a little more south; therefore it is more rainy. It rained a lot in the three days I was there. But, it was also very nice hiking in the rain. If you want to see wildlife, you\u2019ve come to the right spot! There are many different trails to explore. I ran into a pack of koatimundi, a grey fox, many different kinds of tropical birds, some kind of snake, Jaguar tracks, lots of different neat bugs, and although I didn\u2019t see a Jaguar, I did hear one growling not too far from the trail and heard what sounded like crunching on bones (I\u2019m serious!).\n\nI highly recommend making this a top priority on your trip to Belize. It was the highlight of my trip. Make sure to hike all the trails as they are all different. Try a night hike\u2014but make sure you have a dependable headlamp or flashlight. Turn off the light when you get out there and see why this is so important! And most of all, ENJOY!!\n\nRead more: http://www.igougo.com/review-r1206496-Cockscomb_Jaguar_Preserve.html#ixzz162z1R3A8\n<<image \"http://farm1.static.flickr.com/41/125363594_c6e2550f7f.jpg\" width:500>>\n\nBen's favourite part.\n[[official site|http://www.belizeaudubon.org/protected_areas/cockscomb-basin-wildlife-sanctuary.html]]\n\nreading.. http://www.travbuddy.com/travel-blogs/15578/Cockscomb-Basin-Wildlife-Sanctuary-3\n\ntours arranged in [[Maya Centre]] via any bus along the southern highway. about US$55 for a day tour night tour is US$25 with chance to see anteaters\n\nhttp://ambergriscaye.com/pages/town/parkcockscomb.html\n\nCockscomb is reached from the Southern Highway down the turn off at the [[Maya Center]] village. It's not that clearly signed posted so look out. The bus from Dangriga or Belize will get you this far, which leaves a ''five mile walk'' to the reserve headquarters. Taxis and tours also run from Dangriga (25 miles northeast) and many resorts in the area run their own trips (although these are not cheap).", "title": "Cockscomb Basin Forest Reserve", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120581}, {"creator": "jon", "fields": {"_hash": "3ed29290312c5d540c5b6e26ab95c4a1328bbdbb"}, "created": "20100910181139", "recipe": "gadabout_private", "modified": "20101121200951", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/SiteIcon", "bag": "gadabout_public", "text": "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", "title": "SiteIcon", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": "image/jpeg", "tags": [], "revision": 75810}, {"creator": "jon", "fields": {"geo.lat": "16.9", "geo.long": "-89.9", "_hash": "09408198f4fab49f0d00d477fb5c1184c891ae16"}, "created": "20100925174809", "recipe": "gadabout_private", "modified": "20101114170825", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Flores%2C%20Guatemala", "bag": "jon-in-belize_public", "text": "Apparently an expensive city according to @benjam\nThere are Cancun-Flores flights on Tikal Jets.\n\n!Get in\nBuses from Guatemala City and Belize City as well as various other destinations all over the country stop at the Fuente del Norte bus station in Santa Elena, a five minute auto-rickshaw ride across the causeway from Flores island (Q5).\n\nFrom Belize City, you have the following options:\nThere are tourist shuttle buses from the Belize City water taxi terminal to Santa Elena: Linea Dorada [8] at 9:30am or San Juan Express at 9:30am and 2:30pm, US$15-US$20, travel time: 5 hours. Note that these buses do not make any stops in Belize; if you are travelling from San Ignacio or Belmopan, you must use the option below.\nTake a local Belize bus to Benque Veijo (3 km from the border). Then take a taxi to the border, walk across, and continue to the Melchor de Mencos bus station (less than 1 km from the border), where there are frequent microbuses and the occasional pullman coach to Santa Elena. Approximately US$12; travel time: 6 hours.\n\nTikal is easily visited from here.", "title": "Flores, Guatemala", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeMap"], "revision": 120616}, {"creator": "jon", "fields": {"geo.lat": "38.993572056891", "geo.long": "125.73013442284", "_hash": "1159332ecdd46c67b2613c92b51820a5569eb985"}, "created": "20101010143917", "recipe": "gadabout_private", "modified": "20101114121746", "uri": "http://gadabout.tiddlyspace.com/bags/gadabout_public/tiddlers/North%20Korea", "bag": "gadabout_public", "text": "North Korea certainly looks like an unusual place to visit..\n\nhttp://www.youtube.com/watch?v=2KEn7AE3EwA&feature=fvw\nhttp://www.youtube.com/watch?v=eHMSGQwLPrA&feature=related\nhttp://www.youtube.com/watch?v=6YVIBawHaQY&feature=related\nhttp://www.youtube.com/watch?v=YZAp7gWWANI\n\nhttp://www.koryogroup.com/", "title": "North Korea", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 75726}, {"creator": "jon", "fields": {"geo.lat": "17.752567", "geo.long": "-88.654469", "_hash": "9d4dc130826d759b081783e112aee18b166934ad"}, "created": "20100925174702", "recipe": "gadabout_private", "modified": "20101031214141", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Lamanai%2C%20Belize", "bag": "jon-in-belize_public", "text": "Go to the Mask Temple and the High Temple\n\n<<image \"http://farm2.static.flickr.com/1386/4730067996_8c384b31b4.jpg\" width:500>>\n{image from brostad on flickr}\nhttp://www.belize-vacation.com/belize/lamanai.htm\n\n<<image \"http://farm1.static.flickr.com/112/291927863_89a3688ece_z.jpg?zz=1\" width:500>>\nview from High Temple (the_taxing_one on flickr)\n<<image http://farm2.static.flickr.com/1428/4729505195_b5def90a27_z.jpg width:500>>\nJaguar Temple", "title": "Lamanai, Belize", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120669}, {"creator": "jon", "fields": {"_hash": "b1a4f5706ef49b3f059f51dfd9b491eb3676c97d"}, "created": "20101030122324", "recipe": "gadabout_private", "modified": "20101030164038", "uri": "http://yoursearchplugin.tiddlyspace.com/bags/yoursearchplugin_public/tiddlers/YourSearchPlugin", "bag": "yoursearchplugin_public", "text": "/***\n|''Name:''|YourSearchPlugin|\n|''Version:''|2.1.5 (2010-02-16) patched for use with TiddlySpace. (saveTiddler)|\n|''Source:''|http://tiddlywiki.abego-software.de/#YourSearchPlugin|\n|''Author:''|UdoBorkowski (ub [at] abego-software [dot] de)|\n|''Licence:''|[[BSD open source license (abego Software)|http://www.abego-software.de/legal/apl-v10.html]]|\n|''Copyright:''|&copy; 2005-2010 [[abego Software|http://www.abego-software.de]]|\n|''~CoreVersion:''|2.1.0|\n|''Community:''|[[del.icio.us|http://del.icio.us/post?url=http://tiddlywiki.abego-software.de/index.html%23YourSearchPlugin]]|\n|''Browser:''|Firefox 1.0.4+; Firefox 1.5; ~InternetExplorer 6.0|\n!About YourSearch\nYourSearch gives you a bunch of new features to simplify and speed up your daily searches in TiddlyWiki. It seamlessly integrates into the standard TiddlyWiki search: just start typing into the 'search' field and explore!\n\nFor more information see [[Help|YourSearch Help]].\n!Compatibility\nThis plugin requires TiddlyWiki 2.1. \nCheck the [[archive|http://tiddlywiki.abego-software.de/archive]] for ~YourSearchPlugins supporting older versions of TiddlyWiki.\n!Source Code\n***/\n/***\nThis plugin's source code is compressed (and hidden). Use this [[link|http://tiddlywiki.abego-software.de/archive/YourSearchPlugin/Plugin-YourSearch-src.2.1.5.js]] to get the readable source code.\n***/\n///%\nif(!version.extensions.YourSearchPlugin){version.extensions.YourSearchPlugin={major:2,minor:1,revision:5,source:\"http://tiddlywiki.abego-software.de/#YourSearchPlugin\",licence:\"[[BSD open source license (abego Software)|http://www.abego-software.de/legal/apl-v10.html]]\",copyright:\"Copyright (c) abego Software GmbH, 2005-2010 (www.abego-software.de)\"};if(!window.abego){window.abego={};}if(!Array.forEach){Array.forEach=function(_1,_2,_3){for(var i=0,_4=_1.length;i<_4;i++){_2.call(_3,_1[i],i,_1);}};Array.prototype.forEach=function(_5,_6){for(var i=0,_7=this.length;i<_7;i++){_5.call(_6,this[i],i,this);}};}abego.toInt=function(s,_8){if(!s){return _8;}var n=parseInt(s);return (n==NaN)?_8:n;};abego.createEllipsis=function(_9){var e=createTiddlyElement(_9,\"span\");e.innerHTML=\"&hellip;\";};abego.shallowCopy=function(_a){if(!_a){return _a;}var _b={};for(var n in _a){_b[n]=_a[n];}return _b;};abego.copyOptions=function(_c){return !_c?{}:abego.shallowCopy(_c);};abego.countStrings=function(_d,s){if(!s){return 0;}var _e=s.length;var n=0;var _f=0;while(1){var i=_d.indexOf(s,_f);if(i<0){return n;}n++;_f=i+_e;}return n;};abego.getBracedText=function(_10,_11,_12){if(!_11){_11=0;}var re=/\\{([^\\}]*)\\}/gm;re.lastIndex=_11;var m=re.exec(_10);if(m){var s=m[1];var _13=abego.countStrings(s,\"{\");if(!_13){if(_12){_12.lastIndex=re.lastIndex;}return s;}var len=_10.length;for(var i=re.lastIndex;i<len&&_13;i++){var c=_10.charAt(i);if(c==\"{\"){_13++;}else{if(c==\"}\"){_13--;}}}if(!_13){if(_12){_12.lastIndex=i-1;}return _10.substring(m.index+1,i-1);}}};abego.select=function(_14,_15,_16,_17){if(!_17){_17=[];}_14.forEach(function(t){if(_15.call(_16,t)){_17.push(t);}});return _17;};abego.consumeEvent=function(e){if(e.stopPropagation){e.stopPropagation();}if(e.preventDefault){e.preventDefault();}e.cancelBubble=true;e.returnValue=true;};abego.TiddlerFilterTerm=function(_18,_19){if(!_19){_19={};}var _1a=_18;if(!_19.textIsRegExp){_1a=_18.escapeRegExp();if(_19.fullWordMatch){_1a=\"\\\\b\"+_1a+\"\\\\b\";}}var _1b=new RegExp(_1a,\"m\"+(_19.caseSensitive?\"\":\"i\"));this.tester=new abego.MultiFieldRegExpTester(_1b,_19.fields,_19.withExtendedFields);};abego.TiddlerFilterTerm.prototype.test=function(_1c){return this.tester.test(_1c);};abego.parseNewTiddlerCommandLine=function(s){var m=/(.*?)\\.(?:\\s+|$)([^#]*)(#.*)?/.exec(s);if(!m){m=/([^#]*)()(#.*)?/.exec(s);}if(m){var r;if(m[3]){var s2=m[3].replace(/#/g,\"\");r=s2.parseParams(\"tag\");}else{r=[[]];}var _1d=m[2]?m[2].trim():\"\";r.push({name:\"text\",value:_1d});r[0].text=[_1d];return {title:m[1].trim(),params:r};}else{return {title:s.trim(),params:[[]]};}};abego.parseTiddlerFilterTerm=function(_1e,_1f,_20){var re=/\\s*(?:(?:\\{([^\\}]*)\\})|(?:(=)|([#%!])|(?:(\\w+)\\s*\\:(?!\\/\\/))|(?:(?:(\"(?:(?:\\\\\")|[^\"])+\")|(?:\\/((?:(?:\\\\\\/)|[^\\/])+)\\/)|(\\w+\\:\\/\\/[^\\s]+)|([^\\s\\)\\-\\\"]+)))))/mg;var _21={\"!\":\"title\",\"%\":\"text\",\"#\":\"tags\"};var _22={};var _23;re.lastIndex=_1f;while(1){var i=re.lastIndex;var m=re.exec(_1e);if(!m||m.index!=i){throw \"Word or String literal expected\";}if(m[1]){var _24={};var _25=abego.getBracedText(_1e,0,_24);if(!_25){throw \"Invalid {...} syntax\";}var f=Function(\"tiddler\",\"return (\"+_25+\");\");return {func:f,lastIndex:_24.lastIndex,markRE:null};}if(m[2]){_23=true;}else{if(m[3]){_22[_21[m[3]]]=1;}else{if(m[4]){_22[m[4]]=1;}else{var _26=m[6];var _27=m[5]?window.eval(m[5]):m[6]?m[6]:m[7]?m[7]:m[8];var _20=abego.copyOptions(_20);_20.fullWordMatch=_23;_20.textIsRegExp=_26;var _28=[];for(var n in _22){_28.push(n);}if(_28.length==0){_20.fields=_20.defaultFields;}else{_20.fields=_28;_20.withExtendedFields=false;}var _29=new abego.TiddlerFilterTerm(_27,_20);var _2a=_26?_27:_27.escapeRegExp();if(_2a&&_23){_2a=\"\\\\b\"+_2a+\"\\\\b\";}return {func:function(_2b){return _29.test(_2b);},lastIndex:re.lastIndex,markRE:_2a?\"(?:\"+_2a+\")\":null};}}}}};abego.BoolExp=function(s,_2c,_2d){this.s=s;var _2e=_2d&&_2d.defaultOperationIs_OR;var _2f=/\\s*(?:(\\-|not)|(\\())/gi;var _30=/\\s*\\)/g;var _31=/\\s*(?:(and|\\&\\&)|(or|\\|\\|))/gi;var _32=/\\s*[^\\)\\s]/g;var _33=/\\s*(\\-|not)?(\\s*\\()?/gi;var _34;var _35=function(_36){_33.lastIndex=_36;var m=_33.exec(s);var _37;var _38;if(m&&m.index==_36){_36+=m[0].length;_37=m[1];if(m[2]){var e=_34(_36);_30.lastIndex=e.lastIndex;if(!_30.exec(s)){throw \"Missing ')'\";}_38={func:e.func,lastIndex:_30.lastIndex,markRE:e.markRE};}}if(!_38){_38=_2c(s,_36,_2d);}if(_37){_38.func=(function(f){return function(_39){return !f(_39);};})(_38.func);_38.markRE=null;}return _38;};_34=function(_3a){var _3b=_35(_3a);while(1){var l=_3b.lastIndex;_31.lastIndex=l;var m=_31.exec(s);var _3c;var _3d;if(m&&m.index==l){_3c=!m[1];_3d=_35(_31.lastIndex);}else{try{_3d=_35(l);}catch(e){return _3b;}_3c=_2e;}_3b.func=(function(_3e,_3f,_40){return _40?function(_41){return _3e(_41)||_3f(_41);}:function(_42){return _3e(_42)&&_3f(_42);};})(_3b.func,_3d.func,_3c);_3b.lastIndex=_3d.lastIndex;if(!_3b.markRE){_3b.markRE=_3d.markRE;}else{if(_3d.markRE){_3b.markRE=_3b.markRE+\"|\"+_3d.markRE;}}}};var _43=_34(0);this.evalFunc=_43.func;if(_43.markRE){this.markRegExp=new RegExp(_43.markRE,_2d.caseSensitive?\"mg\":\"img\");}};abego.BoolExp.prototype.exec=function(){return this.evalFunc.apply(this,arguments);};abego.BoolExp.prototype.getMarkRegExp=function(){return this.markRegExp;};abego.BoolExp.prototype.toString=function(){return this.s;};abego.MultiFieldRegExpTester=function(re,_44,_45){this.re=re;this.fields=_44?_44:[\"title\",\"text\",\"tags\"];this.withExtendedFields=_45;};abego.MultiFieldRegExpTester.prototype.test=function(_46){var re=this.re;for(var i=0;i<this.fields.length;i++){var s=store.getValue(_46,this.fields[i]);if(typeof s==\"string\"&&re.test(s)){return this.fields[i];}}if(this.withExtendedFields){return store.forEachField(_46,function(_47,_48,_49){return typeof _49==\"string\"&&re.test(_49)?_48:null;},true);}return null;};abego.TiddlerQuery=function(_4a,_4b,_4c,_4d,_4e){if(_4c){this.regExp=new RegExp(_4a,_4b?\"mg\":\"img\");this.tester=new abego.MultiFieldRegExpTester(this.regExp,_4d,_4e);}else{this.expr=new abego.BoolExp(_4a,abego.parseTiddlerFilterTerm,{defaultFields:_4d,caseSensitive:_4b,withExtendedFields:_4e});}this.getQueryText=function(){return _4a;};this.getUseRegExp=function(){return _4c;};this.getCaseSensitive=function(){return _4b;};this.getDefaultFields=function(){return _4d;};this.getWithExtendedFields=function(){return _4e;};};abego.TiddlerQuery.prototype.test=function(_4f){if(!_4f){return false;}if(this.regExp){return this.tester.test(_4f);}return this.expr.exec(_4f);};abego.TiddlerQuery.prototype.filter=function(_50){return abego.select(_50,this.test,this);};abego.TiddlerQuery.prototype.getMarkRegExp=function(){if(this.regExp){return \"\".search(this.regExp)>=0?null:this.regExp;}return this.expr.getMarkRegExp();};abego.TiddlerQuery.prototype.toString=function(){return (this.regExp?this.regExp:this.expr).toString();};abego.PageWiseRenderer=function(){this.firstIndexOnPage=0;};merge(abego.PageWiseRenderer.prototype,{setItems:function(_51){this.items=_51;this.setFirstIndexOnPage(0);},getMaxPagesInNavigation:function(){return 10;},getItemsCount:function(_52){return this.items?this.items.length:0;},getCurrentPageIndex:function(){return Math.floor(this.firstIndexOnPage/this.getItemsPerPage());},getLastPageIndex:function(){return Math.floor((this.getItemsCount()-1)/this.getItemsPerPage());},setFirstIndexOnPage:function(_53){this.firstIndexOnPage=Math.min(Math.max(0,_53),this.getItemsCount()-1);},getFirstIndexOnPage:function(){this.firstIndexOnPage=Math.floor(this.firstIndexOnPage/this.getItemsPerPage())*this.getItemsPerPage();return this.firstIndexOnPage;},getLastIndexOnPage:function(){return Math.min(this.getFirstIndexOnPage()+this.getItemsPerPage()-1,this.getItemsCount()-1);},onPageChanged:function(_54,_55){},renderPage:function(_56){if(_56.beginRendering){_56.beginRendering(this);}try{if(this.getItemsCount()){var _57=this.getLastIndexOnPage();var _58=-1;for(var i=this.getFirstIndexOnPage();i<=_57;i++){_58++;_56.render(this,this.items[i],i,_58);}}}finally{if(_56.endRendering){_56.endRendering(this);}}},addPageNavigation:function(_59){if(!this.getItemsCount()){return;}var _5a=this;var _5b=function(e){if(!e){var e=window.event;}abego.consumeEvent(e);var _5c=abego.toInt(this.getAttribute(\"page\"),0);var _5d=_5a.getCurrentPageIndex();if(_5c==_5d){return;}var _5e=_5c*_5a.getItemsPerPage();_5a.setFirstIndexOnPage(_5e);_5a.onPageChanged(_5c,_5d);};var _5f;var _60=this.getCurrentPageIndex();var _61=this.getLastPageIndex();if(_60>0){_5f=createTiddlyButton(_59,\"Previous\",\"Go to previous page (Shortcut: Alt-'<')\",_5b,\"prev\");_5f.setAttribute(\"page\",(_60-1).toString());_5f.setAttribute(\"accessKey\",\"<\");}for(var i=-this.getMaxPagesInNavigation();i<this.getMaxPagesInNavigation();i++){var _62=_60+i;if(_62<0){continue;}if(_62>_61){break;}var _63=(i+_60+1).toString();var _64=_62==_60?\"currentPage\":\"otherPage\";_5f=createTiddlyButton(_59,_63,\"Go to page %0\".format([_63]),_5b,_64);_5f.setAttribute(\"page\",(_62).toString());}if(_60<_61){_5f=createTiddlyButton(_59,\"Next\",\"Go to next page (Shortcut: Alt-'>')\",_5b,\"next\");_5f.setAttribute(\"page\",(_60+1).toString());_5f.setAttribute(\"accessKey\",\">\");}}});abego.LimitedTextRenderer=function(){var _65=40;var _66=4;var _67=function(_68,_69,_6a){var n=_68.length;if(n==0){_68.push({start:_69,end:_6a});return;}var i=0;for(;i<n;i++){var _6b=_68[i];if(_6b.start<=_6a&&_69<=_6b.end){var r;var _6c=i+1;for(;_6c<n;_6c++){r=_68[_6c];if(r.start>_6a||_69>_6b.end){break;}}var _6d=_69;var _6e=_6a;for(var j=i;j<_6c;j++){r=_68[j];_6d=Math.min(_6d,r.start);_6e=Math.max(_6e,r.end);}_68.splice(i,_6c-i,{start:_6d,end:_6e});return;}if(_6b.start>_6a){break;}}_68.splice(i,0,{start:_69,end:_6a});};var _6f=function(_70){var _71=0;for(var i=0;i<_70.length;i++){var _72=_70[i];_71+=_72.end-_72.start;}return _71;};var _73=function(c){return (c>=\"a\"&&c<=\"z\")||(c>=\"A\"&&c<=\"Z\")||c==\"_\";};var _74=function(s,_75){if(!_73(s[_75])){return null;}for(var i=_75-1;i>=0&&_73(s[i]);i--){}var _76=i+1;var n=s.length;for(i=_75+1;i<n&&_73(s[i]);i++){}return {start:_76,end:i};};var _77=function(s,_78,_79){var _7a;if(_79){_7a=_74(s,_78);}else{if(_78<=0){return _78;}_7a=_74(s,_78-1);}if(!_7a){return _78;}if(_79){if(_7a.start>=_78-_66){return _7a.start;}if(_7a.end<=_78+_66){return _7a.end;}}else{if(_7a.end<=_78+_66){return _7a.end;}if(_7a.start>=_78-_66){return _7a.start;}}return _78;};var _7b=function(s,_7c){var _7d=[];if(_7c){var _7e=0;var n=s.length;var _7f=0;do{_7c.lastIndex=_7e;var _80=_7c.exec(s);if(_80){if(_7e<_80.index){var t=s.substring(_7e,_80.index);_7d.push({text:t});}_7d.push({text:_80[0],isMatch:true});_7e=_80.index+_80[0].length;}else{_7d.push({text:s.substr(_7e)});break;}}while(true);}else{_7d.push({text:s});}return _7d;};var _81=function(_82){var _83=0;for(var i=0;i<_82.length;i++){if(_82[i].isMatch){_83++;}}return _83;};var _84=function(s,_85,_86,_87,_88){var _89=Math.max(Math.floor(_88/(_87+1)),_65);var _8a=Math.max(_89-(_86-_85),0);var _8b=Math.min(Math.floor(_86+_8a/3),s.length);var _8c=Math.max(_8b-_89,0);_8c=_77(s,_8c,true);_8b=_77(s,_8b,false);return {start:_8c,end:_8b};};var _8d=function(_8e,s,_8f){var _90=[];var _91=_81(_8e);var pos=0;for(var i=0;i<_8e.length;i++){var t=_8e[i];var _92=t.text;if(t.isMatch){var _93=_84(s,pos,pos+_92.length,_91,_8f);_67(_90,_93.start,_93.end);}pos+=_92.length;}return _90;};var _94=function(s,_95,_96){var _97=_96-_6f(_95);while(_97>0){if(_95.length==0){_67(_95,0,_77(s,_96,false));return;}else{var _98=_95[0];var _99;var _9a;if(_98.start==0){_99=_98.end;if(_95.length>1){_9a=_95[1].start;}else{_67(_95,_99,_77(s,_99+_97,false));return;}}else{_99=0;_9a=_98.start;}var _9b=Math.min(_9a,_99+_97);_67(_95,_99,_9b);_97-=(_9b-_99);}}};var _9c=function(_9d,s,_9e,_9f,_a0){if(_9f.length==0){return;}var _a1=function(_a2,s,_a3,_a4,_a5){var t;var _a6;var pos=0;var i=0;var _a7=0;for(;i<_a3.length;i++){t=_a3[i];_a6=t.text;if(_a4<pos+_a6.length){_a7=_a4-pos;break;}pos+=_a6.length;}var _a8=_a5-_a4;for(;i<_a3.length&&_a8>0;i++){t=_a3[i];_a6=t.text.substr(_a7);_a7=0;if(_a6.length>_a8){_a6=_a6.substr(0,_a8);}if(t.isMatch){createTiddlyElement(_a2,\"span\",null,\"marked\",_a6);}else{createTiddlyText(_a2,_a6);}_a8-=_a6.length;}if(_a5<s.length){abego.createEllipsis(_a2);}};if(_9f[0].start>0){abego.createEllipsis(_9d);}var _a9=_a0;for(var i=0;i<_9f.length&&_a9>0;i++){var _aa=_9f[i];var len=Math.min(_aa.end-_aa.start,_a9);_a1(_9d,s,_9e,_aa.start,_aa.start+len);_a9-=len;}};this.render=function(_ab,s,_ac,_ad){if(s.length<_ac){_ac=s.length;}var _ae=_7b(s,_ad);var _af=_8d(_ae,s,_ac);_94(s,_af,_ac);_9c(_ab,s,_ae,_af,_ac);};};(function(){function _b0(msg){alert(msg);throw msg;};if(version.major<2||(version.major==2&&version.minor<1)){_b0(\"YourSearchPlugin requires TiddlyWiki 2.1 or newer.\\n\\nCheck the archive for YourSearch plugins\\nsupporting older versions of TiddlyWiki.\\n\\nArchive: http://tiddlywiki.abego-software.de/archive\");}abego.YourSearch={};var _b1;var _b2;var _b3=function(_b4){_b1=_b4;};var _b5=function(){return _b1?_b1:[];};var _b6=function(){return _b1?_b1.length:0;};var _b7=4;var _b8=10;var _b9=2;var _ba=function(s,re){var m=s.match(re);return m?m.length:0;};var _bb=function(_bc,_bd){var _be=_bd.getMarkRegExp();if(!_be){return 1;}var _bf=_bc.title.match(_be);var _c0=_bf?_bf.length:0;var _c1=_ba(_bc.getTags(),_be);var _c2=_bf?_bf.join(\"\").length:0;var _c3=_bc.title.length>0?_c2/_bc.title.length:0;var _c4=_c0*_b7+_c1*_b9+_c3*_b8+1;return _c4;};var _c5=function(_c6,_c7,_c8,_c9,_ca,_cb){_b2=null;var _cc=_c6.reverseLookup(\"tags\",_cb,false);try{var _cd=[];if(config.options.chkSearchInTitle){_cd.push(\"title\");}if(config.options.chkSearchInText){_cd.push(\"text\");}if(config.options.chkSearchInTags){_cd.push(\"tags\");}_b2=new abego.TiddlerQuery(_c7,_c8,_c9,_cd,config.options.chkSearchExtendedFields);}catch(e){return [];}var _ce=_b2.filter(_cc);var _cf=abego.YourSearch.getRankFunction();for(var i=0;i<_ce.length;i++){var _d0=_ce[i];var _d1=_cf(_d0,_b2);_d0.searchRank=_d1;}if(!_ca){_ca=\"title\";}var _d2=function(a,b){var _d3=a.searchRank-b.searchRank;if(_d3==0){if(a[_ca]==b[_ca]){return (0);}else{return (a[_ca]<b[_ca])?-1:+1;}}else{return (_d3>0)?-1:+1;}};_ce.sort(_d2);return _ce;};var _d4=80;var _d5=50;var _d6=250;var _d7=50;var _d8=25;var _d9=10;var _da=\"yourSearchResult\";var _db=\"yourSearchResultItems\";var _dc;var _dd;var _de;var _df;var _e0;var _e1=function(){if(version.extensions.YourSearchPlugin.styleSheetInited){return;}version.extensions.YourSearchPlugin.styleSheetInited=true;setStylesheet(store.getTiddlerText(\"YourSearchStyleSheet\"),\"yourSearch\");};var _e2=function(){return _dd!=null&&_dd.parentNode==document.body;};var _e3=function(){if(_e2()){document.body.removeChild(_dd);}};var _e4=function(e){_e3();var _e5=this.getAttribute(\"tiddlyLink\");if(_e5){var _e6=this.getAttribute(\"withHilite\");var _e7=highlightHack;if(_e6&&_e6==\"true\"&&_b2){highlightHack=_b2.getMarkRegExp();}story.displayTiddler(this,_e5);highlightHack=_e7;}return (false);};var _e8=function(){if(!_de){return;}var _e9=_de;var _ea=findPosX(_e9);var _eb=findPosY(_e9);var _ec=_e9.offsetHeight;var _ed=_ea;var _ee=_eb+_ec;var _ef=findWindowWidth();if(_ef<_dd.offsetWidth){_dd.style.width=(_ef-100)+\"px\";_ef=findWindowWidth();}var _f0=_dd.offsetWidth;if(_ed+_f0>_ef){_ed=_ef-_f0-30;}if(_ed<0){_ed=0;}_dd.style.left=_ed+\"px\";_dd.style.top=_ee+\"px\";_dd.style.display=\"block\";};var _f1=function(){if(_dd){window.scrollTo(0,ensureVisible(_dd));}if(_de){window.scrollTo(0,ensureVisible(_de));}};var _f2=function(){_e8();_f1();};var _f3;var _f4;var _f5=new abego.PageWiseRenderer();var _f6=function(_f7){this.itemHtml=store.getTiddlerText(\"YourSearchItemTemplate\");if(!this.itemHtml){_b0(\"YourSearchItemTemplate not found\");}this.place=document.getElementById(_db);if(!this.place){this.place=createTiddlyElement(_f7,\"div\",_db);}};merge(_f6.prototype,{render:function(_f8,_f9,_fa,_fb){_f3=_fb;_f4=_f9;var _fc=createTiddlyElement(this.place,\"div\",null,\"yourSearchItem\");_fc.innerHTML=this.itemHtml;applyHtmlMacros(_fc,null);refreshElements(_fc,null);},endRendering:function(_fd){_f4=null;}});var _fe=function(){if(!_dd||!_de){return;}var _ff=store.getTiddlerText(\"YourSearchResultTemplate\");if(!_ff){_ff=\"<b>Tiddler YourSearchResultTemplate not found</b>\";}_dd.innerHTML=_ff;applyHtmlMacros(_dd,null);refreshElements(_dd,null);var _100=new _f6(_dd);_f5.renderPage(_100);_f2();};_f5.getItemsPerPage=function(){var n=(config.options.chkPreviewText)?abego.toInt(config.options.txtItemsPerPageWithPreview,_d9):abego.toInt(config.options.txtItemsPerPage,_d8);return (n>0)?n:1;};_f5.onPageChanged=function(){_fe();};var _101=function(){if(_de==null||!config.options.chkUseYourSearch){return;}if((_de.value==_dc)&&_dc&&!_e2()){if(_dd&&(_dd.parentNode!=document.body)){document.body.appendChild(_dd);_f2();}else{abego.YourSearch.onShowResult(true);}}};var _102=function(){_e3();_dd=null;_dc=null;};var _103=function(self,e){while(e!=null){if(self==e){return true;}e=e.parentNode;}return false;};var _104=function(e){if(e.target==_de){return;}if(e.target==_df){return;}if(_dd&&_103(_dd,e.target)){return;}_e3();};var _105=function(e){if(e.keyCode==27){_e3();}};addEvent(document,\"click\",_104);addEvent(document,\"keyup\",_105);var _106=function(text,_107,_108){_dc=text;_b3(_c5(store,text,_107,_108,\"title\",\"excludeSearch\"));abego.YourSearch.onShowResult();};var _109=function(_10a,_10b,_10c,_10d,_10e,_10f){_e1();_dc=\"\";var _110=null;var _111=function(txt){if(config.options.chkUseYourSearch){_106(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);}else{story.search(txt.value,config.options.chkCaseSensitiveSearch,config.options.chkRegExpSearch);}_dc=txt.value;};var _112=function(e){_111(_de);return false;};var _113=function(e){if(!e){var e=window.event;}_de=this;switch(e.keyCode){case 13:if(e.ctrlKey&&_e0&&_e2()){_e0.onclick.apply(_e0,[e]);}else{_111(this);}break;case 27:if(_e2()){_e3();}else{this.value=\"\";clearMessage();}break;}if(String.fromCharCode(e.keyCode)==this.accessKey||e.altKey){_101();}if(this.value.length<3&&_110){clearTimeout(_110);}if(this.value.length>2){if(this.value!=_dc){if(!config.options.chkUseYourSearch||config.options.chkSearchAsYouType){if(_110){clearTimeout(_110);}var txt=this;_110=setTimeout(function(){_111(txt);},500);}}else{if(_110){clearTimeout(_110);}}}if(this.value.length==0){_e3();}};var _114=function(e){this.select();clearMessage();_101();};var args=_10e.parseParams(\"list\",null,true);var _115=getFlag(args,\"buttonAtRight\");var _116=getParam(args,\"sizeTextbox\",this.sizeTextbox);var btn;if(!_115){btn=createTiddlyButton(_10a,this.label,this.prompt,_112);}var txt=createTiddlyElement(null,\"input\",null,\"txtOptionInput searchField\",null);if(_10c[0]){txt.value=_10c[0];}txt.onkeyup=_113;txt.onfocus=_114;txt.setAttribute(\"size\",_116);txt.setAttribute(\"accessKey\",this.accessKey);txt.setAttribute(\"autocomplete\",\"off\");if(config.browser.isSafari){txt.setAttribute(\"type\",\"search\");txt.setAttribute(\"results\",\"5\");}else{txt.setAttribute(\"type\",\"text\");}if(_10a){_10a.appendChild(txt);}if(_115){btn=createTiddlyButton(_10a,this.label,this.prompt,_112);}_de=txt;_df=btn;};var _117=function(){_e3();var _118=_b5();var n=_118.length;if(n){var _119=[];for(var i=0;i<n;i++){_119.push(_118[i].title);}story.displayTiddlers(null,_119);}};var _11a=function(_11b,_11c,_11d,_11e){invokeMacro(_11b,\"option\",_11c,_11d,_11e);var elem=_11b.lastChild;var _11f=elem.onclick;elem.onclick=function(e){var _120=_11f.apply(this,arguments);_fe();return _120;};return elem;};var _121=function(s){var _122=[\"''\",\"{{{\",\"}}}\",\"//\",\"<<<\",\"/***\",\"***/\"];var _123=\"\";for(var i=0;i<_122.length;i++){if(i!=0){_123+=\"|\";}_123+=\"(\"+_122[i].escapeRegExp()+\")\";}return s.replace(new RegExp(_123,\"mg\"),\"\").trim();};var _124=function(){var i=_f3;return (i>=0&&i<=9)?(i<9?(i+1):0):-1;};var _125=new abego.LimitedTextRenderer();var _126=function(_127,s,_128){_125.render(_127,s,_128,_b2.getMarkRegExp());};var _129=TiddlyWiki.prototype.saveTiddler;TiddlyWiki.prototype.saveTiddler=function(_12a,_12b,_12c,_12d,_12e,tags,_12f){return _129.apply(this,arguments);_102();};var _130=TiddlyWiki.prototype.removeTiddler;TiddlyWiki.prototype.removeTiddler=function(_131){_130.apply(this,arguments);_102();};config.macros.yourSearch={label:\"yourSearch\",prompt:\"Gives access to the current/last YourSearch result\",handler:function(_132,_133,_134,_135,_136,_137){if(_134.length==0){return;}var name=_134[0];var func=config.macros.yourSearch.funcs[name];if(func){func(_132,_133,_134,_135,_136,_137);}},tests:{\"true\":function(){return true;},\"false\":function(){return false;},\"found\":function(){return _b6()>0;},\"previewText\":function(){return config.options.chkPreviewText;}},funcs:{itemRange:function(_138){if(_b6()){var _139=_f5.getLastIndexOnPage();var s=\"%0 - %1\".format([_f5.getFirstIndexOnPage()+1,_139+1]);createTiddlyText(_138,s);}},count:function(_13a){createTiddlyText(_13a,_b6().toString());},query:function(_13b){if(_b2){createTiddlyText(_13b,_b2.toString());}},version:function(_13c){var t=\"YourSearch %0.%1.%2\".format([version.extensions.YourSearchPlugin.major,version.extensions.YourSearchPlugin.minor,version.extensions.YourSearchPlugin.revision]);var e=createTiddlyElement(_13c,\"a\");e.setAttribute(\"href\",\"http://tiddlywiki.abego-software.de/#YourSearchPlugin\");e.innerHTML=\"<font color=\\\"black\\\" face=\\\"Arial, Helvetica, sans-serif\\\">\"+t+\"<font>\";},copyright:function(_13d){var e=createTiddlyElement(_13d,\"a\");e.setAttribute(\"href\",\"http://www.abego-software.de\");e.innerHTML=\"<font color=\\\"black\\\" face=\\\"Arial, Helvetica, sans-serif\\\">&copy; 2005-2008 <b><font color=\\\"red\\\">abego</font></b> Software<font>\";},newTiddlerButton:function(_13e){if(_b2){var r=abego.parseNewTiddlerCommandLine(_b2.getQueryText());var btn=config.macros.newTiddler.createNewTiddlerButton(_13e,r.title,r.params,\"new tiddler\",\"Create a new tiddler based on search text. (Shortcut: Ctrl-Enter; Separators: '.', '#')\",null,\"text\");var _13f=btn.onclick;btn.onclick=function(){_e3();_13f.apply(this,arguments);};_e0=btn;}},linkButton:function(_140,_141,_142,_143,_144,_145){if(_142<2){return;}var _146=_142[1];var text=_142<3?_146:_142[2];var _147=_142<4?text:_142[3];var _148=_142<5?null:_142[4];var btn=createTiddlyButton(_140,text,_147,_e4,null,null,_148);btn.setAttribute(\"tiddlyLink\",_146);},closeButton:function(_149,_14a,_14b,_14c,_14d,_14e){var _14f=createTiddlyButton(_149,\"close\",\"Close the Search Results (Shortcut: ESC)\",_e3);},openAllButton:function(_150,_151,_152,_153,_154,_155){var n=_b6();if(n==0){return;}var _156=n==1?\"open tiddler\":\"open all %0 tiddlers\".format([n]);var _157=createTiddlyButton(_150,_156,\"Open all found tiddlers (Shortcut: Alt-O)\",_117);_157.setAttribute(\"accessKey\",\"O\");},naviBar:function(_158,_159,_15a,_15b,_15c,_15d){_f5.addPageNavigation(_158);},\"if\":function(_15e,_15f,_160,_161,_162,_163){if(_160.length<2){return;}var _164=_160[1];var _165=(_164==\"not\");if(_165){if(_160.length<3){return;}_164=_160[2];}var test=config.macros.yourSearch.tests[_164];var _166=false;try{if(test){_166=test(_15e,_15f,_160,_161,_162,_163)!=_165;}else{_166=(!eval(_164))==_165;}}catch(ex){}if(!_166){_15e.style.display=\"none\";}},chkPreviewText:function(_167,_168,_169,_16a,_16b,_16c){var _16d=_169.slice(1).join(\" \");var elem=_11a(_167,\"chkPreviewText\",_16a,_16c);elem.setAttribute(\"accessKey\",\"P\");elem.title=\"Show text preview of found tiddlers (Shortcut: Alt-P)\";return elem;}}};config.macros.foundTiddler={label:\"foundTiddler\",prompt:\"Provides information on the tiddler currently processed on the YourSearch result page\",handler:function(_16e,_16f,_170,_171,_172,_173){var name=_170[0];var func=config.macros.foundTiddler.funcs[name];if(func){func(_16e,_16f,_170,_171,_172,_173);}},funcs:{title:function(_174,_175,_176,_177,_178,_179){if(!_f4){return;}var _17a=_124();var _17b=_17a>=0?\"Open tiddler (Shortcut: Alt-%0)\".format([_17a.toString()]):\"Open tiddler\";var btn=createTiddlyButton(_174,null,_17b,_e4,null);btn.setAttribute(\"tiddlyLink\",_f4.title);btn.setAttribute(\"withHilite\",\"true\");_126(btn,_f4.title,_d4);if(_17a>=0){btn.setAttribute(\"accessKey\",_17a.toString());}},tags:function(_17c,_17d,_17e,_17f,_180,_181){if(!_f4){return;}_126(_17c,_f4.getTags(),_d5);},text:function(_182,_183,_184,_185,_186,_187){if(!_f4){return;}_126(_182,_121(_f4.text),_d6);},field:function(_188,_189,_18a,_18b,_18c,_18d){if(!_f4){return;}var name=_18a[1];var len=_18a.length>2?abego.toInt(_18a[2],_d7):_d7;var v=store.getValue(_f4,name);if(v){_126(_188,_121(v),len);}},number:function(_18e,_18f,_190,_191,_192,_193){var _194=_124();if(_194>=0){var text=\"%0)\".format([_194.toString()]);createTiddlyElement(_18e,\"span\",null,\"shortcutNumber\",text);}}}};var opts={chkUseYourSearch:true,chkPreviewText:true,chkSearchAsYouType:true,chkSearchInTitle:true,chkSearchInText:true,chkSearchInTags:true,chkSearchExtendedFields:true,txtItemsPerPage:_d8,txtItemsPerPageWithPreview:_d9};for(var n in opts){if(config.options[n]==undefined){config.options[n]=opts[n];}}config.shadowTiddlers.AdvancedOptions+=\"\\n<<option chkUseYourSearch>> Use 'Your Search' //([[more options|YourSearch Options]]) ([[help|YourSearch Help]])// \";config.shadowTiddlers[\"YourSearch Help\"]=\"!Field Search\\nWith the Field Search you can restrict your search to certain fields of a tiddler, e.g\"+\" only search the tags or only the titles. The general form is //fieldname//'':''//textToSearch// (e.\"+\"g. {{{title:intro}}}). In addition one-character shortcuts are also supported for the standard field\"+\"s {{{title}}}, {{{text}}} and {{{tags}}}:\\n|!What you want|!What you type|!Example|\\n|Search ''titles \"+\"only''|start word with ''!''|{{{!jonny}}} (shortcut for {{{title:jonny}}})|\\n|Search ''contents/text \"+\"only''|start word with ''%''|{{{%football}}} (shortcut for {{{text:football}}})|\\n|Search ''tags only\"+\"''|start word with ''#''|{{{#Plugin}}} (shortcut for {{{tags:Plugin}}})|\\n\\nUsing this feature you may\"+\" also search the extended fields (\\\"Metadata\\\") introduced with TiddlyWiki 2.1, e.g. use {{{priority:1\"+\"}}} to find all tiddlers with the priority field set to \\\"1\\\".\\n\\nYou may search a word in more than one\"+\" field. E.g. {{{!#Plugin}}} (or {{{title:tags:Plugin}}} in the \\\"long form\\\") finds tiddlers containin\"+\"g \\\"Plugin\\\" either in the title or in the tags (but does not look for \\\"Plugin\\\" in the text). \\n\\n!Boole\"+\"an Search\\nThe Boolean Search is useful when searching for multiple words.\\n|!What you want|!What you \"+\"type|!Example|\\n|''All words'' must exist|List of words|{{{jonny jeremy}}} (or {{{jonny and jeremy}}}\"+\")|\\n|''At least one word'' must exist|Separate words by ''or''|{{{jonny or jeremy}}}|\\n|A word ''must \"+\"not exist''|Start word with ''-''|{{{-jonny}}} (or {{{not jonny}}})|\\n\\n''Note:'' When you specify two\"+\" words, separated with a space, YourSearch finds all tiddlers that contain both words, but not neces\"+\"sarily next to each other. If you want to find a sequence of word, e.g. '{{{John Brown}}}', you need\"+\" to put the words into quotes. I.e. you type: {{{\\\"john brown\\\"}}}.\\n\\nUsing parenthesis you may change \"+\"the default \\\"left to right\\\" evaluation of the boolean search. E.g. {{{not (jonny or jeremy)}}} finds\"+\" all tiddlers that contain neither \\\"jonny\\\" nor \\\"jeremy. In contrast to this {{{not jonny or jeremy}}\"+\"} (i.e. without parenthesis) finds all tiddlers that either don't contain \\\"jonny\\\" or that contain \\\"j\"+\"eremy\\\".\\n\\n!'Exact Word' Search\\nBy default a search result all matches that 'contain' the searched tex\"+\"t. E.g. if you search for {{{Task}}} you will get all tiddlers containing 'Task', but also '~Complet\"+\"edTask', '~TaskForce' etc.\\n\\nIf you only want to get the tiddlers that contain 'exactly the word' you\"+\" need to prefix it with a '='. E.g. typing '=Task' will find the tiddlers that contain the word 'Tas\"+\"k', ignoring words that just contain 'Task' as a substring.\\n\\n!~CaseSensitiveSearch and ~RegExpSearch\"+\"\\nThe standard search options ~CaseSensitiveSearch and ~RegExpSearch are fully supported by YourSearc\"+\"h. However when ''~RegExpSearch'' is on Filtered and Boolean Search are disabled.\\n\\nIn addition you m\"+\"ay do a \\\"regular expression\\\" search even with the ''~RegExpSearch'' set to false by directly enterin\"+\"g the regular expression into the search field, framed with {{{/.../}}}. \\n\\nExample: {{{/m[ae][iy]er/\"+\"}}} will find all tiddlers that contain either \\\"maier\\\", \\\"mayer\\\", \\\"meier\\\" or \\\"meyer\\\".\\n\\n!~JavaScript E\"+\"xpression Filtering\\nIf you are familiar with JavaScript programming and know some TiddlyWiki interna\"+\"ls you may also use JavaScript expression for the search. Just enter a JavaScript boolean expression\"+\" into the search field, framed with {{{ { ... } }}}. In the code refer to the variable tiddler and e\"+\"valuate to {{{true}}} when the given tiddler should be included in the result. \\n\\nExample: {{{ { tidd\"+\"ler.modified > new Date(\\\"Jul 4, 2005\\\")} }}} returns all tiddler modified after July 4th, 2005.\\n\\n!Com\"+\"bined Search\\nYou are free to combine the various search options. \\n\\n''Examples''\\n|!What you type|!Res\"+\"ult|\\n|{{{!jonny !jeremy -%football}}}|all tiddlers with both {{{jonny}}} and {{{jeremy}}} in its tit\"+\"les, but no {{{football}}} in content.|\\n|{{{#=Task}}}|All tiddlers tagged with 'Task' (the exact wor\"+\"d). Tags named '~CompletedTask', '~TaskForce' etc. are not considered.|\\n\\n!Access Keys\\nYou are encour\"+\"aged to use the access keys (also called \\\"shortcut\\\" keys) for the most frequently used operations. F\"+\"or quick reference these shortcuts are also mentioned in the tooltip for the various buttons etc.\\n\\n|\"+\"!Key|!Operation|\\n|{{{Alt-F}}}|''The most important keystroke'': It moves the cursor to the search in\"+\"put field so you can directly start typing your query. Pressing {{{Alt-F}}} will also display the pr\"+\"evious search result. This way you can quickly display multiple tiddlers using \\\"Press {{{Alt-F}}}. S\"+\"elect tiddler.\\\" sequences.|\\n|{{{ESC}}}|Closes the [[YourSearch Result]]. When the [[YourSearch Resul\"+\"t]] is already closed and the cursor is in the search input field the field's content is cleared so \"+\"you start a new query.|\\n|{{{Alt-1}}}, {{{Alt-2}}},... |Pressing these keys opens the first, second e\"+\"tc. tiddler from the result list.|\\n|{{{Alt-O}}}|Opens all found tiddlers.|\\n|{{{Alt-P}}}|Toggles the \"+\"'Preview Text' mode.|\\n|{{{Alt-'<'}}}, {{{Alt-'>'}}}|Displays the previous or next page in the [[Your\"+\"Search Result]].|\\n|{{{Return}}}|When you have turned off the 'as you type' search mode pressing the \"+\"{{{Return}}} key actually starts the search (as does pressing the 'search' button).|\\n\\n//If some of t\"+\"hese shortcuts don't work for you check your browser if you have other extensions installed that alr\"+\"eady \\\"use\\\" these shortcuts.//\";config.shadowTiddlers[\"YourSearch Options\"]=\"|>|!YourSearch Options|\\n|>|<<option chkUseYourSearch>> Use 'Your Search'|\\n|!|<<option chkPreviewText\"+\">> Show Text Preview|\\n|!|<<option chkSearchAsYouType>> 'Search As You Type' Mode (No RETURN required\"+\" to start search)|\\n|!|Default Search Filter:<<option chkSearchInTitle>>Title ('!')     <<option chk\"+\"SearchInText>>Text ('%')     <<option chkSearchInTags>>Tags ('#')    <<option chkSearchExtendedFiel\"+\"ds>>Extended Fields<html><br><font size=\\\"-2\\\">The fields of a tiddlers that are searched when you don\"+\"'t explicitly specify a filter in the search text <br>(Explictly specify fields using one or more '!\"+\"', '%', '#' or 'fieldname:' prefix before the word/text to find).</font></html>|\\n|!|Number of items \"+\"on search result page: <<option txtItemsPerPage>>|\\n|!|Number of items on search result page with pre\"+\"view text: <<option txtItemsPerPageWithPreview>>|\\n\";config.shadowTiddlers[\"YourSearchStyleSheet\"]=\"/***\\n!~YourSearchResult Stylesheet\\n***/\\n/*{{{*/\\n.yourSearchResult {\\n\\tposition: absolute;\\n\\twidth: 800\"+\"px;\\n\\n\\tpadding: 0.2em;\\n\\tlist-style: none;\\n\\tmargin: 0;\\n\\n\\tbackground: #ffd;\\n\\tborder: 1px solid DarkGra\"+\"y;\\n}\\n\\n/*}}}*/\\n/***\\n!!Summary Section\\n***/\\n/*{{{*/\\n.yourSearchResult .summary {\\n\\tborder-bottom-width:\"+\" thin;\\n\\tborder-bottom-style: solid;\\n\\tborder-bottom-color: #999999;\\n\\tpadding-bottom: 4px;\\n}\\n\\n.yourSea\"+\"rchRange, .yourSearchCount, .yourSearchQuery   {\\n\\tfont-weight: bold;\\n}\\n\\n.yourSearchResult .summary .\"+\"button {\\n\\tfont-size: 10px;\\n\\n\\tpadding-left: 0.3em;\\n\\tpadding-right: 0.3em;\\n}\\n\\n.yourSearchResult .summa\"+\"ry .chkBoxLabel {\\n\\tfont-size: 10px;\\n\\n\\tpadding-right: 0.3em;\\n}\\n\\n/*}}}*/\\n/***\\n!!Items Area\\n***/\\n/*{{{*\"+\"/\\n.yourSearchResult .marked {\\n\\tbackground: none;\\n\\tfont-weight: bold;\\n}\\n\\n.yourSearchItem {\\n\\tmargin-to\"+\"p: 2px;\\n}\\n\\n.yourSearchNumber {\\n\\tcolor: #808080;\\n}\\n\\n\\n.yourSearchTags {\\n\\tcolor: #008000;\\n}\\n\\n.yourSearc\"+\"hText {\\n\\tcolor: #808080;\\n\\tmargin-bottom: 6px;\\n}\\n\\n/*}}}*/\\n/***\\n!!Footer\\n***/\\n/*{{{*/\\n.yourSearchFoote\"+\"r {\\n\\tmargin-top: 8px;\\n\\tborder-top-width: thin;\\n\\tborder-top-style: solid;\\n\\tborder-top-color: #999999;\"+\"\\n}\\n\\n.yourSearchFooter a:hover{\\n\\tbackground: none;\\n\\tcolor: none;\\n}\\n/*}}}*/\\n/***\\n!!Navigation Bar\\n***/\"+\"\\n/*{{{*/\\n.yourSearchNaviBar a {\\n\\tfont-size: 16px;\\n\\tmargin-left: 4px;\\n\\tmargin-right: 4px;\\n\\tcolor: bla\"+\"ck;\\n\\ttext-decoration: underline;\\n}\\n\\n.yourSearchNaviBar a:hover {\\n\\tbackground-color: none;\\n}\\n\\n.yourSe\"+\"archNaviBar .prev {\\n\\tfont-weight: bold;\\n\\tcolor: blue;\\n}\\n\\n.yourSearchNaviBar .currentPage {\\n\\tcolor: #\"+\"FF0000;\\n\\tfont-weight: bold;\\n\\ttext-decoration: none;\\n}\\n\\n.yourSearchNaviBar .next {\\n\\tfont-weight: bold\"+\";\\n\\tcolor: blue;\\n}\\n/*}}}*/\\n\";config.shadowTiddlers[\"YourSearchResultTemplate\"]=\"<!--\\n{{{\\n-->\\n<span macro=\\\"yourSearch if found\\\">\\n<!-- The Summary Header ============================\"+\"================ -->\\n<table class=\\\"summary\\\" border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\">\"+\"<tbody>\\n  <tr>\\n\\t<td align=\\\"left\\\">\\n\\t\\tYourSearch Result <span class=\\\"yourSearchRange\\\" macro=\\\"yourSearc\"+\"h itemRange\\\"></span>\\n\\t\\t&nbsp;of&nbsp;<span class=\\\"yourSearchCount\\\" macro=\\\"yourSearch count\\\"></span>\\n\"+\"\\t\\tfor&nbsp;<span class=\\\"yourSearchQuery\\\" macro=\\\"yourSearch query\\\"></span>\\n\\t</td>\\n\\t<td class=\\\"yourSea\"+\"rchButtons\\\" align=\\\"right\\\">\\n\\t\\t<span macro=\\\"yourSearch chkPreviewText\\\"></span><span class=\\\"chkBoxLabel\"+\"\\\">preview text</span>\\n\\t\\t<span macro=\\\"yourSearch newTiddlerButton\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch openAllButton\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch lin\"+\"kButton 'YourSearch Options' options 'Configure YourSearch'\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch linkB\"+\"utton 'YourSearch Help' help 'Get help how to use YourSearch'\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch clo\"+\"seButton\\\"></span>\\n\\t</td>\\n  </tr>\\n</tbody></table>\\n\\n<!-- The List of Found Tiddlers =================\"+\"=========================== -->\\n<div id=\\\"yourSearchResultItems\\\" itemsPerPage=\\\"25\\\" itemsPerPageWithPr\"+\"eview=\\\"10\\\"></div>\\n\\n<!-- The Footer (with the Navigation) ===========================================\"+\"= -->\\n<table class=\\\"yourSearchFooter\\\" border=\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\"><tbody\"+\">\\n  <tr>\\n\\t<td align=\\\"left\\\">\\n\\t\\tResult page: <span class=\\\"yourSearchNaviBar\\\" macro=\\\"yourSearch naviBar\"+\"\\\"></span>\\n\\t</td>\\n\\t<td align=\\\"right\\\"><span macro=\\\"yourSearch version\\\"></span>, <span macro=\\\"yourSearc\"+\"h copyright\\\"></span>\\n\\t</td>\\n  </tr>\\n</tbody></table>\\n<!-- end of the 'tiddlers found' case =========\"+\"================================== -->\\n</span>\\n\\n\\n<!-- The \\\"No tiddlers found\\\" case =================\"+\"========================== -->\\n<span macro=\\\"yourSearch if not found\\\">\\n<table class=\\\"summary\\\" border=\"+\"\\\"0\\\" width=\\\"100%\\\" cellspacing=\\\"0\\\" cellpadding=\\\"0\\\"><tbody>\\n  <tr>\\n\\t<td align=\\\"left\\\">\\n\\t\\tYourSearch Resu\"+\"lt: No tiddlers found for <span class=\\\"yourSearchQuery\\\" macro=\\\"yourSearch query\\\"></span>.\\n\\t</td>\\n\\t<t\"+\"d class=\\\"yourSearchButtons\\\" align=\\\"right\\\">\\n\\t\\t<span macro=\\\"yourSearch newTiddlerButton\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch linkButton 'YourSearch Options'\"+\" options 'Configure YourSearch'\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch linkButton 'YourSearch Help' help\"+\" 'Get help how to use YourSearch'\\\"></span>\\n\\t\\t<span macro=\\\"yourSearch closeButton\\\"></span>\\n\\t</td>\\n  <\"+\"/tr>\\n</tbody></table>\\n</span>\\n\\n\\n<!--\\n}}}\\n-->\\n\";config.shadowTiddlers[\"YourSearchItemTemplate\"]=\"<!--\\n{{{\\n-->\\n<span class='yourSearchNumber' macro='foundTiddler number'></span>\\n<span class='yourSea\"+\"rchTitle' macro='foundTiddler title'/></span>&nbsp;-&nbsp;\\n<span class='yourSearchTags' macro='found\"+\"Tiddler field tags 50'/></span>\\n<span macro=\\\"yourSearch if previewText\\\"><div class='yourSearchText' macro='fo\"+\"undTiddler field text 250'/></div></span>\\n<!--\\n}}}\\n-->\";config.shadowTiddlers[\"YourSearch\"]=\"<<tiddler [[YourSearch Help]]>>\";config.shadowTiddlers[\"YourSearch Result\"]=\"The popup-like window displaying the result of a YourSearch query.\";config.macros.search.handler=_109;var _195=function(){if(config.macros.search.handler!=_109){alert(\"Message from YourSearchPlugin:\\n\\n\\nAnother plugin has disabled the 'Your Search' features.\\n\\n\\nYou may \"+\"disable the other plugin or change the load order of \\nthe plugins (by changing the names of the tidd\"+\"lers)\\nto enable the 'Your Search' features.\");}};setTimeout(_195,5000);abego.YourSearch.getStandardRankFunction=function(){return _bb;};abego.YourSearch.getRankFunction=function(){return abego.YourSearch.getStandardRankFunction();};abego.YourSearch.getCurrentTiddler=function(){return _f4;};abego.YourSearch.closeResult=function(){_e3();};abego.YourSearch.getFoundTiddlers=function(){return _b1;};abego.YourSearch.getQuery=function(){return _b2;};abego.YourSearch.onShowResult=function(_196){highlightHack=_b2?_b2.getMarkRegExp():null;if(!_196){_f5.setItems(_b5());}if(!_dd){_dd=createTiddlyElement(document.body,\"div\",_da,\"yourSearchResult\");}else{if(_dd.parentNode!=document.body){document.body.appendChild(_dd);}}_fe();highlightHack=null;};})();}\n//%/\n", "title": "YourSearchPlugin", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": ["excludeLists", "excludeSearch", "systemConfig"], "revision": 233122}, {"creator": "jon", "fields": {"_hash": "aca6adf44451dddd25bd3a52027c1d1e4c0c0a40"}, "created": "20100926111758", "recipe": "gadabout_private", "modified": "20100926111758", "uri": "http://jon-in-belize.tiddlyspace.com/bags/jon-in-belize_public/tiddlers/Maya%20Centre", "bag": "jon-in-belize_public", "text": "http://cockscombmayatours.com/\n45 minutes from [[Dangriga, Belize]] on any bus heading south.", "title": "Maya Centre", "permissions": ["read", "write", "create", "delete"], "modifier": "jon", "type": null, "tags": [], "revision": 120671}]
